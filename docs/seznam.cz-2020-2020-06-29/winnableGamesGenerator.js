!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=46)}({1:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return d})),n.d(t,"i",(function(){return l})),n.d(t,"h",(function(){return u})),n.d(t,"f",(function(){return f})),n.d(t,"j",(function(){return p})),n.d(t,"g",(function(){return h})),function(e){e.SPADES="Color.SPADES",e.HEARTHS="Color.HEARTHS",e.DIAMONDS="Color.DIAMONDS",e.CLUBS="Color.CLUBS"}(r||(r={}));const o=[r.HEARTHS,r.DIAMONDS];var a;!function(e){e.ACE="Rank.ACE",e.TWO="Rank.TWO",e.THREE="Rank.THREE",e.FOUR="Rank.FOUR",e.FIVE="Rank.FIVE",e.SIX="Rank.SIX",e.SEVEN="Rank.SEVEN",e.EIGHT="Rank.EIGHT",e.NINE="Rank.NINE",e.TEN="Rank.TEN",e.JACK="Rank.JACK",e.QUEEN="Rank.QUEEN",e.KING="Rank.KING"}(a||(a={}));const s=[a.ACE,a.TWO,a.THREE,a.FOUR,a.FIVE,a.SIX,a.SEVEN,a.EIGHT,a.NINE,a.TEN,a.JACK,a.QUEEN,a.KING];var i;!function(e){e.FACE="Side.FACE",e.BACK="Side.BACK"}(i||(i={}));class c{constructor(e,t,n){this.color=e,this.rank=t,this.side=n}}const d=[].concat(...Object.values(r).map(e=>s.map(t=>new c(e,t,i.BACK))));function l(e,t){return 1===f(e,t)&&!function(e,t){const n=o.includes(e.color),r=o.includes(t.color);return n===r}(e,t)}function u(e,t){return-1===f(e,t)&&e.color===t.color}function f(e,t){return s.indexOf(e.rank)-s.indexOf(t.rank)}function p(e){return new c(e.color,e.rank,e.side===i.FACE?i.BACK:i.FACE)}function h(e,t){return e.color===t.color&&e.rank===t.rank}},10:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return u}));var r=n(1),o=n(6),a=n(7),s=n(2),i=n(8),c=n(3);function d(e,t){f(t);const{state:n,rules:r}=e;if(Object(o.c)(n))return e;const i=p(n,r,t,t.lookAheadMoves);if(!i)return e;const[d]=i;return function e(t,n,r){var o;const i=n[0].move;if(!r||i!==s.a.WASTE_TO_FOUNDATION&&i!==s.a.WASTE_TO_TABLEAU)return Object(a.c)(t,h(t.state,t.rules,n,r),n[0]);const d=Object(c.b)(t.state.waste.cards);if((null===(o=d)||void 0===o?void 0:o.rank)===n[1].rank&&d.color===n[1].color)return Object(a.c)(t,h(t.state,t.rules,n,r),n[0]);const l=t.state.stock.cards.length?{drawnCards:t.rules.drawnCards,move:s.a.DRAW_CARDS}:{move:s.a.REDEAL},u=Object(a.d)(t,l);return e(u,n,r)}(e,d,!1)}function l(e,t,n){if(f(n),Object(o.c)(e))return e;const r=p(e,t,n,n.lookAheadMoves);if(!r)return e;const[a]=r;return h(e,t,a,!1)}function u({foundation:e,tableau:{piles:t}}){return Object.values(e).map(e=>e.cards.length).concat(t.map(e=>e.cards.filter(e=>e.side===r.e.FACE).length)).reduce((e,t)=>e+t,0)}function f(e){if(!Number.isInteger(e.maxConsideredConfidenceLevels)||e.maxConsideredConfidenceLevels<0)throw new TypeError("The maxConsideredConfidenceLevels option must be a non-negative integer, "+`${e.maxConsideredConfidenceLevels} was provided`);if(!Number.isSafeInteger(e.lookAheadMoves)||e.lookAheadMoves<0)throw new TypeError(`The lookAheadMoves option must be a non-negative integer, ${e.lookAheadMoves} was provided`)}function p(e,t,n,r){const a=Object(i.d)(e,t,i.a.WITH_FULL_STOCK);if(!a.length)return null;if(n.minAutoAcceptConfidence&&i.b.indexOf(a[0][2])<=i.b.indexOf(n.minAutoAcceptConfidence)){const r=h(e,t,a[0],!0),o=n.stateRankingHeuristic(r);return[a[0],o]}let s=a[0];const c=i.b.indexOf(s[2]);let d=Number.NEGATIVE_INFINITY;for(const l of a){if(i.b.indexOf(l[2])>c+n.maxConsideredConfidenceLevels)continue;const a=h(e,t,l,!0);let u;if(r&&!Object(o.d)(a)){const e=p(a,t,n,r-1);if(!e)continue;[,u]=e}else u=n.stateRankingHeuristic(a);u>d&&(d=u,s=l)}return[s,d]}function h(e,t,n,r){var a;const i=n[0].move;if(i!==s.a.WASTE_TO_FOUNDATION&&i!==s.a.WASTE_TO_TABLEAU)return Object(o.b)(e,t,n[0]);const d=Object(c.b)(e.waste.cards);if((null===(a=d)||void 0===a?void 0:a.rank)===n[1].rank&&d.color===n[1].color)return Object(o.b)(e,t,n[0]);const l=e.stock.cards.length?{drawnCards:t.drawnCards,move:s.a.DRAW_CARDS}:{move:s.a.REDEAL},u=Object(o.b)(e,t,l);return r?h(u,t,n,r):u}},13:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return d}));var r=n(1),o=n(7),a=n(2);function s(e){if(e.rules.drawnCards>36)throw new RangeError(`The drawnCards rule must a safe positive integer no larger than 36, ${e.rules.drawnCards} was `+"provided");if(e.state.tableau.piles.length>parseInt("zz",36))throw new RangeError(`The number of tableau piles must be a safe positive integer no larger than ${parseInt("zz",36)}, `+`${e.state.tableau.piles.length} was provided`);const t=e.history.length?e.history[0][0]:e.state;var n,r;return[2,e.rules.allowNonKingToEmptyPileTransfer?"1":"0",e.rules.drawnCards.toString(36),e.state.tableau.piles.length.toString(36).padStart(2,"0"),c(t),Math.floor((e.startTime.absoluteTimestamp-1572617642e3)/1e3).toString(36),",",Math.floor(e.startTime.logicalTimestamp).toString(36),";",e.history.length.toString(36),":",(n=e.history.concat(e.future),r=e.startTime.logicalTimestamp,n.map(([,e],t)=>function(e,t){return[Math.floor(e.logicalTimestamp-t).toString(36),",;:-=+*!".charAt(u.indexOf(e.move)),function(){switch(e.move){case a.a.DRAW_CARDS:return`${e.drawnCards.toString(36)}.`;case a.a.WASTE_TO_TABLEAU:case a.a.TABLEAU_TO_FOUNDATION:case a.a.REVEAL_TABLEAU_CARD:return`${e.pileIndex.toString(36).padStart(2,"0")}`;case a.a.FOUNDATION_TO_TABLEAU:return`${e.pileIndex.toString(36)}${",;:-".charAt(f.indexOf(e.color))}`;case a.a.TABLEAU_TO_TABLEAU:return[e.sourcePileIndex,e.topMovedCardIndex,e.targetPileIndex].map(e=>e.toString(36).padStart(2,"0")).join("");case a.a.REDEAL:case a.a.WASTE_TO_FOUNDATION:return"";default:throw new TypeError(`Unknown move type: ${e.move}`)}}()].join("")}(e,t?n[t-1][1].logicalTimestamp:r)).join(""))].join("")}function i(e){if(!e.startsWith(2..toString()))throw new Error(`Invalid state or unsupported version: ${e}`);const t={allowNonKingToEmptyPileTransfer:!!parseInt(e.charAt(1),10),drawnCards:parseInt(e.charAt(2),36),tableauPiles:parseInt(e.substring(3,5),36)},n=d(e.substring(5,56)),r=e.substring(56,e.indexOf(";",56)),s=function(e){const[t,n]=e.split(",").map(e=>parseInt(e,36));return{absoluteTimestamp:1e3*t+1572617642e3,logicalTimestamp:n}}(r),i=e.substring(56+r.length+1,e.indexOf(":",56)),c=parseInt(i,36),l=e.substring(56+r.length+1+i.length+1),p=Object(o.b)(t,n),h=function(e,t,n){const r=[];let s=e,i=t,c=0;for(;c<n.length;){let e=n.substring(c);const t=parseInt(e,36),d=u[",;:-=+*!".indexOf(e.charAt(t.toString(36).length))];let l;switch(i+=t,c+=t.toString(36).length+1,e=n.substring(c),d){case a.a.DRAW_CARDS:const n=e.substring(0,e.indexOf("."));c+=n.length+1,l={drawnCards:parseInt(n,36),logicalTimestamp:i,move:d};break;case a.a.WASTE_TO_TABLEAU:case a.a.TABLEAU_TO_FOUNDATION:case a.a.REVEAL_TABLEAU_CARD:{const t=parseInt(e.substring(0,2),36);c+=2,l={logicalTimestamp:i,move:d,pileIndex:t}}break;case a.a.FOUNDATION_TO_TABLEAU:{const t=parseInt(e,36),n=f[",;:-".indexOf(e.charAt(t.toString(36).length))];c+=t.toString(36).length+1,l={color:n,logicalTimestamp:i,move:d,pileIndex:t}}break;case a.a.TABLEAU_TO_TABLEAU:const[r,o,s]=e.substring(0,6).match(/../g).map(e=>parseInt(e,36));c+=6,l={logicalTimestamp:i,move:d,sourcePileIndex:r,targetPileIndex:s,topMovedCardIndex:o};break;case a.a.REDEAL:case a.a.WASTE_TO_FOUNDATION:l={logicalTimestamp:i,move:d};break;default:throw new Error(`Failed to deserialize a history item at the index ${c} of history records due to `+`unknown move type: ${e.substr(t.toString(36).length,1)}`)}r.push([s.state,l]),s=Object(o.d)(s,l)}return r}(p,s.logicalTimestamp,l);let A={...p,future:h,startTime:s};for(let e=0;e<c;e++)A=Object(o.e)(A);return A}function c(e){return function(e){return e.slice(0,-1).map(l).join("")}([...e.stock.cards,...e.tableau.piles.map(e=>e.cards.slice().reverse()).reverse().flat()])}function d(e){const t=new Set(p);return e.split("").map(e=>{const n=h.indexOf(e),r=p[n];return t.delete(r),r}).concat([...t])}function l(e){const t=Object.keys(e).filter(e=>"side"!==e),n=p.findIndex(n=>t.every(t=>e[t]===n[t]));if(-1===n)throw new TypeError(`Received an invalid card: ${JSON.stringify(e)}`);return h[n]}const u=Object.values(a.a).sort(),f=Object.values(r.a).sort(),p=r.b,h=(()=>{const e=Array.from({length:26}).map((e,t)=>String.fromCharCode(97+t));return[...e,...e.map(e=>e.toUpperCase())]})()},15:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c}));var r=n(10),o=n(6),a=n(8);const s={allowNonKingToEmptyPileTransfer:!1,drawnCards:1,tableauPiles:7},i={lookAheadMoves:2,maxConsideredConfidenceLevels:3,minAutoAcceptConfidence:a.c.HIGH,stateRankingHeuristic:r.a},c={maxMoves:300,maxSimulationTime:2e4,simulationEndPredicate:o.d}},2:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.DRAW_CARDS="MoveType.DRAW_CARDS",e.REDEAL="MoveType.REDEAL",e.WASTE_TO_FOUNDATION="MoveType.WASTE_TO_FOUNDATION",e.WASTE_TO_TABLEAU="MoveType.WASTE_TO_TABLEAU",e.TABLEAU_TO_FOUNDATION="MoveType.TABLEAU_TO_FOUNDATION",e.REVEAL_TABLEAU_CARD="MoveType.REVEAL_TABLEAU_CARD",e.FOUNDATION_TO_TABLEAU="MoveType.FOUNDATION_TO_TABLEAU",e.TABLEAU_TO_TABLEAU="MoveType.TABLEAU_TO_TABLEAU"}(r||(r={}))},3:function(e,t,n){"use strict";function r(e){return e.length?o(e):null}function o(e){if(e.length)return e[e.length-1];throw new Error("The provided array is empty")}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))},4:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"g",(function(){return c})),n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return l}));var r=n(1);class o{constructor(e){this.cards=e}}function a(e,t){if(!Number.isSafeInteger(t)||t<=0)throw new TypeError(`The numberOfCards parameter must be a positive safe integer, ${t} was provided`);const n=e.cards.slice(-t).reverse();return[new o(e.cards.slice(0,Math.max(e.cards.length-t,0))),n]}function s(e,t){return new o(e.cards.concat(t))}function i(e,t){return new o(e.cards.concat(t.cards))}function c(e,t){const n=e.cards.indexOf(t);if(-1===n)throw new Error("The specified card is not present in the specified pile");const a=e.cards.slice(),s=Object(r.j)(t);return a.splice(n,1,s),new o(a)}function d(e,t){const n=e.cards.indexOf(t);if(-1===n)throw new Error("The specified card is not present in the specified pile");return[new o(e.cards.slice(0,n)),new o(e.cards.slice(n))]}function l(e){const t=e.cards.slice();for(let e=0;e<t.length-1;e++){const n=Math.floor(Math.random()*(t.length-e))+e,r=t[e];t[e]=t[n],t[n]=r}return new o(t)}},46:function(e,t,n){"use strict";n.r(t);var r=n(7),o=n(13);class a{constructor(e,t,n,r){this.gameRules=e,this.botOptions=t,this.gameSimulationOptions=n,this.taskRunner=r,this.onProgress=null,this.nextScheduledGeneratorTask=null,this.knownWinnableDecks=new Set}runGenerator(){if(!this.nextScheduledGeneratorTask){const e=()=>{this.nextScheduledGeneratorTask=this.taskRunner(e),this.testNextRandomDeck()};this.nextScheduledGeneratorTask=this.taskRunner(e)}}stopGenerator(){this.nextScheduledGeneratorTask&&(this.nextScheduledGeneratorTask.cancel(),this.nextScheduledGeneratorTask=null)}generateWinnableGame(){const e=new a(this.gameRules,this.botOptions,this.gameSimulationOptions,this.taskRunner);return{task:new Promise(t=>{e.onProgress=n=>{n&&(this.knownWinnableDecks.add(n),e.stopGenerator(),t(n))},e.runGenerator()}),cancel(){e.stopGenerator()}}}get generatedDecks(){return this.knownWinnableDecks}testNextRandomDeck(){const[e,t]=Object(r.a)(this.gameRules,this.botOptions,this.gameSimulationOptions),n=t?Object(o.d)(e.state):null;n&&this.knownWinnableDecks.add(n),this.onProgress&&this.onProgress(n)}}var s,i=n(15);function c(...e){l(s.WARNING,e)}function d(...e){l(s.INFO,e)}function l(e,t){switch(e){case s.ERROR:console.error(`ERROR | ${self.name} | `,...t);break;case s.WARNING:console.warn(`WARNING | ${self.name} | `,...t);break;case s.INFO:console.info(`INFO | ${self.name} | `,...t);break;case s.DEBUG:console.debug(`DEBUG | ${self.name} | `,...t)}}!function(e){e.ERROR="SEVERITY.ERROR",e.WARNING="SEVERITY.WARNING",e.INFO="SEVERITY.INFO",e.DEBUG="SEVERITY.DEBUG"}(s||(s={}));let u=null;function f(e){const t=setTimeout(e);return{cancel(){clearTimeout(t)}}}self.onmessage=e=>{if("number"==typeof e.data&&[1,3].includes(e.data))return d(`Creating a winnable games generator for ${e.data} drawn cards`),t=e.data,void(u=new a({...i.b,drawnCards:t},i.a,i.c,f));var t;u?e.data.generateNewGame?(d("Generating a new winnable game"),u.generateWinnableGame().task.then(e=>{d("A new winnable game has been generated"),self.postMessage(e)}).catch(e=>{!function(...e){l(s.ERROR,e)}("Generator has failed",e)})):c("Received an invalid message",e.data):c("Received a request to generate a new game, but no generator has been created yet, waiting for a configuration")}},6:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u}));var r=n(1),o=n(2),a=n(4),s=n(9),i=n(3);class c{constructor(e,t,n,r){this.stock=e,this.waste=t,this.foundation=n,this.tableau=r}}function d(e,t,n){switch(n.move){case o.a.DRAW_CARDS:return function(e,t,n){if(n!==t.drawnCards)throw new Error(`The number of cards to draw (${n}) does not match the number in game rules (${t.drawnCards})`);const[o,s]=Object(a.b)(e.stock,n),i=Object(a.d)(e.waste,new a.a(s.map(e=>Object(r.j)(e))));return new c(o,i,e.foundation,e.tableau)}(e,t,n.drawnCards);case o.a.REDEAL:return function(e){if(e.stock.cards.length)throw new Error("Cannot redeal if there are cards in the stock");return new c(new a.a(e.waste.cards.map(e=>Object(r.j)(e)).reverse()),new a.a([]),e.foundation,e.tableau)}(e);case o.a.WASTE_TO_FOUNDATION:return function(e){if(!e.waste.cards.length)throw new Error("There is no card on the waste pile");const[t,[n]]=Object(a.b)(e.waste,1),r=f(e.foundation,n);return new c(e.stock,t,r,e.tableau)}(e);case o.a.WASTE_TO_TABLEAU:return function(e,t,n){if(!e.waste.cards.length)throw new Error("There is no card on the waste pile");const[o,[d]]=Object(a.b)(e.waste,1);if(!n.cards.length&&!t.allowNonKingToEmptyPileTransfer&&d.rank!==r.d.KING)throw new Error("The current game rules forbid placing any card other than a King on an empty tableau pile");if(n.cards.length&&!Object(r.i)(Object(i.a)(n.cards),d))throw new Error("The top waste card cannot be placed on top of the target tableau pile because it is not in rank sequence with the current top card of the target pile or it is of the same french deck color (red/black) as the current top card of the target pile");const l=Object(s.b)(e.tableau,n,d);return new c(e.stock,o,e.foundation,l)}(e,t,e.tableau.piles[n.pileIndex]);case o.a.TABLEAU_TO_FOUNDATION:return function(e,t){const[n,r]=Object(s.d)(e.tableau,t),o=f(e.foundation,r);return new c(e.stock,e.waste,o,n)}(e,e.tableau.piles[n.pileIndex]);case o.a.REVEAL_TABLEAU_CARD:return function(e,t){const n=Object(s.e)(e.tableau,t);return new c(e.stock,e.waste,e.foundation,n)}(e,e.tableau.piles[n.pileIndex]);case o.a.FOUNDATION_TO_TABLEAU:return function(e,t,n,o){if(!e.foundation[n].cards.length)throw new Error(`The specified foundation (${n}) contains no cards`);const[d,[l]]=Object(a.b)(e.foundation[n],1);if(!o.cards.length&&!t.allowNonKingToEmptyPileTransfer&&l.rank!==r.d.KING)throw new Error("The current game rules forbid placing any card other than a King on an empty tableau pile");if(o.cards.length&&!Object(r.i)(Object(i.a)(o.cards),l))throw new Error("The top foundation card cannot be placed on top of the target tableau pile because it is not in rank sequence with the current top card of the target pile or it is of the same french deck color (red/black) as the top card of the target pile");const u=Object(s.b)(e.tableau,o,l);return new c(e.stock,e.waste,{...e.foundation,[l.color]:d},u)}(e,t,n.color,e.tableau.piles[n.pileIndex]);case o.a.TABLEAU_TO_TABLEAU:return function(e,t,n,o,a){if(!a.cards.length&&!t.allowNonKingToEmptyPileTransfer&&o.rank!==r.d.KING)throw new Error("The current game rules forbid placing any card other than a King on an empty tableau pile");if(a.cards.length&&!Object(r.i)(Object(i.a)(a.cards),o))throw new Error("The top moved card cannot be placed on top of the target tableau pile because it is not in rank sequence with the current top card of the target pile or it is of the same french deck color (red/black) as the current top card of the target pile");const d=Object(s.c)(e.tableau,n,o,a);return new c(e.stock,e.waste,e.foundation,d)}(e,t,e.tableau.piles[n.sourcePileIndex],e.tableau.piles[n.sourcePileIndex].cards[n.topMovedCardIndex],e.tableau.piles[n.targetPileIndex]);default:throw new Error(`Unknown move type: ${n&&n.move}`)}}function l({stock:e,tableau:t,waste:n}){return!e.cards.length&&!n.cards.length&&t.piles.every(e=>!e.cards.length)}function u({stock:e,waste:t,tableau:{piles:n}}){return!e.cards.length&&!t.cards.length&&n.every(e=>e.cards.every(e=>e.side===r.e.FACE))}function f(e,t){const n=e[t.color];if(!n.cards.length&&t.rank!==r.d.ACE)throw new Error("Only the Ace can be placed at the bottom of a foundation");if(n.cards.length&&!Object(r.h)(Object(i.a)(n.cards),t)){const e=Object(i.a)(n.cards);throw new Error(`The provided card ${t.rank} cannot be placed on top of ${e.rank}, expected a `+`${r.c[r.c.indexOf(e.rank)+1]} card.`)}const o=Object(a.c)(n,t);return{...e,[t.color]:o}}},7:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"c",(function(){return A}));var r=n(10),o=n(1),a=n(6),s=n(4),i=n(9),c=n(3);function d(e,t=null){if(!Number.isSafeInteger(e.drawnCards)||e.drawnCards<=0)throw new TypeError(`The drawnCards game rule must be a positive safe integer, ${e.drawnCards} was provided`);if(!Number.isSafeInteger(e.tableauPiles)||e.tableauPiles<=0)throw new TypeError(`The tableauPiles game rule must be a positive safe integer, ${e.tableauPiles} was provided`);let n=t?new s.a(t):Object(s.e)(new s.a(o.b));for(const e of n.cards)e.side===o.e.FACE&&(n=Object(s.g)(n,e));const r=[];for(let t=0;t<e.tableauPiles;t++){const[e,o]=Object(s.b)(n,t+1),a=new s.a(o);a.cards.length?r.push(Object(s.g)(a,Object(c.a)(a.cards))):r.push(a),n=e}return{future:[],history:[],rules:{allowNonKingToEmptyPileTransfer:e.allowNonKingToEmptyPileTransfer,drawnCards:e.drawnCards},startTime:{absoluteTimestamp:Date.now(),logicalTimestamp:performance.now()},state:new a.a(n,new s.a([]),{[o.a.DIAMONDS]:new s.a([]),[o.a.HEARTHS]:new s.a([]),[o.a.CLUBS]:new s.a([]),[o.a.SPADES]:new s.a([])},new i.a(r))}}function l(e,t,{maxMoves:n,maxSimulationTime:o,simulationEndPredicate:a}){const s=d(e);let i=s.state,c=!1,l=0;const u=performance.now();for(;;){const s=Object(r.c)(i,e,t);if(l++,s===i||l>=n||a(s)){c=a(s);break}if(!(l%10)&&performance.now()-u>=o){c=a(s);break}i=s}return[s,c]}function u(e,t){return A(e,Object(a.b)(e.state,e.rules,t),t)}function f(e){return{...e,future:[],history:[],startTime:{absoluteTimestamp:Date.now(),logicalTimestamp:performance.now()},state:e.history.length?e.history[0][0]:e.state}}function p(e){if(!e.history.length)return e;const t=e.history.slice(),[n]=t.splice(-1);return{...e,future:[n,...e.future],history:t,state:n[0]}}function h(e){if(!e.future.length)return e;const[t,...n]=e.future,r=n.length?n[0][0]:u({...e,state:t[0]},t[1]).state;return{...e,future:n,history:e.history.concat([t]),state:r}}function A(e,t,n){return{...e,future:[],history:e.history.concat([[e.state,{...n,logicalTimestamp:performance.now()}]]),state:t}}},8:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return l}));var r,o,a=n(1),s=n(6),i=n(2),c=n(3);!function(e){e.CURRENT_STATE="HintGeneratorMode.CURRENT_STATE",e.WITH_FULL_STOCK="HintGeneratorMode.WITH_FULL_STOCK"}(r||(r={})),function(e){e.ABSOLUTE="MoveConfidence.ABSOLUTE",e.VERY_HIGH="MoveConfidence.VERY_HIGH",e.HIGH="MoveConfidence.HIGH",e.MEDIUM="MoveConfidence.MEDIUM",e.LOW="MoveConfidence.LOW",e.VERY_LOW="MoveConfidence.VERY_LOW",e.MINISCULE="MoveConfidence.MINISCULE"}(o||(o={}));const d=[o.ABSOLUTE,o.VERY_HIGH,o.HIGH,o.MEDIUM,o.LOW,o.VERY_LOW,o.MINISCULE];function l(e,t,n){const d=function(e,t,n){switch(n){case r.CURRENT_STATE:return e.waste.cards.length?[Object(c.a)(e.waste.cards)]:[];case r.WITH_FULL_STOCK:{if(!e.waste.cards.length&&!e.stock.cards.length)return[];const n=e.stock.cards.slice(),r=e.waste.cards.slice(),o=new Set;if(r.length){o.add(Object(c.a)(r));for(let e=n.length-t.drawnCards;e>=0;e-=t.drawnCards)o.add(Object(a.j)(n[e]))}n.push(...r.reverse().map(a.j));for(let e=n.length-t.drawnCards;e>=0;e-=t.drawnCards)o.add(Object(a.j)(n[e]));return[...o]}default:throw new TypeError(`Unknown hint generator mode: ${n}`)}}(e,t,n),{foundation:l,tableau:f}=e,p=f.piles.filter(e=>e.cards.length).map(e=>Object(c.a)(e.cards)),h={[a.a.DIAMONDS]:Object(c.b)(l[a.a.DIAMONDS].cards),[a.a.HEARTHS]:Object(c.b)(l[a.a.HEARTHS].cards),[a.a.CLUBS]:Object(c.b)(l[a.a.CLUBS].cards),[a.a.SPADES]:Object(c.b)(l[a.a.SPADES].cards)},A=[];return A.push(...function(e,t,n,r){var c,d;const{tableau:l}=e,f=[],p=n.find(e=>e.side===a.e.BACK);p&&f.push([{move:i.a.REVEAL_TABLEAU_CARD,pileIndex:u(l,p)},p,o.ABSOLUTE]);for(const e of n)e.side===a.e.FACE&&e.rank===a.d.ACE&&f.push([{move:i.a.TABLEAU_TO_FOUNDATION,pileIndex:u(l,e)},e,o.ABSOLUTE]);for(const e of t)e.rank===a.d.ACE&&f.push([{move:i.a.WASTE_TO_FOUNDATION},e,o.ABSOLUTE]);for(const e of n)e.side===a.e.FACE&&e.rank===a.d.TWO&&(null===(c=r[e.color])||void 0===c?void 0:c.rank)===a.d.ACE&&f.push([{move:i.a.TABLEAU_TO_FOUNDATION,pileIndex:u(l,e)},e,o.ABSOLUTE]);for(const e of t)e.rank===a.d.TWO&&(null===(d=r[e.color])||void 0===d?void 0:d.rank)===a.d.ACE&&f.push([{move:i.a.WASTE_TO_FOUNDATION},e,o.ABSOLUTE]);if(Object(s.d)(e))for(const e of n){const t=r[e.color];t&&Object(a.h)(t,e)&&f.push([{move:i.a.TABLEAU_TO_FOUNDATION,pileIndex:u(l,e)},e,o.ABSOLUTE])}return f}(e,d,p,h)),A.push(...function(e,t){const{tableau:n}=e,r=[],s=n.piles.slice().sort((e,t)=>t.cards.length-e.cards.length);for(const e of s){const t=e.cards.findIndex(e=>e.side===a.e.FACE),s=e.cards[t];if(t<1||[a.d.FIVE,a.d.SIX,a.d.SEVEN,a.d.EIGHT].includes(s.rank))continue;const d=n.piles.findIndex(e=>e.cards.length&&Object(c.a)(e.cards).side===a.e.FACE&&Object(a.i)(Object(c.a)(e.cards),s));d>-1&&r.push([{move:i.a.TABLEAU_TO_TABLEAU,sourcePileIndex:u(n,s),targetPileIndex:d,topMovedCardIndex:t},s,o.VERY_HIGH])}const d=n.piles.filter(e=>e.cards.length>1&&(e.cards[0].side===a.e.BACK||e.cards[0].rank!==a.d.KING)).map(e=>e.cards.find(e=>e.rank===a.d.KING&&e.side===a.e.FACE)).filter(e=>!!e).map(e=>e).concat(t.filter(e=>e.rank===a.d.KING)),l=n.piles.findIndex(e=>!e.cards.length);if(d.length&&l>-1)for(const e of d){const s=t.includes(e)?e:Object(c.a)(n.piles[u(n,e)].cards);if(n.piles.find(e=>{const t=e.cards.filter(e=>e.side===a.e.FACE);return e.cards.length>t.length&&t.length&&Object(a.i)(s,t[0])})){const a=u(n,e);r.push([t.includes(e)?{move:i.a.WASTE_TO_TABLEAU,pileIndex:l}:{move:i.a.TABLEAU_TO_TABLEAU,sourcePileIndex:a,targetPileIndex:l,topMovedCardIndex:n.piles[a].cards.indexOf(e)},e,o.VERY_HIGH])}}return r}(e,d)),A.push(...function(e,t){const n=[],{tableau:r}=e,s=r.piles.filter(e=>e.cards.length>1&&(e.cards[0].side===a.e.BACK||e.cards[0].rank!==a.d.KING)).map(e=>e.cards.find(e=>e.rank===a.d.KING&&e.side===a.e.FACE)).filter(e=>!!e).map(e=>e).concat(t.filter(e=>e.rank===a.d.KING)),d=r.piles.findIndex(e=>!e.cards.length);if(s.length&&d>-1)for(const e of s){const s=t.includes(e)?e:Object(c.a)(r.piles[u(r,e)].cards);if(r.piles.map(e=>e.cards.filter(e=>e.side===a.e.FACE)).filter(e=>e.length).map((e,t,n)=>[e,Math.max(...n.map(e=>e.length))]).filter(([e,t])=>e.length===t).map(([e])=>e).find(e=>Object(a.i)(s,e[0]))){const a=u(r,e);n.push([t.includes(e)?{move:i.a.WASTE_TO_TABLEAU,pileIndex:d}:{move:i.a.TABLEAU_TO_TABLEAU,sourcePileIndex:a,targetPileIndex:d,topMovedCardIndex:r.piles[a].cards.indexOf(e)},e,o.HIGH])}}return n}(e,d)),A.push(...function(e){const t=[],{tableau:n}=e,r=n.piles.filter(e=>e.cards.length>1).filter(e=>1===e.cards.filter(e=>e.side===a.e.FACE).length).map(e=>Object(c.a)(e.cards)).filter(e=>[a.d.FIVE,a.d.SIX,a.d.SEVEN,a.d.EIGHT].includes(e.rank));for(const e of r){const r=u(n,e),s=n.piles.filter(t=>t.cards.length&&Object(c.a)(t.cards).side===a.e.FACE&&Object(a.i)(Object(c.a)(t.cards),e));for(const a of s)t.push([{move:i.a.TABLEAU_TO_TABLEAU,sourcePileIndex:r,targetPileIndex:n.piles.indexOf(a),topMovedCardIndex:n.piles[r].cards.indexOf(e)},e,o.MEDIUM])}return t}(e)),A.push(...function(e){const t=[],{tableau:n}=e,r=n.piles.map(e=>e.cards.filter(e=>e.side===a.e.FACE)).filter(e=>e.length),s=r.filter(e=>n.piles[u(n,e[0])].cards[0].side===a.e.BACK);for(const e of s){const s=e[0];for(const e of r){const r=Object(c.a)(e);if(Object(a.i)(r,s)){const e=u(n,s);t.push([{move:i.a.TABLEAU_TO_TABLEAU,sourcePileIndex:e,targetPileIndex:u(n,r),topMovedCardIndex:n.piles[e].cards.indexOf(s)},s,o.LOW])}}}const d=n.piles.filter(e=>e.cards.length&&e.cards.every(e=>e.side===a.e.FACE));if(n.piles.filter(e=>e.cards.some(e=>e.side===a.e.FACE&&e.rank===a.d.KING)).length)for(const e of d){const s=e.cards[0];for(const e of r){const r=Object(c.a)(e);if(Object(a.i)(r,s)){const e=u(n,s);t.push([{move:i.a.TABLEAU_TO_TABLEAU,sourcePileIndex:e,targetPileIndex:u(n,r),topMovedCardIndex:n.piles[e].cards.indexOf(s)},s,o.LOW])}}}return t}(e)),A.push(...function(e,t,n,r){const s=[],{tableau:d}=e,l=Object.values(n).filter(e=>e);for(const e of l){if(!d.piles.some(t=>{const n=t.cards.find(e=>e.side===a.e.FACE);return n&&t.cards[0]!==n&&Object(a.i)(e,n)}))continue;const t=d.piles.findIndex(t=>{const n=Object(c.b)(t.cards);return n&&n.side===a.e.FACE&&Object(a.i)(n,e)});t>-1&&s.push([{color:e.color,move:i.a.FOUNDATION_TO_TABLEAU,pileIndex:t},e,o.VERY_LOW])}for(const e of l){if(!t.some(t=>Object(a.i)(e,t)))continue;const n=d.piles.findIndex(t=>{const n=Object(c.b)(t.cards);return n&&n.side===a.e.FACE&&Object(a.i)(n,e)});n>-1&&s.push([{color:e.color,move:i.a.FOUNDATION_TO_TABLEAU,pileIndex:n},e,o.VERY_LOW])}const f=d.piles.findIndex(e=>!e.cards.length);for(const e of d.piles){const t=e.cards.findIndex(e=>e.side===a.e.FACE&&e.rank===a.d.KING),n=e.cards[t];n&&t>0&&e.cards[t-1].side===a.e.BACK&&f>-1&&s.push([{move:i.a.TABLEAU_TO_TABLEAU,sourcePileIndex:u(d,n),targetPileIndex:f,topMovedCardIndex:t},n,o.VERY_LOW])}const p=d.piles.filter(e=>e.cards.length&&e.cards.every(e=>e.side===a.e.FACE)),h=d.piles.filter(e=>e.cards.some(e=>e.side===a.e.FACE));for(const e of p){const t=e.cards[0];for(const e of h){const n=Object(c.a)(e.cards);if(Object(a.i)(n,t)){const e=u(d,t);s.push([{move:i.a.TABLEAU_TO_TABLEAU,sourcePileIndex:e,targetPileIndex:u(d,n),topMovedCardIndex:d.piles[e].cards.indexOf(t)},t,o.VERY_LOW])}}}for(const e of t)for(const t of d.piles){const n=Object(c.b)(t.cards);n&&n.side===a.e.FACE&&Object(a.i)(n,e)&&s.push([{move:i.a.WASTE_TO_TABLEAU,pileIndex:u(d,n)},e,o.VERY_LOW])}for(const e of t)for(const t of l)Object(a.h)(t,e)&&s.push([{move:i.a.WASTE_TO_FOUNDATION},e,o.VERY_LOW]);if(f>-1){const e=r.allowNonKingToEmptyPileTransfer?t:t.filter(e=>e.rank===a.d.KING);for(const t of e)s.push([{move:i.a.WASTE_TO_TABLEAU,pileIndex:f},t,o.VERY_LOW])}return s}(e,d,h,t)),A.push(...function(e,t,n,r){const s=[],{tableau:d}=e;for(const e of d.piles){const t=Object(c.b)(e.cards);if(!t||t.side===a.e.BACK)continue;const n=r[t.color];if(!n||!Object(a.h)(n,t))continue;const l=e.cards.slice(-2)[0];if(e.cards.length>1&&l.side===a.e.BACK)s.push([{move:i.a.TABLEAU_TO_FOUNDATION,pileIndex:u(d,t)},t,o.MINISCULE]);else for(const e of d.piles){const n=e.cards.find(e=>e.side===a.e.FACE);n&&e.cards[0]!==n&&Object(a.i)(l,n)&&s.push([{move:i.a.TABLEAU_TO_FOUNDATION,pileIndex:u(d,t)},t,o.MINISCULE])}}for(const e of d.piles){const t=Object(c.b)(e.cards);if(!t||t.side===a.e.BACK)continue;const l=r[t.color];if(!l||!Object(a.h)(l,t))continue;for(const e of n)Object(a.h)(t,e)&&s.push([{move:i.a.TABLEAU_TO_FOUNDATION,pileIndex:u(d,t)},t,o.MINISCULE]);if(e.cards.length<=1)continue;const f=e.cards.slice(-2)[0];if(f.side===a.e.FACE)for(const e of n)Object(a.i)(f,e)&&s.push([{move:i.a.TABLEAU_TO_FOUNDATION,pileIndex:u(d,t)},t,o.MINISCULE])}const l=d.piles.findIndex(e=>!e.cards.length);if(t.allowNonKingToEmptyPileTransfer&&l>-1)for(const e of n.slice().sort((e,t)=>Object(a.f)(t,e)))s.push([{move:i.a.WASTE_TO_TABLEAU,pileIndex:l},e,o.MINISCULE]);if(t.allowNonKingToEmptyPileTransfer&&l>-1){const e=d.piles.filter(e=>e.cards.length&&e.cards[0].side===a.e.BACK&&Object(c.a)(e.cards).side===a.e.FACE).sort((e,t)=>t.cards.filter(e=>e.side===a.e.FACE).length-e.cards.filter(e=>e.side===a.e.FACE).length);for(const t of e){const e=t.cards.findIndex(e=>e.side===a.e.FACE);s.push([{move:i.a.TABLEAU_TO_TABLEAU,sourcePileIndex:u(d,t.cards[e]),targetPileIndex:l,topMovedCardIndex:e},t.cards[e],o.MINISCULE])}}for(const e of d.piles){if(!e.cards.length)continue;const t=Object(c.a)(e.cards),n=r[t.color];n&&Object(a.h)(n,t)&&s.push([{move:i.a.TABLEAU_TO_FOUNDATION,pileIndex:u(d,t)},t,o.MINISCULE])}return s}(e,t,d,h)),function(e){const t=e.filter(([e])=>e.move!==i.a.FOUNDATION_TO_TABLEAU);if(t.length&&t.length!==e.length)return t;return e}(function(e){const t=[];for(const r of e){t.some(e=>n(r[0],e[0])&&r[1]===e[1])||t.push(r)}return t;function n(e,t){const n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(n=>e[n]===t[n])}}(A))}function u(e,t){return e.piles.findIndex(e=>e.cards.includes(t))}},9:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return l}));var r=n(1),o=n(4),a=n(3);class s{constructor(e){this.piles=e}}function i(e,t,n){const r=e.piles.indexOf(t);if(-1===r)throw new Error("The specified pile is not present in the specified tableau");const a=Object(o.c)(t,n),i=e.piles.slice();return i.splice(r,1,a),new s(i)}function c(e,t){const n=e.piles.indexOf(t);if(-1===n)throw new Error("The specified pile is not present in the specified tableau");if(!t.cards.length)throw new Error("The specified pile contains no cards");const[r,[a]]=Object(o.b)(t,1),i=e.piles.slice();return i.splice(n,1,r),[new s(i),a]}function d(e,t){if(!t.cards.length)throw new Error("The specified pile is empty");if(Object(a.a)(t.cards).side===r.e.FACE)throw new Error("The top card is already face-up");const n=e.piles.indexOf(t);if(-1===n)throw new Error("The specified pile is not present in the specified tableau");const i=Object(o.g)(t,Object(a.a)(t.cards)),c=e.piles.slice();return c.splice(n,1,i),new s(c)}function l(e,t,n,r){const a=e.piles.indexOf(t),i=e.piles.indexOf(r);if(-1===a)throw new Error("The specified source pile is not present in the specified tableau");if(-1===i)throw new Error("The specified target pile is not present in the specified tableau");const[c,d]=Object(o.f)(t,n),l=e.piles.slice();return l.splice(a,1,c),l.splice(i,1,Object(o.d)(r,d)),new s(l)}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vZ2FtZS9DYXJkLnRzIiwid2VicGFjazovLy8uL2dhbWUvQm90LnRzIiwid2VicGFjazovLy8uL2dhbWUvU2VyaWFsaXplci50cyIsIndlYnBhY2s6Ly8vLi91aS9zZXpuYW0uY3otMjAyMC9jb25maWcudHMiLCJ3ZWJwYWNrOi8vLy4vZ2FtZS9Nb3ZlLnRzIiwid2VicGFjazovLy8uL2dhbWUvdXRpbC50cyIsIndlYnBhY2s6Ly8vLi9nYW1lL1BpbGUudHMiLCJ3ZWJwYWNrOi8vLy4vZ2FtZS9XaW5uYWJsZUdhbWVzR2VuZXJhdG9yLnRzIiwid2VicGFjazovLy8uL3VpL3Nlem5hbS5jei0yMDIwL3dvcmtlci9sb2dnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vdWkvc2V6bmFtLmN6LTIwMjAvd29ya2VyL3dpbm5hYmxlR2FtZXNHZW5lcmF0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vZ2FtZS9EZXNrLnRzIiwid2VicGFjazovLy8uL2dhbWUvR2FtZS50cyIsIndlYnBhY2s6Ly8vLi9nYW1lL01vdmVIaW50R2VuZXJhdG9yLnRzIiwid2VicGFjazovLy8uL2dhbWUvVGFibGVhdS50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkNvbG9yIiwiUkVEX0NPTE9SUyIsIkhFQVJUSFMiLCJESUFNT05EUyIsIlJhbmsiLCJSQU5LX1NFUVVFTkNFIiwiQUNFIiwiVFdPIiwiVEhSRUUiLCJGT1VSIiwiRklWRSIsIlNJWCIsIlNFVkVOIiwiRUlHSFQiLCJOSU5FIiwiVEVOIiwiSkFDSyIsIlFVRUVOIiwiS0lORyIsIlNpZGUiLCJDYXJkIiwiY29sb3IiLCJyYW5rIiwic2lkZSIsIkRFQ0siLCJjb25jYXQiLCJ2YWx1ZXMiLCJtYXAiLCJCQUNLIiwiaXNWYWxpZFRhYmxlYXVTZXF1ZW5jZSIsImNhcmRPblBpbGUiLCJjYXJkVG9BZGQiLCJjb21wYXJlUmFuayIsImNhcmQxIiwiY2FyZDIiLCJpc0NhcmQxUmVkIiwiaW5jbHVkZXMiLCJpc0NhcmQyUmVkIiwiaXNTYW1lQ29sb3JJbkZyZW5jaERlY2siLCJpc1ZhbGlkRm91bmRhdGlvblNlcXVlbmNlIiwiY2FyZE9uRm91bmRhdGlvbiIsImluZGV4T2YiLCJ0dXJuT3ZlciIsImNhcmQiLCJGQUNFIiwiZXF1YWxzIiwibWFrZU1vdmUiLCJnYW1lIiwib3B0aW9ucyIsInZhbGlkYXRlT3B0aW9ucyIsInN0YXRlIiwiZGVzayIsInJ1bGVzIiwiYmVzdE1vdmUiLCJmaW5kQmVzdE1vdmUiLCJsb29rQWhlYWRNb3ZlcyIsImhpbnQiLCJleGVjdXRlTW92ZUhpbnQiLCJhdXRvRHJhd0NhcmRzIiwibW92ZVR5cGUiLCJtb3ZlIiwiV0FTVEVfVE9fRk9VTkRBVElPTiIsIldBU1RFX1RPX1RBQkxFQVUiLCJleGVjdXRlTW92ZUhpbnRPbkRlc2siLCJ0b3BXYXN0ZUNhcmQiLCJ3YXN0ZSIsImNhcmRzIiwic3RvY2tDeWNsaW5nTW92ZSIsInN0b2NrIiwibGVuZ3RoIiwiZHJhd25DYXJkcyIsIkRSQVdfQ0FSRFMiLCJSRURFQUwiLCJnYW1lQWZ0ZXJEcmF3aW5nQUNhcmQiLCJtYWtlTW92ZU9uRGVzayIsImRlZmF1bHRTdGF0ZVJhbmtpbmdIZXVyaXN0aWMiLCJmb3VuZGF0aW9uIiwidGFibGVhdSIsInBpbGVzIiwidGFibGVhdVBpbGVzIiwicGlsZSIsImZpbHRlciIsInJlZHVjZSIsImFjY3VtdWxhdG9yIiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwibWF4Q29uc2lkZXJlZENvbmZpZGVuY2VMZXZlbHMiLCJUeXBlRXJyb3IiLCJpc1NhZmVJbnRlZ2VyIiwiaGludHMiLCJXSVRIX0ZVTExfU1RPQ0siLCJtaW5BdXRvQWNjZXB0Q29uZmlkZW5jZSIsImRlc2tBZnRlck1vdmUiLCJzdGF0ZVJhbmtpbmdIZXVyaXN0aWMiLCJiZXN0SGludCIsImhpZ2hlc3RDb25maWRlbmNlSW5kZXgiLCJiZXN0UmFuayIsIk5FR0FUSVZFX0lORklOSVRZIiwiY3VycmVudE1vdmVSYW5rIiwiZGVlcEFuYWx5c2lzT3V0Y29tZSIsImRlc2tTdGF0ZSIsImRlc2tBZnRlckRyYXdpbmdBQ2FyZCIsInNlcmlhbGl6ZSIsIlJhbmdlRXJyb3IiLCJwYXJzZUludCIsImluaXRpYWxTdGF0ZSIsImhpc3RvcnkiLCJzdGFydGluZ0xvZ2ljYWxUaW1lc3RhbXAiLCJhbGxvd05vbktpbmdUb0VtcHR5UGlsZVRyYW5zZmVyIiwidG9TdHJpbmciLCJwYWRTdGFydCIsInNlcmlhbGl6ZURlY2tGcm9tRGVzayIsIk1hdGgiLCJmbG9vciIsInN0YXJ0VGltZSIsImFic29sdXRlVGltZXN0YW1wIiwibG9naWNhbFRpbWVzdGFtcCIsImZ1dHVyZSIsImluZGV4IiwicHJldmlvdXNNb3ZlVGltZXN0YW1wIiwiY2hhckF0IiwiTU9WRV9UWVBFUyIsIlRBQkxFQVVfVE9fRk9VTkRBVElPTiIsIlJFVkVBTF9UQUJMRUFVX0NBUkQiLCJwaWxlSW5kZXgiLCJGT1VOREFUSU9OX1RPX1RBQkxFQVUiLCJDT0xPUlMiLCJUQUJMRUFVX1RPX1RBQkxFQVUiLCJzb3VyY2VQaWxlSW5kZXgiLCJ0b3BNb3ZlZENhcmRJbmRleCIsInRhcmdldFBpbGVJbmRleCIsIm51bSIsImpvaW4iLCJzZXJpYWxpemVNb3ZlRGF0YSIsInNlcmlhbGl6ZU1vdmUiLCJkZXNlcmlhbGl6ZSIsInNlcmlhbGl6ZWRTdGF0ZSIsInN0YXJ0c1dpdGgiLCJFcnJvciIsImdhbWVSdWxlcyIsInN1YnN0cmluZyIsImNhcmREZWNrIiwiZGVzZXJpYWxpemVEZWNrIiwic2VyaWFsaXplZFN0YXJ0VGltZSIsInRpbWVzdGFtcCIsInNwbGl0IiwicGFydCIsImRlc2VyaWFsaXplU3RhcnRUaW1lIiwiaGlzdG9yeUxlbmd0aCIsImRlc2VyaWFsaXplZEhpc3RvcnlMZW5ndGgiLCJzZXJpYWxpemVkSGlzdG9yeSIsImJhc2VHYW1lIiwic3RhcnRpbmdTdGF0ZSIsImxhc3RTdGF0ZSIsImxhc3RMb2dpY2FsVGltZXN0YW1wIiwiY3VycmVudE1vdmVTdGFydEluZGV4IiwicmVtYWluaW5nU2VyaWFsaXplZEhpc3RvcnkiLCJsb2dpY2FsVGltZXN0YW1wRGlmZiIsIm1hdGNoIiwic2VyaWFsaXplZEluZGV4Iiwic3Vic3RyIiwicHVzaCIsImRlc2VyaWFsaXplSGlzdG9yeSIsImRlc2VyaWFsaXplZEdhbWUiLCJjYXJkc0RlY2siLCJzbGljZSIsInNlcmlhbGl6ZUNhcmQiLCJzZXJpYWxpemVEZWNrIiwicmV2ZXJzZSIsImZsYXQiLCJzZXJpYWxpemVkRGVjayIsInJlbWFpbmluZ0NhcmRzIiwiU2V0IiwiVU5TRVJJQUxJWkVEX0NBUkRTIiwic2VyaWFsaXplZENhcmQiLCJjYXJkSW5kZXgiLCJTRVJJQUxJWkVEX0NBUkRTIiwiZGVsZXRlIiwia2V5cyIsImZpbmRJbmRleCIsIm90aGVyQ2FyZCIsImV2ZXJ5IiwiSlNPTiIsInN0cmluZ2lmeSIsInNvcnQiLCJhbHBoYWJldCIsIkFycmF5IiwiZnJvbSIsIl8iLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjaGFyYWN0ZXIiLCJ0b1VwcGVyQ2FzZSIsIkRFRkFVTFRfTkVXX0dBTUVfT1BUSU9OUyIsIkJPVF9PUFRJT05TIiwiSElHSCIsIkdBTUVfU0lNVUxBVElPTl9PUFRJT05TIiwibWF4TW92ZXMiLCJtYXhTaW11bGF0aW9uVGltZSIsInNpbXVsYXRpb25FbmRQcmVkaWNhdGUiLCJNb3ZlVHlwZSIsImxhc3RJdGVtT3JOdWxsIiwiYXJyYXkiLCJsYXN0SXRlbSIsIlBpbGUiLCJkcmF3IiwibnVtYmVyT2ZDYXJkcyIsIm1heCIsInBsYWNlQ2FyZE9uVG9wIiwicGxhY2VQaWxlT25Ub3AiLCJib3R0b21QaWxlIiwidG9wUGlsZSIsInR1cm5DYXJkIiwiY2FyZFRvVHVybiIsInBhdGNoZWRDYXJkcyIsIm5ld0NhcmQiLCJzcGxpY2UiLCJzbGljZVBpbGUiLCJzZXBhcmF0aW5nQ2FyZCIsInNlcGFyYXRvckluZGV4Iiwic2h1ZmZsZSIsImN1cnJlbnRDYXJkSW5kZXgiLCJyYW5kb21DYXJkSW5kZXgiLCJyYW5kb20iLCJjdXJyZW50Q2FyZCIsImJvdE9wdGlvbnMiLCJnYW1lU2ltdWxhdGlvbk9wdGlvbnMiLCJ0YXNrUnVubmVyIiwib25Qcm9ncmVzcyIsIm5leHRTY2hlZHVsZWRHZW5lcmF0b3JUYXNrIiwia25vd25XaW5uYWJsZURlY2tzIiwidGhpcyIsImRhZW1vbiIsInRlc3ROZXh0UmFuZG9tRGVjayIsImNhbmNlbCIsInN1YkdlbmVyYXRvciIsInRhc2siLCJQcm9taXNlIiwicmVzb2x2ZSIsImxhc3RXaW5uYWJsZURlY2siLCJhZGQiLCJzdG9wR2VuZXJhdG9yIiwicnVuR2VuZXJhdG9yIiwiZ2VuZXJhdGVkR2FtZSIsImlzV2lubmFibGUiLCJTRVZFUklUWSIsIndhcm5pbmciLCJtZXNzYWdlIiwibG9nIiwiV0FSTklORyIsImluZm8iLCJJTkZPIiwic2V2ZXJpdHkiLCJtZXNzYWdlcyIsIkVSUk9SIiwiY29uc29sZSIsImVycm9yIiwic2VsZiIsIndhcm4iLCJERUJVRyIsImRlYnVnIiwid2lubmFibGVHYW1lc0dlbmVyYXRvciIsInJlcXVlc3RJZCIsInNldFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJvbm1lc3NhZ2UiLCJldmVudCIsImRhdGEiLCJnZW5lcmF0ZU5ld0dhbWUiLCJnZW5lcmF0ZVdpbm5hYmxlR2FtZSIsInRoZW4iLCJnZW5lcmF0ZWREZWNrIiwicG9zdE1lc3NhZ2UiLCJjYXRjaCIsImdlbmVyYXRvckVycm9yIiwiRGVzayIsImV4ZWN1dGVNb3ZlIiwic3RvY2tSZW1haW5kZXIiLCJuZXdXYXN0ZSIsImRyYXdDYXJkcyIsInJlZGVhbCIsImNhcmRUb1BsYWNlIiwibmV3Rm91bmRhdGlvbiIsImFkZENhcmRUb0ZvdW5kYXRpb24iLCJtb3ZlVG9wV2FzdGVDYXJkVG9Gb3VuZGF0aW9uIiwidGFibGVhdVBpbGUiLCJuZXdUYWJsZWF1IiwibW92ZVRvcFdhc3RlQ2FyZFRvVGFibGVhdSIsIm1vdmVUb3BUYWJsZWF1UGlsZUNhcmRUb0ZvdW5kYXRpb24iLCJyZXZlYWxUb3BUYWJsZWF1UGlsZUNhcmQiLCJuZXdGb3VuZGF0aW9uUGlsZSIsIm1vdmVGb3VuZGF0aW9uQ2FyZFRvVGFibGVhdVBpbGUiLCJzb3VyY2VQaWxlIiwidG9wQ2FyZFRvTW92ZSIsInRhcmdldFBpbGUiLCJtb3ZlVGFibGVhdVBpbGVQYXJ0IiwiaXNWaWN0b3J5IiwiaXNWaWN0b3J5R3VhcmFudGVlZCIsInRhcmdldEZvdW5kYXRpb25QaWxlIiwiZm91bmRhdGlvblRvcENhcmQiLCJjcmVhdGVOZXdHYW1lIiwiY2FyZHNUb0RlYWwiLCJjYXJkc0ZvclBpbGUiLCJjdXJyZW50UGlsZSIsIkRhdGUiLCJub3ciLCJwZXJmb3JtYW5jZSIsIkNMVUJTIiwiU1BBREVTIiwiY3JlYXRlR2FtZVdpdGhCb3RQcmVkaWNhdGUiLCJsYXN0RGVza1N0YXRlIiwic2F0aXNmaWVzUHJlZGljYXRlIiwibW92ZUNvdW50Iiwic3RhcnRUaW1lc3RhbXAiLCJuZXdEZXNrU3RhdGUiLCJjcmVhdGVOZXh0R2FtZVN0YXRlIiwicmVzZXRHYW1lIiwidW5kb0xhc3RNb3ZlIiwibmV3SGlzdG9yeSIsIm1vdmVUb1VuZG8iLCJyZWRvTmV4dE1vdmUiLCJtb3ZlVG9SZWRvIiwibmV3RnV0dXJlIiwibmV3U3RhdGUiLCJuZXh0U3RhdGUiLCJhcHBsaWVkTW92ZSIsIkhpbnRHZW5lcmF0b3JNb2RlIiwiTW92ZUNvbmZpZGVuY2UiLCJNT1ZFX0NPTkZJREVOQ0VTIiwiQUJTT0xVVEUiLCJWRVJZX0hJR0giLCJNRURJVU0iLCJMT1ciLCJWRVJZX0xPVyIsIk1JTklTQ1VMRSIsImdldE1vdmVIaW50cyIsInN0b2NrUGxheWFibGVDYXJkcyIsIkNVUlJFTlRfU1RBVEUiLCJnZXRTdG9ja1BsYXlhYmxlQ2FyZHMiLCJ0b3BUYWJsZWF1Q2FyZHMiLCJ0b3BGb3VuZGF0aW9uQ2FyZHMiLCJtb3ZlcyIsImNhcmRUb1JldmVhbCIsImZpbmQiLCJnZXRQaWxlSW5kZXgiLCJ0b3BGb3VuZGF0aW9uQ2FyZCIsImdldE1vdmVzV2l0aEFic29sdXRlQ29uZmlkZW5jZSIsInBpbGVzRnJvbUxhcmdlc3RUb1NtYWxsZXN0IiwicGlsZTEiLCJwaWxlMiIsIm1vc3RCb3R0b21SZXZlYWxlZENhcmRJbmRleCIsInNvdXJjZUNhcmQiLCJhdmFpbGFibGVLaW5ncyIsImNhcmRPclVuZGVmaW5lZCIsImVtcHR5UGlsZUluZGV4Iiwia2luZyIsImtpbmdTZXF1ZW5jZUVuZCIsInZpc2libGVDYXJkcyIsImdldE1vdmVzV2l0aFZlcnlIaWdoQ29uZmlkZW5jZSIsInBpbGVDYXJkcyIsImxhcmdlc3RTZXF1ZW5jZUxlbmd0aCIsImNhcmRTZXF1ZW5jZSIsImdldE1vdmVzV2l0aEhpZ2hDb25maWRlbmNlIiwiY2FuZGlkYXRlQ2FyZHMiLCJjYW5kaWRhdGVDYXJkIiwiY2FuZGlkYXRlVGFyZ2V0cyIsImNhbmRpZGF0ZVRhcmdldCIsImdldE1vdmVzV2l0aE1lZGl1bUNvbmZpZGVuY2UiLCJwaWxlc09mVmlzaWJsZUNhcmRzIiwiY2FuZGlkYXRlU291cmNlUGlsZXMiLCJ0b3BTb3VyY2VDYXJkIiwib3RoZXJQaWxlIiwiYm90dG9tVGFyZ2V0Q2FyZCIsInBpbGVzT2ZPbmx5VmlzaWJsZUNhcmRzIiwic29tZSIsImdldE1vdmVzV2l0aExvd0NvbmZpZGVuY2UiLCJmaWx0ZXJlZFRvcEZvdW5kYXRpb25DYXJkcyIsImZvdW5kYXRpb25DYXJkIiwiaGlnaGVzdFZpc2libGVDYXJkIiwibGFzdENhcmQiLCJjYW5kaWRhdGVQaWxlIiwia2luZ0luZGV4IiwicGlsZXNXaXRoVmlzaWJsZUNhcmRzIiwic3RvY2tDYXJkIiwidXNhYmxlQ2FyZHMiLCJnZXRNb3Zlc1dpdGhWZXJ5TG93Q29uZmlkZW5jZSIsIm5leHRUb0xhc3RDYXJkIiwic291cmNlUGlsZXMiLCJ0b3BDYXJkSW5kZXgiLCJnZXRNb3Zlc1dpdGhNaW5pc2N1bGVDb25maWRlbmNlIiwiaGludHNXaXRob3V0VHJhbnNmZXJzRnJvbUZvdW5kYXRpb24iLCJmaWx0ZXJGb3VuZGF0aW9uVG9UYWJsZWF1SGludHMiLCJmaWx0ZXJlZEhpbnRzIiwib3RoZXJIaW50IiwiYXJlT2JqZWN0c1NoYWxsb3dseUVxdWFsIiwib2JqZWN0MSIsIm9iamVjdDIiLCJrZXlzMSIsImtleXMyIiwiZmlsdGVyRHVwbGljYXRlSGludHMiLCJUYWJsZWF1IiwiYWRkQ2FyZFRvUGlsZSIsInBhdGNoZWRQaWxlIiwicGF0Y2hlZFBpbGVzIiwicmVtb3ZlVG9wQ2FyZEZyb21QaWxlIiwicGlsZVJlbWFpbmRlciIsInRvcENhcmQiLCJyZXZlYWxUb3BDYXJkIiwibW92ZVBpbGVQYXJ0Iiwic291cmNlUGlsZVJlbWFpbmRlciIsIm1vdmVkUGFydCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUsRUFBVSxPQUFPRixFQUNwQixHQUFXLEVBQVBFLEdBQThCLGlCQUFWRixHQUFzQkEsR0FBU0EsRUFBTUcsV0FBWSxPQUFPSCxFQUNoRixJQUFJSSxFQUFLWCxPQUFPWSxPQUFPLE1BR3ZCLEdBRkExQixFQUFvQmtCLEVBQUVPLEdBQ3RCWCxPQUFPQyxlQUFlVSxFQUFJLFVBQVcsQ0FBRVQsWUFBWSxFQUFNSyxNQUFPQSxJQUN0RCxFQUFQRSxHQUE0QixpQkFBVEYsRUFBbUIsSUFBSSxJQUFJTSxLQUFPTixFQUFPckIsRUFBb0JVLEVBQUVlLEVBQUlFLEVBQUssU0FBU0EsR0FBTyxPQUFPTixFQUFNTSxJQUFRQyxLQUFLLEtBQU1ELElBQzlJLE9BQU9GLEdBSVJ6QixFQUFvQjZCLEVBQUksU0FBUzFCLEdBQ2hDLElBQUlTLEVBQVNULEdBQVVBLEVBQU9xQixXQUM3QixXQUF3QixPQUFPckIsRUFBZ0IsU0FDL0MsV0FBOEIsT0FBT0EsR0FFdEMsT0FEQUgsRUFBb0JVLEVBQUVFLEVBQVEsSUFBS0EsR0FDNUJBLEdBSVJaLEVBQW9CYSxFQUFJLFNBQVNpQixFQUFRQyxHQUFZLE9BQU9qQixPQUFPa0IsVUFBVUMsZUFBZTFCLEtBQUt1QixFQUFRQyxJQUd6Ry9CLEVBQW9Ca0MsRUFBSSxHQUlqQmxDLEVBQW9CQSxFQUFvQm1DLEVBQUksSSxpQ0NoRnJELElBQVlDLEVBRlosb1ZBRUEsU0FBWUEsR0FDVix3QkFDQSwwQkFDQSw0QkFDQSxzQkFKRixDQUFZQSxNQUFLLEtBT1YsTUFBTUMsRUFBbUMsQ0FDOUNELEVBQU1FLFFBQ05GLEVBQU1HLFVBR1IsSUFBWUMsR0FBWixTQUFZQSxHQUNWLGlCQUNBLGlCQUNBLHFCQUNBLG1CQUNBLG1CQUNBLGlCQUNBLHFCQUNBLHFCQUNBLG1CQUNBLGlCQUNBLG1CQUNBLHFCQUNBLG1CQWJGLENBQVlBLE1BQUksS0FnQlQsTUFBTUMsRUFBcUMsQ0FDaERELEVBQUtFLElBQ0xGLEVBQUtHLElBQ0xILEVBQUtJLE1BQ0xKLEVBQUtLLEtBQ0xMLEVBQUtNLEtBQ0xOLEVBQUtPLElBQ0xQLEVBQUtRLE1BQ0xSLEVBQUtTLE1BQ0xULEVBQUtVLEtBQ0xWLEVBQUtXLElBQ0xYLEVBQUtZLEtBQ0xaLEVBQUthLE1BQ0xiLEVBQUtjLE1BR1AsSUFBWUMsR0FBWixTQUFZQSxHQUNWLG1CQUNBLG1CQUZGLENBQVlBLE1BQUksS0FXVCxNQUFNQyxFQUNYLFlBQ2tCQyxFQUNBQyxFQUNBQyxHQUZBLEtBQUFGLFFBQ0EsS0FBQUMsT0FDQSxLQUFBQyxRQUtiLE1BQU1DLEVBQThCLEdBQWVDLFVBQVUvQyxPQUFPZ0QsT0FBTzFCLEdBQU8yQixJQUN0Rk4sR0FBaUJoQixFQUFjc0IsSUFBS0wsR0FBZSxJQUFJRixFQUFLQyxFQUFPQyxFQUFNSCxFQUFLUyxTQUcxRSxTQUFTQyxFQUF1QkMsRUFBbUJDLEdBQ3hELE9BQThDLElBQXZDQyxFQUFZRixFQUFZQyxLQXNCakMsU0FBaUNFLEVBQWNDLEdBQzdDLE1BQU1DLEVBQWFsQyxFQUFXbUMsU0FBU0gsRUFBTVosT0FDdkNnQixFQUFhcEMsRUFBV21DLFNBQVNGLEVBQU1iLE9BQzdDLE9BQU9jLElBQWVFLEVBekI4QkMsQ0FBd0JSLEVBQVlDLEdBR25GLFNBQVNRLEVBQTBCQyxFQUF5QlQsR0FDakUsT0FBcUQsSUFBOUNDLEVBQVlRLEVBQWtCVCxJQUFxQlMsRUFBaUJuQixRQUFVVSxFQUFVVixNQUcxRixTQUFTVyxFQUFZQyxFQUFjQyxHQUd4QyxPQUZ5QjdCLEVBQWNvQyxRQUFRUixFQUFNWCxNQUM1QmpCLEVBQWNvQyxRQUFRUCxFQUFNWixNQUloRCxTQUFTb0IsRUFBU0MsR0FDdkIsT0FBTyxJQUFJdkIsRUFBS3VCLEVBQUt0QixNQUFPc0IsRUFBS3JCLEtBQU1xQixFQUFLcEIsT0FBU0osRUFBS3lCLEtBQU96QixFQUFLUyxLQUFPVCxFQUFLeUIsTUFHN0UsU0FBU0MsRUFBT1osRUFBY0MsR0FDbkMsT0FBT0QsRUFBTVosUUFBVWEsRUFBTWIsT0FBU1ksRUFBTVgsT0FBU1ksRUFBTVosTyxnQ0N6RjdELG9KQWNPLFNBQVN3QixFQUFTQyxFQUFhQyxHQUNwQ0MsRUFBZ0JELEdBRWhCLE1BQU9FLE1BQU9DLEVBQUksTUFBRUMsR0FBU0wsRUFDN0IsR0FBSSxZQUFVSSxHQUNaLE9BQU9KLEVBR1QsTUFBTU0sRUFBV0MsRUFBYUgsRUFBTUMsRUFBT0osRUFBU0EsRUFBUU8sZ0JBQzVELElBQUtGLEVBQ0gsT0FBT04sRUFHVCxNQUFPUyxHQUFRSCxFQUNmLE9BNEZGLFNBQVNJLEVBQWdCVixFQUFhUyxFQUFnQkUsRyxNQUNwRCxNQUFNQyxFQUFXSCxFQUFLLEdBQUdJLEtBQ3pCLElBQUtGLEdBQWtCQyxJQUFhLElBQVNFLHFCQUF1QkYsSUFBYSxJQUFTRyxpQkFDeEYsT0FBTyxZQUFvQmYsRUFBTWdCLEVBQXNCaEIsRUFBS0csTUFBT0gsRUFBS0ssTUFBT0ksRUFBTUUsR0FBZ0JGLEVBQUssSUFHNUcsTUFBTVEsRUFBZSxZQUFlakIsRUFBS0csTUFBTWUsTUFBTUMsT0FDckQsSUFBZ0IsUUFBWixFQUFBRixTQUFZLGVBQUUxQyxRQUFTa0MsRUFBSyxHQUFHbEMsTUFBUTBDLEVBQWEzQyxRQUFVbUMsRUFBSyxHQUFHbkMsTUFDeEUsT0FBTyxZQUFvQjBCLEVBQU1nQixFQUFzQmhCLEVBQUtHLE1BQU9ILEVBQUtLLE1BQU9JLEVBQU1FLEdBQWdCRixFQUFLLElBRzVHLE1BQU1XLEVBQXlCcEIsRUFBS0csTUFBTWtCLE1BQU1GLE1BQU1HLE9BQ3BELENBQ0VDLFdBQVl2QixFQUFLSyxNQUFNa0IsV0FDdkJWLEtBQU0sSUFBU1csWUFHakIsQ0FDRVgsS0FBTSxJQUFTWSxRQUViQyxFQUF3QixZQUFZMUIsRUFBTW9CLEdBQ2hELE9BQU9WLEVBQWdCZ0IsRUFBdUJqQixFQUFNRSxHQWpIN0NELENBQWdCVixFQUFNUyxHQUFNLEdBRzlCLFNBQVNrQixFQUFldkIsRUFBYUMsRUFBbUJKLEdBRzdELEdBRkFDLEVBQWdCRCxHQUVaLFlBQVVHLEdBQ1osT0FBT0EsRUFHVCxNQUFNRSxFQUFXQyxFQUFhSCxFQUFNQyxFQUFPSixFQUFTQSxFQUFRTyxnQkFDNUQsSUFBS0YsRUFDSCxPQUFPRixFQUdULE1BQU9LLEdBQVFILEVBQ2YsT0FBT1UsRUFBc0JaLEVBQU1DLEVBQU9JLEdBQU0sR0FHM0MsU0FBU21CLEdBQTZCLFdBQUNDLEVBQVlDLFNBQVVDLE1BQU9DLEtBRXpFLE9BQU9yRyxPQUFPZ0QsT0FBT2tELEdBQVlqRCxJQUFLcUQsR0FBU0EsRUFBS2QsTUFBTUcsUUFBUTVDLE9BQ2hFc0QsRUFBYXBELElBQUtxRCxHQUFTQSxFQUFLZCxNQUFNZSxPQUFRdEMsR0FBU0EsRUFBS3BCLE9BQVMsSUFBS3FCLE1BQU15QixTQUNoRmEsT0FDQSxDQUFDQyxFQUFhbEcsSUFBVWtHLEVBQWNsRyxFQUN0QyxHQUlKLFNBQVNnRSxFQUFnQkQsR0FDdkIsSUFBS29DLE9BQU9DLFVBQVVyQyxFQUFRc0MsZ0NBQWtDdEMsRUFBUXNDLDhCQUFnQyxFQUN0RyxNQUFNLElBQUlDLFVBQ1IsNEVBQ0EsR0FBR3ZDLEVBQVFzQyw4Q0FHZixJQUFLRixPQUFPSSxjQUFjeEMsRUFBUU8saUJBQW1CUCxFQUFRTyxlQUFpQixFQUM1RSxNQUFNLElBQUlnQyxVQUNSLDZEQUE2RHZDLEVBQVFPLCtCQUszRSxTQUFTRCxFQUNQSCxFQUNBQyxFQUNBSixFQUNBTyxHQUVBLE1BQU1rQyxFQUFRLFlBQWF0QyxFQUFNQyxFQUFPLElBQWtCc0MsaUJBQzFELElBQUtELEVBQU1wQixPQUNULE9BQU8sS0FHVCxHQUNFckIsRUFBUTJDLHlCQUNSLElBQWlCbEQsUUFBUWdELEVBQU0sR0FBRyxLQUFPLElBQWlCaEQsUUFBUU8sRUFBUTJDLHlCQUMxRSxDQUNBLE1BQU1DLEVBQWdCN0IsRUFBc0JaLEVBQU1DLEVBQU9xQyxFQUFNLElBQUksR0FDN0RuRSxFQUFPMEIsRUFBUTZDLHNCQUFzQkQsR0FDM0MsTUFBTyxDQUFDSCxFQUFNLEdBQUluRSxHQUdwQixJQUFJd0UsRUFBV0wsRUFBTSxHQUNyQixNQUFNTSxFQUF5QixJQUFpQnRELFFBQVFxRCxFQUFTLElBQ2pFLElBQUlFLEVBQVdaLE9BQU9hLGtCQUN0QixJQUFLLE1BQU16QyxLQUFRaUMsRUFBTyxDQUN4QixHQUFJLElBQWlCaEQsUUFBUWUsRUFBSyxJQUFNdUMsRUFBeUIvQyxFQUFRc0MsOEJBQ3ZFLFNBR0YsTUFBTU0sRUFBZ0I3QixFQUFzQlosRUFBTUMsRUFBT0ksR0FBTSxHQUMvRCxJQUFJMEMsRUFDSixHQUFJM0MsSUFBbUIsWUFBb0JxQyxHQUFnQixDQUN6RCxNQUFNTyxFQUFzQjdDLEVBQWFzQyxFQUFleEMsRUFBT0osRUFBU08sRUFBaUIsR0FDekYsSUFBSzRDLEVBQ0gsVUFHRCxDQUFFRCxHQUFtQkMsT0FFdEJELEVBQWtCbEQsRUFBUTZDLHNCQUFzQkQsR0FFOUNNLEVBQWtCRixJQUNwQkEsRUFBV0UsRUFDWEosRUFBV3RDLEdBSWYsTUFBTyxDQUFDc0MsRUFBVUUsR0EyQnBCLFNBQVNqQyxFQUFzQnFDLEVBQWtCaEQsRUFBbUJJLEVBQWdCRSxHLE1BQ2xGLE1BQU1DLEVBQVdILEVBQUssR0FBR0ksS0FDekIsR0FBSUQsSUFBYSxJQUFTRSxxQkFBdUJGLElBQWEsSUFBU0csaUJBQ3JFLE9BQU8sWUFBa0JzQyxFQUFXaEQsRUFBT0ksRUFBSyxJQUdsRCxNQUFNUSxFQUFlLFlBQWVvQyxFQUFVbkMsTUFBTUMsT0FDcEQsSUFBZ0IsUUFBWixFQUFBRixTQUFZLGVBQUUxQyxRQUFTa0MsRUFBSyxHQUFHbEMsTUFBUTBDLEVBQWEzQyxRQUFVbUMsRUFBSyxHQUFHbkMsTUFDeEUsT0FBTyxZQUFrQitFLEVBQVdoRCxFQUFPSSxFQUFLLElBR2xELE1BQU1XLEVBQXlCaUMsRUFBVWhDLE1BQU1GLE1BQU1HLE9BQ25ELENBQ0VDLFdBQVlsQixFQUFNa0IsV0FDbEJWLEtBQU0sSUFBU1csWUFHakIsQ0FDRVgsS0FBTSxJQUFTWSxRQUViNkIsRUFBd0IsWUFBa0JELEVBQVdoRCxFQUFPZSxHQUNsRSxPQUFJVCxFQUNLSyxFQUFzQnNDLEVBQXVCakQsRUFBT0ksRUFBTUUsR0FHNUQyQyxJLGdDQ3pLVCxpS0FnQk8sU0FBU0MsRUFBVXZELEdBQ3hCLEdBQUlBLEVBQUtLLE1BQU1rQixXQUpDLEdBS2QsTUFBTSxJQUFJaUMsV0FDUix1RUFBaUZ4RCxFQUFLSyxNQUFNa0Isa0JBQzVGLFlBR0osR0FBSXZCLEVBQUtHLE1BQU0yQixRQUFRQyxNQUFNVCxPQUFTbUMsU0FBUyxLQVYvQixJQVdkLE1BQU0sSUFBSUQsV0FDUiw4RUFBOEVDLFNBQVMsS0FaM0UsUUFhWixHQUFHekQsRUFBS0csTUFBTTJCLFFBQVFDLE1BQU1ULHVCQUloQyxNQUFNb0MsRUFBZTFELEVBQUsyRCxRQUFRckMsT0FBU3RCLEVBQUsyRCxRQUFRLEdBQUcsR0FBSzNELEVBQUtHLE1BdUV2RSxJQUNFd0QsRUFDQUMsRUF6REEsTUFmdUIsQ0FuQkUsRUFxQnZCNUQsRUFBS0ssTUFBTXdELGdDQUFrQyxJQUFNLElBQ25EN0QsRUFBS0ssTUFBTWtCLFdBQVd1QyxTQXJCUixJQXNCZDlELEVBQUtHLE1BQU0yQixRQUFRQyxNQUFNVCxPQUFPd0MsU0F0QmxCLElBc0JzQ0MsU0FBUyxFQUFHLEtBQ2hFQyxFQUFzQk4sR0FDdEJPLEtBQUtDLE9BQU9sRSxFQUFLbUUsVUFBVUMsa0JBdkJYLGNBdUI4QyxLQUFNTixTQXhCdEQsSUF5QmQsSUFDQUcsS0FBS0MsTUFBTWxFLEVBQUttRSxVQUFVRSxrQkFBa0JQLFNBMUI5QixJQTJCZCxJQUNBOUQsRUFBSzJELFFBQVFyQyxPQUFPd0MsU0E1Qk4sSUE2QmQsS0E0REZILEVBM0RtQjNELEVBQUsyRCxRQUFRakYsT0FBT3NCLEVBQUtzRSxRQTRENUNWLEVBNURxRDVELEVBQUttRSxVQUFVRSxpQkE4RDdEVixFQUFRL0UsSUFDYixFQUFFLENBQUVpQyxHQUFPMEQsSUFJZixTQUF1QjFELEVBQStCMkQsR0FDcEQsTUFBTyxDQUNMUCxLQUFLQyxNQUFNckQsRUFBS3dELGlCQUFtQkcsR0FBdUJWLFNBbkc1QyxJQW9HZCxXQUFXVyxPQUFPQyxFQUFXaEYsUUFBUW1CLEVBQUtBLE9BSTVDLFdBQ0UsT0FBUUEsRUFBS0EsTUFDWCxLQUFLLElBQVNXLFdBQ1osTUFBTyxHQUFHWCxFQUFLVSxXQUFXdUMsU0EzR2hCLE9BNEdaLEtBQUssSUFBUy9DLGlCQUNkLEtBQUssSUFBUzRELHNCQUNkLEtBQUssSUFBU0Msb0JBQ1osTUFBTyxHQUFHL0QsRUFBS2dFLFVBQVVmLFNBL0dmLElBK0dtQ0MsU0FBUyxFQUFHLE9BQzNELEtBQUssSUFBU2Usc0JBQ1osTUFBTyxHQUFHakUsRUFBS2dFLFVBQVVmLFNBakhmLE1BaUhxQyxPQUFPVyxPQUFPTSxFQUFPckYsUUFBUW1CLEVBQUt2QyxVQUNuRixLQUFLLElBQVMwRyxtQkFDWixNQUFPLENBQUNuRSxFQUFLb0UsZ0JBQWlCcEUsRUFBS3FFLGtCQUFtQnJFLEVBQUtzRSxpQkFBaUJ2RyxJQUN6RXdHLEdBQWdCQSxFQUFJdEIsU0FwSGIsSUFvSGlDQyxTQUFTLEVBQUcsTUFDckRzQixLQUFLLElBQ1QsS0FBSyxJQUFTNUQsT0FDZCxLQUFLLElBQVNYLG9CQUNaLE1BQU8sR0FDVCxRQUNFLE1BQU0sSUFBSTBCLFVBQVUsc0JBQXVCM0IsRUFBYUEsU0FyQjVEeUUsSUFDQUQsS0FBSyxJQVRnQkUsQ0FBYzFFLEVBQU0wRCxFQUFRWixFQUFRWSxFQUFRLEdBQUcsR0FBR0YsaUJBQW1CVCxJQUMxRnlCLEtBQUssTUE3RGVBLEtBQUssSUFHdEIsU0FBU0csRUFBWUMsR0FDMUIsSUFBS0EsRUFBZ0JDLFdBdENJLEdBc0MwQjVCLFlBQ2pELE1BQU0sSUFBSTZCLE1BQU0seUNBQXlDRixLQUczRCxNQUFNRyxFQUEyQixDQUMvQi9CLGtDQUFtQ0osU0FBU2dDLEVBQWdCaEIsT0FBTyxHQUFJLElBQ3ZFbEQsV0FBWWtDLFNBQVNnQyxFQUFnQmhCLE9BQU8sR0EzQzlCLElBNENkekMsYUFBY3lCLFNBQVNnQyxFQUFnQkksVUFBVSxFQUFHLEdBNUN0QyxLQThDVkMsRUFBV0MsRUFBZ0JOLEVBQWdCSSxVQUFVLEVBQUcsS0FDeERHLEVBQXNCUCxFQUFnQkksVUFBVSxHQUFJSixFQUFnQi9GLFFBQVEsSUFBSyxLQUNqRnlFLEVBMkxSLFNBQThCOEIsR0FDNUIsTUFBTzdCLEVBQW1CQyxHQUFvQjRCLEVBQVVDLE1BQU0sS0FBS3RILElBQUt1SCxHQUFTMUMsU0FBUzBDLEVBNU8xRSxLQTZPaEIsTUFBTyxDQUNML0Isa0JBQXVDLElBQXBCQSxFQTdPSCxhQThPaEJDLG9CQS9MZ0IrQixDQUFxQkosR0FDakNLLEVBQWdCWixFQUFnQkksVUFBVSxHQUFLRyxFQUFvQjFFLE9BQVMsRUFBR21FLEVBQWdCL0YsUUFBUSxJQUFLLEtBQzVHNEcsRUFBNEI3QyxTQUFTNEMsRUFsRDNCLElBbURWRSxFQUFvQmQsRUFBZ0JJLFVBQVUsR0FBS0csRUFBb0IxRSxPQUFTLEVBQUkrRSxFQUFjL0UsT0FBUyxHQUMzR2tGLEVBQVcsWUFBY1osRUFBV0UsR0FDcENuQyxFQXNGUixTQUNFOEMsRUFDQTdDLEVBQ0EyQyxHQUVBLE1BQU01QyxFQUFVLEdBQ2hCLElBQUkrQyxFQUFZRCxFQUNaRSxFQUF1Qi9DLEVBQ3ZCZ0QsRUFBd0IsRUFDNUIsS0FBT0EsRUFBd0JMLEVBQWtCakYsUUFBUSxDQUN2RCxJQUFJdUYsRUFBNkJOLEVBQWtCVixVQUFVZSxHQUM3RCxNQUFNRSxFQUF1QnJELFNBQVNvRCxFQXRKeEIsSUF1SlJqRyxFQUFXOEQsRUFDZixXQUFXaEYsUUFBUW1ILEVBQTJCcEMsT0FBT3FDLEVBQXFCaEQsU0F4SjlELElBd0prRnhDLFVBT2hHLElBQUlULEVBQ0osT0FMQThGLEdBQXdCRyxFQUN4QkYsR0FBeUJFLEVBQXFCaEQsU0E1SmhDLElBNEpvRHhDLE9BQVMsRUFFM0V1RixFQUE2Qk4sRUFBa0JWLFVBQVVlLEdBRWpEaEcsR0FDTixLQUFLLElBQVNZLFdBQ1osTUFBTUQsRUFBYXNGLEVBQTJCaEIsVUFBVSxFQUFHZ0IsRUFBMkJuSCxRQUFRLE1BQzlGa0gsR0FBeUJyRixFQUFXRCxPQUFTLEVBQzdDVCxFQUFPLENBQ0xVLFdBQVlrQyxTQUFTbEMsRUFyS2IsSUFzS1I4QyxpQkFBa0JzQyxFQUNsQjlGLEtBQU1ELEdBRVIsTUFDRixLQUFLLElBQVNHLGlCQUNkLEtBQUssSUFBUzRELHNCQUNkLEtBQUssSUFBU0Msb0JBQ1osQ0FDRSxNQUFNQyxFQUFZcEIsU0FBU29ELEVBQTJCaEIsVUFBVSxFQUFHLEdBOUszRCxJQStLUmUsR0FBeUIsRUFDekIvRixFQUFPLENBQ0x3RCxpQkFBa0JzQyxFQUNsQjlGLEtBQU1ELEVBQ05pRSxhQUdKLE1BRUYsS0FBSyxJQUFTQyxzQkFDWixDQUNFLE1BQU1ELEVBQVlwQixTQUFTb0QsRUExTG5CLElBMkxGdkksRUFBUXlHLEVBQ1osT0FBT3JGLFFBQVFtSCxFQUEyQnBDLE9BQU9JLEVBQVVmLFNBNUxyRCxJQTRMeUV4QyxVQUVqRnNGLEdBQXlCL0IsRUFBVWYsU0E5TDNCLElBOEwrQ3hDLE9BQVMsRUFDaEVULEVBQU8sQ0FDTHZDLFFBQ0ErRixpQkFBa0JzQyxFQUNsQjlGLEtBQU1ELEVBQ05pRSxhQUdKLE1BRUYsS0FBSyxJQUFTRyxtQkFDWixNQUFPQyxFQUFpQkMsRUFBbUJDLEdBQW1CMEIsRUFDM0RoQixVQUFVLEVBQUcsR0FDYmtCLE1BQU0sT0FDTm5JLElBQUtvSSxHQUFvQnZELFNBQVN1RCxFQTVNM0IsS0E2TVZKLEdBQXlCLEVBQ3pCL0YsRUFBTyxDQUNMd0QsaUJBQWtCc0MsRUFDbEI5RixLQUFNRCxFQUNOcUUsa0JBQ0FFLGtCQUNBRCxxQkFFRixNQUVGLEtBQUssSUFBU3pELE9BQ2QsS0FBSyxJQUFTWCxvQkFDWkQsRUFBTyxDQUNMd0QsaUJBQWtCc0MsRUFDbEI5RixLQUFNRCxHQUVSLE1BQ0YsUUFDRSxNQUFNLElBQUkrRSxNQUNSLHFEQUFxRGlCLCtCQUNyRCxzQkFBc0JDLEVBQTJCSSxPQUFPSCxFQUFxQmhELFNBak9yRSxJQWlPeUZ4QyxPQUFRLE1BSS9HcUMsRUFBUXVELEtBQUssQ0FBQ1IsRUFBVXZHLE1BQU9VLElBQy9CNkYsRUFBWSxZQUFZQSxFQUFXN0YsR0FFckMsT0FBTzhDLEVBbkxTd0QsQ0FBbUJYLEVBQVVyQyxFQUFVRSxpQkFBa0JrQyxHQUV6RSxJQUFJYSxFQUEwQixJQUN6QlosRUFDSGxDLE9BQVFYLEVBQ1JRLGFBRUYsSUFBSyxJQUFJbEosRUFBSSxFQUFHQSxFQUFJcUwsRUFBMkJyTCxJQUM3Q21NLEVBQW1CLFlBQWFBLEdBRWxDLE9BQU9BLEVBR0YsU0FBU3BELEVBQXNCNUQsR0FLcEMsT0FHSyxTQUF1QmlILEdBQzVCLE9BQU9BLEVBQVVDLE1BQU0sR0FBSSxHQUFHMUksSUFBSTJJLEdBQWVsQyxLQUFLLElBSi9DbUMsQ0FKVyxJQUNicEgsRUFBS2lCLE1BQU1GLFNBQ1hmLEVBQUswQixRQUFRQyxNQUFNbkQsSUFBS3FELEdBQVNBLEVBQUtkLE1BQU1tRyxRQUFRRyxXQUFXQSxVQUFVQyxTQVN6RSxTQUFTM0IsRUFBZ0I0QixHQUM5QixNQUFNQyxFQUFpQixJQUFJQyxJQUFJQyxHQUMvQixPQUFPSCxFQUFlekIsTUFBTSxJQUFJdEgsSUFBS21KLElBQ25DLE1BQU1DLEVBQVlDLEVBQWlCdkksUUFBUXFJLEdBQ3JDbkksRUFBT2tJLEVBQW1CRSxHQUVoQyxPQURBSixFQUFlTSxPQUFPdEksR0FDZkEsSUFDTmxCLE9BQU8sSUFBSWtKLElBMENoQixTQUFTTCxFQUFjM0gsR0FDckIsTUFBTXVJLEVBQVF4TSxPQUFPd00sS0FBS3ZJLEdBQTZCc0MsT0FBUTFGLEdBQWdCLFNBQVJBLEdBQ2pFd0wsRUFBWUYsRUFBbUJNLFVBQ2xDQyxHQUFjRixFQUFLRyxNQUFPOUwsR0FBUW9ELEVBQUtwRCxLQUFTNkwsRUFBVTdMLEtBRTdELElBQW1CLElBQWZ3TCxFQUNGLE1BQU0sSUFBSXhGLFVBQVUsNkJBQTZCK0YsS0FBS0MsVUFBVTVJLE1BR2xFLE9BQU9xSSxFQUFpQkQsR0EyRzFCLE1BQU10RCxFQUFhL0ksT0FBT2dELE9BQU8sS0FBVThKLE9BQ3JDMUQsRUFBU3BKLE9BQU9nRCxPQUFPLEtBQU84SixPQUM5QlgsRUFBcUIsSUFDckJHLEVBQW1CLE1BQ3ZCLE1BQU1TLEVBQVdDLE1BQU1DLEtBQUssQ0FBQ3RILE9BQVEsS0FBSzFDLElBQUksQ0FBQ2lLLEVBQUd0RSxJQUFVdUUsT0FBT0MsYUFBYSxHQUFLeEUsSUFDckYsTUFBTyxJQUNGbUUsS0FDQUEsRUFBUzlKLElBQUtvSyxHQUFjQSxFQUFVQyxpQkFKcEIsSSxnQ0NuUXpCLGdJQUtPLE1BQU1DLEVBQTBDLENBQ3JEckYsaUNBQWlDLEVBQ2pDdEMsV0FBWSxFQUNaUyxhQUFjLEdBR0htSCxFQUEyQixDQUN0QzNJLGVBQWdCLEVBQ2hCK0IsOEJBQStCLEVBQy9CSyx3QkFBeUIsSUFBZXdHLEtBQ3hDdEcsc0JBQXVCLEtBR1p1RyxFQUFpRCxDQUM1REMsU0FBVSxJQUNWQyxrQkFBbUIsSUFDbkJDLHVCQUF3QixNLCtCQ25CMUIsSUFBWUMsRUFBWiwyQ0FBWUEsR0FDVixtQ0FDQSwyQkFDQSxxREFDQSwrQ0FDQSx5REFDQSxxREFDQSx5REFDQSxtREFSRixDQUFZQSxNQUFRLE0sK0JDRmIsU0FBU0MsRUFBa0JDLEdBQ2hDLE9BQU9BLEVBQU1ySSxPQUFTc0ksRUFBU0QsR0FBUyxLQUduQyxTQUFTQyxFQUFZRCxHQUMxQixHQUFJQSxFQUFNckksT0FDUixPQUFPcUksRUFBTUEsRUFBTXJJLE9BQVMsR0FHOUIsTUFBTSxJQUFJcUUsTUFBTSwrQkFUbEIscUUsK0JDQUEseVBBU08sTUFBTWtFLEVBQ1gsWUFBNEIxSSxHQUFBLEtBQUFBLFNBSXZCLFNBQVMySSxFQUFLN0gsRUFBYThILEdBQ2hDLElBQUsxSCxPQUFPSSxjQUFjc0gsSUFBa0JBLEdBQWlCLEVBQzNELE1BQU0sSUFBSXZILFVBQVUsZ0VBQWdFdUgsa0JBRXRGLE1BQU14SSxFQUFhVSxFQUFLZCxNQUFNbUcsT0FBT3lDLEdBQWV0QyxVQUVwRCxNQUFPLENBRGUsSUFBSW9DLEVBQUs1SCxFQUFLZCxNQUFNbUcsTUFBTSxFQUFHckQsS0FBSytGLElBQUkvSCxFQUFLZCxNQUFNRyxPQUFTeUksRUFBZSxLQUN4RXhJLEdBR2xCLFNBQVMwSSxFQUFlaEksRUFBYXJDLEdBQzFDLE9BQU8sSUFBSWlLLEVBQUs1SCxFQUFLZCxNQUFNekMsT0FBT2tCLElBRzdCLFNBQVNzSyxFQUFlQyxFQUFtQkMsR0FDaEQsT0FBTyxJQUFJUCxFQUFLTSxFQUFXaEosTUFBTXpDLE9BQU8wTCxFQUFRakosUUFHM0MsU0FBU2tKLEVBQVNwSSxFQUFhcUksR0FDcEMsTUFBTS9GLEVBQVF0QyxFQUFLZCxNQUFNekIsUUFBUTRLLEdBQ2pDLElBQWUsSUFBWC9GLEVBQ0YsTUFBTSxJQUFJb0IsTUFBTSwyREFHbEIsTUFBTTRFLEVBQWV0SSxFQUFLZCxNQUFNbUcsUUFDMUJrRCxFQUFVLFlBQVNGLEdBRXpCLE9BREFDLEVBQWFFLE9BQU9sRyxFQUFPLEVBQUdpRyxHQUN2QixJQUFJWCxFQUFLVSxHQUdYLFNBQVNHLEVBQVV6SSxFQUFhMEksR0FDckMsTUFBTUMsRUFBaUIzSSxFQUFLZCxNQUFNekIsUUFBUWlMLEdBQzFDLElBQXdCLElBQXBCQyxFQUNGLE1BQU0sSUFBSWpGLE1BQU0sMkRBS2xCLE1BQU8sQ0FGUyxJQUFJa0UsRUFBSzVILEVBQUtkLE1BQU1tRyxNQUFNLEVBQUdzRCxJQUMxQixJQUFJZixFQUFLNUgsRUFBS2QsTUFBTW1HLE1BQU1zRCxLQUl4QyxTQUFTQyxFQUFRNUksR0FFdEIsTUFBTWQsRUFBUWMsRUFBS2QsTUFBTW1HLFFBQ3pCLElBQUssSUFBSXdELEVBQW1CLEVBQUdBLEVBQW1CM0osRUFBTUcsT0FBUyxFQUFHd0osSUFBb0IsQ0FDdEYsTUFBTUMsRUFBa0I5RyxLQUFLQyxNQUFNRCxLQUFLK0csVUFBWTdKLEVBQU1HLE9BQVN3SixJQUFxQkEsRUFDbEZHLEVBQWM5SixFQUFNMkosR0FDMUIzSixFQUFNMkosR0FBb0IzSixFQUFNNEosR0FDaEM1SixFQUFNNEosR0FBbUJFLEVBRTNCLE9BQU8sSUFBSXBCLEVBQUsxSSxLLDBEQ25ESCxNQUFNLEVBS25CLFlBQ21CeUUsRUFDQXNGLEVBQ0FDLEVBQ0FDLEdBSEEsS0FBQXhGLFlBQ0EsS0FBQXNGLGFBQ0EsS0FBQUMsd0JBQ0EsS0FBQUMsYUFSWixLQUFBQyxXQUFpRSxLQUNoRSxLQUFBQywyQkFBK0QsS0FDL0QsS0FBQUMsbUJBQXFCLElBQUkxRCxJQVUxQixlQUNMLElBQUsyRCxLQUFLRiwyQkFBNEIsQ0FDcEMsTUFBTUcsRUFBUyxLQUNiRCxLQUFLRiwyQkFBNkJFLEtBQUtKLFdBQVdLLEdBQ2xERCxLQUFLRSxzQkFFUEYsS0FBS0YsMkJBQTZCRSxLQUFLSixXQUFXSyxJQUkvQyxnQkFDREQsS0FBS0YsNkJBQ1BFLEtBQUtGLDJCQUEyQkssU0FDaENILEtBQUtGLDJCQUE2QixNQUkvQix1QkFDTCxNQUFNTSxFQUFlLElBQUksRUFDdkJKLEtBQUs1RixVQUNMNEYsS0FBS04sV0FDTE0sS0FBS0wsc0JBQ0xLLEtBQUtKLFlBRVAsTUFBTyxDQUNMUyxLQUFNLElBQUlDLFFBQVNDLElBQ2pCSCxFQUFhUCxXQUFjVyxJQUNyQkEsSUFDRlIsS0FBS0QsbUJBQW1CVSxJQUFJRCxHQUM1QkosRUFBYU0sZ0JBQ2JILEVBQVFDLEtBR1pKLEVBQWFPLGlCQUVmLFNBQ0VQLEVBQWFNLGtCQUtuQixxQkFDRSxPQUFPVixLQUFLRCxtQkFHTixxQkFDTixNQUFPYSxFQUFlQyxHQUFjLFlBQ2xDYixLQUFLNUYsVUFDTDRGLEtBQUtOLFdBQ0xNLEtBQUtMLHVCQUdEYSxFQUFtQkssRUFBYSxZQUFzQkQsRUFBY2pNLE9BQVMsS0FDL0U2TCxHQUNGUixLQUFLRCxtQkFBbUJVLElBQUlELEdBRTFCUixLQUFLSCxZQUNQRyxLQUFLSCxXQUFXVyxJLElDbEZWTSxFLFFBV0wsU0FBU0MsS0FBV0MsR0FDekJDLEVBQUlILEVBQVNJLFFBQVNGLEdBR2pCLFNBQVNHLEtBQVFILEdBQ3RCQyxFQUFJSCxFQUFTTSxLQUFNSixHQU9yQixTQUFTQyxFQUFJSSxFQUFvQkMsR0FDL0IsT0FBUUQsR0FDTixLQUFLUCxFQUFTUyxNQUVaQyxRQUFRQyxNQUFNLFdBQVdDLEtBQUsxUixhQUFjc1IsR0FDNUMsTUFDRixLQUFLUixFQUFTSSxRQUVaTSxRQUFRRyxLQUFLLGFBQWFELEtBQUsxUixhQUFjc1IsR0FDN0MsTUFDRixLQUFLUixFQUFTTSxLQUVaSSxRQUFRTCxLQUFLLFVBQVVPLEtBQUsxUixhQUFjc1IsR0FDMUMsTUFDRixLQUFLUixFQUFTYyxNQUVaSixRQUFRSyxNQUFNLFdBQVdILEtBQUsxUixhQUFjc1IsS0F2Q2xELFNBQVlSLEdBQ1YseUJBQ0EsNkJBQ0EsdUJBQ0EseUJBSkYsQ0FBWUEsTUFBUSxLQ0lwQixJQUFJZ0IsRUFBd0QsS0E0QzVELFNBQVNsQyxFQUFXUyxHQUNsQixNQUFNMEIsRUFBWUMsV0FBVzNCLEdBQzdCLE1BQU8sQ0FDTCxTQUNFNEIsYUFBYUYsS0E5Q25CTCxLQUFLUSxVQUFhQyxJQUNoQixHQUEwQixpQkFBZkEsRUFBTUMsTUFBcUIsQ0FBQyxFQUFHLEdBQUd2TyxTQUFTc08sRUFBTUMsTUFHMUQsT0FGQSxFQUFZLDJDQUEyQ0QsRUFBTUMsb0JBNEIzQnJNLEVBM0JvQm9NLEVBQU1DLFVBQTVETixFQTRCSyxJQUFJLEVBQ1QsSUFDSyxJQUNIL0wsY0FFRixJQUNBLElBQ0E2SixJQVJKLElBQXNDN0osRUF2Qi9CK0wsRUFPQUssRUFBTUMsS0FBS0MsaUJBT2hCLEVBQVksa0NBQ1pQLEVBQXVCUSx1QkFBdUJqQyxLQUFLa0MsS0FBTUMsSUFDdkQsRUFBWSwwQ0FDWmQsS0FBS2UsWUFBWUQsS0FDaEJFLE1BQU9DLEtEeEJMLFlBQWtCM0IsR0FDdkJDLEVBQUlILEVBQVNTLE1BQU9QLEdDd0JsQixDQUFhLHVCQUF3QjJCLE1BWHJDLEVBQ0UsOEJBQStCUixFQUFNQyxNQVJ2QyxFQUNFLG1ILCtCQ2ZOLCtLQThCTyxNQUFNUSxFQUNYLFlBQ2tCL00sRUFDQUgsRUFDQVcsRUFDQUMsR0FIQSxLQUFBVCxRQUNBLEtBQUFILFFBQ0EsS0FBQVcsYUFDQSxLQUFBQyxXQUtiLFNBQVN1TSxFQUFZak8sRUFBYUMsRUFBbUJRLEdBQzFELE9BQVFBLEVBQUtBLE1BQ1gsS0FBSyxJQUFTVyxXQUNaLE9Bc0NOLFNBQW1CcEIsRUFBYUMsRUFBbUIwSixHQUNqRCxHQUFJQSxJQUFrQjFKLEVBQU1rQixXQUMxQixNQUFNLElBQUlvRSxNQUNSLGdDQUFnQ29FLCtDQUEyRDFKLEVBQU1rQixlQUdyRyxNQUFPK00sRUFBZ0IvTSxHQUFjLFlBQUtuQixFQUFLaUIsTUFBTzBJLEdBQ2hEd0UsRUFBVyxZQUFlbk8sRUFBS2MsTUFBTyxJQUFJLElBQUtLLEVBQVczQyxJQUFLZ0IsR0FBUyxZQUFTQSxNQUN2RixPQUFPLElBQUl3TyxFQUFLRSxFQUFnQkMsRUFBVW5PLEVBQUt5QixXQUFZekIsRUFBSzBCLFNBOUNyRDBNLENBQVVwTyxFQUFNQyxFQUFPUSxFQUFLVSxZQUNyQyxLQUFLLElBQVNFLE9BQ1osT0ErQ04sU0FBZ0JyQixHQUNkLEdBQUlBLEVBQUtpQixNQUFNRixNQUFNRyxPQUNuQixNQUFNLElBQUlxRSxNQUFNLGlEQUdsQixPQUFPLElBQUl5SSxFQUNULElBQUksSUFBS2hPLEVBQUtjLE1BQU1DLE1BQU12QyxJQUFLZ0IsR0FBUyxZQUFTQSxJQUFPNkgsV0FDeEQsSUFBSSxJQUFLLElBQ1RySCxFQUFLeUIsV0FDTHpCLEVBQUswQixTQXhESTJNLENBQU9yTyxHQUNoQixLQUFLLElBQVNVLG9CQUNaLE9BMEROLFNBQXNDVixHQUNwQyxJQUFLQSxFQUFLYyxNQUFNQyxNQUFNRyxPQUNwQixNQUFNLElBQUlxRSxNQUFNLHNDQUdsQixNQUFPNEksR0FBV0csSUFBZ0IsWUFBS3RPLEVBQUtjLE1BQU8sR0FDN0N5TixFQUFnQkMsRUFBb0J4TyxFQUFLeUIsV0FBWTZNLEdBRTNELE9BQU8sSUFBSU4sRUFDVGhPLEVBQUtpQixNQUNMa04sRUFDQUksRUFDQXZPLEVBQUswQixTQXRFSStNLENBQTZCek8sR0FDdEMsS0FBSyxJQUFTVyxpQkFDWixPQXdFTixTQUFtQ1gsRUFBYUMsRUFBbUJ5TyxHQUNqRSxJQUFLMU8sRUFBS2MsTUFBTUMsTUFBTUcsT0FDcEIsTUFBTSxJQUFJcUUsTUFBTSxzQ0FHbEIsTUFBTzRJLEdBQVdHLElBQWdCLFlBQUt0TyxFQUFLYyxNQUFPLEdBQ25ELElBQ0c0TixFQUFZM04sTUFBTUcsU0FDbEJqQixFQUFNd0QsaUNBQ1A2SyxFQUFZblEsT0FBUyxJQUFLSixLQUUxQixNQUFNLElBQUl3SCxNQUFNLDZGQUVsQixHQUNFbUosRUFBWTNOLE1BQU1HLFNBQ2pCLFlBQXVCLFlBQVN3TixFQUFZM04sT0FBUXVOLEdBRXJELE1BQU0sSUFBSS9JLE1BQ1IsdVBBS0osTUFBTW9KLEVBQWEsWUFBYzNPLEVBQUswQixRQUFTZ04sRUFBYUosR0FFNUQsT0FBTyxJQUFJTixFQUNUaE8sRUFBS2lCLE1BQ0xrTixFQUNBbk8sRUFBS3lCLFdBQ0xrTixHQXJHU0MsQ0FBMEI1TyxFQUFNQyxFQUFPRCxFQUFLMEIsUUFBUUMsTUFBTWxCLEVBQUtnRSxZQUN4RSxLQUFLLElBQVNGLHNCQUNaLE9BdUdOLFNBQTRDdkUsRUFBYTBPLEdBQ3ZELE1BQU9DLEVBQVlMLEdBQWUsWUFBc0J0TyxFQUFLMEIsUUFBU2dOLEdBQ2hFSCxFQUFnQkMsRUFBb0J4TyxFQUFLeUIsV0FBWTZNLEdBQzNELE9BQU8sSUFBSU4sRUFDVGhPLEVBQUtpQixNQUNMakIsRUFBS2MsTUFDTHlOLEVBQ0FJLEdBOUdTRSxDQUFtQzdPLEVBQU1BLEVBQUswQixRQUFRQyxNQUFNbEIsRUFBS2dFLFlBQzFFLEtBQUssSUFBU0Qsb0JBQ1osT0FnSE4sU0FBa0N4RSxFQUFhME8sR0FDN0MsTUFBTUMsRUFBYSxZQUFjM08sRUFBSzBCLFFBQVNnTixHQUMvQyxPQUFPLElBQUlWLEVBQ1RoTyxFQUFLaUIsTUFDTGpCLEVBQUtjLE1BQ0xkLEVBQUt5QixXQUNMa04sR0F0SFNHLENBQXlCOU8sRUFBTUEsRUFBSzBCLFFBQVFDLE1BQU1sQixFQUFLZ0UsWUFDaEUsS0FBSyxJQUFTQyxzQkFDWixPQXdITixTQUF5QzFFLEVBQWFDLEVBQW1CL0IsRUFBY3dRLEdBQ3JGLElBQUsxTyxFQUFLeUIsV0FBV3ZELEdBQU82QyxNQUFNRyxPQUNoQyxNQUFNLElBQUlxRSxNQUFNLDZCQUE2QnJILHdCQUcvQyxNQUFPNlEsR0FBb0JULElBQWdCLFlBQUt0TyxFQUFLeUIsV0FBV3ZELEdBQVEsR0FDeEUsSUFDR3dRLEVBQVkzTixNQUFNRyxTQUNsQmpCLEVBQU13RCxpQ0FDUDZLLEVBQVluUSxPQUFTLElBQUtKLEtBRTFCLE1BQU0sSUFBSXdILE1BQU0sNkZBRWxCLEdBQ0VtSixFQUFZM04sTUFBTUcsU0FDakIsWUFBdUIsWUFBU3dOLEVBQVkzTixPQUFRdU4sR0FFckQsTUFBTSxJQUFJL0ksTUFDUixvUEFLSixNQUFNb0osRUFBYSxZQUFjM08sRUFBSzBCLFFBQVNnTixFQUFhSixHQUM1RCxPQUFPLElBQUlOLEVBQ1RoTyxFQUFLaUIsTUFDTGpCLEVBQUtjLE1BQ0wsSUFDS2QsRUFBS3lCLFdBQ1IsQ0FBQzZNLEVBQVlwUSxPQUFRNlEsR0FFdkJKLEdBdkpTSyxDQUFnQ2hQLEVBQU1DLEVBQU9RLEVBQUt2QyxNQUFPOEIsRUFBSzBCLFFBQVFDLE1BQU1sQixFQUFLZ0UsWUFDMUYsS0FBSyxJQUFTRyxtQkFDWixPQXlKTixTQUNFNUUsRUFDQUMsRUFDQWdQLEVBQ0FDLEVBQ0FDLEdBRUEsSUFDR0EsRUFBV3BPLE1BQU1HLFNBQ2pCakIsRUFBTXdELGlDQUNQeUwsRUFBYy9RLE9BQVMsSUFBS0osS0FFNUIsTUFBTSxJQUFJd0gsTUFBTSw2RkFFbEIsR0FDRTRKLEVBQVdwTyxNQUFNRyxTQUNoQixZQUF1QixZQUFTaU8sRUFBV3BPLE9BQVFtTyxHQUVwRCxNQUFNLElBQUkzSixNQUNSLHVQQUtKLE1BQU1vSixFQUFhLFlBQWEzTyxFQUFLMEIsUUFBU3VOLEVBQVlDLEVBQWVDLEdBQ3pFLE9BQU8sSUFBSW5CLEVBQ1RoTyxFQUFLaUIsTUFDTGpCLEVBQUtjLE1BQ0xkLEVBQUt5QixXQUNMa04sR0F0TFNTLENBQ0xwUCxFQUNBQyxFQUNBRCxFQUFLMEIsUUFBUUMsTUFBTWxCLEVBQUtvRSxpQkFDeEI3RSxFQUFLMEIsUUFBUUMsTUFBTWxCLEVBQUtvRSxpQkFBaUI5RCxNQUFNTixFQUFLcUUsbUJBQ3BEOUUsRUFBSzBCLFFBQVFDLE1BQU1sQixFQUFLc0Usa0JBRTVCLFFBQ0UsTUFBTSxJQUFJUSxNQUFNLHNCQUFzQjlFLEdBQVNBLEVBQWFBLFNBSTNELFNBQVM0TyxHQUFVLE1BQUNwTyxFQUFLLFFBQUVTLEVBQU8sTUFBRVosSUFDekMsT0FBUUcsRUFBTUYsTUFBTUcsU0FBV0osRUFBTUMsTUFBTUcsUUFBVVEsRUFBUUMsTUFBTXVHLE1BQU9yRyxJQUFVQSxFQUFLZCxNQUFNRyxRQUcxRixTQUFTb08sR0FBb0IsTUFBQ3JPLEVBQUssTUFBRUgsRUFBT1ksU0FBVUMsTUFBT0MsS0FDbEUsT0FDR1gsRUFBTUYsTUFBTUcsU0FDWkosRUFBTUMsTUFBTUcsUUFDYlUsRUFBYXNHLE1BQU9yRyxHQUFTQSxFQUFLZCxNQUFNbUgsTUFBTzFJLEdBQVNBLEVBQUtwQixPQUFTLElBQUtxQixPQXNLL0UsU0FBUytPLEVBQW9CL00sRUFBeUI2TSxHQUNwRCxNQUFNaUIsRUFBdUI5TixFQUFXNk0sRUFBWXBRLE9BQ3BELElBQUtxUixFQUFxQnhPLE1BQU1HLFFBQVVvTixFQUFZblEsT0FBUyxJQUFLaEIsSUFDbEUsTUFBTSxJQUFJb0ksTUFBTSw0REFFbEIsR0FDRWdLLEVBQXFCeE8sTUFBTUcsU0FDMUIsWUFBMEIsWUFBU3FPLEVBQXFCeE8sT0FBUXVOLEdBQ2pFLENBQ0EsTUFBTWtCLEVBQW9CLFlBQVNELEVBQXFCeE8sT0FDeEQsTUFBTSxJQUFJd0UsTUFDUixxQkFBcUIrSSxFQUFZblEsbUNBQW1DcVIsRUFBa0JyUixvQkFDdEYsR0FBRyxJQUFjLElBQWNtQixRQUFRa1EsRUFBa0JyUixNQUFRLFlBSXJFLE1BQU00USxFQUFvQixZQUFlUSxFQUFzQmpCLEdBQy9ELE1BQU8sSUFDRjdNLEVBQ0gsQ0FBQzZNLEVBQVlwUSxPQUFRNlEsSywrQkN0UXpCLDZSQWdETyxTQUFTVSxFQUFjakssRUFBMEJFLEVBQXdDLE1BQzlGLElBQUt6RCxPQUFPSSxjQUFjbUQsRUFBVXJFLGFBQWVxRSxFQUFVckUsWUFBYyxFQUN6RSxNQUFNLElBQUlpQixVQUNSLDZEQUE2RG9ELEVBQVVyRSwyQkFHM0UsSUFBS2MsT0FBT0ksY0FBY21ELEVBQVU1RCxlQUFpQjRELEVBQVU1RCxjQUFnQixFQUM3RSxNQUFNLElBQUlRLFVBQ1IsK0RBQStEb0QsRUFBVTVELDZCQUk3RSxJQUFJOE4sRUFBY2hLLEVBQVcsSUFBSSxJQUFLQSxHQUFZLFlBQVEsSUFBSSxJQUFLLE1BQ25FLElBQUssTUFBTWxHLEtBQVFrUSxFQUFZM08sTUFDekJ2QixFQUFLcEIsT0FBUyxJQUFLcUIsT0FDckJpUSxFQUFjLFlBQVNBLEVBQWFsUSxJQUl4QyxNQUFNbUMsRUFBaUIsR0FDdkIsSUFBSyxJQUFJOUcsRUFBSSxFQUFHQSxFQUFJMkssRUFBVTVELGFBQWMvRyxJQUFLLENBQy9DLE1BQU8yTSxFQUFnQm1JLEdBQWdCLFlBQUtELEVBQWE3VSxFQUFJLEdBQ3ZEK1UsRUFBYyxJQUFJLElBQUtELEdBQ3pCQyxFQUFZN08sTUFBTUcsT0FDcEJTLEVBQU1tRixLQUFLLFlBQVM4SSxFQUFhLFlBQVNBLEVBQVk3TyxTQUV0RFksRUFBTW1GLEtBQUs4SSxHQUViRixFQUFjbEksRUFHaEIsTUFBTyxDQUNMdEQsT0FBUSxHQUNSWCxRQUFTLEdBQ1R0RCxNQUFPLENBQ0x3RCxnQ0FBaUMrQixFQUFVL0IsZ0NBQzNDdEMsV0FBWXFFLEVBQVVyRSxZQUV4QjRDLFVBQVcsQ0FDVEMsa0JBQW1CNkwsS0FBS0MsTUFDeEI3TCxpQkFBa0I4TCxZQUFZRCxPQUVoQy9QLE1BQU8sSUFBSSxJQUNUMlAsRUFDQSxJQUFJLElBQUssSUFDVCxDQUNFLENBQUMsSUFBTTFTLFVBQVcsSUFBSSxJQUFLLElBQzNCLENBQUMsSUFBTUQsU0FBVSxJQUFJLElBQUssSUFDMUIsQ0FBQyxJQUFNaVQsT0FBUSxJQUFJLElBQUssSUFDeEIsQ0FBQyxJQUFNQyxRQUFTLElBQUksSUFBSyxLQUUzQixJQUFJLElBQVF0TyxLQUtYLFNBQVN1TyxFQUNkalEsRUFDQTZLLEdBQ0EsU0FBQzVCLEVBQVEsa0JBQUVDLEVBQWlCLHVCQUFFQyxJQUU5QixNQUFNeEosRUFBTzZQLEVBQWN4UCxHQUMzQixJQUFJa1EsRUFBZ0J2USxFQUFLRyxNQUNyQnFRLEdBQXFCLEVBQ3JCQyxFQUFZLEVBQ2hCLE1BQU1DLEVBQWlCUCxZQUFZRCxNQUNuQyxPQUFHLENBQ0QsTUFBTVMsRUFBZSxZQUFlSixFQUFlbFEsRUFBTzZLLEdBRTFELEdBREF1RixJQUNJRSxJQUFpQkosR0FBaUJFLEdBQWFuSCxHQUFZRSxFQUF1Qm1ILEdBQWUsQ0FDbkdILEVBQXFCaEgsRUFBdUJtSCxHQUM1QyxNQUVGLEtBQU1GLEVBQVksS0FBT04sWUFBWUQsTUFBUVEsR0FBa0JuSCxFQUFtQixDQUNoRmlILEVBQXFCaEgsRUFBdUJtSCxHQUM1QyxNQUVGSixFQUFnQkksRUFFbEIsTUFBTyxDQUFDM1EsRUFBTXdRLEdBR1QsU0FBU25DLEVBQVlyTyxFQUFhYSxHQUV2QyxPQUFPK1AsRUFBb0I1USxFQURQLFlBQWtCQSxFQUFLRyxNQUFPSCxFQUFLSyxNQUFPUSxHQUNoQkEsR0FHekMsU0FBU2dRLEVBQVU3USxHQUN4QixNQUFPLElBQ0ZBLEVBQ0hzRSxPQUFRLEdBQ1JYLFFBQVMsR0FDVFEsVUFBVyxDQUNUQyxrQkFBbUI2TCxLQUFLQyxNQUN4QjdMLGlCQUFrQjhMLFlBQVlELE9BRWhDL1AsTUFBT0gsRUFBSzJELFFBQVFyQyxPQUFTdEIsRUFBSzJELFFBQVEsR0FBRyxHQUFLM0QsRUFBS0csT0FJcEQsU0FBUzJRLEVBQWE5USxHQUMzQixJQUFLQSxFQUFLMkQsUUFBUXJDLE9BQ2hCLE9BQU90QixFQUdULE1BQU0rUSxFQUFhL1EsRUFBSzJELFFBQVEyRCxTQUN6QjBKLEdBQWNELEVBQVd0RyxRQUFRLEdBRXhDLE1BQU8sSUFDRnpLLEVBQ0hzRSxPQUFRLENBQUMwTSxLQUFlaFIsRUFBS3NFLFFBQzdCWCxRQUFTb04sRUFDVDVRLE1BQU82USxFQUFXLElBSWYsU0FBU0MsRUFBYWpSLEdBQzNCLElBQUtBLEVBQUtzRSxPQUFPaEQsT0FDZixPQUFPdEIsRUFHVCxNQUFPa1IsS0FBZUMsR0FBYW5SLEVBQUtzRSxPQUNsQzhNLEVBQVdELEVBQVU3UCxPQUN6QjZQLEVBQVUsR0FBRyxHQUViOUMsRUFBWSxJQUFJck8sRUFBTUcsTUFBTytRLEVBQVcsSUFBS0EsRUFBVyxJQUFJL1EsTUFFOUQsTUFBTyxJQUNGSCxFQUNIc0UsT0FBUTZNLEVBQ1J4TixRQUFTM0QsRUFBSzJELFFBQVFqRixPQUFPLENBQUN3UyxJQUM5Qi9RLE1BQU9pUixHQVlKLFNBQVNSLEVBQW9CNVEsRUFBYXFSLEVBQWtCQyxHQUNqRSxNQUFPLElBQ0Z0UixFQUNIc0UsT0FBUSxHQUNSWCxRQUFTM0QsRUFBSzJELFFBQVFqRixPQUFPLENBQUMsQ0FDNUJzQixFQUFLRyxNQUNMLElBQ0ttUixFQUNIak4saUJBQWtCOEwsWUFBWUQsVUFHbEMvUCxNQUFPa1IsSywrQkMxTVgsNElBc0JZRSxFQUtBQyxFQTNCWiw2QkFzQkEsU0FBWUQsR0FDVixrREFDQSxzREFGRixDQUFZQSxNQUFpQixLQUs3QixTQUFZQyxHQUNWLHFDQUNBLHVDQUNBLDZCQUNBLGlDQUNBLDJCQUNBLHFDQUNBLHVDQVBGLENBQVlBLE1BQWMsS0FVbkIsTUFBTUMsRUFBa0QsQ0FDN0RELEVBQWVFLFNBQ2ZGLEVBQWVHLFVBQ2ZILEVBQWVwSSxLQUNmb0ksRUFBZUksT0FDZkosRUFBZUssSUFDZkwsRUFBZU0sU0FDZk4sRUFBZU8sV0FZVixTQUFTQyxFQUFhNVIsRUFBYUMsRUFBbUJqRSxHQUMzRCxNQUFNNlYsRUF1dEJSLFNBQStCNU8sRUFBa0JoRCxFQUFtQmpFLEdBQ2xFLE9BQVFBLEdBQ04sS0FBS21WLEVBQWtCVyxjQUNyQixPQUFPN08sRUFBVW5DLE1BQU1DLE1BQU1HLE9BQVMsQ0FBQyxZQUFTK0IsRUFBVW5DLE1BQU1DLFFBQVUsR0FDNUUsS0FBS29RLEVBQWtCNU8sZ0JBQWlCLENBQ3BDLElBQUtVLEVBQVVuQyxNQUFNQyxNQUFNRyxTQUFXK0IsRUFBVWhDLE1BQU1GLE1BQU1HLE9BQzFELE1BQU8sR0FHVCxNQUFNRCxFQUFRZ0MsRUFBVWhDLE1BQU1GLE1BQU1tRyxRQUM5QnBHLEVBQVFtQyxFQUFVbkMsTUFBTUMsTUFBTW1HLFFBQzlCbkcsRUFBUSxJQUFJMEcsSUFDbEIsR0FBSTNHLEVBQU1JLE9BQVEsQ0FDaEJILEVBQU04SyxJQUFJLFlBQVMvSyxJQUVuQixJQUFLLElBQUk4RyxFQUFZM0csRUFBTUMsT0FBU2pCLEVBQU1rQixXQUFZeUcsR0FBYSxFQUFHQSxHQUFhM0gsRUFBTWtCLFdBQ3ZGSixFQUFNOEssSUFBSSxZQUFTNUssRUFBTTJHLEtBRzdCM0csRUFBTTZGLFFBQVFoRyxFQUFNdUcsVUFBVTdJLElBQUksTUFFbEMsSUFBSyxJQUFJb0osRUFBWTNHLEVBQU1DLE9BQVNqQixFQUFNa0IsV0FBWXlHLEdBQWEsRUFBR0EsR0FBYTNILEVBQU1rQixXQUN2RkosRUFBTThLLElBQUksWUFBUzVLLEVBQU0yRyxLQUUzQixNQUFPLElBQUk3RyxHQUVmLFFBQ0UsTUFBTSxJQUFJcUIsVUFBVSxnQ0FBZ0NwRyxNQWx2QnBCK1YsQ0FBc0IvUixFQUFNQyxFQUFPakUsSUFDakUsV0FBQ3lGLEVBQVUsUUFBRUMsR0FBVzFCLEVBQ3hCZ1MsRUFBa0J0USxFQUFRQyxNQUFNRyxPQUFRRCxHQUFTQSxFQUFLZCxNQUFNRyxRQUFRMUMsSUFBS3FELEdBQVMsWUFBU0EsRUFBS2QsUUFDaEdrUixFQUFxQixDQUN6QixDQUFDLElBQU1qVixVQUFXLFlBQWV5RSxFQUFXLElBQU16RSxVQUFVK0QsT0FDNUQsQ0FBQyxJQUFNaEUsU0FBVSxZQUFlMEUsRUFBVyxJQUFNMUUsU0FBU2dFLE9BQzFELENBQUMsSUFBTWlQLE9BQVEsWUFBZXZPLEVBQVcsSUFBTXVPLE9BQU9qUCxPQUN0RCxDQUFDLElBQU1rUCxRQUFTLFlBQWV4TyxFQUFXLElBQU13TyxRQUFRbFAsUUFFcERtUixFQUFvQixHQVUxQixPQVJBQSxFQUFNcEwsUUE4Q1IsU0FDRTlHLEVBQ0E2UixFQUNBRyxFQUNBQyxHLFFBT0EsTUFBTSxRQUFDdlEsR0FBVzFCLEVBQ1prUyxFQUFvQixHQUdwQkMsRUFBZUgsRUFBZ0JJLEtBQU01UyxHQUFTQSxFQUFLcEIsT0FBUyxJQUFLSyxNQUNuRTBULEdBQ0ZELEVBQU1wTCxLQUFLLENBQ1QsQ0FDRXJHLEtBQU0sSUFBUytELG9CQUNmQyxVQUFXNE4sRUFBYTNRLEVBQVN5USxJQUVuQ0EsRUFDQWYsRUFBZUUsV0FLbkIsSUFBSyxNQUFNOVIsS0FBUXdTLEVBQ2J4UyxFQUFLcEIsT0FBUyxJQUFLcUIsTUFBUUQsRUFBS3JCLE9BQVMsSUFBS2hCLEtBQ2hEK1UsRUFBTXBMLEtBQUssQ0FDVCxDQUNFckcsS0FBTSxJQUFTOEQsc0JBQ2ZFLFVBQVc0TixFQUFhM1EsRUFBU2xDLElBRW5DQSxFQUNBNFIsRUFBZUUsV0FJckIsSUFBSyxNQUFNOVIsS0FBUXFTLEVBQ2JyUyxFQUFLckIsT0FBUyxJQUFLaEIsS0FDckIrVSxFQUFNcEwsS0FBSyxDQUNULENBQ0VyRyxLQUFNLElBQVNDLHFCQUVqQmxCLEVBQ0E0UixFQUFlRSxXQU1yQixJQUFLLE1BQU05UixLQUFRd1MsRUFDYnhTLEVBQUtwQixPQUFTLElBQUtxQixNQUFRRCxFQUFLckIsT0FBUyxJQUFLZixNQUFxQyxRQUE5QixFQUFBNlUsRUFBbUJ6UyxFQUFLdEIsY0FBTSxlQUFFQyxRQUFTLElBQUtoQixLQUNyRytVLEVBQU1wTCxLQUFLLENBQ1QsQ0FDRXJHLEtBQU0sSUFBUzhELHNCQUNmRSxVQUFXNE4sRUFBYTNRLEVBQVNsQyxJQUVuQ0EsRUFDQTRSLEVBQWVFLFdBSXJCLElBQUssTUFBTTlSLEtBQVFxUyxFQUNiclMsRUFBS3JCLE9BQVMsSUFBS2YsTUFBcUMsUUFBOUIsRUFBQTZVLEVBQW1CelMsRUFBS3RCLGNBQU0sZUFBRUMsUUFBUyxJQUFLaEIsS0FDMUUrVSxFQUFNcEwsS0FBSyxDQUNULENBQ0VyRyxLQUFNLElBQVNDLHFCQUVqQmxCLEVBQ0E0UixFQUFlRSxXQU1yQixHQUFJLFlBQW9CdFIsR0FDdEIsSUFBSyxNQUFNUixLQUFRd1MsRUFBaUIsQ0FDbEMsTUFBTU0sRUFBb0JMLEVBQW1CelMsRUFBS3RCLE9BQzlDb1UsR0FBcUIsWUFBMEJBLEVBQW1COVMsSUFDcEUwUyxFQUFNcEwsS0FBSyxDQUNULENBQ0VyRyxLQUFNLElBQVM4RCxzQkFDZkUsVUFBVzROLEVBQWEzUSxFQUFTbEMsSUFFbkNBLEVBQ0E0UixFQUFlRSxXQU12QixPQUFPWSxFQTVJT0ssQ0FBK0J2UyxFQUFNNlIsRUFBb0JHLEVBQWlCQyxJQUN4RkMsRUFBTXBMLFFBOElSLFNBQ0U5RyxFQUNBNlIsR0FFQSxNQUFNLFFBQUNuUSxHQUFXMUIsRUFDWmtTLEVBQW9CLEdBR3BCTSxFQUE2QjlRLEVBQVFDLE1BQU11RixRQUFRbUIsS0FDdkQsQ0FBQ29LLEVBQU9DLElBQVVBLEVBQU0zUixNQUFNRyxPQUFTdVIsRUFBTTFSLE1BQU1HLFFBRXJELElBQUssTUFBTVcsS0FBUTJRLEVBQTRCLENBQzdDLE1BQU1HLEVBQThCOVEsRUFBS2QsTUFBTWlILFVBQVd4SSxHQUFTQSxFQUFLcEIsT0FBUyxJQUFLcUIsTUFDaEZtVCxFQUFhL1EsRUFBS2QsTUFBTTRSLEdBQzlCLEdBQ0VBLEVBQThCLEdBQzlCLENBQUMsSUFBS3BWLEtBQU0sSUFBS0MsSUFBSyxJQUFLQyxNQUFPLElBQUtDLE9BQU91QixTQUFTMlQsRUFBV3pVLE1BRWxFLFNBRUYsTUFBTTRHLEVBQWtCckQsRUFBUUMsTUFBTXFHLFVBQVdtSCxHQUMvQ0EsRUFBV3BPLE1BQU1HLFFBQ2pCLFlBQVNpTyxFQUFXcE8sT0FBTzNDLE9BQVMsSUFBS3FCLE1BQ3pDLFlBQXVCLFlBQVMwUCxFQUFXcE8sT0FBUTZSLElBRWpEN04sR0FBbUIsR0FDckJtTixFQUFNcEwsS0FBSyxDQUNULENBQ0VyRyxLQUFNLElBQVNtRSxtQkFDZkMsZ0JBQWlCd04sRUFBYTNRLEVBQVNrUixHQUN2QzdOLGtCQUNBRCxrQkFBbUI2TixHQUVyQkMsRUFDQXhCLEVBQWVHLFlBTXJCLE1BQU1zQixFQUFpQm5SLEVBQVFDLE1BRTVCRyxPQUFRRCxHQUFTQSxFQUFLZCxNQUFNRyxPQUFTLElBQU1XLEVBQUtkLE1BQU0sR0FBRzNDLE9BQVMsSUFBS0ssTUFBUW9ELEVBQUtkLE1BQU0sR0FBRzVDLE9BQVMsSUFBS0osT0FDM0dTLElBQUtxRCxHQUFTQSxFQUFLZCxNQUFNcVIsS0FBTTVTLEdBQVNBLEVBQUtyQixPQUFTLElBQUtKLE1BQVF5QixFQUFLcEIsT0FBUyxJQUFLcUIsT0FDdEZxQyxPQUFRZ1IsS0FBc0JBLEdBQWlCdFUsSUFBS2dCLEdBQVNBLEdBRTdEbEIsT0FBT3VULEVBQW1CL1AsT0FBUXRDLEdBQVNBLEVBQUtyQixPQUFTLElBQUtKLE9BQzNEZ1YsRUFBaUJyUixFQUFRQyxNQUFNcUcsVUFBV25HLElBQVVBLEVBQUtkLE1BQU1HLFFBQ3JFLEdBQUkyUixFQUFlM1IsUUFBVTZSLEdBQWtCLEVBQzdDLElBQUssTUFBTUMsS0FBUUgsRUFBZ0IsQ0FDakMsTUFBTUksRUFBa0JwQixFQUFtQjVTLFNBQVMrVCxHQUNsREEsRUFFQSxZQUFTdFIsRUFBUUMsTUFBTTBRLEVBQWEzUSxFQUFTc1IsSUFBT2pTLE9BU3RELEdBUm1EVyxFQUFRQyxNQUFNeVEsS0FBTXZRLElBQ3JFLE1BQU1xUixFQUFlclIsRUFBS2QsTUFBTWUsT0FBUXRDLEdBQVNBLEVBQUtwQixPQUFTLElBQUtxQixNQUNwRSxPQUNFb0MsRUFBS2QsTUFBTUcsT0FBU2dTLEVBQWFoUyxRQUNqQ2dTLEVBQWFoUyxRQUNiLFlBQXVCK1IsRUFBaUJDLEVBQWEsTUFHVCxDQUM5QyxNQUFNck8sRUFBa0J3TixFQUFhM1EsRUFBU3NSLEdBQzlDZCxFQUFNcEwsS0FBSyxDQUNUK0ssRUFBbUI1UyxTQUFTK1QsR0FDMUIsQ0FDRXZTLEtBQU0sSUFBU0UsaUJBQ2Y4RCxVQUFXc08sR0FHYixDQUNFdFMsS0FBTSxJQUFTbUUsbUJBQ2ZDLGtCQUNBRSxnQkFBaUJnTyxFQUNqQmpPLGtCQUFtQnBELEVBQVFDLE1BQU1rRCxHQUFpQjlELE1BQU16QixRQUFRMFQsSUFFcEVBLEVBQ0E1QixFQUFlRyxhQU12QixPQUFPVyxFQWxPT2lCLENBQStCblQsRUFBTTZSLElBQ25ESyxFQUFNcEwsUUFvT1IsU0FBb0M5RyxFQUFhNlIsR0FDL0MsTUFBTUssRUFBb0IsSUFDcEIsUUFBQ3hRLEdBQVcxQixFQUdaNlMsRUFBaUJuUixFQUFRQyxNQUU1QkcsT0FBUUQsR0FBU0EsRUFBS2QsTUFBTUcsT0FBUyxJQUFNVyxFQUFLZCxNQUFNLEdBQUczQyxPQUFTLElBQUtLLE1BQVFvRCxFQUFLZCxNQUFNLEdBQUc1QyxPQUFTLElBQUtKLE9BQzNHUyxJQUFLcUQsR0FBU0EsRUFBS2QsTUFBTXFSLEtBQU01UyxHQUFTQSxFQUFLckIsT0FBUyxJQUFLSixNQUFReUIsRUFBS3BCLE9BQVMsSUFBS3FCLE9BQ3RGcUMsT0FBUWdSLEtBQXNCQSxHQUFpQnRVLElBQUtnQixHQUFTQSxHQUU3RGxCLE9BQU91VCxFQUFtQi9QLE9BQVF0QyxHQUFTQSxFQUFLckIsT0FBUyxJQUFLSixPQUMzRGdWLEVBQWlCclIsRUFBUUMsTUFBTXFHLFVBQVduRyxJQUFVQSxFQUFLZCxNQUFNRyxRQUNyRSxHQUFJMlIsRUFBZTNSLFFBQVU2UixHQUFrQixFQUM3QyxJQUFLLE1BQU1DLEtBQVFILEVBQWdCLENBQ2pDLE1BQU1JLEVBQWtCcEIsRUFBbUI1UyxTQUFTK1QsR0FDbERBLEVBRUEsWUFBU3RSLEVBQVFDLE1BQU0wUSxFQUFhM1EsRUFBU3NSLElBQU9qUyxPQVV0RCxHQVR5QlcsRUFBUUMsTUFDOUJuRCxJQUFLcUQsR0FBU0EsRUFBS2QsTUFBTWUsT0FBUXRDLEdBQVNBLEVBQUtwQixPQUFTLElBQUtxQixPQUM3RHFDLE9BQVFzUixHQUFjQSxFQUFVbFMsUUFDaEMxQyxJQUFJLENBQUM0VSxFQUFXM0ssRUFBRzlHLElBQVUsQ0FBQ3lSLEVBQVd2UCxLQUFLK0YsT0FBT2pJLEVBQU1uRCxJQUFLcUQsR0FBU0EsRUFBS1gsV0FDOUVZLE9BQU8sRUFBRXNSLEVBQVdDLEtBQTJCRCxFQUFVbFMsU0FBV21TLEdBQ3BFN1UsSUFBSSxFQUFFNFUsS0FBZUEsR0FDNENoQixLQUNqRWtCLEdBQWlCLFlBQXVCTCxFQUFpQkssRUFBYSxLQUV6QixDQUM5QyxNQUFNek8sRUFBa0J3TixFQUFhM1EsRUFBU3NSLEdBQzlDZCxFQUFNcEwsS0FBSyxDQUNUK0ssRUFBbUI1UyxTQUFTK1QsR0FDMUIsQ0FDRXZTLEtBQU0sSUFBU0UsaUJBQ2Y4RCxVQUFXc08sR0FHYixDQUNFdFMsS0FBTSxJQUFTbUUsbUJBQ2ZDLGtCQUNBRSxnQkFBaUJnTyxFQUNqQmpPLGtCQUFtQnBELEVBQVFDLE1BQU1rRCxHQUFpQjlELE1BQU16QixRQUFRMFQsSUFFcEVBLEVBQ0E1QixFQUFlcEksUUFNdkIsT0FBT2tKLEVBdFJPcUIsQ0FBMkJ2VCxFQUFNNlIsSUFDL0NLLEVBQU1wTCxRQXdSUixTQUFzQzlHLEdBQ3BDLE1BQU1rUyxFQUFvQixJQUNwQixRQUFDeFEsR0FBVzFCLEVBSVp3VCxFQUFpQjlSLEVBQVFDLE1BQzVCRyxPQUFRRCxHQUFTQSxFQUFLZCxNQUFNRyxPQUFTLEdBQ3JDWSxPQUFRRCxHQUF5RSxJQUFoRUEsRUFBS2QsTUFBTWUsT0FBUXRDLEdBQVNBLEVBQUtwQixPQUFTLElBQUtxQixNQUFNeUIsUUFDdEUxQyxJQUFLcUQsR0FBUyxZQUFTQSxFQUFLZCxRQUM1QmUsT0FBUXRDLEdBQVMsQ0FBQyxJQUFLakMsS0FBTSxJQUFLQyxJQUFLLElBQUtDLE1BQU8sSUFBS0MsT0FBT3VCLFNBQVNPLEVBQUtyQixPQUNoRixJQUFLLE1BQU1zVixLQUFpQkQsRUFBZ0IsQ0FDMUMsTUFBTTNPLEVBQWtCd04sRUFBYTNRLEVBQVMrUixHQUN4Q0MsRUFBbUJoUyxFQUFRQyxNQUFNRyxPQUFRRCxHQUM3Q0EsRUFBS2QsTUFBTUcsUUFDWCxZQUFTVyxFQUFLZCxPQUFPM0MsT0FBUyxJQUFLcUIsTUFDbkMsWUFBdUIsWUFBU29DLEVBQUtkLE9BQVEwUyxJQUUvQyxJQUFLLE1BQU1FLEtBQW1CRCxFQUM1QnhCLEVBQU1wTCxLQUFLLENBQ1QsQ0FDRXJHLEtBQU0sSUFBU21FLG1CQUNmQyxrQkFDQUUsZ0JBQWlCckQsRUFBUUMsTUFBTXJDLFFBQVFxVSxHQUN2QzdPLGtCQUFtQnBELEVBQVFDLE1BQU1rRCxHQUFpQjlELE1BQU16QixRQUFRbVUsSUFFbEVBLEVBQ0FyQyxFQUFlSSxTQUtyQixPQUFPVSxFQXhUTzBCLENBQTZCNVQsSUFDM0NrUyxFQUFNcEwsUUEwVFIsU0FBbUM5RyxHQUNqQyxNQUFNa1MsRUFBb0IsSUFDcEIsUUFBQ3hRLEdBQVcxQixFQUdaNlQsRUFBc0JuUyxFQUFRQyxNQUFNbkQsSUFDdkNxRCxHQUFTQSxFQUFLZCxNQUFNZSxPQUFRdEMsR0FBU0EsRUFBS3BCLE9BQVMsSUFBS3FCLE9BQ3pEcUMsT0FDQ0QsR0FBU0EsRUFBS1gsUUFFWDRTLEVBQXVCRCxFQUFvQi9SLE9BQzlDRCxHQUFTSCxFQUFRQyxNQUFNMFEsRUFBYTNRLEVBQVNHLEVBQUssS0FBS2QsTUFBTSxHQUFHM0MsT0FBUyxJQUFLSyxNQUVqRixJQUFLLE1BQU1vRCxLQUFRaVMsRUFBc0IsQ0FDdkMsTUFBTUMsRUFBZ0JsUyxFQUFLLEdBQzNCLElBQUssTUFBTW1TLEtBQWFILEVBQXFCLENBQzNDLE1BQU1JLEVBQW1CLFlBQVNELEdBQ2xDLEdBQUksWUFBdUJDLEVBQWtCRixHQUFnQixDQUMzRCxNQUFNbFAsRUFBa0J3TixFQUFhM1EsRUFBU3FTLEdBQzlDN0IsRUFBTXBMLEtBQUssQ0FDVCxDQUNFckcsS0FBTSxJQUFTbUUsbUJBQ2ZDLGtCQUNBRSxnQkFBaUJzTixFQUFhM1EsRUFBU3VTLEdBQ3ZDblAsa0JBQW1CcEQsRUFBUUMsTUFBTWtELEdBQWlCOUQsTUFBTXpCLFFBQVF5VSxJQUVsRUEsRUFDQTNDLEVBQWVLLFFBT3ZCLE1BQU15QyxFQUEwQnhTLEVBQVFDLE1BQU1HLE9BQzNDRCxHQUFTQSxFQUFLZCxNQUFNRyxRQUFVVyxFQUFLZCxNQUFNbUgsTUFBTzFJLEdBQVNBLEVBQUtwQixPQUFTLElBQUtxQixPQUsvRSxHQUhzQmlDLEVBQVFDLE1BQU1HLE9BQ2pDRCxHQUFTQSxFQUFLZCxNQUFNb1QsS0FBTTNVLEdBQVNBLEVBQUtwQixPQUFTLElBQUtxQixNQUFRRCxFQUFLckIsT0FBUyxJQUFLSixPQUVsRW1ELE9BQ2hCLElBQUssTUFBTStOLEtBQWNpRixFQUF5QixDQUNoRCxNQUFNSCxFQUFnQjlFLEVBQVdsTyxNQUFNLEdBQ3ZDLElBQUssTUFBTWlULEtBQWFILEVBQXFCLENBQzNDLE1BQU1JLEVBQW1CLFlBQVNELEdBQ2xDLEdBQUksWUFBdUJDLEVBQWtCRixHQUFnQixDQUMzRCxNQUFNbFAsRUFBa0J3TixFQUFhM1EsRUFBU3FTLEdBQzlDN0IsRUFBTXBMLEtBQUssQ0FDVCxDQUNFckcsS0FBTSxJQUFTbUUsbUJBQ2ZDLGtCQUNBRSxnQkFBaUJzTixFQUFhM1EsRUFBU3VTLEdBQ3ZDblAsa0JBQW1CcEQsRUFBUUMsTUFBTWtELEdBQWlCOUQsTUFBTXpCLFFBQVF5VSxJQUVsRUEsRUFDQTNDLEVBQWVLLFFBT3pCLE9BQU9TLEVBeFhPa0MsQ0FBMEJwVSxJQUN4Q2tTLEVBQU1wTCxRQTBYUixTQUNFOUcsRUFDQTZSLEVBQ0FJLEVBQ0FoUyxHQUVBLE1BQU1pUyxFQUFvQixJQUNwQixRQUFDeFEsR0FBVzFCLEVBQ1pxVSxFQUFzQzlZLE9BQU9nRCxPQUFPMFQsR0FBb0JuUSxPQUFRdEMsR0FBU0EsR0FHL0YsSUFBSyxNQUFNOFUsS0FBa0JELEVBQTRCLENBU3ZELElBUnNDM1MsRUFBUUMsTUFBTXdTLEtBQU10UyxJQUN4RCxNQUFNMFMsRUFBcUIxUyxFQUFLZCxNQUFNcVIsS0FBTTVTLEdBQVNBLEVBQUtwQixPQUFTLElBQUtxQixNQUN4RSxPQUNFOFUsR0FDQTFTLEVBQUtkLE1BQU0sS0FBT3dULEdBQ2xCLFlBQXVCRCxFQUFnQkMsS0FJekMsU0FHRixNQUFNeFAsRUFBa0JyRCxFQUFRQyxNQUFNcUcsVUFBV25HLElBQy9DLE1BQU0yUyxFQUFXLFlBQWUzUyxFQUFLZCxPQUNyQyxPQUFPeVQsR0FBWUEsRUFBU3BXLE9BQVMsSUFBS3FCLE1BQVEsWUFBdUIrVSxFQUFVRixLQUVqRnZQLEdBQW1CLEdBQ3JCbU4sRUFBTXBMLEtBQUssQ0FDVCxDQUNFNUksTUFBT29XLEVBQWVwVyxNQUN0QnVDLEtBQU0sSUFBU2lFLHNCQUNmRCxVQUFXTSxHQUVidVAsRUFDQWxELEVBQWVNLFdBTXJCLElBQUssTUFBTTRDLEtBQWtCRCxFQUE0QixDQUV2RCxJQURpQ3hDLEVBQW1Cc0MsS0FBTTNVLEdBQVMsWUFBdUI4VSxFQUFnQjlVLElBRXhHLFNBR0YsTUFBTXVGLEVBQWtCckQsRUFBUUMsTUFBTXFHLFVBQVduRyxJQUMvQyxNQUFNMlMsRUFBVyxZQUFlM1MsRUFBS2QsT0FDckMsT0FBT3lULEdBQVlBLEVBQVNwVyxPQUFTLElBQUtxQixNQUFRLFlBQXVCK1UsRUFBVUYsS0FFakZ2UCxHQUFtQixHQUNyQm1OLEVBQU1wTCxLQUFLLENBQ1QsQ0FDRTVJLE1BQU9vVyxFQUFlcFcsTUFDdEJ1QyxLQUFNLElBQVNpRSxzQkFDZkQsVUFBV00sR0FFYnVQLEVBQ0FsRCxFQUFlTSxXQUtyQixNQUFNcUIsRUFBaUJyUixFQUFRQyxNQUFNcUcsVUFBV3lNLElBQW1CQSxFQUFjMVQsTUFBTUcsUUFHdkYsSUFBSyxNQUFNVyxLQUFRSCxFQUFRQyxNQUFPLENBQ2hDLE1BQU0rUyxFQUFZN1MsRUFBS2QsTUFBTWlILFVBQVd4SSxHQUFTQSxFQUFLcEIsT0FBUyxJQUFLcUIsTUFBUUQsRUFBS3JCLE9BQVMsSUFBS0osTUFDekZpVixFQUFPblIsRUFBS2QsTUFBTTJULEdBQ3BCMUIsR0FBUTBCLEVBQVksR0FBSzdTLEVBQUtkLE1BQU0yVCxFQUFZLEdBQUd0VyxPQUFTLElBQUtLLE1BQVFzVSxHQUFrQixHQUM3RmIsRUFBTXBMLEtBQUssQ0FDVCxDQUNFckcsS0FBTSxJQUFTbUUsbUJBQ2ZDLGdCQUFpQndOLEVBQWEzUSxFQUFTc1IsR0FDdkNqTyxnQkFBaUJnTyxFQUNqQmpPLGtCQUFtQjRQLEdBRXJCMUIsRUFDQTVCLEVBQWVNLFdBTXJCLE1BQU13QyxFQUEwQnhTLEVBQVFDLE1BQU1HLE9BQzNDRCxHQUFTQSxFQUFLZCxNQUFNRyxRQUFVVyxFQUFLZCxNQUFNbUgsTUFBTzFJLEdBQVNBLEVBQUtwQixPQUFTLElBQUtxQixPQUV6RWtWLEVBQXdCalQsRUFBUUMsTUFBTUcsT0FDekNELEdBQVNBLEVBQUtkLE1BQU1vVCxLQUFNM1UsR0FBU0EsRUFBS3BCLE9BQVMsSUFBS3FCLE9BRXpELElBQUssTUFBTXdQLEtBQWNpRixFQUF5QixDQUNoRCxNQUFNSCxFQUFnQjlFLEVBQVdsTyxNQUFNLEdBQ3ZDLElBQUssTUFBTWlULEtBQWFXLEVBQXVCLENBQzdDLE1BQU1WLEVBQW1CLFlBQVNELEVBQVVqVCxPQUM1QyxHQUFJLFlBQXVCa1QsRUFBa0JGLEdBQWdCLENBQzNELE1BQU1sUCxFQUFrQndOLEVBQWEzUSxFQUFTcVMsR0FDOUM3QixFQUFNcEwsS0FBSyxDQUNULENBQ0VyRyxLQUFNLElBQVNtRSxtQkFDZkMsa0JBQ0FFLGdCQUFpQnNOLEVBQWEzUSxFQUFTdVMsR0FDdkNuUCxrQkFBbUJwRCxFQUFRQyxNQUFNa0QsR0FBaUI5RCxNQUFNekIsUUFBUXlVLElBRWxFQSxFQUNBM0MsRUFBZU0sYUFPdkIsSUFBSyxNQUFNbFMsS0FBUXFTLEVBQ2pCLElBQUssTUFBTWhRLEtBQVFILEVBQVFDLE1BQU8sQ0FDaEMsTUFBTTZTLEVBQVcsWUFBZTNTLEVBQUtkLE9BQ2pDeVQsR0FBWUEsRUFBU3BXLE9BQVMsSUFBS3FCLE1BQVEsWUFBdUIrVSxFQUFVaFYsSUFDOUUwUyxFQUFNcEwsS0FBSyxDQUNULENBQ0VyRyxLQUFNLElBQVNFLGlCQUNmOEQsVUFBVzROLEVBQWEzUSxFQUFTOFMsSUFFbkNoVixFQUNBNFIsRUFBZU0sV0FPdkIsSUFBSyxNQUFNa0QsS0FBYS9DLEVBQ3RCLElBQUssTUFBTXlDLEtBQWtCRCxFQUN2QixZQUEwQkMsRUFBZ0JNLElBQzVDMUMsRUFBTXBMLEtBQUssQ0FDVCxDQUNFckcsS0FBTSxJQUFTQyxxQkFFakJrVSxFQUNBeEQsRUFBZU0sV0FPdkIsR0FBSXFCLEdBQWtCLEVBQUcsQ0FDdkIsTUFBTThCLEVBQWM1VSxFQUFNd0QsZ0NBQ3hCb08sRUFFQUEsRUFBbUIvUCxPQUFRdEMsR0FBU0EsRUFBS3JCLE9BQVMsSUFBS0osTUFDekQsSUFBSyxNQUFNeUIsS0FBUXFWLEVBQ2pCM0MsRUFBTXBMLEtBQUssQ0FDVCxDQUNFckcsS0FBTSxJQUFTRSxpQkFDZjhELFVBQVdzTyxHQUVidlQsRUFDQTRSLEVBQWVNLFdBS3JCLE9BQU9RLEVBNWhCTzRDLENBQThCOVUsRUFBTTZSLEVBQW9CSSxFQUFvQmhTLElBQzFGaVMsRUFBTXBMLFFBOGhCUixTQUNFOUcsRUFDQUMsRUFDQTRSLEVBQ0FJLEdBRUEsTUFBTUMsRUFBb0IsSUFDcEIsUUFBQ3hRLEdBQVcxQixFQUdsQixJQUFLLE1BQU02QixLQUFRSCxFQUFRQyxNQUFPLENBQ2hDLE1BQU02UyxFQUFXLFlBQWUzUyxFQUFLZCxPQUNyQyxJQUFLeVQsR0FBWUEsRUFBU3BXLE9BQVMsSUFBS0ssS0FDdEMsU0FHRixNQUFNNlYsRUFBaUJyQyxFQUFtQnVDLEVBQVN0VyxPQUNuRCxJQUFLb1csSUFBbUIsWUFBMEJBLEVBQWdCRSxHQUNoRSxTQUdGLE1BQU1PLEVBQWlCbFQsRUFBS2QsTUFBTW1HLE9BQU8sR0FBRyxHQUc1QyxHQUFJckYsRUFBS2QsTUFBTUcsT0FBUyxHQUFLNlQsRUFBZTNXLE9BQVMsSUFBS0ssS0FDeER5VCxFQUFNcEwsS0FBSyxDQUNULENBQ0VyRyxLQUFNLElBQVM4RCxzQkFDZkUsVUFBVzROLEVBQWEzUSxFQUFTOFMsSUFFbkNBLEVBQ0FwRCxFQUFlTyxpQkFNbkIsSUFBSyxNQUFNcUMsS0FBYXRTLEVBQVFDLE1BQU8sQ0FDckMsTUFBTTRTLEVBQXFCUCxFQUFValQsTUFBTXFSLEtBQU01UyxHQUFTQSxFQUFLcEIsT0FBUyxJQUFLcUIsTUFFM0U4VSxHQUNBUCxFQUFValQsTUFBTSxLQUFPd1QsR0FDdkIsWUFBdUJRLEVBQWdCUixJQUV2Q3JDLEVBQU1wTCxLQUFLLENBQ1QsQ0FDRXJHLEtBQU0sSUFBUzhELHNCQUNmRSxVQUFXNE4sRUFBYTNRLEVBQVM4UyxJQUVuQ0EsRUFDQXBELEVBQWVPLGFBT3ZCLElBQUssTUFBTTlQLEtBQVFILEVBQVFDLE1BQU8sQ0FDaEMsTUFBTTZTLEVBQVcsWUFBZTNTLEVBQUtkLE9BQ3JDLElBQUt5VCxHQUFZQSxFQUFTcFcsT0FBUyxJQUFLSyxLQUN0QyxTQUdGLE1BQU02VixFQUFpQnJDLEVBQW1CdUMsRUFBU3RXLE9BQ25ELElBQUtvVyxJQUFtQixZQUEwQkEsRUFBZ0JFLEdBQ2hFLFNBSUYsSUFBSyxNQUFNSSxLQUFhL0MsRUFDbEIsWUFBMEIyQyxFQUFVSSxJQUN0QzFDLEVBQU1wTCxLQUFLLENBQ1QsQ0FDRXJHLEtBQU0sSUFBUzhELHNCQUNmRSxVQUFXNE4sRUFBYTNRLEVBQVM4UyxJQUVuQ0EsRUFDQXBELEVBQWVPLFlBTXJCLEdBQUk5UCxFQUFLZCxNQUFNRyxRQUFVLEVBQ3ZCLFNBRUYsTUFBTTZULEVBQWlCbFQsRUFBS2QsTUFBTW1HLE9BQU8sR0FBRyxHQUM1QyxHQUFJNk4sRUFBZTNXLE9BQVMsSUFBS3FCLEtBQy9CLElBQUssTUFBTW1WLEtBQWEvQyxFQUNsQixZQUF1QmtELEVBQWdCSCxJQUN6QzFDLEVBQU1wTCxLQUFLLENBQ1QsQ0FDRXJHLEtBQU0sSUFBUzhELHNCQUNmRSxVQUFXNE4sRUFBYTNRLEVBQVM4UyxJQUVuQ0EsRUFDQXBELEVBQWVPLFlBT3pCLE1BQU1vQixFQUFpQnJSLEVBQVFDLE1BQU1xRyxVQUFXbkcsSUFBVUEsRUFBS2QsTUFBTUcsUUFHckUsR0FBSWpCLEVBQU13RCxpQ0FBbUNzUCxHQUFrQixFQUM3RCxJQUFLLE1BQU12VCxLQUFRcVMsRUFBbUIzSyxRQUFRbUIsS0FBSyxDQUFDdkosRUFBT0MsSUFBVSxZQUFZQSxFQUFPRCxJQUN0Rm9ULEVBQU1wTCxLQUFLLENBQ1QsQ0FDRXJHLEtBQU0sSUFBU0UsaUJBQ2Y4RCxVQUFXc08sR0FFYnZULEVBQ0E0UixFQUFlTyxZQU1yQixHQUFJMVIsRUFBTXdELGlDQUFtQ3NQLEdBQWtCLEVBQUcsQ0FDaEUsTUFBTWlDLEVBQWN0VCxFQUFRQyxNQUFNRyxPQUMvQkQsR0FBU0EsRUFBS2QsTUFBTUcsUUFBVVcsRUFBS2QsTUFBTSxHQUFHM0MsT0FBUyxJQUFLSyxNQUFRLFlBQVNvRCxFQUFLZCxPQUFPM0MsT0FBUyxJQUFLcUIsTUFDdEc0SSxLQUNBLENBQUNvSyxFQUFPQyxJQUNOQSxFQUFNM1IsTUFBTWUsT0FBUXRDLEdBQVNBLEVBQUtwQixPQUFTLElBQUtxQixNQUFNeUIsT0FDdER1UixFQUFNMVIsTUFBTWUsT0FBUXRDLEdBQVNBLEVBQUtwQixPQUFTLElBQUtxQixNQUFNeUIsUUFJMUQsSUFBSyxNQUFNVyxLQUFRbVQsRUFBYSxDQUM5QixNQUFNQyxFQUFlcFQsRUFBS2QsTUFBTWlILFVBQVd4SSxHQUFTQSxFQUFLcEIsT0FBUyxJQUFLcUIsTUFDdkV5UyxFQUFNcEwsS0FBSyxDQUNULENBQ0VyRyxLQUFNLElBQVNtRSxtQkFDZkMsZ0JBQWlCd04sRUFBYTNRLEVBQVNHLEVBQUtkLE1BQU1rVSxJQUNsRGxRLGdCQUFpQmdPLEVBQ2pCak8sa0JBQW1CbVEsR0FFckJwVCxFQUFLZCxNQUFNa1UsR0FDWDdELEVBQWVPLGFBTXJCLElBQUssTUFBTTlQLEtBQVFILEVBQVFDLE1BQU8sQ0FDaEMsSUFBS0UsRUFBS2QsTUFBTUcsT0FDZCxTQUdGLE1BQU1zVCxFQUFXLFlBQVMzUyxFQUFLZCxPQUN6QnVULEVBQWlCckMsRUFBbUJ1QyxFQUFTdFcsT0FDL0NvVyxHQUFrQixZQUEwQkEsRUFBZ0JFLElBQzlEdEMsRUFBTXBMLEtBQUssQ0FDVCxDQUNFckcsS0FBTSxJQUFTOEQsc0JBQ2ZFLFVBQVc0TixFQUFhM1EsRUFBUzhTLElBRW5DQSxFQUNBcEQsRUFBZU8sWUFLckIsT0FBT08sRUFuc0JPZ0QsQ0FBZ0NsVixFQUFNQyxFQUFPNFIsRUFBb0JJLElBS2pGLFNBQXdDM1AsR0FDdEMsTUFBTTZTLEVBQXNDN1MsRUFBTVIsT0FBTyxFQUFFckIsS0FBVUEsRUFBS0EsT0FBUyxJQUFTaUUsdUJBQzVGLEdBQUl5USxFQUFvQ2pVLFFBQVVpVSxFQUFvQ2pVLFNBQVdvQixFQUFNcEIsT0FDckcsT0FBT2lVLEVBR1QsT0FBTzdTLEVBVEE4UyxDQVlULFNBQThCOVMsR0FDNUIsTUFBTStTLEVBQTRCLEdBRWxDLElBQUssTUFBTWhWLEtBQVFpQyxFQUFPLENBQ0srUyxFQUFjbEIsS0FBTW1CLEdBQy9DQyxFQUF5QmxWLEVBQUssR0FBSWlWLEVBQVUsS0FDNUNqVixFQUFLLEtBQU9pVixFQUFVLEtBR3RCRCxFQUFjdk8sS0FBS3pHLEdBSXZCLE9BQU9nVixFQUVQLFNBQVNFLEVBQTRCQyxFQUFZQyxHQUMvQyxNQUFNQyxFQUFRbmEsT0FBT3dNLEtBQUt5TixHQUNwQkcsRUFBUXBhLE9BQU93TSxLQUFLME4sR0FDMUIsT0FBSUMsRUFBTXhVLFNBQVd5VSxFQUFNelUsUUFJcEJ3VSxFQUFNeE4sTUFBTzlMLEdBQVFvWixFQUFRcFosS0FBU3FaLEVBQVFyWixLQWxDakJ3WixDQUFxQjFELElBbXVCN0QsU0FBU0csRUFBYTNRLEVBQW1CbEMsR0FDdkMsT0FBT2tDLEVBQVFDLE1BQU1xRyxVQUFXbkcsR0FBU0EsRUFBS2QsTUFBTTlCLFNBQVNPLE0sK0JDaHpCL0QsbU1BUU8sTUFBTXFXLEVBQ1gsWUFBNEJsVSxHQUFBLEtBQUFBLFNBSXZCLFNBQVNtVSxFQUFjcFUsRUFBbUJHLEVBQWFyQyxHQUM1RCxNQUFNaUYsRUFBWS9DLEVBQVFDLE1BQU1yQyxRQUFRdUMsR0FDeEMsSUFBbUIsSUFBZjRDLEVBQ0YsTUFBTSxJQUFJYyxNQUFNLDhEQUdsQixNQUFNd1EsRUFBYyxZQUFlbFUsRUFBTXJDLEdBQ25Dd1csRUFBZXRVLEVBQVFDLE1BQU11RixRQUVuQyxPQURBOE8sRUFBYTNMLE9BQU81RixFQUFXLEVBQUdzUixHQUMzQixJQUFJRixFQUFRRyxHQUdkLFNBQVNDLEVBQXNCdlUsRUFBbUJHLEdBQ3ZELE1BQU00QyxFQUFZL0MsRUFBUUMsTUFBTXJDLFFBQVF1QyxHQUN4QyxJQUFtQixJQUFmNEMsRUFDRixNQUFNLElBQUljLE1BQU0sOERBRWxCLElBQUsxRCxFQUFLZCxNQUFNRyxPQUNkLE1BQU0sSUFBSXFFLE1BQU0sd0NBR2xCLE1BQU8yUSxHQUFnQkMsSUFBWSxZQUFLdFUsRUFBTSxHQUN4Q21VLEVBQWV0VSxFQUFRQyxNQUFNdUYsUUFFbkMsT0FEQThPLEVBQWEzTCxPQUFPNUYsRUFBVyxFQUFHeVIsR0FDM0IsQ0FBQyxJQUFJTCxFQUFRRyxHQUFlRyxHQUc5QixTQUFTQyxFQUFjMVUsRUFBbUJHLEdBQy9DLElBQUtBLEVBQUtkLE1BQU1HLE9BQ2QsTUFBTSxJQUFJcUUsTUFBTSwrQkFFbEIsR0FBSSxZQUFTMUQsRUFBS2QsT0FBTzNDLE9BQVMsSUFBS3FCLEtBQ3JDLE1BQU0sSUFBSThGLE1BQU0sbUNBR2xCLE1BQU1kLEVBQVkvQyxFQUFRQyxNQUFNckMsUUFBUXVDLEdBQ3hDLElBQW1CLElBQWY0QyxFQUNGLE1BQU0sSUFBSWMsTUFBTSw4REFHbEIsTUFBTXdRLEVBQWMsWUFBU2xVLEVBQU0sWUFBU0EsRUFBS2QsUUFDM0NpVixFQUFldFUsRUFBUUMsTUFBTXVGLFFBRW5DLE9BREE4TyxFQUFhM0wsT0FBTzVGLEVBQVcsRUFBR3NSLEdBQzNCLElBQUlGLEVBQVFHLEdBR2QsU0FBU0ssRUFBYTNVLEVBQW1CdU4sRUFBbUJDLEVBQXNCQyxHQUN2RixNQUFNdEssRUFBa0JuRCxFQUFRQyxNQUFNckMsUUFBUTJQLEdBQ3hDbEssRUFBa0JyRCxFQUFRQyxNQUFNckMsUUFBUTZQLEdBQzlDLElBQXlCLElBQXJCdEssRUFDRixNQUFNLElBQUlVLE1BQU0scUVBRWxCLElBQXlCLElBQXJCUixFQUNGLE1BQU0sSUFBSVEsTUFBTSxxRUFHbEIsTUFBTytRLEVBQXFCQyxHQUFhLFlBQVV0SCxFQUFZQyxHQUN6RDhHLEVBQWV0VSxFQUFRQyxNQUFNdUYsUUFHbkMsT0FGQThPLEVBQWEzTCxPQUFPeEYsRUFBaUIsRUFBR3lSLEdBQ3hDTixFQUFhM0wsT0FBT3RGLEVBQWlCLEVBQUcsWUFBZW9LLEVBQVlvSCxJQUM1RCxJQUFJVixFQUFRRyIsImZpbGUiOiJ3aW5uYWJsZUdhbWVzR2VuZXJhdG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDQ2KTtcbiIsIi8vIHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TdGFuZGFyZF81Mi1jYXJkX2RlY2tcblxuZXhwb3J0IGVudW0gQ29sb3Ige1xuICBTUEFERVMgPSAnQ29sb3IuU1BBREVTJywgLy8gb3IgXCJwaWtlc1wiXG4gIEhFQVJUSFMgPSAnQ29sb3IuSEVBUlRIUycsXG4gIERJQU1PTkRTID0gJ0NvbG9yLkRJQU1PTkRTJywgLy8gb3IgXCJ0aWxlc1wiXG4gIENMVUJTID0gJ0NvbG9yLkNMVUJTJywgLy8gb3IgXCJjbG92ZXJzXCJcbn1cblxuZXhwb3J0IGNvbnN0IFJFRF9DT0xPUlM6IFJlYWRvbmx5QXJyYXk8Q29sb3I+ID0gW1xuICBDb2xvci5IRUFSVEhTLFxuICBDb2xvci5ESUFNT05EUyxcbl1cblxuZXhwb3J0IGVudW0gUmFuayB7XG4gIEFDRSA9ICdSYW5rLkFDRScsXG4gIFRXTyA9ICdSYW5rLlRXTycsXG4gIFRIUkVFID0gJ1JhbmsuVEhSRUUnLFxuICBGT1VSID0gJ1JhbmsuRk9VUicsXG4gIEZJVkUgPSAnUmFuay5GSVZFJyxcbiAgU0lYID0gJ1JhbmsuU0lYJyxcbiAgU0VWRU4gPSAnUmFuay5TRVZFTicsXG4gIEVJR0hUID0gJ1JhbmsuRUlHSFQnLFxuICBOSU5FID0gJ1JhbmsuTklORScsXG4gIFRFTiA9ICdSYW5rLlRFTicsXG4gIEpBQ0sgPSAnUmFuay5KQUNLJyxcbiAgUVVFRU4gPSAnUmFuay5RVUVFTicsXG4gIEtJTkcgPSAnUmFuay5LSU5HJyxcbn1cblxuZXhwb3J0IGNvbnN0IFJBTktfU0VRVUVOQ0U6IFJlYWRvbmx5QXJyYXk8UmFuaz4gPSBbXG4gIFJhbmsuQUNFLFxuICBSYW5rLlRXTyxcbiAgUmFuay5USFJFRSxcbiAgUmFuay5GT1VSLFxuICBSYW5rLkZJVkUsXG4gIFJhbmsuU0lYLFxuICBSYW5rLlNFVkVOLFxuICBSYW5rLkVJR0hULFxuICBSYW5rLk5JTkUsXG4gIFJhbmsuVEVOLFxuICBSYW5rLkpBQ0ssXG4gIFJhbmsuUVVFRU4sXG4gIFJhbmsuS0lORyxcbl1cblxuZXhwb3J0IGVudW0gU2lkZSB7XG4gIEZBQ0UgPSAnU2lkZS5GQUNFJyxcbiAgQkFDSyA9ICdTaWRlLkJBQ0snLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElDYXJkIHtcbiAgcmVhZG9ubHkgY29sb3I6IENvbG9yXG4gIHJlYWRvbmx5IHJhbms6IFJhbmtcbiAgcmVhZG9ubHkgc2lkZTogU2lkZVxufVxuXG5leHBvcnQgY2xhc3MgQ2FyZCBpbXBsZW1lbnRzIElDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIHJlYWRvbmx5IGNvbG9yOiBDb2xvcixcbiAgICBwdWJsaWMgcmVhZG9ubHkgcmFuazogUmFuayxcbiAgICBwdWJsaWMgcmVhZG9ubHkgc2lkZTogU2lkZSxcbiAgKSB7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IERFQ0s6IFJlYWRvbmx5QXJyYXk8SUNhcmQ+ID0gKFtdIGFzIElDYXJkW10pLmNvbmNhdCguLi5PYmplY3QudmFsdWVzKENvbG9yKS5tYXAoXG4gIChjb2xvcjogQ29sb3IpID0+IFJBTktfU0VRVUVOQ0UubWFwKChyYW5rOiBSYW5rKSA9PiBuZXcgQ2FyZChjb2xvciwgcmFuaywgU2lkZS5CQUNLKSksXG4pKVxuXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZFRhYmxlYXVTZXF1ZW5jZShjYXJkT25QaWxlOiBJQ2FyZCwgY2FyZFRvQWRkOiBJQ2FyZCk6IGJvb2xlYW4ge1xuICByZXR1cm4gY29tcGFyZVJhbmsoY2FyZE9uUGlsZSwgY2FyZFRvQWRkKSA9PT0gMSAmJiAhaXNTYW1lQ29sb3JJbkZyZW5jaERlY2soY2FyZE9uUGlsZSwgY2FyZFRvQWRkKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZEZvdW5kYXRpb25TZXF1ZW5jZShjYXJkT25Gb3VuZGF0aW9uOiBJQ2FyZCwgY2FyZFRvQWRkOiBJQ2FyZCk6IGJvb2xlYW4ge1xuICByZXR1cm4gY29tcGFyZVJhbmsoY2FyZE9uRm91bmRhdGlvbiwgY2FyZFRvQWRkKSA9PT0gLTEgJiYgY2FyZE9uRm91bmRhdGlvbi5jb2xvciA9PT0gY2FyZFRvQWRkLmNvbG9yXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlUmFuayhjYXJkMTogSUNhcmQsIGNhcmQyOiBJQ2FyZCk6IG51bWJlciB7XG4gIGNvbnN0IGNhcmQxTnVtZXJpY1JhbmsgPSBSQU5LX1NFUVVFTkNFLmluZGV4T2YoY2FyZDEucmFuaylcbiAgY29uc3QgY2FyZDJOdW1lcmljUmFuayA9IFJBTktfU0VRVUVOQ0UuaW5kZXhPZihjYXJkMi5yYW5rKVxuICByZXR1cm4gY2FyZDFOdW1lcmljUmFuayAtIGNhcmQyTnVtZXJpY1Jhbmtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHR1cm5PdmVyKGNhcmQ6IElDYXJkKTogSUNhcmQge1xuICByZXR1cm4gbmV3IENhcmQoY2FyZC5jb2xvciwgY2FyZC5yYW5rLCBjYXJkLnNpZGUgPT09IFNpZGUuRkFDRSA/IFNpZGUuQkFDSyA6IFNpZGUuRkFDRSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhjYXJkMTogSUNhcmQsIGNhcmQyOiBJQ2FyZCk6IGJvb2xlYW4ge1xuICByZXR1cm4gY2FyZDEuY29sb3IgPT09IGNhcmQyLmNvbG9yICYmIGNhcmQxLnJhbmsgPT09IGNhcmQyLnJhbmtcbn1cblxuLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRnJlbmNoX3BsYXlpbmdfY2FyZHNcbmZ1bmN0aW9uIGlzU2FtZUNvbG9ySW5GcmVuY2hEZWNrKGNhcmQxOiBJQ2FyZCwgY2FyZDI6IElDYXJkKTogYm9vbGVhbiB7XG4gIGNvbnN0IGlzQ2FyZDFSZWQgPSBSRURfQ09MT1JTLmluY2x1ZGVzKGNhcmQxLmNvbG9yKVxuICBjb25zdCBpc0NhcmQyUmVkID0gUkVEX0NPTE9SUy5pbmNsdWRlcyhjYXJkMi5jb2xvcilcbiAgcmV0dXJuIGlzQ2FyZDFSZWQgPT09IGlzQ2FyZDJSZWRcbn1cbiIsImltcG9ydCB7U2lkZX0gZnJvbSAnLi9DYXJkJ1xuaW1wb3J0IHtleGVjdXRlTW92ZSBhcyBleGVjdXRlTW92ZU9uRGVzaywgSURlc2ssIGlzVmljdG9yeSwgaXNWaWN0b3J5R3VhcmFudGVlZH0gZnJvbSAnLi9EZXNrJ1xuaW1wb3J0IHtjcmVhdGVOZXh0R2FtZVN0YXRlLCBleGVjdXRlTW92ZSwgSUdhbWUsIElHYW1lUnVsZXN9IGZyb20gJy4vR2FtZSdcbmltcG9ydCB7TW92ZSwgTW92ZVR5cGV9IGZyb20gJy4vTW92ZSdcbmltcG9ydCB7Z2V0TW92ZUhpbnRzLCBIaW50R2VuZXJhdG9yTW9kZSwgTU9WRV9DT05GSURFTkNFUywgTW92ZUNvbmZpZGVuY2UsIE1vdmVIaW50fSBmcm9tICcuL01vdmVIaW50R2VuZXJhdG9yJ1xuaW1wb3J0IHtsYXN0SXRlbU9yTnVsbH0gZnJvbSAnLi91dGlsJ1xuXG5leHBvcnQgaW50ZXJmYWNlIElCb3RPcHRpb25zIHtcbiAgbWluQXV0b0FjY2VwdENvbmZpZGVuY2U6IG51bGwgfCBNb3ZlQ29uZmlkZW5jZVxuICBtYXhDb25zaWRlcmVkQ29uZmlkZW5jZUxldmVsczogbnVtYmVyXG4gIGxvb2tBaGVhZE1vdmVzOiBudW1iZXJcbiAgc3RhdGVSYW5raW5nSGV1cmlzdGljOiAoZGVzazogSURlc2spID0+IG51bWJlclxufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFrZU1vdmUoZ2FtZTogSUdhbWUsIG9wdGlvbnM6IElCb3RPcHRpb25zKTogSUdhbWUge1xuICB2YWxpZGF0ZU9wdGlvbnMob3B0aW9ucylcblxuICBjb25zdCB7c3RhdGU6IGRlc2ssIHJ1bGVzfSA9IGdhbWVcbiAgaWYgKGlzVmljdG9yeShkZXNrKSkge1xuICAgIHJldHVybiBnYW1lXG4gIH1cblxuICBjb25zdCBiZXN0TW92ZSA9IGZpbmRCZXN0TW92ZShkZXNrLCBydWxlcywgb3B0aW9ucywgb3B0aW9ucy5sb29rQWhlYWRNb3ZlcylcbiAgaWYgKCFiZXN0TW92ZSkge1xuICAgIHJldHVybiBnYW1lXG4gIH1cblxuICBjb25zdCBbaGludF0gPSBiZXN0TW92ZVxuICByZXR1cm4gZXhlY3V0ZU1vdmVIaW50KGdhbWUsIGhpbnQsIGZhbHNlKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFrZU1vdmVPbkRlc2soZGVzazogSURlc2ssIHJ1bGVzOiBJR2FtZVJ1bGVzLCBvcHRpb25zOiBJQm90T3B0aW9ucyk6IElEZXNrIHtcbiAgdmFsaWRhdGVPcHRpb25zKG9wdGlvbnMpXG5cbiAgaWYgKGlzVmljdG9yeShkZXNrKSkge1xuICAgIHJldHVybiBkZXNrXG4gIH1cblxuICBjb25zdCBiZXN0TW92ZSA9IGZpbmRCZXN0TW92ZShkZXNrLCBydWxlcywgb3B0aW9ucywgb3B0aW9ucy5sb29rQWhlYWRNb3ZlcylcbiAgaWYgKCFiZXN0TW92ZSkge1xuICAgIHJldHVybiBkZXNrXG4gIH1cblxuICBjb25zdCBbaGludF0gPSBiZXN0TW92ZVxuICByZXR1cm4gZXhlY3V0ZU1vdmVIaW50T25EZXNrKGRlc2ssIHJ1bGVzLCBoaW50LCBmYWxzZSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRTdGF0ZVJhbmtpbmdIZXVyaXN0aWMoe2ZvdW5kYXRpb24sIHRhYmxlYXU6IHtwaWxlczogdGFibGVhdVBpbGVzfX06IElEZXNrKSB7XG4gIC8vIFRvdGFsIG51bWJlciBvZiBmYWNlLXVwIGNhcmRzIG9uIHRoZSBkZXNrLCBleGNsdWRpbmcgc3RvY2svd2FzdGVcbiAgcmV0dXJuIE9iamVjdC52YWx1ZXMoZm91bmRhdGlvbikubWFwKChwaWxlKSA9PiBwaWxlLmNhcmRzLmxlbmd0aCkuY29uY2F0KFxuICAgIHRhYmxlYXVQaWxlcy5tYXAoKHBpbGUpID0+IHBpbGUuY2FyZHMuZmlsdGVyKChjYXJkKSA9PiBjYXJkLnNpZGUgPT09IFNpZGUuRkFDRSkubGVuZ3RoKSxcbiAgKS5yZWR1Y2UoXG4gICAgKGFjY3VtdWxhdG9yLCB2YWx1ZSkgPT4gYWNjdW11bGF0b3IgKyB2YWx1ZSxcbiAgICAwLFxuICApXG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlT3B0aW9ucyhvcHRpb25zOiBJQm90T3B0aW9ucyk6IHZvaWQge1xuICBpZiAoIU51bWJlci5pc0ludGVnZXIob3B0aW9ucy5tYXhDb25zaWRlcmVkQ29uZmlkZW5jZUxldmVscykgfHwgb3B0aW9ucy5tYXhDb25zaWRlcmVkQ29uZmlkZW5jZUxldmVscyA8IDApIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgJ1RoZSBtYXhDb25zaWRlcmVkQ29uZmlkZW5jZUxldmVscyBvcHRpb24gbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBpbnRlZ2VyLCAnICtcbiAgICAgIGAke29wdGlvbnMubWF4Q29uc2lkZXJlZENvbmZpZGVuY2VMZXZlbHN9IHdhcyBwcm92aWRlZGAsXG4gICAgKVxuICB9XG4gIGlmICghTnVtYmVyLmlzU2FmZUludGVnZXIob3B0aW9ucy5sb29rQWhlYWRNb3ZlcykgfHwgb3B0aW9ucy5sb29rQWhlYWRNb3ZlcyA8IDApIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgYFRoZSBsb29rQWhlYWRNb3ZlcyBvcHRpb24gbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBpbnRlZ2VyLCAke29wdGlvbnMubG9va0FoZWFkTW92ZXN9IHdhcyBwcm92aWRlZGAsXG4gICAgKVxuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmRCZXN0TW92ZShcbiAgZGVzazogSURlc2ssXG4gIHJ1bGVzOiBJR2FtZVJ1bGVzLFxuICBvcHRpb25zOiBJQm90T3B0aW9ucyxcbiAgbG9va0FoZWFkTW92ZXM6IG51bWJlcixcbik6IG51bGwgfCBbTW92ZUhpbnQsIG51bWJlcl0ge1xuICBjb25zdCBoaW50cyA9IGdldE1vdmVIaW50cyhkZXNrLCBydWxlcywgSGludEdlbmVyYXRvck1vZGUuV0lUSF9GVUxMX1NUT0NLKVxuICBpZiAoIWhpbnRzLmxlbmd0aCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBpZiAoXG4gICAgb3B0aW9ucy5taW5BdXRvQWNjZXB0Q29uZmlkZW5jZSAmJlxuICAgIE1PVkVfQ09ORklERU5DRVMuaW5kZXhPZihoaW50c1swXVsyXSkgPD0gTU9WRV9DT05GSURFTkNFUy5pbmRleE9mKG9wdGlvbnMubWluQXV0b0FjY2VwdENvbmZpZGVuY2UpXG4gICkge1xuICAgIGNvbnN0IGRlc2tBZnRlck1vdmUgPSBleGVjdXRlTW92ZUhpbnRPbkRlc2soZGVzaywgcnVsZXMsIGhpbnRzWzBdLCB0cnVlKVxuICAgIGNvbnN0IHJhbmsgPSBvcHRpb25zLnN0YXRlUmFua2luZ0hldXJpc3RpYyhkZXNrQWZ0ZXJNb3ZlKVxuICAgIHJldHVybiBbaGludHNbMF0sIHJhbmtdXG4gIH1cblxuICBsZXQgYmVzdEhpbnQgPSBoaW50c1swXVxuICBjb25zdCBoaWdoZXN0Q29uZmlkZW5jZUluZGV4ID0gTU9WRV9DT05GSURFTkNFUy5pbmRleE9mKGJlc3RIaW50WzJdKVxuICBsZXQgYmVzdFJhbmsgPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFlcbiAgZm9yIChjb25zdCBoaW50IG9mIGhpbnRzKSB7XG4gICAgaWYgKE1PVkVfQ09ORklERU5DRVMuaW5kZXhPZihoaW50WzJdKSA+IGhpZ2hlc3RDb25maWRlbmNlSW5kZXggKyBvcHRpb25zLm1heENvbnNpZGVyZWRDb25maWRlbmNlTGV2ZWxzKSB7XG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIGNvbnN0IGRlc2tBZnRlck1vdmUgPSBleGVjdXRlTW92ZUhpbnRPbkRlc2soZGVzaywgcnVsZXMsIGhpbnQsIHRydWUpXG4gICAgbGV0IGN1cnJlbnRNb3ZlUmFua1xuICAgIGlmIChsb29rQWhlYWRNb3ZlcyAmJiAhaXNWaWN0b3J5R3VhcmFudGVlZChkZXNrQWZ0ZXJNb3ZlKSkge1xuICAgICAgY29uc3QgZGVlcEFuYWx5c2lzT3V0Y29tZSA9IGZpbmRCZXN0TW92ZShkZXNrQWZ0ZXJNb3ZlLCBydWxlcywgb3B0aW9ucywgbG9va0FoZWFkTW92ZXMgLSAxKVxuICAgICAgaWYgKCFkZWVwQW5hbHlzaXNPdXRjb21lKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIFssIGN1cnJlbnRNb3ZlUmFua10gPSBkZWVwQW5hbHlzaXNPdXRjb21lXG4gICAgfSBlbHNlIHtcbiAgICAgIGN1cnJlbnRNb3ZlUmFuayA9IG9wdGlvbnMuc3RhdGVSYW5raW5nSGV1cmlzdGljKGRlc2tBZnRlck1vdmUpXG4gICAgfVxuICAgIGlmIChjdXJyZW50TW92ZVJhbmsgPiBiZXN0UmFuaykge1xuICAgICAgYmVzdFJhbmsgPSBjdXJyZW50TW92ZVJhbmtcbiAgICAgIGJlc3RIaW50ID0gaGludFxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbYmVzdEhpbnQsIGJlc3RSYW5rXVxufVxuXG5mdW5jdGlvbiBleGVjdXRlTW92ZUhpbnQoZ2FtZTogSUdhbWUsIGhpbnQ6IE1vdmVIaW50LCBhdXRvRHJhd0NhcmRzOiBib29sZWFuKTogSUdhbWUge1xuICBjb25zdCBtb3ZlVHlwZSA9IGhpbnRbMF0ubW92ZVxuICBpZiAoIWF1dG9EcmF3Q2FyZHMgfHwgKG1vdmVUeXBlICE9PSBNb3ZlVHlwZS5XQVNURV9UT19GT1VOREFUSU9OICYmIG1vdmVUeXBlICE9PSBNb3ZlVHlwZS5XQVNURV9UT19UQUJMRUFVKSkge1xuICAgIHJldHVybiBjcmVhdGVOZXh0R2FtZVN0YXRlKGdhbWUsIGV4ZWN1dGVNb3ZlSGludE9uRGVzayhnYW1lLnN0YXRlLCBnYW1lLnJ1bGVzLCBoaW50LCBhdXRvRHJhd0NhcmRzKSwgaGludFswXSlcbiAgfVxuXG4gIGNvbnN0IHRvcFdhc3RlQ2FyZCA9IGxhc3RJdGVtT3JOdWxsKGdhbWUuc3RhdGUud2FzdGUuY2FyZHMpXG4gIGlmICh0b3BXYXN0ZUNhcmQ/LnJhbmsgPT09IGhpbnRbMV0ucmFuayAmJiB0b3BXYXN0ZUNhcmQuY29sb3IgPT09IGhpbnRbMV0uY29sb3IpIHtcbiAgICByZXR1cm4gY3JlYXRlTmV4dEdhbWVTdGF0ZShnYW1lLCBleGVjdXRlTW92ZUhpbnRPbkRlc2soZ2FtZS5zdGF0ZSwgZ2FtZS5ydWxlcywgaGludCwgYXV0b0RyYXdDYXJkcyksIGhpbnRbMF0pXG4gIH1cblxuICBjb25zdCBzdG9ja0N5Y2xpbmdNb3ZlOiBNb3ZlID0gZ2FtZS5zdGF0ZS5zdG9jay5jYXJkcy5sZW5ndGggP1xuICAgIHtcbiAgICAgIGRyYXduQ2FyZHM6IGdhbWUucnVsZXMuZHJhd25DYXJkcyxcbiAgICAgIG1vdmU6IE1vdmVUeXBlLkRSQVdfQ0FSRFMsXG4gICAgfVxuICA6XG4gICAge1xuICAgICAgbW92ZTogTW92ZVR5cGUuUkVERUFMLFxuICAgIH1cbiAgY29uc3QgZ2FtZUFmdGVyRHJhd2luZ0FDYXJkID0gZXhlY3V0ZU1vdmUoZ2FtZSwgc3RvY2tDeWNsaW5nTW92ZSlcbiAgcmV0dXJuIGV4ZWN1dGVNb3ZlSGludChnYW1lQWZ0ZXJEcmF3aW5nQUNhcmQsIGhpbnQsIGF1dG9EcmF3Q2FyZHMpXG59XG5cbmZ1bmN0aW9uIGV4ZWN1dGVNb3ZlSGludE9uRGVzayhkZXNrU3RhdGU6IElEZXNrLCBydWxlczogSUdhbWVSdWxlcywgaGludDogTW92ZUhpbnQsIGF1dG9EcmF3Q2FyZHM6IGJvb2xlYW4pOiBJRGVzayB7XG4gIGNvbnN0IG1vdmVUeXBlID0gaGludFswXS5tb3ZlXG4gIGlmIChtb3ZlVHlwZSAhPT0gTW92ZVR5cGUuV0FTVEVfVE9fRk9VTkRBVElPTiAmJiBtb3ZlVHlwZSAhPT0gTW92ZVR5cGUuV0FTVEVfVE9fVEFCTEVBVSkge1xuICAgIHJldHVybiBleGVjdXRlTW92ZU9uRGVzayhkZXNrU3RhdGUsIHJ1bGVzLCBoaW50WzBdKVxuICB9XG5cbiAgY29uc3QgdG9wV2FzdGVDYXJkID0gbGFzdEl0ZW1Pck51bGwoZGVza1N0YXRlLndhc3RlLmNhcmRzKVxuICBpZiAodG9wV2FzdGVDYXJkPy5yYW5rID09PSBoaW50WzFdLnJhbmsgJiYgdG9wV2FzdGVDYXJkLmNvbG9yID09PSBoaW50WzFdLmNvbG9yKSB7XG4gICAgcmV0dXJuIGV4ZWN1dGVNb3ZlT25EZXNrKGRlc2tTdGF0ZSwgcnVsZXMsIGhpbnRbMF0pXG4gIH1cblxuICBjb25zdCBzdG9ja0N5Y2xpbmdNb3ZlOiBNb3ZlID0gZGVza1N0YXRlLnN0b2NrLmNhcmRzLmxlbmd0aCA/XG4gICAge1xuICAgICAgZHJhd25DYXJkczogcnVsZXMuZHJhd25DYXJkcyxcbiAgICAgIG1vdmU6IE1vdmVUeXBlLkRSQVdfQ0FSRFMsXG4gICAgfVxuICA6XG4gICAge1xuICAgICAgbW92ZTogTW92ZVR5cGUuUkVERUFMLFxuICAgIH1cbiAgY29uc3QgZGVza0FmdGVyRHJhd2luZ0FDYXJkID0gZXhlY3V0ZU1vdmVPbkRlc2soZGVza1N0YXRlLCBydWxlcywgc3RvY2tDeWNsaW5nTW92ZSlcbiAgaWYgKGF1dG9EcmF3Q2FyZHMpIHtcbiAgICByZXR1cm4gZXhlY3V0ZU1vdmVIaW50T25EZXNrKGRlc2tBZnRlckRyYXdpbmdBQ2FyZCwgcnVsZXMsIGhpbnQsIGF1dG9EcmF3Q2FyZHMpXG4gIH1cblxuICByZXR1cm4gZGVza0FmdGVyRHJhd2luZ0FDYXJkXG59XG4iLCJpbXBvcnQge0NvbG9yLCBERUNLLCBJQ2FyZH0gZnJvbSAnLi9DYXJkJ1xuaW1wb3J0IHtJRGVza30gZnJvbSAnLi9EZXNrJ1xuaW1wb3J0IHtcbiAgY3JlYXRlTmV3R2FtZSxcbiAgZXhlY3V0ZU1vdmUsXG4gIElHYW1lLFxuICBJTmV3R2FtZVJ1bGVzLFxuICBJUmVjb3JkVGltZXN0YW1wLFxuICByZWRvTmV4dE1vdmUsXG59IGZyb20gJy4vR2FtZSdcbmltcG9ydCB7TW92ZSwgTW92ZVR5cGV9IGZyb20gJy4vTW92ZSdcblxuY29uc3QgU0VSSUFMSVpFUl9WRVJTSU9OID0gMlxuY29uc3QgTlVNX1JBRElYID0gMzZcbmNvbnN0IEVQT0NIX1NUQVJUID0gMTU3MjYxNzY0MjAwMFxuXG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplKGdhbWU6IElHYW1lKTogc3RyaW5nIHtcbiAgaWYgKGdhbWUucnVsZXMuZHJhd25DYXJkcyA+IE5VTV9SQURJWCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFxuICAgICAgYFRoZSBkcmF3bkNhcmRzIHJ1bGUgbXVzdCBhIHNhZmUgcG9zaXRpdmUgaW50ZWdlciBubyBsYXJnZXIgdGhhbiAke05VTV9SQURJWH0sICR7Z2FtZS5ydWxlcy5kcmF3bkNhcmRzfSB3YXMgYCArXG4gICAgICAncHJvdmlkZWQnLFxuICAgIClcbiAgfVxuICBpZiAoZ2FtZS5zdGF0ZS50YWJsZWF1LnBpbGVzLmxlbmd0aCA+IHBhcnNlSW50KCd6eicsIE5VTV9SQURJWCkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcbiAgICAgIGBUaGUgbnVtYmVyIG9mIHRhYmxlYXUgcGlsZXMgbXVzdCBiZSBhIHNhZmUgcG9zaXRpdmUgaW50ZWdlciBubyBsYXJnZXIgdGhhbiAke3BhcnNlSW50KCd6eicsIE5VTV9SQURJWCl9LCBgICtcbiAgICAgIGAke2dhbWUuc3RhdGUudGFibGVhdS5waWxlcy5sZW5ndGh9IHdhcyBwcm92aWRlZGAsXG4gICAgKVxuICB9XG5cbiAgY29uc3QgaW5pdGlhbFN0YXRlID0gZ2FtZS5oaXN0b3J5Lmxlbmd0aCA/IGdhbWUuaGlzdG9yeVswXVswXSA6IGdhbWUuc3RhdGVcbiAgY29uc3Qgc2VyaWFsaXplZERhdGEgPSBbXG4gICAgU0VSSUFMSVpFUl9WRVJTSU9OLFxuICAgIGdhbWUucnVsZXMuYWxsb3dOb25LaW5nVG9FbXB0eVBpbGVUcmFuc2ZlciA/ICcxJyA6ICcwJyxcbiAgICBnYW1lLnJ1bGVzLmRyYXduQ2FyZHMudG9TdHJpbmcoTlVNX1JBRElYKSxcbiAgICBnYW1lLnN0YXRlLnRhYmxlYXUucGlsZXMubGVuZ3RoLnRvU3RyaW5nKE5VTV9SQURJWCkucGFkU3RhcnQoMiwgJzAnKSxcbiAgICBzZXJpYWxpemVEZWNrRnJvbURlc2soaW5pdGlhbFN0YXRlKSxcbiAgICBNYXRoLmZsb29yKChnYW1lLnN0YXJ0VGltZS5hYnNvbHV0ZVRpbWVzdGFtcCAtIEVQT0NIX1NUQVJUKSAvIDEwMDApLnRvU3RyaW5nKE5VTV9SQURJWCksXG4gICAgJywnLFxuICAgIE1hdGguZmxvb3IoZ2FtZS5zdGFydFRpbWUubG9naWNhbFRpbWVzdGFtcCkudG9TdHJpbmcoTlVNX1JBRElYKSxcbiAgICAnOycsXG4gICAgZ2FtZS5oaXN0b3J5Lmxlbmd0aC50b1N0cmluZyhOVU1fUkFESVgpLFxuICAgICc6JyxcbiAgICBzZXJpYWxpemVIaXN0b3J5KGdhbWUuaGlzdG9yeS5jb25jYXQoZ2FtZS5mdXR1cmUpLCBnYW1lLnN0YXJ0VGltZS5sb2dpY2FsVGltZXN0YW1wKSxcbiAgXVxuXG4gIHJldHVybiBzZXJpYWxpemVkRGF0YS5qb2luKCcnKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemUoc2VyaWFsaXplZFN0YXRlOiBzdHJpbmcpOiBJR2FtZSB7XG4gIGlmICghc2VyaWFsaXplZFN0YXRlLnN0YXJ0c1dpdGgoU0VSSUFMSVpFUl9WRVJTSU9OLnRvU3RyaW5nKCkpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YXRlIG9yIHVuc3VwcG9ydGVkIHZlcnNpb246ICR7c2VyaWFsaXplZFN0YXRlfWApXG4gIH1cblxuICBjb25zdCBnYW1lUnVsZXM6IElOZXdHYW1lUnVsZXMgPSB7XG4gICAgYWxsb3dOb25LaW5nVG9FbXB0eVBpbGVUcmFuc2ZlcjogISFwYXJzZUludChzZXJpYWxpemVkU3RhdGUuY2hhckF0KDEpLCAxMCksXG4gICAgZHJhd25DYXJkczogcGFyc2VJbnQoc2VyaWFsaXplZFN0YXRlLmNoYXJBdCgyKSwgTlVNX1JBRElYKSxcbiAgICB0YWJsZWF1UGlsZXM6IHBhcnNlSW50KHNlcmlhbGl6ZWRTdGF0ZS5zdWJzdHJpbmcoMywgNSksIE5VTV9SQURJWCksXG4gIH1cbiAgY29uc3QgY2FyZERlY2sgPSBkZXNlcmlhbGl6ZURlY2soc2VyaWFsaXplZFN0YXRlLnN1YnN0cmluZyg1LCA1NikpXG4gIGNvbnN0IHNlcmlhbGl6ZWRTdGFydFRpbWUgPSBzZXJpYWxpemVkU3RhdGUuc3Vic3RyaW5nKDU2LCBzZXJpYWxpemVkU3RhdGUuaW5kZXhPZignOycsIDU2KSlcbiAgY29uc3Qgc3RhcnRUaW1lID0gZGVzZXJpYWxpemVTdGFydFRpbWUoc2VyaWFsaXplZFN0YXJ0VGltZSlcbiAgY29uc3QgaGlzdG9yeUxlbmd0aCA9IHNlcmlhbGl6ZWRTdGF0ZS5zdWJzdHJpbmcoNTYgKyBzZXJpYWxpemVkU3RhcnRUaW1lLmxlbmd0aCArIDEsIHNlcmlhbGl6ZWRTdGF0ZS5pbmRleE9mKCc6JywgNTYpKVxuICBjb25zdCBkZXNlcmlhbGl6ZWRIaXN0b3J5TGVuZ3RoID0gcGFyc2VJbnQoaGlzdG9yeUxlbmd0aCwgTlVNX1JBRElYKVxuICBjb25zdCBzZXJpYWxpemVkSGlzdG9yeSA9IHNlcmlhbGl6ZWRTdGF0ZS5zdWJzdHJpbmcoNTYgKyBzZXJpYWxpemVkU3RhcnRUaW1lLmxlbmd0aCArIDEgKyBoaXN0b3J5TGVuZ3RoLmxlbmd0aCArIDEpXG4gIGNvbnN0IGJhc2VHYW1lID0gY3JlYXRlTmV3R2FtZShnYW1lUnVsZXMsIGNhcmREZWNrKVxuICBjb25zdCBoaXN0b3J5ID0gZGVzZXJpYWxpemVIaXN0b3J5KGJhc2VHYW1lLCBzdGFydFRpbWUubG9naWNhbFRpbWVzdGFtcCwgc2VyaWFsaXplZEhpc3RvcnkpXG5cbiAgbGV0IGRlc2VyaWFsaXplZEdhbWU6IElHYW1lID0ge1xuICAgIC4uLmJhc2VHYW1lLFxuICAgIGZ1dHVyZTogaGlzdG9yeSxcbiAgICBzdGFydFRpbWUsXG4gIH1cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZXNlcmlhbGl6ZWRIaXN0b3J5TGVuZ3RoOyBpKyspIHtcbiAgICBkZXNlcmlhbGl6ZWRHYW1lID0gcmVkb05leHRNb3ZlKGRlc2VyaWFsaXplZEdhbWUpXG4gIH1cbiAgcmV0dXJuIGRlc2VyaWFsaXplZEdhbWVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZURlY2tGcm9tRGVzayhkZXNrOiBJRGVzayk6IHN0cmluZyB7XG4gIGNvbnN0IGNhcmRzRGVjayA9IFtcbiAgICAuLi5kZXNrLnN0b2NrLmNhcmRzLFxuICAgIC4uLmRlc2sudGFibGVhdS5waWxlcy5tYXAoKHBpbGUpID0+IHBpbGUuY2FyZHMuc2xpY2UoKS5yZXZlcnNlKCkpLnJldmVyc2UoKS5mbGF0KCksXG4gIF1cbiAgcmV0dXJuIHNlcmlhbGl6ZURlY2soY2FyZHNEZWNrKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplRGVjayhjYXJkc0RlY2s6IElDYXJkW10pOiBzdHJpbmcge1xuICByZXR1cm4gY2FyZHNEZWNrLnNsaWNlKDAsIC0xKS5tYXAoc2VyaWFsaXplQ2FyZCkuam9pbignJylcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlc2VyaWFsaXplRGVjayhzZXJpYWxpemVkRGVjazogc3RyaW5nKTogSUNhcmRbXSB7XG4gIGNvbnN0IHJlbWFpbmluZ0NhcmRzID0gbmV3IFNldChVTlNFUklBTElaRURfQ0FSRFMpXG4gIHJldHVybiBzZXJpYWxpemVkRGVjay5zcGxpdCgnJykubWFwKChzZXJpYWxpemVkQ2FyZCkgPT4ge1xuICAgIGNvbnN0IGNhcmRJbmRleCA9IFNFUklBTElaRURfQ0FSRFMuaW5kZXhPZihzZXJpYWxpemVkQ2FyZClcbiAgICBjb25zdCBjYXJkID0gVU5TRVJJQUxJWkVEX0NBUkRTW2NhcmRJbmRleF1cbiAgICByZW1haW5pbmdDYXJkcy5kZWxldGUoY2FyZClcbiAgICByZXR1cm4gY2FyZFxuICB9KS5jb25jYXQoWy4uLnJlbWFpbmluZ0NhcmRzXSlcbn1cblxuZnVuY3Rpb24gc2VyaWFsaXplSGlzdG9yeShcbiAgaGlzdG9yeTogUmVhZG9ubHlBcnJheTxbdW5rbm93biwgTW92ZSAmIElSZWNvcmRUaW1lc3RhbXBdPixcbiAgc3RhcnRpbmdMb2dpY2FsVGltZXN0YW1wOiBudW1iZXIsXG4pOiBzdHJpbmcge1xuICByZXR1cm4gaGlzdG9yeS5tYXAoXG4gICAgKFssIG1vdmVdLCBpbmRleCkgPT4gc2VyaWFsaXplTW92ZShtb3ZlLCBpbmRleCA/IGhpc3RvcnlbaW5kZXggLSAxXVsxXS5sb2dpY2FsVGltZXN0YW1wIDogc3RhcnRpbmdMb2dpY2FsVGltZXN0YW1wKSxcbiAgKS5qb2luKCcnKVxufVxuXG5mdW5jdGlvbiBzZXJpYWxpemVNb3ZlKG1vdmU6IE1vdmUgJiBJUmVjb3JkVGltZXN0YW1wLCBwcmV2aW91c01vdmVUaW1lc3RhbXA6IG51bWJlcikge1xuICByZXR1cm4gW1xuICAgIE1hdGguZmxvb3IobW92ZS5sb2dpY2FsVGltZXN0YW1wIC0gcHJldmlvdXNNb3ZlVGltZXN0YW1wKS50b1N0cmluZyhOVU1fUkFESVgpLFxuICAgICcsOzotPSsqIScuY2hhckF0KE1PVkVfVFlQRVMuaW5kZXhPZihtb3ZlLm1vdmUpKSxcbiAgICBzZXJpYWxpemVNb3ZlRGF0YSgpLFxuICBdLmpvaW4oJycpXG5cbiAgZnVuY3Rpb24gc2VyaWFsaXplTW92ZURhdGEoKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKG1vdmUubW92ZSkge1xuICAgICAgY2FzZSBNb3ZlVHlwZS5EUkFXX0NBUkRTOlxuICAgICAgICByZXR1cm4gYCR7bW92ZS5kcmF3bkNhcmRzLnRvU3RyaW5nKE5VTV9SQURJWCl9LmBcbiAgICAgIGNhc2UgTW92ZVR5cGUuV0FTVEVfVE9fVEFCTEVBVTpcbiAgICAgIGNhc2UgTW92ZVR5cGUuVEFCTEVBVV9UT19GT1VOREFUSU9OOlxuICAgICAgY2FzZSBNb3ZlVHlwZS5SRVZFQUxfVEFCTEVBVV9DQVJEOlxuICAgICAgICByZXR1cm4gYCR7bW92ZS5waWxlSW5kZXgudG9TdHJpbmcoTlVNX1JBRElYKS5wYWRTdGFydCgyLCAnMCcpfWBcbiAgICAgIGNhc2UgTW92ZVR5cGUuRk9VTkRBVElPTl9UT19UQUJMRUFVOlxuICAgICAgICByZXR1cm4gYCR7bW92ZS5waWxlSW5kZXgudG9TdHJpbmcoTlVNX1JBRElYKX0keycsOzotJy5jaGFyQXQoQ09MT1JTLmluZGV4T2YobW92ZS5jb2xvcikpfWBcbiAgICAgIGNhc2UgTW92ZVR5cGUuVEFCTEVBVV9UT19UQUJMRUFVOlxuICAgICAgICByZXR1cm4gW21vdmUuc291cmNlUGlsZUluZGV4LCBtb3ZlLnRvcE1vdmVkQ2FyZEluZGV4LCBtb3ZlLnRhcmdldFBpbGVJbmRleF0ubWFwKFxuICAgICAgICAgIChudW06IG51bWJlcikgPT4gbnVtLnRvU3RyaW5nKE5VTV9SQURJWCkucGFkU3RhcnQoMiwgJzAnKSxcbiAgICAgICAgKS5qb2luKCcnKVxuICAgICAgY2FzZSBNb3ZlVHlwZS5SRURFQUw6XG4gICAgICBjYXNlIE1vdmVUeXBlLldBU1RFX1RPX0ZPVU5EQVRJT046XG4gICAgICAgIHJldHVybiAnJ1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgVW5rbm93biBtb3ZlIHR5cGU6ICR7KG1vdmUgYXMgYW55KS5tb3ZlfWApXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZUNhcmQoY2FyZDogSUNhcmQpOiBzdHJpbmcge1xuICBjb25zdCBrZXlzID0gKE9iamVjdC5rZXlzKGNhcmQpIGFzIEFycmF5PGtleW9mIElDYXJkPikuZmlsdGVyKChrZXkpID0+IGtleSAhPT0gJ3NpZGUnKVxuICBjb25zdCBjYXJkSW5kZXggPSBVTlNFUklBTElaRURfQ0FSRFMuZmluZEluZGV4KFxuICAgIChvdGhlckNhcmQpID0+IGtleXMuZXZlcnkoKGtleSkgPT4gY2FyZFtrZXldID09PSBvdGhlckNhcmRba2V5XSksXG4gIClcbiAgaWYgKGNhcmRJbmRleCA9PT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBSZWNlaXZlZCBhbiBpbnZhbGlkIGNhcmQ6ICR7SlNPTi5zdHJpbmdpZnkoY2FyZCl9YClcbiAgfVxuXG4gIHJldHVybiBTRVJJQUxJWkVEX0NBUkRTW2NhcmRJbmRleF1cbn1cblxuZnVuY3Rpb24gZGVzZXJpYWxpemVIaXN0b3J5KFxuICBzdGFydGluZ1N0YXRlOiBJR2FtZSxcbiAgc3RhcnRpbmdMb2dpY2FsVGltZXN0YW1wOiBudW1iZXIsXG4gIHNlcmlhbGl6ZWRIaXN0b3J5OiBzdHJpbmcsXG4pOiBBcnJheTxbSURlc2ssIE1vdmUgJiBJUmVjb3JkVGltZXN0YW1wXT4ge1xuICBjb25zdCBoaXN0b3J5ID0gW10gYXMgQXJyYXk8W0lEZXNrLCBNb3ZlICYgSVJlY29yZFRpbWVzdGFtcF0+XG4gIGxldCBsYXN0U3RhdGUgPSBzdGFydGluZ1N0YXRlXG4gIGxldCBsYXN0TG9naWNhbFRpbWVzdGFtcCA9IHN0YXJ0aW5nTG9naWNhbFRpbWVzdGFtcFxuICBsZXQgY3VycmVudE1vdmVTdGFydEluZGV4ID0gMFxuICB3aGlsZSAoY3VycmVudE1vdmVTdGFydEluZGV4IDwgc2VyaWFsaXplZEhpc3RvcnkubGVuZ3RoKSB7XG4gICAgbGV0IHJlbWFpbmluZ1NlcmlhbGl6ZWRIaXN0b3J5ID0gc2VyaWFsaXplZEhpc3Rvcnkuc3Vic3RyaW5nKGN1cnJlbnRNb3ZlU3RhcnRJbmRleClcbiAgICBjb25zdCBsb2dpY2FsVGltZXN0YW1wRGlmZiA9IHBhcnNlSW50KHJlbWFpbmluZ1NlcmlhbGl6ZWRIaXN0b3J5LCBOVU1fUkFESVgpXG4gICAgY29uc3QgbW92ZVR5cGUgPSBNT1ZFX1RZUEVTW1xuICAgICAgJyw7Oi09KyohJy5pbmRleE9mKHJlbWFpbmluZ1NlcmlhbGl6ZWRIaXN0b3J5LmNoYXJBdChsb2dpY2FsVGltZXN0YW1wRGlmZi50b1N0cmluZyhOVU1fUkFESVgpLmxlbmd0aCkpXG4gICAgXVxuXG4gICAgbGFzdExvZ2ljYWxUaW1lc3RhbXAgKz0gbG9naWNhbFRpbWVzdGFtcERpZmZcbiAgICBjdXJyZW50TW92ZVN0YXJ0SW5kZXggKz0gbG9naWNhbFRpbWVzdGFtcERpZmYudG9TdHJpbmcoTlVNX1JBRElYKS5sZW5ndGggKyAxXG5cbiAgICByZW1haW5pbmdTZXJpYWxpemVkSGlzdG9yeSA9IHNlcmlhbGl6ZWRIaXN0b3J5LnN1YnN0cmluZyhjdXJyZW50TW92ZVN0YXJ0SW5kZXgpXG4gICAgbGV0IG1vdmU6IE1vdmUgJiBJUmVjb3JkVGltZXN0YW1wXG4gICAgc3dpdGNoIChtb3ZlVHlwZSkge1xuICAgICAgY2FzZSBNb3ZlVHlwZS5EUkFXX0NBUkRTOlxuICAgICAgICBjb25zdCBkcmF3bkNhcmRzID0gcmVtYWluaW5nU2VyaWFsaXplZEhpc3Rvcnkuc3Vic3RyaW5nKDAsIHJlbWFpbmluZ1NlcmlhbGl6ZWRIaXN0b3J5LmluZGV4T2YoJy4nKSlcbiAgICAgICAgY3VycmVudE1vdmVTdGFydEluZGV4ICs9IGRyYXduQ2FyZHMubGVuZ3RoICsgMVxuICAgICAgICBtb3ZlID0ge1xuICAgICAgICAgIGRyYXduQ2FyZHM6IHBhcnNlSW50KGRyYXduQ2FyZHMsIE5VTV9SQURJWCksXG4gICAgICAgICAgbG9naWNhbFRpbWVzdGFtcDogbGFzdExvZ2ljYWxUaW1lc3RhbXAsXG4gICAgICAgICAgbW92ZTogbW92ZVR5cGUsXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgTW92ZVR5cGUuV0FTVEVfVE9fVEFCTEVBVTpcbiAgICAgIGNhc2UgTW92ZVR5cGUuVEFCTEVBVV9UT19GT1VOREFUSU9OOlxuICAgICAgY2FzZSBNb3ZlVHlwZS5SRVZFQUxfVEFCTEVBVV9DQVJEOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgcGlsZUluZGV4ID0gcGFyc2VJbnQocmVtYWluaW5nU2VyaWFsaXplZEhpc3Rvcnkuc3Vic3RyaW5nKDAsIDIpLCBOVU1fUkFESVgpXG4gICAgICAgICAgY3VycmVudE1vdmVTdGFydEluZGV4ICs9IDJcbiAgICAgICAgICBtb3ZlID0ge1xuICAgICAgICAgICAgbG9naWNhbFRpbWVzdGFtcDogbGFzdExvZ2ljYWxUaW1lc3RhbXAsXG4gICAgICAgICAgICBtb3ZlOiBtb3ZlVHlwZSBhcyBhbnksIC8vIFVuZm9ydHVuYXRlbHkgdGhlIHR5cGUgY2hlY2sgZmFpbHMgaW4gdGhpcyBjYXNlLCBldmVuIHRob3VnaCBldmVyeXRoaW5nIGNoZWNrcyB1cC5cbiAgICAgICAgICAgIHBpbGVJbmRleCxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBNb3ZlVHlwZS5GT1VOREFUSU9OX1RPX1RBQkxFQVU6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBwaWxlSW5kZXggPSBwYXJzZUludChyZW1haW5pbmdTZXJpYWxpemVkSGlzdG9yeSwgTlVNX1JBRElYKVxuICAgICAgICAgIGNvbnN0IGNvbG9yID0gQ09MT1JTW1xuICAgICAgICAgICAgJyw7Oi0nLmluZGV4T2YocmVtYWluaW5nU2VyaWFsaXplZEhpc3RvcnkuY2hhckF0KHBpbGVJbmRleC50b1N0cmluZyhOVU1fUkFESVgpLmxlbmd0aCkpXG4gICAgICAgICAgXVxuICAgICAgICAgIGN1cnJlbnRNb3ZlU3RhcnRJbmRleCArPSBwaWxlSW5kZXgudG9TdHJpbmcoTlVNX1JBRElYKS5sZW5ndGggKyAxXG4gICAgICAgICAgbW92ZSA9IHtcbiAgICAgICAgICAgIGNvbG9yLFxuICAgICAgICAgICAgbG9naWNhbFRpbWVzdGFtcDogbGFzdExvZ2ljYWxUaW1lc3RhbXAsXG4gICAgICAgICAgICBtb3ZlOiBtb3ZlVHlwZSxcbiAgICAgICAgICAgIHBpbGVJbmRleCxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBNb3ZlVHlwZS5UQUJMRUFVX1RPX1RBQkxFQVU6XG4gICAgICAgIGNvbnN0IFtzb3VyY2VQaWxlSW5kZXgsIHRvcE1vdmVkQ2FyZEluZGV4LCB0YXJnZXRQaWxlSW5kZXhdID0gcmVtYWluaW5nU2VyaWFsaXplZEhpc3RvcnlcbiAgICAgICAgICAuc3Vic3RyaW5nKDAsIDYpXG4gICAgICAgICAgLm1hdGNoKC8uLi9nKSFcbiAgICAgICAgICAubWFwKChzZXJpYWxpemVkSW5kZXgpID0+IHBhcnNlSW50KHNlcmlhbGl6ZWRJbmRleCwgTlVNX1JBRElYKSlcbiAgICAgICAgY3VycmVudE1vdmVTdGFydEluZGV4ICs9IDZcbiAgICAgICAgbW92ZSA9IHtcbiAgICAgICAgICBsb2dpY2FsVGltZXN0YW1wOiBsYXN0TG9naWNhbFRpbWVzdGFtcCxcbiAgICAgICAgICBtb3ZlOiBtb3ZlVHlwZSxcbiAgICAgICAgICBzb3VyY2VQaWxlSW5kZXgsXG4gICAgICAgICAgdGFyZ2V0UGlsZUluZGV4LFxuICAgICAgICAgIHRvcE1vdmVkQ2FyZEluZGV4LFxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgTW92ZVR5cGUuUkVERUFMOlxuICAgICAgY2FzZSBNb3ZlVHlwZS5XQVNURV9UT19GT1VOREFUSU9OOlxuICAgICAgICBtb3ZlID0ge1xuICAgICAgICAgIGxvZ2ljYWxUaW1lc3RhbXA6IGxhc3RMb2dpY2FsVGltZXN0YW1wLFxuICAgICAgICAgIG1vdmU6IG1vdmVUeXBlIGFzIGFueSwgLy8gVW5mb3J0dW5hdGVseSB0aGUgdHlwZSBjaGVjayBmYWlscyBpbiB0aGlzIGNhc2UsIGV2ZW4gdGhvdWdoIGV2ZXJ5dGhpbmcgY2hlY2tzIHVwLlxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYEZhaWxlZCB0byBkZXNlcmlhbGl6ZSBhIGhpc3RvcnkgaXRlbSBhdCB0aGUgaW5kZXggJHtjdXJyZW50TW92ZVN0YXJ0SW5kZXh9IG9mIGhpc3RvcnkgcmVjb3JkcyBkdWUgdG8gYCArXG4gICAgICAgICAgYHVua25vd24gbW92ZSB0eXBlOiAke3JlbWFpbmluZ1NlcmlhbGl6ZWRIaXN0b3J5LnN1YnN0cihsb2dpY2FsVGltZXN0YW1wRGlmZi50b1N0cmluZyhOVU1fUkFESVgpLmxlbmd0aCwgMSl9YCxcbiAgICAgICAgKVxuICAgIH1cblxuICAgIGhpc3RvcnkucHVzaChbbGFzdFN0YXRlLnN0YXRlLCBtb3ZlXSlcbiAgICBsYXN0U3RhdGUgPSBleGVjdXRlTW92ZShsYXN0U3RhdGUsIG1vdmUpXG4gIH1cbiAgcmV0dXJuIGhpc3Rvcnlcbn1cblxuZnVuY3Rpb24gZGVzZXJpYWxpemVTdGFydFRpbWUodGltZXN0YW1wOiBzdHJpbmcpOiB7YWJzb2x1dGVUaW1lc3RhbXA6IG51bWJlciwgbG9naWNhbFRpbWVzdGFtcDogbnVtYmVyfSB7XG4gIGNvbnN0IFthYnNvbHV0ZVRpbWVzdGFtcCwgbG9naWNhbFRpbWVzdGFtcF0gPSB0aW1lc3RhbXAuc3BsaXQoJywnKS5tYXAoKHBhcnQpID0+IHBhcnNlSW50KHBhcnQsIE5VTV9SQURJWCkpXG4gIHJldHVybiB7XG4gICAgYWJzb2x1dGVUaW1lc3RhbXA6IGFic29sdXRlVGltZXN0YW1wICogMTAwMCArIEVQT0NIX1NUQVJULFxuICAgIGxvZ2ljYWxUaW1lc3RhbXAsXG4gIH1cbn1cblxuY29uc3QgTU9WRV9UWVBFUyA9IE9iamVjdC52YWx1ZXMoTW92ZVR5cGUpLnNvcnQoKVxuY29uc3QgQ09MT1JTID0gT2JqZWN0LnZhbHVlcyhDb2xvcikuc29ydCgpXG5jb25zdCBVTlNFUklBTElaRURfQ0FSRFMgPSBERUNLXG5jb25zdCBTRVJJQUxJWkVEX0NBUkRTID0gKCgpID0+IHtcbiAgY29uc3QgYWxwaGFiZXQgPSBBcnJheS5mcm9tKHtsZW5ndGg6IDI2fSkubWFwKChfLCBpbmRleCkgPT4gU3RyaW5nLmZyb21DaGFyQ29kZSg5NyArIGluZGV4KSlcbiAgcmV0dXJuIFtcbiAgICAuLi5hbHBoYWJldCxcbiAgICAuLi5hbHBoYWJldC5tYXAoKGNoYXJhY3RlcikgPT4gY2hhcmFjdGVyLnRvVXBwZXJDYXNlKCkpLFxuICBdXG59KSgpXG4iLCJpbXBvcnQge2RlZmF1bHRTdGF0ZVJhbmtpbmdIZXVyaXN0aWMsIElCb3RPcHRpb25zfSBmcm9tICcuLi8uLi9nYW1lL0JvdCdcbmltcG9ydCB7aXNWaWN0b3J5R3VhcmFudGVlZH0gZnJvbSAnLi4vLi4vZ2FtZS9EZXNrJ1xuaW1wb3J0IHtJQm90U2ltdWxhdGlvbk9wdGlvbnMsIElOZXdHYW1lUnVsZXN9IGZyb20gJy4uLy4uL2dhbWUvR2FtZSdcbmltcG9ydCB7TW92ZUNvbmZpZGVuY2V9IGZyb20gJy4uLy4uL2dhbWUvTW92ZUhpbnRHZW5lcmF0b3InXG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX05FV19HQU1FX09QVElPTlM6IElOZXdHYW1lUnVsZXMgPSB7XG4gIGFsbG93Tm9uS2luZ1RvRW1wdHlQaWxlVHJhbnNmZXI6IGZhbHNlLFxuICBkcmF3bkNhcmRzOiAxLFxuICB0YWJsZWF1UGlsZXM6IDcsXG59XG5cbmV4cG9ydCBjb25zdCBCT1RfT1BUSU9OUzogSUJvdE9wdGlvbnMgPSB7XG4gIGxvb2tBaGVhZE1vdmVzOiAyLFxuICBtYXhDb25zaWRlcmVkQ29uZmlkZW5jZUxldmVsczogMyxcbiAgbWluQXV0b0FjY2VwdENvbmZpZGVuY2U6IE1vdmVDb25maWRlbmNlLkhJR0gsXG4gIHN0YXRlUmFua2luZ0hldXJpc3RpYzogZGVmYXVsdFN0YXRlUmFua2luZ0hldXJpc3RpYyxcbn1cblxuZXhwb3J0IGNvbnN0IEdBTUVfU0lNVUxBVElPTl9PUFRJT05TOiBJQm90U2ltdWxhdGlvbk9wdGlvbnMgPSB7XG4gIG1heE1vdmVzOiAzMDAsXG4gIG1heFNpbXVsYXRpb25UaW1lOiAyMF8wMDAsIC8vIG1pbGxpc2Vjb25kc1xuICBzaW11bGF0aW9uRW5kUHJlZGljYXRlOiBpc1ZpY3RvcnlHdWFyYW50ZWVkLFxufVxuIiwiaW1wb3J0IHtDb2xvcn0gZnJvbSAnLi9DYXJkJ1xuXG5leHBvcnQgZW51bSBNb3ZlVHlwZSB7XG4gIERSQVdfQ0FSRFMgPSAnTW92ZVR5cGUuRFJBV19DQVJEUycsXG4gIFJFREVBTCA9ICdNb3ZlVHlwZS5SRURFQUwnLFxuICBXQVNURV9UT19GT1VOREFUSU9OID0gJ01vdmVUeXBlLldBU1RFX1RPX0ZPVU5EQVRJT04nLFxuICBXQVNURV9UT19UQUJMRUFVID0gJ01vdmVUeXBlLldBU1RFX1RPX1RBQkxFQVUnLFxuICBUQUJMRUFVX1RPX0ZPVU5EQVRJT04gPSAnTW92ZVR5cGUuVEFCTEVBVV9UT19GT1VOREFUSU9OJyxcbiAgUkVWRUFMX1RBQkxFQVVfQ0FSRCA9ICdNb3ZlVHlwZS5SRVZFQUxfVEFCTEVBVV9DQVJEJyxcbiAgRk9VTkRBVElPTl9UT19UQUJMRUFVID0gJ01vdmVUeXBlLkZPVU5EQVRJT05fVE9fVEFCTEVBVScsXG4gIFRBQkxFQVVfVE9fVEFCTEVBVSA9ICdNb3ZlVHlwZS5UQUJMRUFVX1RPX1RBQkxFQVUnLFxufVxuXG5pbnRlcmZhY2UgSU1vdmU8TSBleHRlbmRzIE1vdmVUeXBlPiB7XG4gIG1vdmU6IE1cbn1cblxuaW50ZXJmYWNlIElEcmF3Q2FyZHNNb3ZlIGV4dGVuZHMgSU1vdmU8TW92ZVR5cGUuRFJBV19DQVJEUz4ge1xuICBkcmF3bkNhcmRzOiBudW1iZXJcbn1cblxuaW50ZXJmYWNlIElSZWRlYWxNb3ZlIGV4dGVuZHMgSU1vdmU8TW92ZVR5cGUuUkVERUFMPiB7XG59XG5cbmludGVyZmFjZSBJV2FzdGVUb0ZvdW5kYXRpb25Nb3ZlIGV4dGVuZHMgSU1vdmU8TW92ZVR5cGUuV0FTVEVfVE9fRk9VTkRBVElPTj4ge1xufVxuXG5pbnRlcmZhY2UgSVdhc3RlVG9UYWJsZWF1TW92ZSBleHRlbmRzIElNb3ZlPE1vdmVUeXBlLldBU1RFX1RPX1RBQkxFQVU+IHtcbiAgcGlsZUluZGV4OiBudW1iZXJcbn1cblxuaW50ZXJmYWNlIElUYWJsZWF1VG9Gb3VuZGF0aW9uTW92ZSBleHRlbmRzIElNb3ZlPE1vdmVUeXBlLlRBQkxFQVVfVE9fRk9VTkRBVElPTj4ge1xuICBwaWxlSW5kZXg6IG51bWJlclxufVxuXG5pbnRlcmZhY2UgSVJldmVhbFRhYmxlYXVDYXJkTW92ZSBleHRlbmRzIElNb3ZlPE1vdmVUeXBlLlJFVkVBTF9UQUJMRUFVX0NBUkQ+IHtcbiAgcGlsZUluZGV4OiBudW1iZXJcbn1cblxuaW50ZXJmYWNlIElGb3VuZGF0aW9uVG9UYWJsZWF1TW92ZSBleHRlbmRzIElNb3ZlPE1vdmVUeXBlLkZPVU5EQVRJT05fVE9fVEFCTEVBVT4ge1xuICBjb2xvcjogQ29sb3JcbiAgcGlsZUluZGV4OiBudW1iZXJcbn1cblxuaW50ZXJmYWNlIElUYWJsZWF1VG9UYWJsZWF1TW92ZSBleHRlbmRzIElNb3ZlPE1vdmVUeXBlLlRBQkxFQVVfVE9fVEFCTEVBVT4ge1xuICBzb3VyY2VQaWxlSW5kZXg6IG51bWJlclxuICB0b3BNb3ZlZENhcmRJbmRleDogbnVtYmVyXG4gIHRhcmdldFBpbGVJbmRleDogbnVtYmVyXG59XG5cbmV4cG9ydCB0eXBlIE1vdmUgPVxuICBJRHJhd0NhcmRzTW92ZSB8XG4gIElSZWRlYWxNb3ZlIHxcbiAgSVdhc3RlVG9Gb3VuZGF0aW9uTW92ZSB8XG4gIElXYXN0ZVRvVGFibGVhdU1vdmUgfFxuICBJVGFibGVhdVRvRm91bmRhdGlvbk1vdmUgfFxuICBJUmV2ZWFsVGFibGVhdUNhcmRNb3ZlIHxcbiAgSUZvdW5kYXRpb25Ub1RhYmxlYXVNb3ZlIHxcbiAgSVRhYmxlYXVUb1RhYmxlYXVNb3ZlXG4iLCJleHBvcnQgZnVuY3Rpb24gbGFzdEl0ZW1Pck51bGw8VD4oYXJyYXk6IHJlYWRvbmx5IFRbXSk6IG51bGwgfCBUIHtcbiAgcmV0dXJuIGFycmF5Lmxlbmd0aCA/IGxhc3RJdGVtKGFycmF5KSA6IG51bGxcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxhc3RJdGVtPFQ+KGFycmF5OiByZWFkb25seSBUW10pOiBUIHtcbiAgaWYgKGFycmF5Lmxlbmd0aCkge1xuICAgIHJldHVybiBhcnJheVthcnJheS5sZW5ndGggLSAxXVxuICB9XG5cbiAgdGhyb3cgbmV3IEVycm9yKCdUaGUgcHJvdmlkZWQgYXJyYXkgaXMgZW1wdHknKVxufVxuIiwiaW1wb3J0IHtJQ2FyZCwgdHVybk92ZXJ9IGZyb20gJy4vQ2FyZCdcblxuZXhwb3J0IGludGVyZmFjZSBJUGlsZSB7XG4gIC8qKlxuICAgKiBUaGUgbGFzdCBjYXJkIGluIHRoZSBhcnJheSBpcyBjb25zaWRlcmVkIHRvIGJlIG9uIHRoZSB0b3AgLSB0aGUgY2FyZHMgaW4gdGhpcyBwaWxlIGFyZSBidWlsdCBmcm9tIHRoZSBib3R0b20gdXAuXG4gICAqL1xuICByZWFkb25seSBjYXJkczogUmVhZG9ubHlBcnJheTxJQ2FyZD5cbn1cblxuZXhwb3J0IGNsYXNzIFBpbGUgaW1wbGVtZW50cyBJUGlsZSB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSBjYXJkczogUmVhZG9ubHlBcnJheTxJQ2FyZD4pIHtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZHJhdyhwaWxlOiBJUGlsZSwgbnVtYmVyT2ZDYXJkczogbnVtYmVyKTogW0lQaWxlLCBSZWFkb25seUFycmF5PElDYXJkPl0ge1xuICBpZiAoIU51bWJlci5pc1NhZmVJbnRlZ2VyKG51bWJlck9mQ2FyZHMpIHx8IG51bWJlck9mQ2FyZHMgPD0gMCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFRoZSBudW1iZXJPZkNhcmRzIHBhcmFtZXRlciBtdXN0IGJlIGEgcG9zaXRpdmUgc2FmZSBpbnRlZ2VyLCAke251bWJlck9mQ2FyZHN9IHdhcyBwcm92aWRlZGApXG4gIH1cbiAgY29uc3QgZHJhd25DYXJkcyA9IHBpbGUuY2FyZHMuc2xpY2UoLW51bWJlck9mQ2FyZHMpLnJldmVyc2UoKVxuICBjb25zdCBwaWxlUmVtYWluZGVyID0gbmV3IFBpbGUocGlsZS5jYXJkcy5zbGljZSgwLCBNYXRoLm1heChwaWxlLmNhcmRzLmxlbmd0aCAtIG51bWJlck9mQ2FyZHMsIDApKSlcbiAgcmV0dXJuIFtwaWxlUmVtYWluZGVyLCBkcmF3bkNhcmRzXVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcGxhY2VDYXJkT25Ub3AocGlsZTogSVBpbGUsIGNhcmQ6IElDYXJkKTogSVBpbGUge1xuICByZXR1cm4gbmV3IFBpbGUocGlsZS5jYXJkcy5jb25jYXQoY2FyZCkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwbGFjZVBpbGVPblRvcChib3R0b21QaWxlOiBJUGlsZSwgdG9wUGlsZTogSVBpbGUpOiBJUGlsZSB7XG4gIHJldHVybiBuZXcgUGlsZShib3R0b21QaWxlLmNhcmRzLmNvbmNhdCh0b3BQaWxlLmNhcmRzKSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHR1cm5DYXJkKHBpbGU6IElQaWxlLCBjYXJkVG9UdXJuOiBJQ2FyZCk6IElQaWxlIHtcbiAgY29uc3QgaW5kZXggPSBwaWxlLmNhcmRzLmluZGV4T2YoY2FyZFRvVHVybilcbiAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhlIHNwZWNpZmllZCBjYXJkIGlzIG5vdCBwcmVzZW50IGluIHRoZSBzcGVjaWZpZWQgcGlsZScpXG4gIH1cblxuICBjb25zdCBwYXRjaGVkQ2FyZHMgPSBwaWxlLmNhcmRzLnNsaWNlKClcbiAgY29uc3QgbmV3Q2FyZCA9IHR1cm5PdmVyKGNhcmRUb1R1cm4pXG4gIHBhdGNoZWRDYXJkcy5zcGxpY2UoaW5kZXgsIDEsIG5ld0NhcmQpXG4gIHJldHVybiBuZXcgUGlsZShwYXRjaGVkQ2FyZHMpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzbGljZVBpbGUocGlsZTogSVBpbGUsIHNlcGFyYXRpbmdDYXJkOiBJQ2FyZCk6IFtJUGlsZSwgSVBpbGVdIHtcbiAgY29uc3Qgc2VwYXJhdG9ySW5kZXggPSBwaWxlLmNhcmRzLmluZGV4T2Yoc2VwYXJhdGluZ0NhcmQpXG4gIGlmIChzZXBhcmF0b3JJbmRleCA9PT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzcGVjaWZpZWQgY2FyZCBpcyBub3QgcHJlc2VudCBpbiB0aGUgc3BlY2lmaWVkIHBpbGUnKVxuICB9XG5cbiAgY29uc3QgdG9wUGlsZSA9IG5ldyBQaWxlKHBpbGUuY2FyZHMuc2xpY2UoMCwgc2VwYXJhdG9ySW5kZXgpKVxuICBjb25zdCBib3R0b21QaWxlID0gbmV3IFBpbGUocGlsZS5jYXJkcy5zbGljZShzZXBhcmF0b3JJbmRleCkpXG4gIHJldHVybiBbdG9wUGlsZSwgYm90dG9tUGlsZV1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNodWZmbGUocGlsZTogSVBpbGUpOiBJUGlsZSB7XG4gIC8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Zpc2hlciVFMiU4MCU5M1lhdGVzX3NodWZmbGUjVGhlX21vZGVybl9hbGdvcml0aG1cbiAgY29uc3QgY2FyZHMgPSBwaWxlLmNhcmRzLnNsaWNlKClcbiAgZm9yIChsZXQgY3VycmVudENhcmRJbmRleCA9IDA7IGN1cnJlbnRDYXJkSW5kZXggPCBjYXJkcy5sZW5ndGggLSAxOyBjdXJyZW50Q2FyZEluZGV4KyspIHtcbiAgICBjb25zdCByYW5kb21DYXJkSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKsKgKGNhcmRzLmxlbmd0aCAtIGN1cnJlbnRDYXJkSW5kZXgpKSArIGN1cnJlbnRDYXJkSW5kZXhcbiAgICBjb25zdCBjdXJyZW50Q2FyZCA9IGNhcmRzW2N1cnJlbnRDYXJkSW5kZXhdXG4gICAgY2FyZHNbY3VycmVudENhcmRJbmRleF0gPSBjYXJkc1tyYW5kb21DYXJkSW5kZXhdXG4gICAgY2FyZHNbcmFuZG9tQ2FyZEluZGV4XSA9IGN1cnJlbnRDYXJkXG4gIH1cbiAgcmV0dXJuIG5ldyBQaWxlKGNhcmRzKVxufVxuIiwiaW1wb3J0IHtJQm90T3B0aW9uc30gZnJvbSAnLi9Cb3QnXG5pbXBvcnQge2NyZWF0ZUdhbWVXaXRoQm90UHJlZGljYXRlLCBJQm90U2ltdWxhdGlvbk9wdGlvbnMsIElOZXdHYW1lUnVsZXN9IGZyb20gJy4vR2FtZSdcbmltcG9ydCB7c2VyaWFsaXplRGVja0Zyb21EZXNrfSBmcm9tICcuL1NlcmlhbGl6ZXInXG5cbmludGVyZmFjZSBJQ2FuY2VsbGFibGVTY2hlZHVsZWRUYXNrIHtcbiAgY2FuY2VsKCk6IHZvaWRcbn1cblxuaW50ZXJmYWNlIElUYXNrPFI+IGV4dGVuZHMgSUNhbmNlbGxhYmxlU2NoZWR1bGVkVGFzayB7XG4gIHRhc2s6IFByb21pc2U8Uj5cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2lubmFibGVHYW1lc0dlbmVyYXRvciB7XG4gIHB1YmxpYyBvblByb2dyZXNzOiBudWxsIHwgKChsYXN0V2lubmFibGVEZWNrOiBudWxsIHwgc3RyaW5nKSA9PiB2b2lkKSA9IG51bGxcbiAgcHJpdmF0ZSBuZXh0U2NoZWR1bGVkR2VuZXJhdG9yVGFzazogbnVsbCB8IElDYW5jZWxsYWJsZVNjaGVkdWxlZFRhc2sgPSBudWxsXG4gIHByaXZhdGUga25vd25XaW5uYWJsZURlY2tzID0gbmV3IFNldDxzdHJpbmc+KClcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IGdhbWVSdWxlczogSU5ld0dhbWVSdWxlcyxcbiAgICBwcml2YXRlIHJlYWRvbmx5IGJvdE9wdGlvbnM6IElCb3RPcHRpb25zLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgZ2FtZVNpbXVsYXRpb25PcHRpb25zOiBJQm90U2ltdWxhdGlvbk9wdGlvbnMsXG4gICAgcHJpdmF0ZSByZWFkb25seSB0YXNrUnVubmVyOiAodGFzazogKCkgPT4gdm9pZCkgPT4gSUNhbmNlbGxhYmxlU2NoZWR1bGVkVGFzayxcbiAgKSB7XG4gIH1cblxuICBwdWJsaWMgcnVuR2VuZXJhdG9yKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5uZXh0U2NoZWR1bGVkR2VuZXJhdG9yVGFzaykge1xuICAgICAgY29uc3QgZGFlbW9uID0gKCk6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLm5leHRTY2hlZHVsZWRHZW5lcmF0b3JUYXNrID0gdGhpcy50YXNrUnVubmVyKGRhZW1vbilcbiAgICAgICAgdGhpcy50ZXN0TmV4dFJhbmRvbURlY2soKVxuICAgICAgfVxuICAgICAgdGhpcy5uZXh0U2NoZWR1bGVkR2VuZXJhdG9yVGFzayA9IHRoaXMudGFza1J1bm5lcihkYWVtb24pXG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0b3BHZW5lcmF0b3IoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubmV4dFNjaGVkdWxlZEdlbmVyYXRvclRhc2spIHtcbiAgICAgIHRoaXMubmV4dFNjaGVkdWxlZEdlbmVyYXRvclRhc2suY2FuY2VsKClcbiAgICAgIHRoaXMubmV4dFNjaGVkdWxlZEdlbmVyYXRvclRhc2sgPSBudWxsXG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdlbmVyYXRlV2lubmFibGVHYW1lKCk6IElUYXNrPHN0cmluZz4ge1xuICAgIGNvbnN0IHN1YkdlbmVyYXRvciA9IG5ldyBXaW5uYWJsZUdhbWVzR2VuZXJhdG9yKFxuICAgICAgdGhpcy5nYW1lUnVsZXMsXG4gICAgICB0aGlzLmJvdE9wdGlvbnMsXG4gICAgICB0aGlzLmdhbWVTaW11bGF0aW9uT3B0aW9ucyxcbiAgICAgIHRoaXMudGFza1J1bm5lcixcbiAgICApXG4gICAgcmV0dXJuIHtcbiAgICAgIHRhc2s6IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIHN1YkdlbmVyYXRvci5vblByb2dyZXNzID0gKGxhc3RXaW5uYWJsZURlY2spID0+IHtcbiAgICAgICAgICBpZiAobGFzdFdpbm5hYmxlRGVjaykge1xuICAgICAgICAgICAgdGhpcy5rbm93bldpbm5hYmxlRGVja3MuYWRkKGxhc3RXaW5uYWJsZURlY2spXG4gICAgICAgICAgICBzdWJHZW5lcmF0b3Iuc3RvcEdlbmVyYXRvcigpXG4gICAgICAgICAgICByZXNvbHZlKGxhc3RXaW5uYWJsZURlY2spXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN1YkdlbmVyYXRvci5ydW5HZW5lcmF0b3IoKVxuICAgICAgfSksXG4gICAgICBjYW5jZWwoKSB7XG4gICAgICAgIHN1YkdlbmVyYXRvci5zdG9wR2VuZXJhdG9yKClcbiAgICAgIH0sXG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldCBnZW5lcmF0ZWREZWNrcygpOiBSZWFkb25seVNldDxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5rbm93bldpbm5hYmxlRGVja3NcbiAgfVxuXG4gIHByaXZhdGUgdGVzdE5leHRSYW5kb21EZWNrKCk6IHZvaWQge1xuICAgIGNvbnN0IFtnZW5lcmF0ZWRHYW1lLCBpc1dpbm5hYmxlXSA9IGNyZWF0ZUdhbWVXaXRoQm90UHJlZGljYXRlKFxuICAgICAgdGhpcy5nYW1lUnVsZXMsXG4gICAgICB0aGlzLmJvdE9wdGlvbnMsXG4gICAgICB0aGlzLmdhbWVTaW11bGF0aW9uT3B0aW9ucyxcbiAgICApXG5cbiAgICBjb25zdCBsYXN0V2lubmFibGVEZWNrID0gaXNXaW5uYWJsZSA/IHNlcmlhbGl6ZURlY2tGcm9tRGVzayhnZW5lcmF0ZWRHYW1lLnN0YXRlKSA6IG51bGxcbiAgICBpZiAobGFzdFdpbm5hYmxlRGVjaykge1xuICAgICAgdGhpcy5rbm93bldpbm5hYmxlRGVja3MuYWRkKGxhc3RXaW5uYWJsZURlY2spXG4gICAgfVxuICAgIGlmICh0aGlzLm9uUHJvZ3Jlc3MpIHtcbiAgICAgIHRoaXMub25Qcm9ncmVzcyhsYXN0V2lubmFibGVEZWNrKVxuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGVudW0gU0VWRVJJVFkge1xuICBFUlJPUiA9ICdTRVZFUklUWS5FUlJPUicsXG4gIFdBUk5JTkcgPSAnU0VWRVJJVFkuV0FSTklORycsXG4gIElORk8gPSAnU0VWRVJJVFkuSU5GTycsXG4gIERFQlVHID0gJ1NFVkVSSVRZLkRFQlVHJyxcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVycm9yKC4uLm1lc3NhZ2U6IHJlYWRvbmx5IHVua25vd25bXSk6IHZvaWQge1xuICBsb2coU0VWRVJJVFkuRVJST1IsIG1lc3NhZ2UpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3YXJuaW5nKC4uLm1lc3NhZ2U6IHJlYWRvbmx5IHVua25vd25bXSk6IHZvaWQge1xuICBsb2coU0VWRVJJVFkuV0FSTklORywgbWVzc2FnZSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluZm8oLi4ubWVzc2FnZTogcmVhZG9ubHkgdW5rbm93bltdKTogdm9pZCB7XG4gIGxvZyhTRVZFUklUWS5JTkZPLCBtZXNzYWdlKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVidWcoLi4ubWVzc2FnZTogcmVhZG9ubHkgdW5rbm93bltdKTogdm9pZCB7XG4gIGxvZyhTRVZFUklUWS5ERUJVRywgbWVzc2FnZSlcbn1cblxuZnVuY3Rpb24gbG9nKHNldmVyaXR5OiBTRVZFUklUWSwgbWVzc2FnZXM6IHJlYWRvbmx5IHVua25vd25bXSk6IHZvaWQge1xuICBzd2l0Y2ggKHNldmVyaXR5KSB7XG4gICAgY2FzZSBTRVZFUklUWS5FUlJPUjpcbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXG4gICAgICBjb25zb2xlLmVycm9yKGBFUlJPUiB8ICR7c2VsZi5uYW1lfSB8IGAsIC4uLm1lc3NhZ2VzKVxuICAgICAgYnJlYWtcbiAgICBjYXNlIFNFVkVSSVRZLldBUk5JTkc6XG4gICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKGBXQVJOSU5HIHwgJHtzZWxmLm5hbWV9IHwgYCwgLi4ubWVzc2FnZXMpXG4gICAgICBicmVha1xuICAgIGNhc2UgU0VWRVJJVFkuSU5GTzpcbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXG4gICAgICBjb25zb2xlLmluZm8oYElORk8gfCAke3NlbGYubmFtZX0gfCBgLCAuLi5tZXNzYWdlcylcbiAgICAgIGJyZWFrXG4gICAgY2FzZSBTRVZFUklUWS5ERUJVRzpcbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXG4gICAgICBjb25zb2xlLmRlYnVnKGBERUJVRyB8ICR7c2VsZi5uYW1lfSB8IGAsIC4uLm1lc3NhZ2VzKVxuICAgICAgYnJlYWtcbiAgICBkZWZhdWx0OlxuICAgICAgYnJlYWsgLy8gaWdub3JlXG4gIH1cbn1cbiIsImltcG9ydCBXaW5uYWJsZUdhbWVzR2VuZXJhdG9yIGZyb20gJy4uLy4uLy4uL2dhbWUvV2lubmFibGVHYW1lc0dlbmVyYXRvcidcbmltcG9ydCB7Qk9UX09QVElPTlMsIERFRkFVTFRfTkVXX0dBTUVfT1BUSU9OUywgR0FNRV9TSU1VTEFUSU9OX09QVElPTlN9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCAqIGFzIGxvZ2dlciBmcm9tICcuL2xvZ2dlcidcblxubGV0IHdpbm5hYmxlR2FtZXNHZW5lcmF0b3I6IG51bGwgfCBXaW5uYWJsZUdhbWVzR2VuZXJhdG9yID0gbnVsbFxuXG5zZWxmLm9ubWVzc2FnZSA9IChldmVudDogTWVzc2FnZUV2ZW50KTogdm9pZCA9PiB7XG4gIGlmICh0eXBlb2YgZXZlbnQuZGF0YSA9PT0gJ251bWJlcicgJiYgWzEsIDNdLmluY2x1ZGVzKGV2ZW50LmRhdGEpKSB7XG4gICAgbG9nZ2VyLmluZm8oYENyZWF0aW5nIGEgd2lubmFibGUgZ2FtZXMgZ2VuZXJhdG9yIGZvciAke2V2ZW50LmRhdGF9IGRyYXduIGNhcmRzYClcbiAgICB3aW5uYWJsZUdhbWVzR2VuZXJhdG9yID0gY3JlYXRlV2lubmFibGVHYW1lc0dlbmVyYXRvcihldmVudC5kYXRhIGFzIDEgfCAzKVxuICAgIHJldHVyblxuICB9XG5cbiAgaWYgKCF3aW5uYWJsZUdhbWVzR2VuZXJhdG9yKSB7XG4gICAgbG9nZ2VyLndhcm5pbmcoXG4gICAgICAnUmVjZWl2ZWQgYSByZXF1ZXN0IHRvIGdlbmVyYXRlIGEgbmV3IGdhbWUsIGJ1dCBubyBnZW5lcmF0b3IgaGFzIGJlZW4gY3JlYXRlZCB5ZXQsIHdhaXRpbmcgZm9yIGEgY29uZmlndXJhdGlvbicsXG4gICAgKVxuICAgIHJldHVyblxuICB9XG5cbiAgaWYgKCFldmVudC5kYXRhLmdlbmVyYXRlTmV3R2FtZSkge1xuICAgIGxvZ2dlci53YXJuaW5nKFxuICAgICAgJ1JlY2VpdmVkIGFuIGludmFsaWQgbWVzc2FnZScsIGV2ZW50LmRhdGEsXG4gICAgKVxuICAgIHJldHVyblxuICB9XG5cbiAgbG9nZ2VyLmluZm8oJ0dlbmVyYXRpbmcgYSBuZXcgd2lubmFibGUgZ2FtZScpXG4gIHdpbm5hYmxlR2FtZXNHZW5lcmF0b3IuZ2VuZXJhdGVXaW5uYWJsZUdhbWUoKS50YXNrLnRoZW4oKGdlbmVyYXRlZERlY2spID0+IHtcbiAgICBsb2dnZXIuaW5mbygnQSBuZXcgd2lubmFibGUgZ2FtZSBoYXMgYmVlbiBnZW5lcmF0ZWQnKVxuICAgIHNlbGYucG9zdE1lc3NhZ2UoZ2VuZXJhdGVkRGVjaylcbiAgfSkuY2F0Y2goKGdlbmVyYXRvckVycm9yKSA9PiB7XG4gICAgbG9nZ2VyLmVycm9yKCdHZW5lcmF0b3IgaGFzIGZhaWxlZCcsIGdlbmVyYXRvckVycm9yKVxuICB9KVxufVxuXG5mdW5jdGlvbiBjcmVhdGVXaW5uYWJsZUdhbWVzR2VuZXJhdG9yKGRyYXduQ2FyZHM6IDEgfCAzKTogV2lubmFibGVHYW1lc0dlbmVyYXRvciB7XG4gIHJldHVybiBuZXcgV2lubmFibGVHYW1lc0dlbmVyYXRvcihcbiAgICB7XG4gICAgICAuLi5ERUZBVUxUX05FV19HQU1FX09QVElPTlMsXG4gICAgICBkcmF3bkNhcmRzLFxuICAgIH0sXG4gICAgQk9UX09QVElPTlMsXG4gICAgR0FNRV9TSU1VTEFUSU9OX09QVElPTlMsXG4gICAgdGFza1J1bm5lcixcbiAgKVxufVxuXG5mdW5jdGlvbiB0YXNrUnVubmVyKHRhc2s6ICgpID0+IHZvaWQpIHtcbiAgY29uc3QgcmVxdWVzdElkID0gc2V0VGltZW91dCh0YXNrKVxuICByZXR1cm4ge1xuICAgIGNhbmNlbCgpIHtcbiAgICAgIGNsZWFyVGltZW91dChyZXF1ZXN0SWQpXG4gICAgfSxcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgQ29sb3IsXG4gIElDYXJkLFxuICBpc1ZhbGlkRm91bmRhdGlvblNlcXVlbmNlLFxuICBpc1ZhbGlkVGFibGVhdVNlcXVlbmNlLFxuICBSYW5rLFxuICBSQU5LX1NFUVVFTkNFLFxuICBTaWRlLFxuICB0dXJuT3Zlcixcbn0gZnJvbSAnLi9DYXJkJ1xuaW1wb3J0IHtJR2FtZVJ1bGVzfSBmcm9tICcuL0dhbWUnXG5pbXBvcnQge01vdmUsIE1vdmVUeXBlfSBmcm9tICcuL01vdmUnXG5pbXBvcnQge2RyYXcsIElQaWxlLCBQaWxlLCBwbGFjZUNhcmRPblRvcCwgcGxhY2VQaWxlT25Ub3B9IGZyb20gJy4vUGlsZSdcbmltcG9ydCB7YWRkQ2FyZFRvUGlsZSwgSVRhYmxlYXUsIG1vdmVQaWxlUGFydCwgcmVtb3ZlVG9wQ2FyZEZyb21QaWxlLCByZXZlYWxUb3BDYXJkfSBmcm9tICcuL1RhYmxlYXUnXG5pbXBvcnQge2xhc3RJdGVtfSBmcm9tICcuL3V0aWwnXG5cbmV4cG9ydCBpbnRlcmZhY2UgSURlc2sge1xuICByZWFkb25seSBzdG9jazogSVBpbGVcbiAgcmVhZG9ubHkgd2FzdGU6IElQaWxlXG4gIHJlYWRvbmx5IGZvdW5kYXRpb246IElGb3VuZGF0aW9uXG4gIHJlYWRvbmx5IHRhYmxlYXU6IElUYWJsZWF1XG59XG5cbmludGVyZmFjZSBJRm91bmRhdGlvbiB7XG4gIFtDb2xvci5ESUFNT05EU106IElQaWxlXG4gIFtDb2xvci5IRUFSVEhTXTogSVBpbGVcbiAgW0NvbG9yLkNMVUJTXTogSVBpbGVcbiAgW0NvbG9yLlNQQURFU106IElQaWxlXG59XG5cbmV4cG9ydCBjbGFzcyBEZXNrIGltcGxlbWVudHMgSURlc2sge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgcmVhZG9ubHkgc3RvY2s6IElQaWxlLFxuICAgIHB1YmxpYyByZWFkb25seSB3YXN0ZTogSVBpbGUsXG4gICAgcHVibGljIHJlYWRvbmx5IGZvdW5kYXRpb246IElGb3VuZGF0aW9uLFxuICAgIHB1YmxpYyByZWFkb25seSB0YWJsZWF1OiBJVGFibGVhdSxcbiAgKSB7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4ZWN1dGVNb3ZlKGRlc2s6IElEZXNrLCBydWxlczogSUdhbWVSdWxlcywgbW92ZTogTW92ZSk6IElEZXNrIHtcbiAgc3dpdGNoIChtb3ZlLm1vdmUpIHtcbiAgICBjYXNlIE1vdmVUeXBlLkRSQVdfQ0FSRFM6XG4gICAgICByZXR1cm4gZHJhd0NhcmRzKGRlc2ssIHJ1bGVzLCBtb3ZlLmRyYXduQ2FyZHMpXG4gICAgY2FzZSBNb3ZlVHlwZS5SRURFQUw6XG4gICAgICByZXR1cm4gcmVkZWFsKGRlc2spXG4gICAgY2FzZSBNb3ZlVHlwZS5XQVNURV9UT19GT1VOREFUSU9OOlxuICAgICAgcmV0dXJuIG1vdmVUb3BXYXN0ZUNhcmRUb0ZvdW5kYXRpb24oZGVzaylcbiAgICBjYXNlIE1vdmVUeXBlLldBU1RFX1RPX1RBQkxFQVU6XG4gICAgICByZXR1cm4gbW92ZVRvcFdhc3RlQ2FyZFRvVGFibGVhdShkZXNrLCBydWxlcywgZGVzay50YWJsZWF1LnBpbGVzW21vdmUucGlsZUluZGV4XSlcbiAgICBjYXNlIE1vdmVUeXBlLlRBQkxFQVVfVE9fRk9VTkRBVElPTjpcbiAgICAgIHJldHVybiBtb3ZlVG9wVGFibGVhdVBpbGVDYXJkVG9Gb3VuZGF0aW9uKGRlc2ssIGRlc2sudGFibGVhdS5waWxlc1ttb3ZlLnBpbGVJbmRleF0pXG4gICAgY2FzZSBNb3ZlVHlwZS5SRVZFQUxfVEFCTEVBVV9DQVJEOlxuICAgICAgcmV0dXJuIHJldmVhbFRvcFRhYmxlYXVQaWxlQ2FyZChkZXNrLCBkZXNrLnRhYmxlYXUucGlsZXNbbW92ZS5waWxlSW5kZXhdKVxuICAgIGNhc2UgTW92ZVR5cGUuRk9VTkRBVElPTl9UT19UQUJMRUFVOlxuICAgICAgcmV0dXJuIG1vdmVGb3VuZGF0aW9uQ2FyZFRvVGFibGVhdVBpbGUoZGVzaywgcnVsZXMsIG1vdmUuY29sb3IsIGRlc2sudGFibGVhdS5waWxlc1ttb3ZlLnBpbGVJbmRleF0pXG4gICAgY2FzZSBNb3ZlVHlwZS5UQUJMRUFVX1RPX1RBQkxFQVU6XG4gICAgICByZXR1cm4gbW92ZVRhYmxlYXVQaWxlUGFydChcbiAgICAgICAgZGVzayxcbiAgICAgICAgcnVsZXMsXG4gICAgICAgIGRlc2sudGFibGVhdS5waWxlc1ttb3ZlLnNvdXJjZVBpbGVJbmRleF0sXG4gICAgICAgIGRlc2sudGFibGVhdS5waWxlc1ttb3ZlLnNvdXJjZVBpbGVJbmRleF0uY2FyZHNbbW92ZS50b3BNb3ZlZENhcmRJbmRleF0sXG4gICAgICAgIGRlc2sudGFibGVhdS5waWxlc1ttb3ZlLnRhcmdldFBpbGVJbmRleF0sXG4gICAgICApXG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBtb3ZlIHR5cGU6ICR7bW92ZSAmJiAobW92ZSBhcyBhbnkpLm1vdmV9YClcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNWaWN0b3J5KHtzdG9jaywgdGFibGVhdSwgd2FzdGV9OiBJRGVzayk6IGJvb2xlYW4ge1xuICByZXR1cm4gIXN0b2NrLmNhcmRzLmxlbmd0aCAmJiAhd2FzdGUuY2FyZHMubGVuZ3RoICYmIHRhYmxlYXUucGlsZXMuZXZlcnkoKHBpbGUpID0+ICFwaWxlLmNhcmRzLmxlbmd0aClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVmljdG9yeUd1YXJhbnRlZWQoe3N0b2NrLCB3YXN0ZSwgdGFibGVhdToge3BpbGVzOiB0YWJsZWF1UGlsZXN9fTogSURlc2spOiBib29sZWFuIHtcbiAgcmV0dXJuIChcbiAgICAhc3RvY2suY2FyZHMubGVuZ3RoICYmXG4gICAgIXdhc3RlLmNhcmRzLmxlbmd0aCAmJlxuICAgIHRhYmxlYXVQaWxlcy5ldmVyeSgocGlsZSkgPT4gcGlsZS5jYXJkcy5ldmVyeSgoY2FyZCkgPT4gY2FyZC5zaWRlID09PSBTaWRlLkZBQ0UpKVxuICApXG59XG5cbmZ1bmN0aW9uIGRyYXdDYXJkcyhkZXNrOiBJRGVzaywgcnVsZXM6IElHYW1lUnVsZXMsIG51bWJlck9mQ2FyZHM6IG51bWJlcikge1xuICBpZiAobnVtYmVyT2ZDYXJkcyAhPT0gcnVsZXMuZHJhd25DYXJkcykge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBUaGUgbnVtYmVyIG9mIGNhcmRzIHRvIGRyYXcgKCR7bnVtYmVyT2ZDYXJkc30pIGRvZXMgbm90IG1hdGNoIHRoZSBudW1iZXIgaW4gZ2FtZSBydWxlcyAoJHtydWxlcy5kcmF3bkNhcmRzfSlgLFxuICAgIClcbiAgfVxuICBjb25zdCBbc3RvY2tSZW1haW5kZXIsIGRyYXduQ2FyZHNdID0gZHJhdyhkZXNrLnN0b2NrLCBudW1iZXJPZkNhcmRzKVxuICBjb25zdCBuZXdXYXN0ZSA9IHBsYWNlUGlsZU9uVG9wKGRlc2sud2FzdGUsIG5ldyBQaWxlKGRyYXduQ2FyZHMubWFwKChjYXJkKSA9PiB0dXJuT3ZlcihjYXJkKSkpKVxuICByZXR1cm4gbmV3IERlc2soc3RvY2tSZW1haW5kZXIsIG5ld1dhc3RlLCBkZXNrLmZvdW5kYXRpb24sIGRlc2sudGFibGVhdSlcbn1cblxuZnVuY3Rpb24gcmVkZWFsKGRlc2s6IElEZXNrKSB7XG4gIGlmIChkZXNrLnN0b2NrLmNhcmRzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHJlZGVhbCBpZiB0aGVyZSBhcmUgY2FyZHMgaW4gdGhlIHN0b2NrJylcbiAgfVxuXG4gIHJldHVybiBuZXcgRGVzayhcbiAgICBuZXcgUGlsZShkZXNrLndhc3RlLmNhcmRzLm1hcCgoY2FyZCkgPT4gdHVybk92ZXIoY2FyZCkpLnJldmVyc2UoKSksXG4gICAgbmV3IFBpbGUoW10pLFxuICAgIGRlc2suZm91bmRhdGlvbixcbiAgICBkZXNrLnRhYmxlYXUsXG4gIClcbn1cblxuZnVuY3Rpb24gbW92ZVRvcFdhc3RlQ2FyZFRvRm91bmRhdGlvbihkZXNrOiBJRGVzayk6IElEZXNrIHtcbiAgaWYgKCFkZXNrLndhc3RlLmNhcmRzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhlcmUgaXMgbm8gY2FyZCBvbiB0aGUgd2FzdGUgcGlsZScpXG4gIH1cblxuICBjb25zdCBbbmV3V2FzdGUsIFtjYXJkVG9QbGFjZV1dID0gZHJhdyhkZXNrLndhc3RlLCAxKVxuICBjb25zdCBuZXdGb3VuZGF0aW9uID0gYWRkQ2FyZFRvRm91bmRhdGlvbihkZXNrLmZvdW5kYXRpb24sIGNhcmRUb1BsYWNlKVxuXG4gIHJldHVybiBuZXcgRGVzayhcbiAgICBkZXNrLnN0b2NrLFxuICAgIG5ld1dhc3RlLFxuICAgIG5ld0ZvdW5kYXRpb24sXG4gICAgZGVzay50YWJsZWF1LFxuICApXG59XG5cbmZ1bmN0aW9uIG1vdmVUb3BXYXN0ZUNhcmRUb1RhYmxlYXUoZGVzazogSURlc2ssIHJ1bGVzOiBJR2FtZVJ1bGVzLCB0YWJsZWF1UGlsZTogSVBpbGUpOiBJRGVzayB7XG4gIGlmICghZGVzay53YXN0ZS5jYXJkcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZXJlIGlzIG5vIGNhcmQgb24gdGhlIHdhc3RlIHBpbGUnKVxuICB9XG5cbiAgY29uc3QgW25ld1dhc3RlLCBbY2FyZFRvUGxhY2VdXSA9IGRyYXcoZGVzay53YXN0ZSwgMSlcbiAgaWYgKFxuICAgICF0YWJsZWF1UGlsZS5jYXJkcy5sZW5ndGggJiZcbiAgICAhcnVsZXMuYWxsb3dOb25LaW5nVG9FbXB0eVBpbGVUcmFuc2ZlciAmJlxuICAgIGNhcmRUb1BsYWNlLnJhbmsgIT09IFJhbmsuS0lOR1xuICApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBjdXJyZW50IGdhbWUgcnVsZXMgZm9yYmlkIHBsYWNpbmcgYW55IGNhcmQgb3RoZXIgdGhhbiBhIEtpbmcgb24gYW4gZW1wdHkgdGFibGVhdSBwaWxlYClcbiAgfVxuICBpZiAoXG4gICAgdGFibGVhdVBpbGUuY2FyZHMubGVuZ3RoICYmXG4gICAgIWlzVmFsaWRUYWJsZWF1U2VxdWVuY2UobGFzdEl0ZW0odGFibGVhdVBpbGUuY2FyZHMpLCBjYXJkVG9QbGFjZSlcbiAgKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ1RoZSB0b3Agd2FzdGUgY2FyZCBjYW5ub3QgYmUgcGxhY2VkIG9uIHRvcCBvZiB0aGUgdGFyZ2V0IHRhYmxlYXUgcGlsZSBiZWNhdXNlIGl0IGlzIG5vdCBpbiByYW5rIHNlcXVlbmNlIHdpdGggJyArXG4gICAgICAndGhlIGN1cnJlbnQgdG9wIGNhcmQgb2YgdGhlIHRhcmdldCBwaWxlIG9yIGl0IGlzIG9mIHRoZSBzYW1lIGZyZW5jaCBkZWNrIGNvbG9yIChyZWQvYmxhY2spIGFzIHRoZSBjdXJyZW50IHRvcCAnICtcbiAgICAgICdjYXJkIG9mIHRoZSB0YXJnZXQgcGlsZScsXG4gICAgKVxuICB9XG4gIGNvbnN0IG5ld1RhYmxlYXUgPSBhZGRDYXJkVG9QaWxlKGRlc2sudGFibGVhdSwgdGFibGVhdVBpbGUsIGNhcmRUb1BsYWNlKVxuXG4gIHJldHVybiBuZXcgRGVzayhcbiAgICBkZXNrLnN0b2NrLFxuICAgIG5ld1dhc3RlLFxuICAgIGRlc2suZm91bmRhdGlvbixcbiAgICBuZXdUYWJsZWF1LFxuICApXG59XG5cbmZ1bmN0aW9uIG1vdmVUb3BUYWJsZWF1UGlsZUNhcmRUb0ZvdW5kYXRpb24oZGVzazogSURlc2ssIHRhYmxlYXVQaWxlOiBJUGlsZSk6IElEZXNrIHtcbiAgY29uc3QgW25ld1RhYmxlYXUsIGNhcmRUb1BsYWNlXSA9IHJlbW92ZVRvcENhcmRGcm9tUGlsZShkZXNrLnRhYmxlYXUsIHRhYmxlYXVQaWxlKVxuICBjb25zdCBuZXdGb3VuZGF0aW9uID0gYWRkQ2FyZFRvRm91bmRhdGlvbihkZXNrLmZvdW5kYXRpb24sIGNhcmRUb1BsYWNlKVxuICByZXR1cm4gbmV3IERlc2soXG4gICAgZGVzay5zdG9jayxcbiAgICBkZXNrLndhc3RlLFxuICAgIG5ld0ZvdW5kYXRpb24sXG4gICAgbmV3VGFibGVhdSxcbiAgKVxufVxuXG5mdW5jdGlvbiByZXZlYWxUb3BUYWJsZWF1UGlsZUNhcmQoZGVzazogSURlc2ssIHRhYmxlYXVQaWxlOiBJUGlsZSk6IElEZXNrIHtcbiAgY29uc3QgbmV3VGFibGVhdSA9IHJldmVhbFRvcENhcmQoZGVzay50YWJsZWF1LCB0YWJsZWF1UGlsZSlcbiAgcmV0dXJuIG5ldyBEZXNrKFxuICAgIGRlc2suc3RvY2ssXG4gICAgZGVzay53YXN0ZSxcbiAgICBkZXNrLmZvdW5kYXRpb24sXG4gICAgbmV3VGFibGVhdSxcbiAgKVxufVxuXG5mdW5jdGlvbiBtb3ZlRm91bmRhdGlvbkNhcmRUb1RhYmxlYXVQaWxlKGRlc2s6IElEZXNrLCBydWxlczogSUdhbWVSdWxlcywgY29sb3I6IENvbG9yLCB0YWJsZWF1UGlsZTogSVBpbGUpOiBJRGVzayB7XG4gIGlmICghZGVzay5mb3VuZGF0aW9uW2NvbG9yXS5jYXJkcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBzcGVjaWZpZWQgZm91bmRhdGlvbiAoJHtjb2xvcn0pIGNvbnRhaW5zIG5vIGNhcmRzYClcbiAgfVxuXG4gIGNvbnN0IFtuZXdGb3VuZGF0aW9uUGlsZSwgW2NhcmRUb1BsYWNlXV0gPSBkcmF3KGRlc2suZm91bmRhdGlvbltjb2xvcl0sIDEpXG4gIGlmIChcbiAgICAhdGFibGVhdVBpbGUuY2FyZHMubGVuZ3RoICYmXG4gICAgIXJ1bGVzLmFsbG93Tm9uS2luZ1RvRW1wdHlQaWxlVHJhbnNmZXIgJiZcbiAgICBjYXJkVG9QbGFjZS5yYW5rICE9PSBSYW5rLktJTkdcbiAgKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgY3VycmVudCBnYW1lIHJ1bGVzIGZvcmJpZCBwbGFjaW5nIGFueSBjYXJkIG90aGVyIHRoYW4gYSBLaW5nIG9uIGFuIGVtcHR5IHRhYmxlYXUgcGlsZWApXG4gIH1cbiAgaWYgKFxuICAgIHRhYmxlYXVQaWxlLmNhcmRzLmxlbmd0aCAmJlxuICAgICFpc1ZhbGlkVGFibGVhdVNlcXVlbmNlKGxhc3RJdGVtKHRhYmxlYXVQaWxlLmNhcmRzKSwgY2FyZFRvUGxhY2UpXG4gICkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdUaGUgdG9wIGZvdW5kYXRpb24gY2FyZCBjYW5ub3QgYmUgcGxhY2VkIG9uIHRvcCBvZiB0aGUgdGFyZ2V0IHRhYmxlYXUgcGlsZSBiZWNhdXNlIGl0IGlzIG5vdCBpbiByYW5rIHNlcXVlbmNlICcgK1xuICAgICAgJ3dpdGggdGhlIGN1cnJlbnQgdG9wIGNhcmQgb2YgdGhlIHRhcmdldCBwaWxlIG9yIGl0IGlzIG9mIHRoZSBzYW1lIGZyZW5jaCBkZWNrIGNvbG9yIChyZWQvYmxhY2spIGFzIHRoZSB0b3AgJyArXG4gICAgICAnY2FyZCBvZiB0aGUgdGFyZ2V0IHBpbGUnLFxuICAgIClcbiAgfVxuICBjb25zdCBuZXdUYWJsZWF1ID0gYWRkQ2FyZFRvUGlsZShkZXNrLnRhYmxlYXUsIHRhYmxlYXVQaWxlLCBjYXJkVG9QbGFjZSlcbiAgcmV0dXJuIG5ldyBEZXNrKFxuICAgIGRlc2suc3RvY2ssXG4gICAgZGVzay53YXN0ZSxcbiAgICB7XG4gICAgICAuLi5kZXNrLmZvdW5kYXRpb24sXG4gICAgICBbY2FyZFRvUGxhY2UuY29sb3JdOiBuZXdGb3VuZGF0aW9uUGlsZSxcbiAgICB9LFxuICAgIG5ld1RhYmxlYXUsXG4gIClcbn1cblxuZnVuY3Rpb24gbW92ZVRhYmxlYXVQaWxlUGFydChcbiAgZGVzazogSURlc2ssXG4gIHJ1bGVzOiBJR2FtZVJ1bGVzLFxuICBzb3VyY2VQaWxlOiBJUGlsZSxcbiAgdG9wQ2FyZFRvTW92ZTogSUNhcmQsXG4gIHRhcmdldFBpbGU6IElQaWxlLFxuKTogSURlc2sge1xuICBpZiAoXG4gICAgIXRhcmdldFBpbGUuY2FyZHMubGVuZ3RoICYmXG4gICAgIXJ1bGVzLmFsbG93Tm9uS2luZ1RvRW1wdHlQaWxlVHJhbnNmZXIgJiZcbiAgICB0b3BDYXJkVG9Nb3ZlLnJhbmsgIT09IFJhbmsuS0lOR1xuICApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBjdXJyZW50IGdhbWUgcnVsZXMgZm9yYmlkIHBsYWNpbmcgYW55IGNhcmQgb3RoZXIgdGhhbiBhIEtpbmcgb24gYW4gZW1wdHkgdGFibGVhdSBwaWxlYClcbiAgfVxuICBpZiAoXG4gICAgdGFyZ2V0UGlsZS5jYXJkcy5sZW5ndGggJiZcbiAgICAhaXNWYWxpZFRhYmxlYXVTZXF1ZW5jZShsYXN0SXRlbSh0YXJnZXRQaWxlLmNhcmRzKSwgdG9wQ2FyZFRvTW92ZSlcbiAgKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ1RoZSB0b3AgbW92ZWQgY2FyZCBjYW5ub3QgYmUgcGxhY2VkIG9uIHRvcCBvZiB0aGUgdGFyZ2V0IHRhYmxlYXUgcGlsZSBiZWNhdXNlIGl0IGlzIG5vdCBpbiByYW5rIHNlcXVlbmNlIHdpdGggJyArXG4gICAgICAndGhlIGN1cnJlbnQgdG9wIGNhcmQgb2YgdGhlIHRhcmdldCBwaWxlIG9yIGl0IGlzIG9mIHRoZSBzYW1lIGZyZW5jaCBkZWNrIGNvbG9yIChyZWQvYmxhY2spIGFzIHRoZSBjdXJyZW50IHRvcCAnICtcbiAgICAgICdjYXJkIG9mIHRoZSB0YXJnZXQgcGlsZScsXG4gICAgKVxuICB9XG4gIGNvbnN0IG5ld1RhYmxlYXUgPSBtb3ZlUGlsZVBhcnQoZGVzay50YWJsZWF1LCBzb3VyY2VQaWxlLCB0b3BDYXJkVG9Nb3ZlLCB0YXJnZXRQaWxlKVxuICByZXR1cm4gbmV3IERlc2soXG4gICAgZGVzay5zdG9jayxcbiAgICBkZXNrLndhc3RlLFxuICAgIGRlc2suZm91bmRhdGlvbixcbiAgICBuZXdUYWJsZWF1LFxuICApXG59XG5cbmZ1bmN0aW9uIGFkZENhcmRUb0ZvdW5kYXRpb24oZm91bmRhdGlvbjogSUZvdW5kYXRpb24sIGNhcmRUb1BsYWNlOiBJQ2FyZCk6IElGb3VuZGF0aW9uIHtcbiAgY29uc3QgdGFyZ2V0Rm91bmRhdGlvblBpbGUgPSBmb3VuZGF0aW9uW2NhcmRUb1BsYWNlLmNvbG9yXVxuICBpZiAoIXRhcmdldEZvdW5kYXRpb25QaWxlLmNhcmRzLmxlbmd0aCAmJiBjYXJkVG9QbGFjZS5yYW5rICE9PSBSYW5rLkFDRSkge1xuICAgIHRocm93IG5ldyBFcnJvcignT25seSB0aGUgQWNlIGNhbiBiZSBwbGFjZWQgYXQgdGhlIGJvdHRvbSBvZiBhIGZvdW5kYXRpb24nKVxuICB9XG4gIGlmIChcbiAgICB0YXJnZXRGb3VuZGF0aW9uUGlsZS5jYXJkcy5sZW5ndGggJiZcbiAgICAhaXNWYWxpZEZvdW5kYXRpb25TZXF1ZW5jZShsYXN0SXRlbSh0YXJnZXRGb3VuZGF0aW9uUGlsZS5jYXJkcyksIGNhcmRUb1BsYWNlKVxuICApIHtcbiAgICBjb25zdCBmb3VuZGF0aW9uVG9wQ2FyZCA9IGxhc3RJdGVtKHRhcmdldEZvdW5kYXRpb25QaWxlLmNhcmRzKVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBUaGUgcHJvdmlkZWQgY2FyZCAke2NhcmRUb1BsYWNlLnJhbmt9IGNhbm5vdCBiZSBwbGFjZWQgb24gdG9wIG9mICR7Zm91bmRhdGlvblRvcENhcmQucmFua30sIGV4cGVjdGVkIGEgYCArXG4gICAgICBgJHtSQU5LX1NFUVVFTkNFW1JBTktfU0VRVUVOQ0UuaW5kZXhPZihmb3VuZGF0aW9uVG9wQ2FyZC5yYW5rKSArIDFdfSBjYXJkLmAsXG4gICAgKVxuICB9XG5cbiAgY29uc3QgbmV3Rm91bmRhdGlvblBpbGUgPSBwbGFjZUNhcmRPblRvcCh0YXJnZXRGb3VuZGF0aW9uUGlsZSwgY2FyZFRvUGxhY2UpXG4gIHJldHVybiB7XG4gICAgLi4uZm91bmRhdGlvbixcbiAgICBbY2FyZFRvUGxhY2UuY29sb3JdOiBuZXdGb3VuZGF0aW9uUGlsZSxcbiAgfVxufVxuIiwiaW1wb3J0IHtJQm90T3B0aW9ucywgbWFrZU1vdmVPbkRlc2t9IGZyb20gJy4vQm90J1xuaW1wb3J0IHtDb2xvciwgREVDSywgSUNhcmQsIFNpZGV9IGZyb20gJy4vQ2FyZCdcbmltcG9ydCB7XG4gIERlc2ssXG4gIGV4ZWN1dGVNb3ZlIGFzIGV4ZWN1dGVNb3ZlT25EZXNrLFxuICBJRGVzayxcbiAgaXNWaWN0b3J5IGFzIGlzRGVza0luVmljdG9yeVN0YXRlLFxuICBpc1ZpY3RvcnlHdWFyYW50ZWVkIGFzIGlzRGVza0luVmljdG9yeUd1YXJhbnRlZWRTdGF0ZSxcbn0gZnJvbSAnLi9EZXNrJ1xuaW1wb3J0IHtNb3ZlfSBmcm9tICcuL01vdmUnXG5pbXBvcnQge2RyYXcsIElQaWxlLCBQaWxlLCBzaHVmZmxlLCB0dXJuQ2FyZH0gZnJvbSAnLi9QaWxlJ1xuaW1wb3J0IHtUYWJsZWF1fSBmcm9tICcuL1RhYmxlYXUnXG5pbXBvcnQge2xhc3RJdGVtfSBmcm9tICcuL3V0aWwnXG5cbnR5cGUgSGlzdG9yeVJlY29yZCA9IFtJRGVzaywgTW92ZSAmIElSZWNvcmRUaW1lc3RhbXBdXG5cbmV4cG9ydCBpbnRlcmZhY2UgSUdhbWUge1xuICByZWFkb25seSBoaXN0b3J5OiBSZWFkb25seUFycmF5PEhpc3RvcnlSZWNvcmQ+XG4gIHJlYWRvbmx5IGZ1dHVyZTogUmVhZG9ubHlBcnJheTxIaXN0b3J5UmVjb3JkPlxuICByZWFkb25seSBzdGF0ZTogSURlc2tcbiAgcmVhZG9ubHkgcnVsZXM6IElHYW1lUnVsZXNcbiAgcmVhZG9ubHkgc3RhcnRUaW1lOiB7XG4gICAgcmVhZG9ubHkgYWJzb2x1dGVUaW1lc3RhbXA6IG51bWJlcixcbiAgICByZWFkb25seSBsb2dpY2FsVGltZXN0YW1wOiBudW1iZXIsXG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJR2FtZVJ1bGVzIHtcbiAgcmVhZG9ubHkgZHJhd25DYXJkczogbnVtYmVyXG4gIHJlYWRvbmx5IGFsbG93Tm9uS2luZ1RvRW1wdHlQaWxlVHJhbnNmZXI6IGJvb2xlYW5cbiAgLy8gVGhlIG51bWJlciBvZiBwaWxlcyBpbiB0YWJsZWF1IGlzIGFscmVhZHkgcmVwcmVzZW50ZWQgYnkgdGhlIHRhYmxlYXUgaXRzZWxmLCBzaW5jZSB0aGUgbnVtYmVyIG9mIHBpbGVzIGlzXG4gIC8vIGltbXV0YWJsZS5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJTmV3R2FtZVJ1bGVzIGV4dGVuZHMgSUdhbWVSdWxlcyB7XG4gIHJlYWRvbmx5IHRhYmxlYXVQaWxlczogbnVtYmVyXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUJvdFNpbXVsYXRpb25PcHRpb25zIHtcbiAgbWF4TW92ZXM6IG51bWJlcixcbiAgc2ltdWxhdGlvbkVuZFByZWRpY2F0ZTogKGRlc3Q6IElEZXNrKSA9PiBib29sZWFuLFxuICBtYXhTaW11bGF0aW9uVGltZTogbnVtYmVyLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElSZWNvcmRUaW1lc3RhbXAge1xuICBsb2dpY2FsVGltZXN0YW1wOiBudW1iZXJcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU5ld0dhbWUoZ2FtZVJ1bGVzOiBJTmV3R2FtZVJ1bGVzLCBjYXJkRGVjazogbnVsbCB8IFJlYWRvbmx5QXJyYXk8SUNhcmQ+ID0gbnVsbCk6IElHYW1lIHtcbiAgaWYgKCFOdW1iZXIuaXNTYWZlSW50ZWdlcihnYW1lUnVsZXMuZHJhd25DYXJkcykgfHwgZ2FtZVJ1bGVzLmRyYXduQ2FyZHMgPD0gMCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICBgVGhlIGRyYXduQ2FyZHMgZ2FtZSBydWxlIG11c3QgYmUgYSBwb3NpdGl2ZSBzYWZlIGludGVnZXIsICR7Z2FtZVJ1bGVzLmRyYXduQ2FyZHN9IHdhcyBwcm92aWRlZGAsXG4gICAgKVxuICB9XG4gIGlmICghTnVtYmVyLmlzU2FmZUludGVnZXIoZ2FtZVJ1bGVzLnRhYmxlYXVQaWxlcykgfHwgZ2FtZVJ1bGVzLnRhYmxlYXVQaWxlcyA8PSAwKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgIGBUaGUgdGFibGVhdVBpbGVzIGdhbWUgcnVsZSBtdXN0IGJlIGEgcG9zaXRpdmUgc2FmZSBpbnRlZ2VyLCAke2dhbWVSdWxlcy50YWJsZWF1UGlsZXN9IHdhcyBwcm92aWRlZGAsXG4gICAgKVxuICB9XG5cbiAgbGV0IGNhcmRzVG9EZWFsID0gY2FyZERlY2sgPyBuZXcgUGlsZShjYXJkRGVjaykgOiBzaHVmZmxlKG5ldyBQaWxlKERFQ0spKVxuICBmb3IgKGNvbnN0IGNhcmQgb2YgY2FyZHNUb0RlYWwuY2FyZHMpIHtcbiAgICBpZiAoY2FyZC5zaWRlID09PSBTaWRlLkZBQ0UpIHtcbiAgICAgIGNhcmRzVG9EZWFsID0gdHVybkNhcmQoY2FyZHNUb0RlYWwsIGNhcmQpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgcGlsZXM6IElQaWxlW10gPSBbXVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGdhbWVSdWxlcy50YWJsZWF1UGlsZXM7IGkrKykge1xuICAgIGNvbnN0IFtyZW1haW5pbmdDYXJkcywgY2FyZHNGb3JQaWxlXSA9IGRyYXcoY2FyZHNUb0RlYWwsIGkgKyAxKVxuICAgIGNvbnN0IGN1cnJlbnRQaWxlID0gbmV3IFBpbGUoY2FyZHNGb3JQaWxlKVxuICAgIGlmIChjdXJyZW50UGlsZS5jYXJkcy5sZW5ndGgpIHtcbiAgICAgIHBpbGVzLnB1c2godHVybkNhcmQoY3VycmVudFBpbGUsIGxhc3RJdGVtKGN1cnJlbnRQaWxlLmNhcmRzKSkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHBpbGVzLnB1c2goY3VycmVudFBpbGUpXG4gICAgfVxuICAgIGNhcmRzVG9EZWFsID0gcmVtYWluaW5nQ2FyZHNcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZnV0dXJlOiBbXSxcbiAgICBoaXN0b3J5OiBbXSxcbiAgICBydWxlczoge1xuICAgICAgYWxsb3dOb25LaW5nVG9FbXB0eVBpbGVUcmFuc2ZlcjogZ2FtZVJ1bGVzLmFsbG93Tm9uS2luZ1RvRW1wdHlQaWxlVHJhbnNmZXIsXG4gICAgICBkcmF3bkNhcmRzOiBnYW1lUnVsZXMuZHJhd25DYXJkcyxcbiAgICB9LFxuICAgIHN0YXJ0VGltZToge1xuICAgICAgYWJzb2x1dGVUaW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICBsb2dpY2FsVGltZXN0YW1wOiBwZXJmb3JtYW5jZS5ub3coKSxcbiAgICB9LFxuICAgIHN0YXRlOiBuZXcgRGVzayhcbiAgICAgIGNhcmRzVG9EZWFsLFxuICAgICAgbmV3IFBpbGUoW10pLFxuICAgICAge1xuICAgICAgICBbQ29sb3IuRElBTU9ORFNdOiBuZXcgUGlsZShbXSksXG4gICAgICAgIFtDb2xvci5IRUFSVEhTXTogbmV3IFBpbGUoW10pLFxuICAgICAgICBbQ29sb3IuQ0xVQlNdOiBuZXcgUGlsZShbXSksXG4gICAgICAgIFtDb2xvci5TUEFERVNdOiBuZXcgUGlsZShbXSksXG4gICAgICB9LFxuICAgICAgbmV3IFRhYmxlYXUocGlsZXMpLFxuICAgICksXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUdhbWVXaXRoQm90UHJlZGljYXRlKFxuICBydWxlczogSU5ld0dhbWVSdWxlcyxcbiAgYm90T3B0aW9uczogSUJvdE9wdGlvbnMsXG4gIHttYXhNb3ZlcywgbWF4U2ltdWxhdGlvblRpbWUsIHNpbXVsYXRpb25FbmRQcmVkaWNhdGV9OiBJQm90U2ltdWxhdGlvbk9wdGlvbnMsXG4pOiBbSUdhbWUsIGJvb2xlYW5dIHtcbiAgY29uc3QgZ2FtZSA9IGNyZWF0ZU5ld0dhbWUocnVsZXMpXG4gIGxldCBsYXN0RGVza1N0YXRlID0gZ2FtZS5zdGF0ZVxuICBsZXQgc2F0aXNmaWVzUHJlZGljYXRlID0gZmFsc2VcbiAgbGV0IG1vdmVDb3VudCA9IDBcbiAgY29uc3Qgc3RhcnRUaW1lc3RhbXAgPSBwZXJmb3JtYW5jZS5ub3coKVxuICBkbyB7XG4gICAgY29uc3QgbmV3RGVza1N0YXRlID0gbWFrZU1vdmVPbkRlc2sobGFzdERlc2tTdGF0ZSwgcnVsZXMsIGJvdE9wdGlvbnMpXG4gICAgbW92ZUNvdW50KytcbiAgICBpZiAobmV3RGVza1N0YXRlID09PSBsYXN0RGVza1N0YXRlIHx8IG1vdmVDb3VudCA+PSBtYXhNb3ZlcyB8fCBzaW11bGF0aW9uRW5kUHJlZGljYXRlKG5ld0Rlc2tTdGF0ZSkpIHtcbiAgICAgIHNhdGlzZmllc1ByZWRpY2F0ZSA9IHNpbXVsYXRpb25FbmRQcmVkaWNhdGUobmV3RGVza1N0YXRlKVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgaWYgKCEobW92ZUNvdW50ICUgMTApICYmIHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lc3RhbXAgPj0gbWF4U2ltdWxhdGlvblRpbWUpIHtcbiAgICAgIHNhdGlzZmllc1ByZWRpY2F0ZSA9IHNpbXVsYXRpb25FbmRQcmVkaWNhdGUobmV3RGVza1N0YXRlKSAvLyBmb3IgY29kZSBjb25zaXN0ZW5jeSwgYnV0IHdpbGwgYmUgZmFsc2VcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGxhc3REZXNrU3RhdGUgPSBuZXdEZXNrU3RhdGVcbiAgfSB3aGlsZSAodHJ1ZSlcbiAgcmV0dXJuIFtnYW1lLCBzYXRpc2ZpZXNQcmVkaWNhdGVdXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleGVjdXRlTW92ZShnYW1lOiBJR2FtZSwgbW92ZTogTW92ZSk6IElHYW1lIHtcbiAgY29uc3QgdXBkYXRlZERlc2sgPSBleGVjdXRlTW92ZU9uRGVzayhnYW1lLnN0YXRlLCBnYW1lLnJ1bGVzLCBtb3ZlKVxuICByZXR1cm4gY3JlYXRlTmV4dEdhbWVTdGF0ZShnYW1lLCB1cGRhdGVkRGVzaywgbW92ZSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0R2FtZShnYW1lOiBJR2FtZSk6IElHYW1lIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5nYW1lLFxuICAgIGZ1dHVyZTogW10sXG4gICAgaGlzdG9yeTogW10sXG4gICAgc3RhcnRUaW1lOiB7XG4gICAgICBhYnNvbHV0ZVRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIGxvZ2ljYWxUaW1lc3RhbXA6IHBlcmZvcm1hbmNlLm5vdygpLFxuICAgIH0sXG4gICAgc3RhdGU6IGdhbWUuaGlzdG9yeS5sZW5ndGggPyBnYW1lLmhpc3RvcnlbMF1bMF0gOiBnYW1lLnN0YXRlLFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bmRvTGFzdE1vdmUoZ2FtZTogSUdhbWUpOiBJR2FtZSB7XG4gIGlmICghZ2FtZS5oaXN0b3J5Lmxlbmd0aCkge1xuICAgIHJldHVybiBnYW1lXG4gIH1cblxuICBjb25zdCBuZXdIaXN0b3J5ID0gZ2FtZS5oaXN0b3J5LnNsaWNlKClcbiAgY29uc3QgW21vdmVUb1VuZG9dID0gbmV3SGlzdG9yeS5zcGxpY2UoLTEpXG5cbiAgcmV0dXJuIHtcbiAgICAuLi5nYW1lLFxuICAgIGZ1dHVyZTogW21vdmVUb1VuZG8sIC4uLmdhbWUuZnV0dXJlXSxcbiAgICBoaXN0b3J5OiBuZXdIaXN0b3J5LFxuICAgIHN0YXRlOiBtb3ZlVG9VbmRvWzBdLFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWRvTmV4dE1vdmUoZ2FtZTogSUdhbWUpOiBJR2FtZSB7XG4gIGlmICghZ2FtZS5mdXR1cmUubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGdhbWVcbiAgfVxuXG4gIGNvbnN0IFttb3ZlVG9SZWRvLCAuLi5uZXdGdXR1cmVdID0gZ2FtZS5mdXR1cmVcbiAgY29uc3QgbmV3U3RhdGUgPSBuZXdGdXR1cmUubGVuZ3RoID9cbiAgICBuZXdGdXR1cmVbMF1bMF1cbiAgOlxuICAgIGV4ZWN1dGVNb3ZlKHsuLi5nYW1lLCBzdGF0ZTogbW92ZVRvUmVkb1swXX0sIG1vdmVUb1JlZG9bMV0pLnN0YXRlXG5cbiAgcmV0dXJuIHtcbiAgICAuLi5nYW1lLFxuICAgIGZ1dHVyZTogbmV3RnV0dXJlLFxuICAgIGhpc3Rvcnk6IGdhbWUuaGlzdG9yeS5jb25jYXQoW21vdmVUb1JlZG9dKSxcbiAgICBzdGF0ZTogbmV3U3RhdGUsXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVmljdG9yeSh7c3RhdGV9OiBJR2FtZSk6IGJvb2xlYW4ge1xuICByZXR1cm4gaXNEZXNrSW5WaWN0b3J5U3RhdGUoc3RhdGUpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1ZpY3RvcnlHdWFyYW50ZWVkKHtzdGF0ZX06IElHYW1lKTogYm9vbGVhbiB7XG4gIHJldHVybiBpc0Rlc2tJblZpY3RvcnlHdWFyYW50ZWVkU3RhdGUoc3RhdGUpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVOZXh0R2FtZVN0YXRlKGdhbWU6IElHYW1lLCBuZXh0U3RhdGU6IElEZXNrLCBhcHBsaWVkTW92ZTogTW92ZSk6IElHYW1lIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5nYW1lLFxuICAgIGZ1dHVyZTogW10sXG4gICAgaGlzdG9yeTogZ2FtZS5oaXN0b3J5LmNvbmNhdChbW1xuICAgICAgZ2FtZS5zdGF0ZSxcbiAgICAgIHtcbiAgICAgICAgLi4uYXBwbGllZE1vdmUsXG4gICAgICAgIGxvZ2ljYWxUaW1lc3RhbXA6IHBlcmZvcm1hbmNlLm5vdygpLFxuICAgICAgfSxcbiAgICBdXSksXG4gICAgc3RhdGU6IG5leHRTdGF0ZSxcbiAgfVxufVxuIiwiLy8gVGhpcyBmaWxlIGlzIGEgcHJpbWUgY2FuZGlkYXRlIGZvciByZWZhY3RvcmluZy4gU29tZSBzdWdnZXN0ZWQgaGVscGVyIGZ1bmN0aW9ucyB0byBjcmVhdGUgYW5kIHVzZTpcbi8vIC0gZ2V0Rm91bmRhdGlvblRvcChnYW1lOiBJR2FtZSk6IElGb3VuZGF0aW9uVG9wXG4vLyAtIGdldEZvdW5kYXRpb25Ub3BDYXJkcyhnYW1lOiBJR2FtZSk6IElDYXJkW11cbi8vIC0gZ2V0UGxheWFibGVQaWxlcyhnYW1lOiBJR2FtZSk6IElQaWxlW10gLy8gb25seSBwaWxlcyB3aGVyZSBlYWNoIHBpbGUgY29udGFpbnMgYXQgbGVhc3Qgb25lIHJldmVhbGVkIGNhcmRcbi8vIC0gLi4uYW5kIG90aGVyc1xuXG5pbXBvcnQge1xuICBDb2xvcixcbiAgY29tcGFyZVJhbmssXG4gIElDYXJkLFxuICBpc1ZhbGlkRm91bmRhdGlvblNlcXVlbmNlLFxuICBpc1ZhbGlkVGFibGVhdVNlcXVlbmNlLFxuICBSYW5rLFxuICBTaWRlLFxuICB0dXJuT3Zlcixcbn0gZnJvbSAnLi9DYXJkJ1xuaW1wb3J0IHtJRGVzaywgaXNWaWN0b3J5R3VhcmFudGVlZH0gZnJvbSAnLi9EZXNrJ1xuaW1wb3J0IHtJR2FtZVJ1bGVzfSBmcm9tICcuL0dhbWUnXG5pbXBvcnQge01vdmUsIE1vdmVUeXBlfSBmcm9tICcuL01vdmUnXG5pbXBvcnQge0lUYWJsZWF1fSBmcm9tICcuL1RhYmxlYXUnXG5pbXBvcnQge2xhc3RJdGVtLCBsYXN0SXRlbU9yTnVsbH0gZnJvbSAnLi91dGlsJ1xuXG5leHBvcnQgZW51bSBIaW50R2VuZXJhdG9yTW9kZSB7XG4gIENVUlJFTlRfU1RBVEUgPSAnSGludEdlbmVyYXRvck1vZGUuQ1VSUkVOVF9TVEFURScsXG4gIFdJVEhfRlVMTF9TVE9DSyA9ICdIaW50R2VuZXJhdG9yTW9kZS5XSVRIX0ZVTExfU1RPQ0snLFxufVxuXG5leHBvcnQgZW51bSBNb3ZlQ29uZmlkZW5jZSB7XG4gIEFCU09MVVRFID0gJ01vdmVDb25maWRlbmNlLkFCU09MVVRFJyxcbiAgVkVSWV9ISUdIID0gJ01vdmVDb25maWRlbmNlLlZFUllfSElHSCcsXG4gIEhJR0ggPSAnTW92ZUNvbmZpZGVuY2UuSElHSCcsXG4gIE1FRElVTSA9ICdNb3ZlQ29uZmlkZW5jZS5NRURJVU0nLFxuICBMT1cgPSAnTW92ZUNvbmZpZGVuY2UuTE9XJyxcbiAgVkVSWV9MT1cgPSAnTW92ZUNvbmZpZGVuY2UuVkVSWV9MT1cnLFxuICBNSU5JU0NVTEUgPSAnTW92ZUNvbmZpZGVuY2UuTUlOSVNDVUxFJyxcbn1cblxuZXhwb3J0IGNvbnN0IE1PVkVfQ09ORklERU5DRVM6IFJlYWRvbmx5QXJyYXk8TW92ZUNvbmZpZGVuY2U+ID0gW1xuICBNb3ZlQ29uZmlkZW5jZS5BQlNPTFVURSxcbiAgTW92ZUNvbmZpZGVuY2UuVkVSWV9ISUdILFxuICBNb3ZlQ29uZmlkZW5jZS5ISUdILFxuICBNb3ZlQ29uZmlkZW5jZS5NRURJVU0sXG4gIE1vdmVDb25maWRlbmNlLkxPVyxcbiAgTW92ZUNvbmZpZGVuY2UuVkVSWV9MT1csXG4gIE1vdmVDb25maWRlbmNlLk1JTklTQ1VMRSxcbl1cblxuZXhwb3J0IHR5cGUgTW92ZUhpbnQgPSBbTW92ZSwgSUNhcmQsIE1vdmVDb25maWRlbmNlXVxuXG5pbnRlcmZhY2UgSUZvdW5kYXRpb25Ub3Age1xuICBbQ29sb3IuRElBTU9ORFNdOiBudWxsIHwgSUNhcmRcbiAgW0NvbG9yLkhFQVJUSFNdOiBudWxsIHwgSUNhcmRcbiAgW0NvbG9yLkNMVUJTXTogbnVsbCB8IElDYXJkXG4gIFtDb2xvci5TUEFERVNdOiBudWxsIHwgSUNhcmRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE1vdmVIaW50cyhkZXNrOiBJRGVzaywgcnVsZXM6IElHYW1lUnVsZXMsIG1vZGU6IEhpbnRHZW5lcmF0b3JNb2RlKTogTW92ZUhpbnRbXSB7XG4gIGNvbnN0IHN0b2NrUGxheWFibGVDYXJkczogSUNhcmRbXSA9IGdldFN0b2NrUGxheWFibGVDYXJkcyhkZXNrLCBydWxlcywgbW9kZSlcbiAgY29uc3Qge2ZvdW5kYXRpb24sIHRhYmxlYXV9ID0gZGVza1xuICBjb25zdCB0b3BUYWJsZWF1Q2FyZHMgPSB0YWJsZWF1LnBpbGVzLmZpbHRlcigocGlsZSkgPT4gcGlsZS5jYXJkcy5sZW5ndGgpLm1hcCgocGlsZSkgPT4gbGFzdEl0ZW0ocGlsZS5jYXJkcykpXG4gIGNvbnN0IHRvcEZvdW5kYXRpb25DYXJkcyA9IHtcbiAgICBbQ29sb3IuRElBTU9ORFNdOiBsYXN0SXRlbU9yTnVsbChmb3VuZGF0aW9uW0NvbG9yLkRJQU1PTkRTXS5jYXJkcyksXG4gICAgW0NvbG9yLkhFQVJUSFNdOiBsYXN0SXRlbU9yTnVsbChmb3VuZGF0aW9uW0NvbG9yLkhFQVJUSFNdLmNhcmRzKSxcbiAgICBbQ29sb3IuQ0xVQlNdOiBsYXN0SXRlbU9yTnVsbChmb3VuZGF0aW9uW0NvbG9yLkNMVUJTXS5jYXJkcyksXG4gICAgW0NvbG9yLlNQQURFU106IGxhc3RJdGVtT3JOdWxsKGZvdW5kYXRpb25bQ29sb3IuU1BBREVTXS5jYXJkcyksXG4gIH1cbiAgY29uc3QgbW92ZXM6IE1vdmVIaW50W10gPSBbXVxuXG4gIG1vdmVzLnB1c2goLi4uZ2V0TW92ZXNXaXRoQWJzb2x1dGVDb25maWRlbmNlKGRlc2ssIHN0b2NrUGxheWFibGVDYXJkcywgdG9wVGFibGVhdUNhcmRzLCB0b3BGb3VuZGF0aW9uQ2FyZHMpKVxuICBtb3Zlcy5wdXNoKC4uLmdldE1vdmVzV2l0aFZlcnlIaWdoQ29uZmlkZW5jZShkZXNrLCBzdG9ja1BsYXlhYmxlQ2FyZHMpKVxuICBtb3Zlcy5wdXNoKC4uLmdldE1vdmVzV2l0aEhpZ2hDb25maWRlbmNlKGRlc2ssIHN0b2NrUGxheWFibGVDYXJkcykpXG4gIG1vdmVzLnB1c2goLi4uZ2V0TW92ZXNXaXRoTWVkaXVtQ29uZmlkZW5jZShkZXNrKSlcbiAgbW92ZXMucHVzaCguLi5nZXRNb3Zlc1dpdGhMb3dDb25maWRlbmNlKGRlc2spKVxuICBtb3Zlcy5wdXNoKC4uLmdldE1vdmVzV2l0aFZlcnlMb3dDb25maWRlbmNlKGRlc2ssIHN0b2NrUGxheWFibGVDYXJkcywgdG9wRm91bmRhdGlvbkNhcmRzLCBydWxlcykpXG4gIG1vdmVzLnB1c2goLi4uZ2V0TW92ZXNXaXRoTWluaXNjdWxlQ29uZmlkZW5jZShkZXNrLCBydWxlcywgc3RvY2tQbGF5YWJsZUNhcmRzLCB0b3BGb3VuZGF0aW9uQ2FyZHMpKVxuXG4gIHJldHVybiBmaWx0ZXJGb3VuZGF0aW9uVG9UYWJsZWF1SGludHMoZmlsdGVyRHVwbGljYXRlSGludHMobW92ZXMpKVxufVxuXG5mdW5jdGlvbiBmaWx0ZXJGb3VuZGF0aW9uVG9UYWJsZWF1SGludHMoaGludHM6IE1vdmVIaW50W10pOiBNb3ZlSGludFtdIHtcbiAgY29uc3QgaGludHNXaXRob3V0VHJhbnNmZXJzRnJvbUZvdW5kYXRpb24gPSBoaW50cy5maWx0ZXIoKFttb3ZlXSkgPT4gbW92ZS5tb3ZlICE9PSBNb3ZlVHlwZS5GT1VOREFUSU9OX1RPX1RBQkxFQVUpXG4gIGlmIChoaW50c1dpdGhvdXRUcmFuc2ZlcnNGcm9tRm91bmRhdGlvbi5sZW5ndGggJiYgaGludHNXaXRob3V0VHJhbnNmZXJzRnJvbUZvdW5kYXRpb24ubGVuZ3RoICE9PSBoaW50cy5sZW5ndGgpIHtcbiAgICByZXR1cm4gaGludHNXaXRob3V0VHJhbnNmZXJzRnJvbUZvdW5kYXRpb25cbiAgfVxuXG4gIHJldHVybiBoaW50c1xufVxuXG5mdW5jdGlvbiBmaWx0ZXJEdXBsaWNhdGVIaW50cyhoaW50czogTW92ZUhpbnRbXSk6IE1vdmVIaW50W10ge1xuICBjb25zdCBmaWx0ZXJlZEhpbnRzOiBNb3ZlSGludFtdID0gW11cblxuICBmb3IgKGNvbnN0IGhpbnQgb2YgaGludHMpIHtcbiAgICBjb25zdCBpc0hpbnRBbHJlYWR5UHJlc2VudCA9IGZpbHRlcmVkSGludHMuc29tZSgob3RoZXJIaW50KSA9PlxuICAgICAgYXJlT2JqZWN0c1NoYWxsb3dseUVxdWFsKGhpbnRbMF0sIG90aGVySGludFswXSkgJiZcbiAgICAgIGhpbnRbMV0gPT09IG90aGVySGludFsxXSxcbiAgICApXG4gICAgaWYgKCFpc0hpbnRBbHJlYWR5UHJlc2VudCkge1xuICAgICAgZmlsdGVyZWRIaW50cy5wdXNoKGhpbnQpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZpbHRlcmVkSGludHNcblxuICBmdW5jdGlvbiBhcmVPYmplY3RzU2hhbGxvd2x5RXF1YWw8VD4ob2JqZWN0MTogVCwgb2JqZWN0MjogVCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGtleXMxID0gT2JqZWN0LmtleXMob2JqZWN0MSkgYXMgQXJyYXk8a2V5b2YgVD5cbiAgICBjb25zdCBrZXlzMiA9IE9iamVjdC5rZXlzKG9iamVjdDIpXG4gICAgaWYgKGtleXMxLmxlbmd0aCAhPT0ga2V5czIubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICByZXR1cm4ga2V5czEuZXZlcnkoKGtleSkgPT4gb2JqZWN0MVtrZXldID09PSBvYmplY3QyW2tleV0pXG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0TW92ZXNXaXRoQWJzb2x1dGVDb25maWRlbmNlKFxuICBkZXNrOiBJRGVzayxcbiAgc3RvY2tQbGF5YWJsZUNhcmRzOiBJQ2FyZFtdLFxuICB0b3BUYWJsZWF1Q2FyZHM6IElDYXJkW10sXG4gIHRvcEZvdW5kYXRpb25DYXJkczoge1xuICAgIFtDb2xvci5ESUFNT05EU106IG51bGwgfCBJQ2FyZCxcbiAgICBbQ29sb3IuSEVBUlRIU106IG51bGwgfCBJQ2FyZCxcbiAgICBbQ29sb3IuQ0xVQlNdOiBudWxsIHwgSUNhcmQsXG4gICAgW0NvbG9yLlNQQURFU106IG51bGwgfCBJQ2FyZCxcbiAgfSxcbik6IE1vdmVIaW50W10ge1xuICBjb25zdCB7dGFibGVhdX0gPSBkZXNrXG4gIGNvbnN0IG1vdmVzOiBNb3ZlSGludFtdID0gW11cblxuICAvLyBSZXZlYWxpbmcgYSBjYXJkXG4gIGNvbnN0IGNhcmRUb1JldmVhbCA9IHRvcFRhYmxlYXVDYXJkcy5maW5kKChjYXJkKSA9PiBjYXJkLnNpZGUgPT09IFNpZGUuQkFDSylcbiAgaWYgKGNhcmRUb1JldmVhbCkge1xuICAgIG1vdmVzLnB1c2goW1xuICAgICAge1xuICAgICAgICBtb3ZlOiBNb3ZlVHlwZS5SRVZFQUxfVEFCTEVBVV9DQVJELFxuICAgICAgICBwaWxlSW5kZXg6IGdldFBpbGVJbmRleCh0YWJsZWF1LCBjYXJkVG9SZXZlYWwpLFxuICAgICAgfSxcbiAgICAgIGNhcmRUb1JldmVhbCxcbiAgICAgIE1vdmVDb25maWRlbmNlLkFCU09MVVRFLFxuICAgIF0pXG4gIH1cblxuICAvLyBBY2UgdG8gZm91bmRhdGlvblxuICBmb3IgKGNvbnN0IGNhcmQgb2YgdG9wVGFibGVhdUNhcmRzKSB7XG4gICAgaWYgKGNhcmQuc2lkZSA9PT0gU2lkZS5GQUNFICYmIGNhcmQucmFuayA9PT0gUmFuay5BQ0UpIHtcbiAgICAgIG1vdmVzLnB1c2goW1xuICAgICAgICB7XG4gICAgICAgICAgbW92ZTogTW92ZVR5cGUuVEFCTEVBVV9UT19GT1VOREFUSU9OLFxuICAgICAgICAgIHBpbGVJbmRleDogZ2V0UGlsZUluZGV4KHRhYmxlYXUsIGNhcmQpLFxuICAgICAgICB9LFxuICAgICAgICBjYXJkLFxuICAgICAgICBNb3ZlQ29uZmlkZW5jZS5BQlNPTFVURSxcbiAgICAgIF0pXG4gICAgfVxuICB9XG4gIGZvciAoY29uc3QgY2FyZCBvZiBzdG9ja1BsYXlhYmxlQ2FyZHMpIHtcbiAgICBpZiAoY2FyZC5yYW5rID09PSBSYW5rLkFDRSkge1xuICAgICAgbW92ZXMucHVzaChbXG4gICAgICAgIHtcbiAgICAgICAgICBtb3ZlOiBNb3ZlVHlwZS5XQVNURV9UT19GT1VOREFUSU9OLFxuICAgICAgICB9LFxuICAgICAgICBjYXJkLFxuICAgICAgICBNb3ZlQ29uZmlkZW5jZS5BQlNPTFVURSxcbiAgICAgIF0pXG4gICAgfVxuICB9XG5cbiAgLy8gVHdvIHRvIGZvdW5kYXRpb25cbiAgZm9yIChjb25zdCBjYXJkIG9mIHRvcFRhYmxlYXVDYXJkcykge1xuICAgIGlmIChjYXJkLnNpZGUgPT09IFNpZGUuRkFDRSAmJiBjYXJkLnJhbmsgPT09IFJhbmsuVFdPICYmIHRvcEZvdW5kYXRpb25DYXJkc1tjYXJkLmNvbG9yXT8ucmFuayA9PT0gUmFuay5BQ0UpIHtcbiAgICAgIG1vdmVzLnB1c2goW1xuICAgICAgICB7XG4gICAgICAgICAgbW92ZTogTW92ZVR5cGUuVEFCTEVBVV9UT19GT1VOREFUSU9OLFxuICAgICAgICAgIHBpbGVJbmRleDogZ2V0UGlsZUluZGV4KHRhYmxlYXUsIGNhcmQpLFxuICAgICAgICB9LFxuICAgICAgICBjYXJkLFxuICAgICAgICBNb3ZlQ29uZmlkZW5jZS5BQlNPTFVURSxcbiAgICAgIF0pXG4gICAgfVxuICB9XG4gIGZvciAoY29uc3QgY2FyZCBvZiBzdG9ja1BsYXlhYmxlQ2FyZHMpIHtcbiAgICBpZiAoY2FyZC5yYW5rID09PSBSYW5rLlRXTyAmJiB0b3BGb3VuZGF0aW9uQ2FyZHNbY2FyZC5jb2xvcl0/LnJhbmsgPT09IFJhbmsuQUNFKSB7XG4gICAgICBtb3Zlcy5wdXNoKFtcbiAgICAgICAge1xuICAgICAgICAgIG1vdmU6IE1vdmVUeXBlLldBU1RFX1RPX0ZPVU5EQVRJT04sXG4gICAgICAgIH0sXG4gICAgICAgIGNhcmQsXG4gICAgICAgIE1vdmVDb25maWRlbmNlLkFCU09MVVRFLFxuICAgICAgXSlcbiAgICB9XG4gIH1cblxuICAvLyBGaW5pc2hpbmcgdGhlIGdhbWVcbiAgaWYgKGlzVmljdG9yeUd1YXJhbnRlZWQoZGVzaykpIHtcbiAgICBmb3IgKGNvbnN0IGNhcmQgb2YgdG9wVGFibGVhdUNhcmRzKSB7XG4gICAgICBjb25zdCB0b3BGb3VuZGF0aW9uQ2FyZCA9IHRvcEZvdW5kYXRpb25DYXJkc1tjYXJkLmNvbG9yXVxuICAgICAgaWYgKHRvcEZvdW5kYXRpb25DYXJkICYmIGlzVmFsaWRGb3VuZGF0aW9uU2VxdWVuY2UodG9wRm91bmRhdGlvbkNhcmQsIGNhcmQpKSB7XG4gICAgICAgIG1vdmVzLnB1c2goW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1vdmU6IE1vdmVUeXBlLlRBQkxFQVVfVE9fRk9VTkRBVElPTixcbiAgICAgICAgICAgIHBpbGVJbmRleDogZ2V0UGlsZUluZGV4KHRhYmxlYXUsIGNhcmQpLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgY2FyZCxcbiAgICAgICAgICBNb3ZlQ29uZmlkZW5jZS5BQlNPTFVURSxcbiAgICAgICAgXSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbW92ZXNcbn1cblxuZnVuY3Rpb24gZ2V0TW92ZXNXaXRoVmVyeUhpZ2hDb25maWRlbmNlKFxuICBkZXNrOiBJRGVzayxcbiAgc3RvY2tQbGF5YWJsZUNhcmRzOiBJQ2FyZFtdLFxuKTogTW92ZUhpbnRbXSB7XG4gIGNvbnN0IHt0YWJsZWF1fSA9IGRlc2tcbiAgY29uc3QgbW92ZXM6IE1vdmVIaW50W10gPSBbXVxuXG4gIC8vIFRhYmxlYXUgdG8gdGFibGVhdSB0cmFuc2ZlciB0aGF0IGFsbG93cyByZXZlYWxpbmcgYSBjYXJkLCBzb3VyY2UgaXMgbm90IDUsIDYsIDcgb3IgOCBhbmQgdGFyZ2V0IHBpbGUgaXMgbm90IGVtcHR5XG4gIGNvbnN0IHBpbGVzRnJvbUxhcmdlc3RUb1NtYWxsZXN0ID0gdGFibGVhdS5waWxlcy5zbGljZSgpLnNvcnQoXG4gICAgKHBpbGUxLCBwaWxlMikgPT4gcGlsZTIuY2FyZHMubGVuZ3RoIC0gcGlsZTEuY2FyZHMubGVuZ3RoLFxuICApXG4gIGZvciAoY29uc3QgcGlsZSBvZiBwaWxlc0Zyb21MYXJnZXN0VG9TbWFsbGVzdCkge1xuICAgIGNvbnN0IG1vc3RCb3R0b21SZXZlYWxlZENhcmRJbmRleCA9IHBpbGUuY2FyZHMuZmluZEluZGV4KChjYXJkKSA9PiBjYXJkLnNpZGUgPT09IFNpZGUuRkFDRSlcbiAgICBjb25zdCBzb3VyY2VDYXJkID0gcGlsZS5jYXJkc1ttb3N0Qm90dG9tUmV2ZWFsZWRDYXJkSW5kZXhdXG4gICAgaWYgKFxuICAgICAgbW9zdEJvdHRvbVJldmVhbGVkQ2FyZEluZGV4IDwgMSB8fFxuICAgICAgW1JhbmsuRklWRSwgUmFuay5TSVgsIFJhbmsuU0VWRU4sIFJhbmsuRUlHSFRdLmluY2x1ZGVzKHNvdXJjZUNhcmQucmFuaylcbiAgICApIHtcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuICAgIGNvbnN0IHRhcmdldFBpbGVJbmRleCA9IHRhYmxlYXUucGlsZXMuZmluZEluZGV4KCh0YXJnZXRQaWxlKSA9PiAoXG4gICAgICB0YXJnZXRQaWxlLmNhcmRzLmxlbmd0aCAmJlxuICAgICAgbGFzdEl0ZW0odGFyZ2V0UGlsZS5jYXJkcykuc2lkZSA9PT0gU2lkZS5GQUNFICYmXG4gICAgICBpc1ZhbGlkVGFibGVhdVNlcXVlbmNlKGxhc3RJdGVtKHRhcmdldFBpbGUuY2FyZHMpLCBzb3VyY2VDYXJkKVxuICAgICkpXG4gICAgaWYgKHRhcmdldFBpbGVJbmRleCA+IC0xKSB7XG4gICAgICBtb3Zlcy5wdXNoKFtcbiAgICAgICAge1xuICAgICAgICAgIG1vdmU6IE1vdmVUeXBlLlRBQkxFQVVfVE9fVEFCTEVBVSxcbiAgICAgICAgICBzb3VyY2VQaWxlSW5kZXg6IGdldFBpbGVJbmRleCh0YWJsZWF1LCBzb3VyY2VDYXJkKSxcbiAgICAgICAgICB0YXJnZXRQaWxlSW5kZXgsXG4gICAgICAgICAgdG9wTW92ZWRDYXJkSW5kZXg6IG1vc3RCb3R0b21SZXZlYWxlZENhcmRJbmRleCxcbiAgICAgICAgfSxcbiAgICAgICAgc291cmNlQ2FyZCxcbiAgICAgICAgTW92ZUNvbmZpZGVuY2UuVkVSWV9ISUdILFxuICAgICAgXSlcbiAgICB9XG4gIH1cblxuICAvLyBLaW5nIHRvIGVtcHR5IHRhYmxlYXUgcGlsZSB0cmFuc2ZlciB0aGF0IGFsbG93cyB0cmFuc2ZlciB0byB0aGUga2luZydzIG5ldyBwaWxlIHRoYXQgd2lsbCByZXZlYWwgYSBuZXcgY2FyZFxuICBjb25zdCBhdmFpbGFibGVLaW5ncyA9IHRhYmxlYXUucGlsZXNcbiAgICAvLyBpZiB0aGUga2luZyBpcyB0aGUgdG9wIGNhcmQgaW4gdGhlIHBpbGUsIHRoZXJlIGlzIG5vIHBvaW50IGluIG1ha2luZyB0aGUgdHJhbnNmZXJcbiAgICAuZmlsdGVyKChwaWxlKSA9PiBwaWxlLmNhcmRzLmxlbmd0aCA+IDEgJiYgKHBpbGUuY2FyZHNbMF0uc2lkZSA9PT0gU2lkZS5CQUNLIHx8IHBpbGUuY2FyZHNbMF0ucmFuayAhPT0gUmFuay5LSU5HKSlcbiAgICAubWFwKChwaWxlKSA9PiBwaWxlLmNhcmRzLmZpbmQoKGNhcmQpID0+IGNhcmQucmFuayA9PT0gUmFuay5LSU5HICYmIGNhcmQuc2lkZSA9PT0gU2lkZS5GQUNFKSlcbiAgICAuZmlsdGVyKChjYXJkT3JVbmRlZmluZWQpID0+ICEhY2FyZE9yVW5kZWZpbmVkKS5tYXAoKGNhcmQpID0+IGNhcmQgYXMgSUNhcmQpXG4gICAgLy8gdGFibGVhdSBjYXJkcyBhcmUgcHJlZmVycmVkLCBzbyB3ZSdsbCBwdXQgdGhlIHN0b2NrIGNhcmRzIGF0IHRoZSBlbmQgb2YgdGhlIGxpc3RcbiAgICAuY29uY2F0KHN0b2NrUGxheWFibGVDYXJkcy5maWx0ZXIoKGNhcmQpID0+IGNhcmQucmFuayA9PT0gUmFuay5LSU5HKSlcbiAgY29uc3QgZW1wdHlQaWxlSW5kZXggPSB0YWJsZWF1LnBpbGVzLmZpbmRJbmRleCgocGlsZSkgPT4gIXBpbGUuY2FyZHMubGVuZ3RoKVxuICBpZiAoYXZhaWxhYmxlS2luZ3MubGVuZ3RoICYmIGVtcHR5UGlsZUluZGV4ID4gLTEpIHtcbiAgICBmb3IgKGNvbnN0IGtpbmcgb2YgYXZhaWxhYmxlS2luZ3MpIHtcbiAgICAgIGNvbnN0IGtpbmdTZXF1ZW5jZUVuZCA9IHN0b2NrUGxheWFibGVDYXJkcy5pbmNsdWRlcyhraW5nKSA/XG4gICAgICAgIGtpbmdcbiAgICAgIDpcbiAgICAgICAgbGFzdEl0ZW0odGFibGVhdS5waWxlc1tnZXRQaWxlSW5kZXgodGFibGVhdSwga2luZyldLmNhcmRzKVxuICAgICAgY29uc3QgaXNCZW5lZmljaWFsVHJhbnNmZXJUb0tpbmdTZXF1ZW5jZVBvc3NpYmxlID0gdGFibGVhdS5waWxlcy5maW5kKChwaWxlKSA9PiB7XG4gICAgICAgIGNvbnN0IHZpc2libGVDYXJkcyA9IHBpbGUuY2FyZHMuZmlsdGVyKChjYXJkKSA9PiBjYXJkLnNpZGUgPT09IFNpZGUuRkFDRSlcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBwaWxlLmNhcmRzLmxlbmd0aCA+IHZpc2libGVDYXJkcy5sZW5ndGggJiZcbiAgICAgICAgICB2aXNpYmxlQ2FyZHMubGVuZ3RoICYmXG4gICAgICAgICAgaXNWYWxpZFRhYmxlYXVTZXF1ZW5jZShraW5nU2VxdWVuY2VFbmQsIHZpc2libGVDYXJkc1swXSlcbiAgICAgICAgKVxuICAgICAgfSlcbiAgICAgIGlmIChpc0JlbmVmaWNpYWxUcmFuc2ZlclRvS2luZ1NlcXVlbmNlUG9zc2libGUpIHtcbiAgICAgICAgY29uc3Qgc291cmNlUGlsZUluZGV4ID0gZ2V0UGlsZUluZGV4KHRhYmxlYXUsIGtpbmcpXG4gICAgICAgIG1vdmVzLnB1c2goW1xuICAgICAgICAgIHN0b2NrUGxheWFibGVDYXJkcy5pbmNsdWRlcyhraW5nKSA/XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIG1vdmU6IE1vdmVUeXBlLldBU1RFX1RPX1RBQkxFQVUsXG4gICAgICAgICAgICAgIHBpbGVJbmRleDogZW1wdHlQaWxlSW5kZXgsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBtb3ZlOiBNb3ZlVHlwZS5UQUJMRUFVX1RPX1RBQkxFQVUsXG4gICAgICAgICAgICAgIHNvdXJjZVBpbGVJbmRleCxcbiAgICAgICAgICAgICAgdGFyZ2V0UGlsZUluZGV4OiBlbXB0eVBpbGVJbmRleCxcbiAgICAgICAgICAgICAgdG9wTW92ZWRDYXJkSW5kZXg6IHRhYmxlYXUucGlsZXNbc291cmNlUGlsZUluZGV4XS5jYXJkcy5pbmRleE9mKGtpbmcpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBraW5nLFxuICAgICAgICAgIE1vdmVDb25maWRlbmNlLlZFUllfSElHSCxcbiAgICAgICAgXSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbW92ZXNcbn1cblxuZnVuY3Rpb24gZ2V0TW92ZXNXaXRoSGlnaENvbmZpZGVuY2UoZGVzazogSURlc2ssIHN0b2NrUGxheWFibGVDYXJkczogSUNhcmRbXSk6IE1vdmVIaW50W10ge1xuICBjb25zdCBtb3ZlczogTW92ZUhpbnRbXSA9IFtdXG4gIGNvbnN0IHt0YWJsZWF1fSA9IGRlc2tcblxuICAvLyBLaW5nIHRvIGFuIGVtcHR5IHRhYmxlYXUgcGlsZSB0cmFuc2ZlciB0aGF0IGFsbG93cyBtb3ZpbmcgdGhlIGxhcmdlc3QgYnVpbHQgc2VxdWVuY2UgdG8gdGhlIGtpbmcncyBwaWxlXG4gIGNvbnN0IGF2YWlsYWJsZUtpbmdzID0gdGFibGVhdS5waWxlc1xuICAgIC8vIGlmIHRoZSBraW5nIGlzIHRoZSB0b3AgY2FyZCBpbiB0aGUgcGlsZSwgdGhlcmUgaXMgbm8gcG9pbnQgaW4gbWFraW5nIHRoZSB0cmFuc2ZlclxuICAgIC5maWx0ZXIoKHBpbGUpID0+IHBpbGUuY2FyZHMubGVuZ3RoID4gMSAmJiAocGlsZS5jYXJkc1swXS5zaWRlID09PSBTaWRlLkJBQ0sgfHwgcGlsZS5jYXJkc1swXS5yYW5rICE9PSBSYW5rLktJTkcpKVxuICAgIC5tYXAoKHBpbGUpID0+IHBpbGUuY2FyZHMuZmluZCgoY2FyZCkgPT4gY2FyZC5yYW5rID09PSBSYW5rLktJTkcgJiYgY2FyZC5zaWRlID09PSBTaWRlLkZBQ0UpKVxuICAgIC5maWx0ZXIoKGNhcmRPclVuZGVmaW5lZCkgPT4gISFjYXJkT3JVbmRlZmluZWQpLm1hcCgoY2FyZCkgPT4gY2FyZCBhcyBJQ2FyZClcbiAgICAvLyB0YWJsZWF1IGNhcmRzIGFyZSBwcmVmZXJyZWQsIHNvIHdlJ2xsIHB1dCB0aGUgc3RvY2sgY2FyZHMgYXQgdGhlIGVuZCBvZiB0aGUgbGlzdFxuICAgIC5jb25jYXQoc3RvY2tQbGF5YWJsZUNhcmRzLmZpbHRlcigoY2FyZCkgPT4gY2FyZC5yYW5rID09PSBSYW5rLktJTkcpKVxuICBjb25zdCBlbXB0eVBpbGVJbmRleCA9IHRhYmxlYXUucGlsZXMuZmluZEluZGV4KChwaWxlKSA9PiAhcGlsZS5jYXJkcy5sZW5ndGgpXG4gIGlmIChhdmFpbGFibGVLaW5ncy5sZW5ndGggJiYgZW1wdHlQaWxlSW5kZXggPiAtMSkge1xuICAgIGZvciAoY29uc3Qga2luZyBvZiBhdmFpbGFibGVLaW5ncykge1xuICAgICAgY29uc3Qga2luZ1NlcXVlbmNlRW5kID0gc3RvY2tQbGF5YWJsZUNhcmRzLmluY2x1ZGVzKGtpbmcpID9cbiAgICAgICAga2luZ1xuICAgICAgOlxuICAgICAgICBsYXN0SXRlbSh0YWJsZWF1LnBpbGVzW2dldFBpbGVJbmRleCh0YWJsZWF1LCBraW5nKV0uY2FyZHMpXG4gICAgICBjb25zdCBsYXJnZXN0U2VxdWVuY2VzID0gdGFibGVhdS5waWxlc1xuICAgICAgICAubWFwKChwaWxlKSA9PiBwaWxlLmNhcmRzLmZpbHRlcigoY2FyZCkgPT4gY2FyZC5zaWRlID09PSBTaWRlLkZBQ0UpKVxuICAgICAgICAuZmlsdGVyKChwaWxlQ2FyZHMpID0+IHBpbGVDYXJkcy5sZW5ndGgpXG4gICAgICAgIC5tYXAoKHBpbGVDYXJkcywgXywgcGlsZXMpID0+IFtwaWxlQ2FyZHMsIE1hdGgubWF4KC4uLnBpbGVzLm1hcCgocGlsZSkgPT4gcGlsZS5sZW5ndGgpKV0gYXMgW0lDYXJkW10sIG51bWJlcl0pXG4gICAgICAgIC5maWx0ZXIoKFtwaWxlQ2FyZHMsIGxhcmdlc3RTZXF1ZW5jZUxlbmd0aF0pID0+IHBpbGVDYXJkcy5sZW5ndGggPT09IGxhcmdlc3RTZXF1ZW5jZUxlbmd0aClcbiAgICAgICAgLm1hcCgoW3BpbGVDYXJkc10pID0+IHBpbGVDYXJkcylcbiAgICAgIGNvbnN0IGlzQmVuZWZpY2lhbFRyYW5zZmVyVG9LaW5nU2VxdWVuY2VQb3NzaWJsZSA9IGxhcmdlc3RTZXF1ZW5jZXMuZmluZChcbiAgICAgICAgKGNhcmRTZXF1ZW5jZSkgPT4gaXNWYWxpZFRhYmxlYXVTZXF1ZW5jZShraW5nU2VxdWVuY2VFbmQsIGNhcmRTZXF1ZW5jZVswXSksXG4gICAgICApXG4gICAgICBpZiAoaXNCZW5lZmljaWFsVHJhbnNmZXJUb0tpbmdTZXF1ZW5jZVBvc3NpYmxlKSB7XG4gICAgICAgIGNvbnN0IHNvdXJjZVBpbGVJbmRleCA9IGdldFBpbGVJbmRleCh0YWJsZWF1LCBraW5nKVxuICAgICAgICBtb3Zlcy5wdXNoKFtcbiAgICAgICAgICBzdG9ja1BsYXlhYmxlQ2FyZHMuaW5jbHVkZXMoa2luZykgP1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBtb3ZlOiBNb3ZlVHlwZS5XQVNURV9UT19UQUJMRUFVLFxuICAgICAgICAgICAgICBwaWxlSW5kZXg6IGVtcHR5UGlsZUluZGV4LFxuICAgICAgICAgICAgfVxuICAgICAgICAgIDpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbW92ZTogTW92ZVR5cGUuVEFCTEVBVV9UT19UQUJMRUFVLFxuICAgICAgICAgICAgICBzb3VyY2VQaWxlSW5kZXgsXG4gICAgICAgICAgICAgIHRhcmdldFBpbGVJbmRleDogZW1wdHlQaWxlSW5kZXgsXG4gICAgICAgICAgICAgIHRvcE1vdmVkQ2FyZEluZGV4OiB0YWJsZWF1LnBpbGVzW3NvdXJjZVBpbGVJbmRleF0uY2FyZHMuaW5kZXhPZihraW5nKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAga2luZyxcbiAgICAgICAgICBNb3ZlQ29uZmlkZW5jZS5ISUdILFxuICAgICAgICBdKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtb3Zlc1xufVxuXG5mdW5jdGlvbiBnZXRNb3Zlc1dpdGhNZWRpdW1Db25maWRlbmNlKGRlc2s6IElEZXNrKTogTW92ZUhpbnRbXSB7XG4gIGNvbnN0IG1vdmVzOiBNb3ZlSGludFtdID0gW11cbiAgY29uc3Qge3RhYmxlYXV9ID0gZGVza1xuXG4gIC8vIE1vdmluZyBhIDUsIDYsIDcgb3IgOCBmcm9tIGEgdGFibGVhdSBwaWxlIHRoYXQgKHByb2JhYmx5KSBoYXMgbm90IGJlZW4gdG91Y2hlZCB5ZXQgYW5kIHdpbGwgcmV2ZWFsIGEgY2FyZCB0b1xuICAvLyBhbm90aGVyIHRhYmxlYXUgcGlsZVxuICBjb25zdCBjYW5kaWRhdGVDYXJkcyA9IHRhYmxlYXUucGlsZXNcbiAgICAuZmlsdGVyKChwaWxlKSA9PiBwaWxlLmNhcmRzLmxlbmd0aCA+IDEpXG4gICAgLmZpbHRlcigocGlsZSkgPT4gcGlsZS5jYXJkcy5maWx0ZXIoKGNhcmQpID0+IGNhcmQuc2lkZSA9PT0gU2lkZS5GQUNFKS5sZW5ndGggPT09IDEpXG4gICAgLm1hcCgocGlsZSkgPT4gbGFzdEl0ZW0ocGlsZS5jYXJkcykpXG4gICAgLmZpbHRlcigoY2FyZCkgPT4gW1JhbmsuRklWRSwgUmFuay5TSVgsIFJhbmsuU0VWRU4sIFJhbmsuRUlHSFRdLmluY2x1ZGVzKGNhcmQucmFuaykpXG4gIGZvciAoY29uc3QgY2FuZGlkYXRlQ2FyZCBvZiBjYW5kaWRhdGVDYXJkcykge1xuICAgIGNvbnN0IHNvdXJjZVBpbGVJbmRleCA9IGdldFBpbGVJbmRleCh0YWJsZWF1LCBjYW5kaWRhdGVDYXJkKVxuICAgIGNvbnN0IGNhbmRpZGF0ZVRhcmdldHMgPSB0YWJsZWF1LnBpbGVzLmZpbHRlcigocGlsZSkgPT5cbiAgICAgIHBpbGUuY2FyZHMubGVuZ3RoICYmXG4gICAgICBsYXN0SXRlbShwaWxlLmNhcmRzKS5zaWRlID09PSBTaWRlLkZBQ0UgJiZcbiAgICAgIGlzVmFsaWRUYWJsZWF1U2VxdWVuY2UobGFzdEl0ZW0ocGlsZS5jYXJkcyksIGNhbmRpZGF0ZUNhcmQpLFxuICAgIClcbiAgICBmb3IgKGNvbnN0IGNhbmRpZGF0ZVRhcmdldCBvZiBjYW5kaWRhdGVUYXJnZXRzKSB7XG4gICAgICBtb3Zlcy5wdXNoKFtcbiAgICAgICAge1xuICAgICAgICAgIG1vdmU6IE1vdmVUeXBlLlRBQkxFQVVfVE9fVEFCTEVBVSxcbiAgICAgICAgICBzb3VyY2VQaWxlSW5kZXgsXG4gICAgICAgICAgdGFyZ2V0UGlsZUluZGV4OiB0YWJsZWF1LnBpbGVzLmluZGV4T2YoY2FuZGlkYXRlVGFyZ2V0KSxcbiAgICAgICAgICB0b3BNb3ZlZENhcmRJbmRleDogdGFibGVhdS5waWxlc1tzb3VyY2VQaWxlSW5kZXhdLmNhcmRzLmluZGV4T2YoY2FuZGlkYXRlQ2FyZCksXG4gICAgICAgIH0sXG4gICAgICAgIGNhbmRpZGF0ZUNhcmQsXG4gICAgICAgIE1vdmVDb25maWRlbmNlLk1FRElVTSxcbiAgICAgIF0pXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG1vdmVzXG59XG5cbmZ1bmN0aW9uIGdldE1vdmVzV2l0aExvd0NvbmZpZGVuY2UoZGVzazogSURlc2spOiBNb3ZlSGludFtdIHtcbiAgY29uc3QgbW92ZXM6IE1vdmVIaW50W10gPSBbXVxuICBjb25zdCB7dGFibGVhdX0gPSBkZXNrXG5cbiAgLy8gTWFraW5nIGEgdHJhbnNmZXIgZnJvbSB0YWJsZWF1IHBpbGUgdG8gYSBub24tZW1wdHkgdGFibGVhdSBwaWxlIHRoYXQgd2lsbCByZXZlYWwgYSBjYXJkXG4gIGNvbnN0IHBpbGVzT2ZWaXNpYmxlQ2FyZHMgPSB0YWJsZWF1LnBpbGVzLm1hcChcbiAgICAocGlsZSkgPT4gcGlsZS5jYXJkcy5maWx0ZXIoKGNhcmQpID0+IGNhcmQuc2lkZSA9PT0gU2lkZS5GQUNFKSxcbiAgKS5maWx0ZXIoXG4gICAgKHBpbGUpID0+IHBpbGUubGVuZ3RoLFxuICApXG4gIGNvbnN0IGNhbmRpZGF0ZVNvdXJjZVBpbGVzID0gcGlsZXNPZlZpc2libGVDYXJkcy5maWx0ZXIoXG4gICAgKHBpbGUpID0+IHRhYmxlYXUucGlsZXNbZ2V0UGlsZUluZGV4KHRhYmxlYXUsIHBpbGVbMF0pXS5jYXJkc1swXS5zaWRlID09PSBTaWRlLkJBQ0ssXG4gIClcbiAgZm9yIChjb25zdCBwaWxlIG9mIGNhbmRpZGF0ZVNvdXJjZVBpbGVzKSB7XG4gICAgY29uc3QgdG9wU291cmNlQ2FyZCA9IHBpbGVbMF1cbiAgICBmb3IgKGNvbnN0IG90aGVyUGlsZSBvZiBwaWxlc09mVmlzaWJsZUNhcmRzKSB7XG4gICAgICBjb25zdCBib3R0b21UYXJnZXRDYXJkID0gbGFzdEl0ZW0ob3RoZXJQaWxlKVxuICAgICAgaWYgKGlzVmFsaWRUYWJsZWF1U2VxdWVuY2UoYm90dG9tVGFyZ2V0Q2FyZCwgdG9wU291cmNlQ2FyZCkpIHtcbiAgICAgICAgY29uc3Qgc291cmNlUGlsZUluZGV4ID0gZ2V0UGlsZUluZGV4KHRhYmxlYXUsIHRvcFNvdXJjZUNhcmQpXG4gICAgICAgIG1vdmVzLnB1c2goW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1vdmU6IE1vdmVUeXBlLlRBQkxFQVVfVE9fVEFCTEVBVSxcbiAgICAgICAgICAgIHNvdXJjZVBpbGVJbmRleCxcbiAgICAgICAgICAgIHRhcmdldFBpbGVJbmRleDogZ2V0UGlsZUluZGV4KHRhYmxlYXUsIGJvdHRvbVRhcmdldENhcmQpLFxuICAgICAgICAgICAgdG9wTW92ZWRDYXJkSW5kZXg6IHRhYmxlYXUucGlsZXNbc291cmNlUGlsZUluZGV4XS5jYXJkcy5pbmRleE9mKHRvcFNvdXJjZUNhcmQpLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdG9wU291cmNlQ2FyZCxcbiAgICAgICAgICBNb3ZlQ29uZmlkZW5jZS5MT1csXG4gICAgICAgIF0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gVGFibGVhdSB0byB0YWJsZWF1IHRyYW5zZmVycyB0aGF0IGxlYXZlcyB0aGUgc291cmNlIHBpbGUgZW1wdHksIGJ1dCB0aGVyZSBpcyBhIGtpbmcgdGhhdCBjYW4gYmUgdHJhbnNmZXJyZWQgdGhlcmVcbiAgY29uc3QgcGlsZXNPZk9ubHlWaXNpYmxlQ2FyZHMgPSB0YWJsZWF1LnBpbGVzLmZpbHRlcihcbiAgICAocGlsZSkgPT4gcGlsZS5jYXJkcy5sZW5ndGggJiYgcGlsZS5jYXJkcy5ldmVyeSgoY2FyZCkgPT4gY2FyZC5zaWRlID09PSBTaWRlLkZBQ0UpLFxuICApXG4gIGNvbnN0IHBpbGVzV2l0aEtpbmcgPSB0YWJsZWF1LnBpbGVzLmZpbHRlcihcbiAgICAocGlsZSkgPT4gcGlsZS5jYXJkcy5zb21lKChjYXJkKSA9PiBjYXJkLnNpZGUgPT09IFNpZGUuRkFDRSAmJiBjYXJkLnJhbmsgPT09IFJhbmsuS0lORyksXG4gIClcbiAgaWYgKHBpbGVzV2l0aEtpbmcubGVuZ3RoKSB7XG4gICAgZm9yIChjb25zdCBzb3VyY2VQaWxlIG9mIHBpbGVzT2ZPbmx5VmlzaWJsZUNhcmRzKSB7XG4gICAgICBjb25zdCB0b3BTb3VyY2VDYXJkID0gc291cmNlUGlsZS5jYXJkc1swXVxuICAgICAgZm9yIChjb25zdCBvdGhlclBpbGUgb2YgcGlsZXNPZlZpc2libGVDYXJkcykge1xuICAgICAgICBjb25zdCBib3R0b21UYXJnZXRDYXJkID0gbGFzdEl0ZW0ob3RoZXJQaWxlKVxuICAgICAgICBpZiAoaXNWYWxpZFRhYmxlYXVTZXF1ZW5jZShib3R0b21UYXJnZXRDYXJkLCB0b3BTb3VyY2VDYXJkKSkge1xuICAgICAgICAgIGNvbnN0IHNvdXJjZVBpbGVJbmRleCA9IGdldFBpbGVJbmRleCh0YWJsZWF1LCB0b3BTb3VyY2VDYXJkKVxuICAgICAgICAgIG1vdmVzLnB1c2goW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBtb3ZlOiBNb3ZlVHlwZS5UQUJMRUFVX1RPX1RBQkxFQVUsXG4gICAgICAgICAgICAgIHNvdXJjZVBpbGVJbmRleCxcbiAgICAgICAgICAgICAgdGFyZ2V0UGlsZUluZGV4OiBnZXRQaWxlSW5kZXgodGFibGVhdSwgYm90dG9tVGFyZ2V0Q2FyZCksXG4gICAgICAgICAgICAgIHRvcE1vdmVkQ2FyZEluZGV4OiB0YWJsZWF1LnBpbGVzW3NvdXJjZVBpbGVJbmRleF0uY2FyZHMuaW5kZXhPZih0b3BTb3VyY2VDYXJkKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0b3BTb3VyY2VDYXJkLFxuICAgICAgICAgICAgTW92ZUNvbmZpZGVuY2UuTE9XLFxuICAgICAgICAgIF0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbW92ZXNcbn1cblxuZnVuY3Rpb24gZ2V0TW92ZXNXaXRoVmVyeUxvd0NvbmZpZGVuY2UoXG4gIGRlc2s6IElEZXNrLFxuICBzdG9ja1BsYXlhYmxlQ2FyZHM6IElDYXJkW10sXG4gIHRvcEZvdW5kYXRpb25DYXJkczogSUZvdW5kYXRpb25Ub3AsXG4gIHJ1bGVzOiBJR2FtZVJ1bGVzLFxuKTogTW92ZUhpbnRbXSB7XG4gIGNvbnN0IG1vdmVzOiBNb3ZlSGludFtdID0gW11cbiAgY29uc3Qge3RhYmxlYXV9ID0gZGVza1xuICBjb25zdCBmaWx0ZXJlZFRvcEZvdW5kYXRpb25DYXJkczogSUNhcmRbXSA9IE9iamVjdC52YWx1ZXModG9wRm91bmRhdGlvbkNhcmRzKS5maWx0ZXIoKGNhcmQpID0+IGNhcmQpXG5cbiAgLy8gRm91bmRhdGlvbiB0byB0YWJsZWF1IHRyYW5zZmVyIHRoYXQgYWxsb3dzIHJldmVhbGluZyBhIGNhcmQgYnkgdGFibGVhdSB0byB0YWJsZWF1IHRyYW5zZmVyXG4gIGZvciAoY29uc3QgZm91bmRhdGlvbkNhcmQgb2YgZmlsdGVyZWRUb3BGb3VuZGF0aW9uQ2FyZHMpIHtcbiAgICBjb25zdCBpc1RoZXJlUGlsZVRyYW5zZmVyYWJsZVRvQ2FyZCA9IHRhYmxlYXUucGlsZXMuc29tZSgocGlsZSkgPT4ge1xuICAgICAgY29uc3QgaGlnaGVzdFZpc2libGVDYXJkID0gcGlsZS5jYXJkcy5maW5kKChjYXJkKSA9PiBjYXJkLnNpZGUgPT09IFNpZGUuRkFDRSlcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGhpZ2hlc3RWaXNpYmxlQ2FyZCAmJlxuICAgICAgICBwaWxlLmNhcmRzWzBdICE9PSBoaWdoZXN0VmlzaWJsZUNhcmQgJiZcbiAgICAgICAgaXNWYWxpZFRhYmxlYXVTZXF1ZW5jZShmb3VuZGF0aW9uQ2FyZCwgaGlnaGVzdFZpc2libGVDYXJkKVxuICAgICAgKVxuICAgIH0pXG4gICAgaWYgKCFpc1RoZXJlUGlsZVRyYW5zZmVyYWJsZVRvQ2FyZCkge1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBjb25zdCB0YXJnZXRQaWxlSW5kZXggPSB0YWJsZWF1LnBpbGVzLmZpbmRJbmRleCgocGlsZSkgPT4ge1xuICAgICAgY29uc3QgbGFzdENhcmQgPSBsYXN0SXRlbU9yTnVsbChwaWxlLmNhcmRzKVxuICAgICAgcmV0dXJuIGxhc3RDYXJkICYmIGxhc3RDYXJkLnNpZGUgPT09IFNpZGUuRkFDRSAmJiBpc1ZhbGlkVGFibGVhdVNlcXVlbmNlKGxhc3RDYXJkLCBmb3VuZGF0aW9uQ2FyZClcbiAgICB9KVxuICAgIGlmICh0YXJnZXRQaWxlSW5kZXggPiAtMSkge1xuICAgICAgbW92ZXMucHVzaChbXG4gICAgICAgIHtcbiAgICAgICAgICBjb2xvcjogZm91bmRhdGlvbkNhcmQuY29sb3IsXG4gICAgICAgICAgbW92ZTogTW92ZVR5cGUuRk9VTkRBVElPTl9UT19UQUJMRUFVLFxuICAgICAgICAgIHBpbGVJbmRleDogdGFyZ2V0UGlsZUluZGV4LFxuICAgICAgICB9LFxuICAgICAgICBmb3VuZGF0aW9uQ2FyZCxcbiAgICAgICAgTW92ZUNvbmZpZGVuY2UuVkVSWV9MT1csXG4gICAgICBdKVxuICAgIH1cbiAgfVxuXG4gIC8vIEZvdW5kYXRpb24gdG8gdGFibGVhdSB0cmFuc2ZlciB0aGF0IGFsbG93cyBhIHN0b2NrIHRvIHRhYmxlYXUgdHJhbnNmZXJcbiAgZm9yIChjb25zdCBmb3VuZGF0aW9uQ2FyZCBvZiBmaWx0ZXJlZFRvcEZvdW5kYXRpb25DYXJkcykge1xuICAgIGNvbnN0IGlzVGhlcmVNYXRjaGluZ1N0b2NrQ2FyZCA9IHN0b2NrUGxheWFibGVDYXJkcy5zb21lKChjYXJkKSA9PiBpc1ZhbGlkVGFibGVhdVNlcXVlbmNlKGZvdW5kYXRpb25DYXJkLCBjYXJkKSlcbiAgICBpZiAoIWlzVGhlcmVNYXRjaGluZ1N0b2NrQ2FyZCkge1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBjb25zdCB0YXJnZXRQaWxlSW5kZXggPSB0YWJsZWF1LnBpbGVzLmZpbmRJbmRleCgocGlsZSkgPT4ge1xuICAgICAgY29uc3QgbGFzdENhcmQgPSBsYXN0SXRlbU9yTnVsbChwaWxlLmNhcmRzKVxuICAgICAgcmV0dXJuIGxhc3RDYXJkICYmIGxhc3RDYXJkLnNpZGUgPT09IFNpZGUuRkFDRSAmJiBpc1ZhbGlkVGFibGVhdVNlcXVlbmNlKGxhc3RDYXJkLCBmb3VuZGF0aW9uQ2FyZClcbiAgICB9KVxuICAgIGlmICh0YXJnZXRQaWxlSW5kZXggPiAtMSkge1xuICAgICAgbW92ZXMucHVzaChbXG4gICAgICAgIHtcbiAgICAgICAgICBjb2xvcjogZm91bmRhdGlvbkNhcmQuY29sb3IsXG4gICAgICAgICAgbW92ZTogTW92ZVR5cGUuRk9VTkRBVElPTl9UT19UQUJMRUFVLFxuICAgICAgICAgIHBpbGVJbmRleDogdGFyZ2V0UGlsZUluZGV4LFxuICAgICAgICB9LFxuICAgICAgICBmb3VuZGF0aW9uQ2FyZCxcbiAgICAgICAgTW92ZUNvbmZpZGVuY2UuVkVSWV9MT1csXG4gICAgICBdKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGVtcHR5UGlsZUluZGV4ID0gdGFibGVhdS5waWxlcy5maW5kSW5kZXgoKGNhbmRpZGF0ZVBpbGUpID0+ICFjYW5kaWRhdGVQaWxlLmNhcmRzLmxlbmd0aClcblxuICAvLyBLaW5nIHRvIGVtcHR5IHBpbGUgdHJhbnNmZXIgdGhhdCByZXZlYWxzIGEgbmV3IGNhcmRcbiAgZm9yIChjb25zdCBwaWxlIG9mIHRhYmxlYXUucGlsZXMpIHtcbiAgICBjb25zdCBraW5nSW5kZXggPSBwaWxlLmNhcmRzLmZpbmRJbmRleCgoY2FyZCkgPT4gY2FyZC5zaWRlID09PSBTaWRlLkZBQ0UgJiYgY2FyZC5yYW5rID09PSBSYW5rLktJTkcpXG4gICAgY29uc3Qga2luZyA9IHBpbGUuY2FyZHNba2luZ0luZGV4XVxuICAgIGlmIChraW5nICYmIGtpbmdJbmRleCA+IDAgJiYgcGlsZS5jYXJkc1traW5nSW5kZXggLSAxXS5zaWRlID09PSBTaWRlLkJBQ0sgJiYgZW1wdHlQaWxlSW5kZXggPiAtMSkge1xuICAgICAgbW92ZXMucHVzaChbXG4gICAgICAgIHtcbiAgICAgICAgICBtb3ZlOiBNb3ZlVHlwZS5UQUJMRUFVX1RPX1RBQkxFQVUsXG4gICAgICAgICAgc291cmNlUGlsZUluZGV4OiBnZXRQaWxlSW5kZXgodGFibGVhdSwga2luZyksXG4gICAgICAgICAgdGFyZ2V0UGlsZUluZGV4OiBlbXB0eVBpbGVJbmRleCxcbiAgICAgICAgICB0b3BNb3ZlZENhcmRJbmRleDoga2luZ0luZGV4LFxuICAgICAgICB9LFxuICAgICAgICBraW5nLFxuICAgICAgICBNb3ZlQ29uZmlkZW5jZS5WRVJZX0xPVyxcbiAgICAgIF0pXG4gICAgfVxuICB9XG5cbiAgLy8gVGFibGVhdSB0byB0YWJsZWF1IHRyYW5zZmVycyB0aGF0IGxlYXZlcyB0aGUgc291cmNlIHBpbGUgZW1wdHlcbiAgY29uc3QgcGlsZXNPZk9ubHlWaXNpYmxlQ2FyZHMgPSB0YWJsZWF1LnBpbGVzLmZpbHRlcihcbiAgICAocGlsZSkgPT4gcGlsZS5jYXJkcy5sZW5ndGggJiYgcGlsZS5jYXJkcy5ldmVyeSgoY2FyZCkgPT4gY2FyZC5zaWRlID09PSBTaWRlLkZBQ0UpLFxuICApXG4gIGNvbnN0IHBpbGVzV2l0aFZpc2libGVDYXJkcyA9IHRhYmxlYXUucGlsZXMuZmlsdGVyKFxuICAgIChwaWxlKSA9PiBwaWxlLmNhcmRzLnNvbWUoKGNhcmQpID0+IGNhcmQuc2lkZSA9PT0gU2lkZS5GQUNFKSxcbiAgKVxuICBmb3IgKGNvbnN0IHNvdXJjZVBpbGUgb2YgcGlsZXNPZk9ubHlWaXNpYmxlQ2FyZHMpIHtcbiAgICBjb25zdCB0b3BTb3VyY2VDYXJkID0gc291cmNlUGlsZS5jYXJkc1swXVxuICAgIGZvciAoY29uc3Qgb3RoZXJQaWxlIG9mIHBpbGVzV2l0aFZpc2libGVDYXJkcykge1xuICAgICAgY29uc3QgYm90dG9tVGFyZ2V0Q2FyZCA9IGxhc3RJdGVtKG90aGVyUGlsZS5jYXJkcylcbiAgICAgIGlmIChpc1ZhbGlkVGFibGVhdVNlcXVlbmNlKGJvdHRvbVRhcmdldENhcmQsIHRvcFNvdXJjZUNhcmQpKSB7XG4gICAgICAgIGNvbnN0IHNvdXJjZVBpbGVJbmRleCA9IGdldFBpbGVJbmRleCh0YWJsZWF1LCB0b3BTb3VyY2VDYXJkKVxuICAgICAgICBtb3Zlcy5wdXNoKFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtb3ZlOiBNb3ZlVHlwZS5UQUJMRUFVX1RPX1RBQkxFQVUsXG4gICAgICAgICAgICBzb3VyY2VQaWxlSW5kZXgsXG4gICAgICAgICAgICB0YXJnZXRQaWxlSW5kZXg6IGdldFBpbGVJbmRleCh0YWJsZWF1LCBib3R0b21UYXJnZXRDYXJkKSxcbiAgICAgICAgICAgIHRvcE1vdmVkQ2FyZEluZGV4OiB0YWJsZWF1LnBpbGVzW3NvdXJjZVBpbGVJbmRleF0uY2FyZHMuaW5kZXhPZih0b3BTb3VyY2VDYXJkKSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRvcFNvdXJjZUNhcmQsXG4gICAgICAgICAgTW92ZUNvbmZpZGVuY2UuVkVSWV9MT1csXG4gICAgICAgIF0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gU3RvY2sgdG8gdGFibGVhdVxuICBmb3IgKGNvbnN0IGNhcmQgb2Ygc3RvY2tQbGF5YWJsZUNhcmRzKSB7XG4gICAgZm9yIChjb25zdCBwaWxlIG9mIHRhYmxlYXUucGlsZXMpIHtcbiAgICAgIGNvbnN0IGxhc3RDYXJkID0gbGFzdEl0ZW1Pck51bGwocGlsZS5jYXJkcylcbiAgICAgIGlmIChsYXN0Q2FyZCAmJiBsYXN0Q2FyZC5zaWRlID09PSBTaWRlLkZBQ0UgJiYgaXNWYWxpZFRhYmxlYXVTZXF1ZW5jZShsYXN0Q2FyZCwgY2FyZCkpIHtcbiAgICAgICAgbW92ZXMucHVzaChbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbW92ZTogTW92ZVR5cGUuV0FTVEVfVE9fVEFCTEVBVSxcbiAgICAgICAgICAgIHBpbGVJbmRleDogZ2V0UGlsZUluZGV4KHRhYmxlYXUsIGxhc3RDYXJkKSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNhcmQsXG4gICAgICAgICAgTW92ZUNvbmZpZGVuY2UuVkVSWV9MT1csXG4gICAgICAgIF0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gU3RvY2sgdG8gZm91bmRhdGlvblxuICBmb3IgKGNvbnN0IHN0b2NrQ2FyZCBvZiBzdG9ja1BsYXlhYmxlQ2FyZHMpIHtcbiAgICBmb3IgKGNvbnN0IGZvdW5kYXRpb25DYXJkIG9mIGZpbHRlcmVkVG9wRm91bmRhdGlvbkNhcmRzKSB7XG4gICAgICBpZiAoaXNWYWxpZEZvdW5kYXRpb25TZXF1ZW5jZShmb3VuZGF0aW9uQ2FyZCwgc3RvY2tDYXJkKSkge1xuICAgICAgICBtb3Zlcy5wdXNoKFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtb3ZlOiBNb3ZlVHlwZS5XQVNURV9UT19GT1VOREFUSU9OLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc3RvY2tDYXJkLFxuICAgICAgICAgIE1vdmVDb25maWRlbmNlLlZFUllfTE9XLFxuICAgICAgICBdKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIENhcmQgZnJvbSB3YXN0ZS9zdG9jayB0byBhbiBlbXB0eSB0YWJsZWF1IHBpbGUgdHJhbnNmZXJcbiAgaWYgKGVtcHR5UGlsZUluZGV4ID4gLTEpIHtcbiAgICBjb25zdCB1c2FibGVDYXJkcyA9IHJ1bGVzLmFsbG93Tm9uS2luZ1RvRW1wdHlQaWxlVHJhbnNmZXIgP1xuICAgICAgc3RvY2tQbGF5YWJsZUNhcmRzXG4gICAgOlxuICAgICAgc3RvY2tQbGF5YWJsZUNhcmRzLmZpbHRlcigoY2FyZCkgPT4gY2FyZC5yYW5rID09PSBSYW5rLktJTkcpXG4gICAgZm9yIChjb25zdCBjYXJkIG9mIHVzYWJsZUNhcmRzKSB7XG4gICAgICBtb3Zlcy5wdXNoKFtcbiAgICAgICAge1xuICAgICAgICAgIG1vdmU6IE1vdmVUeXBlLldBU1RFX1RPX1RBQkxFQVUsXG4gICAgICAgICAgcGlsZUluZGV4OiBlbXB0eVBpbGVJbmRleCxcbiAgICAgICAgfSxcbiAgICAgICAgY2FyZCxcbiAgICAgICAgTW92ZUNvbmZpZGVuY2UuVkVSWV9MT1csXG4gICAgICBdKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtb3Zlc1xufVxuXG5mdW5jdGlvbiBnZXRNb3Zlc1dpdGhNaW5pc2N1bGVDb25maWRlbmNlKFxuICBkZXNrOiBJRGVzayxcbiAgcnVsZXM6IElHYW1lUnVsZXMsXG4gIHN0b2NrUGxheWFibGVDYXJkczogSUNhcmRbXSxcbiAgdG9wRm91bmRhdGlvbkNhcmRzOiBJRm91bmRhdGlvblRvcCxcbik6IE1vdmVIaW50W10ge1xuICBjb25zdCBtb3ZlczogTW92ZUhpbnRbXSA9IFtdXG4gIGNvbnN0IHt0YWJsZWF1fSA9IGRlc2tcblxuICAvLyBUYWJsZWF1IHRvIGZvdW5kYXRpb24gdHJhbnNmZXIgdGhhdCBhbGxvd3MgYSB0cmFuc2ZlciByZXZlYWxpbmcgY2FyZCBvciByZXZlYWwgYSBjYXJkXG4gIGZvciAoY29uc3QgcGlsZSBvZiB0YWJsZWF1LnBpbGVzKSB7XG4gICAgY29uc3QgbGFzdENhcmQgPSBsYXN0SXRlbU9yTnVsbChwaWxlLmNhcmRzKVxuICAgIGlmICghbGFzdENhcmQgfHwgbGFzdENhcmQuc2lkZSA9PT0gU2lkZS5CQUNLKSB7XG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIGNvbnN0IGZvdW5kYXRpb25DYXJkID0gdG9wRm91bmRhdGlvbkNhcmRzW2xhc3RDYXJkLmNvbG9yXVxuICAgIGlmICghZm91bmRhdGlvbkNhcmQgfHwgIWlzVmFsaWRGb3VuZGF0aW9uU2VxdWVuY2UoZm91bmRhdGlvbkNhcmQsIGxhc3RDYXJkKSkge1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBjb25zdCBuZXh0VG9MYXN0Q2FyZCA9IHBpbGUuY2FyZHMuc2xpY2UoLTIpWzBdXG5cbiAgICAvLyBXaWxsIHRoZSB0cmFuc2ZlciByZXZlYWwgYSBjYXJkP1xuICAgIGlmIChwaWxlLmNhcmRzLmxlbmd0aCA+IDEgJiYgbmV4dFRvTGFzdENhcmQuc2lkZSA9PT0gU2lkZS5CQUNLKSB7XG4gICAgICBtb3Zlcy5wdXNoKFtcbiAgICAgICAge1xuICAgICAgICAgIG1vdmU6IE1vdmVUeXBlLlRBQkxFQVVfVE9fRk9VTkRBVElPTixcbiAgICAgICAgICBwaWxlSW5kZXg6IGdldFBpbGVJbmRleCh0YWJsZWF1LCBsYXN0Q2FyZCksXG4gICAgICAgIH0sXG4gICAgICAgIGxhc3RDYXJkLFxuICAgICAgICBNb3ZlQ29uZmlkZW5jZS5NSU5JU0NVTEUsXG4gICAgICBdKVxuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICAvLyBXaWxsIHRoZSB0cmFuc2ZlciBhbGxvdyBhIHRyYW5zZmVyIHRoYXQgd2lsbCByZXZlYWwgYSBjYXJkP1xuICAgIGZvciAoY29uc3Qgb3RoZXJQaWxlIG9mIHRhYmxlYXUucGlsZXMpIHtcbiAgICAgIGNvbnN0IGhpZ2hlc3RWaXNpYmxlQ2FyZCA9IG90aGVyUGlsZS5jYXJkcy5maW5kKChjYXJkKSA9PiBjYXJkLnNpZGUgPT09IFNpZGUuRkFDRSlcbiAgICAgIGlmIChcbiAgICAgICAgaGlnaGVzdFZpc2libGVDYXJkICYmXG4gICAgICAgIG90aGVyUGlsZS5jYXJkc1swXSAhPT0gaGlnaGVzdFZpc2libGVDYXJkICYmXG4gICAgICAgIGlzVmFsaWRUYWJsZWF1U2VxdWVuY2UobmV4dFRvTGFzdENhcmQsIGhpZ2hlc3RWaXNpYmxlQ2FyZClcbiAgICAgICkge1xuICAgICAgICBtb3Zlcy5wdXNoKFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtb3ZlOiBNb3ZlVHlwZS5UQUJMRUFVX1RPX0ZPVU5EQVRJT04sXG4gICAgICAgICAgICBwaWxlSW5kZXg6IGdldFBpbGVJbmRleCh0YWJsZWF1LCBsYXN0Q2FyZCksXG4gICAgICAgICAgfSxcbiAgICAgICAgICBsYXN0Q2FyZCxcbiAgICAgICAgICBNb3ZlQ29uZmlkZW5jZS5NSU5JU0NVTEUsXG4gICAgICAgIF0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gVGFibGVhdSB0byBmb3VuZGF0aW9uIHRyYW5zZmVyIHRoYXQgdGhhdCBhbGxvd3MgYSB3YXN0ZSB0byB0YWJsZWF1IG9yIGZvdW5kYXRpb24gdHJhbnNmZXJcbiAgZm9yIChjb25zdCBwaWxlIG9mIHRhYmxlYXUucGlsZXMpIHtcbiAgICBjb25zdCBsYXN0Q2FyZCA9IGxhc3RJdGVtT3JOdWxsKHBpbGUuY2FyZHMpXG4gICAgaWYgKCFsYXN0Q2FyZCB8fCBsYXN0Q2FyZC5zaWRlID09PSBTaWRlLkJBQ0spIHtcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgY29uc3QgZm91bmRhdGlvbkNhcmQgPSB0b3BGb3VuZGF0aW9uQ2FyZHNbbGFzdENhcmQuY29sb3JdXG4gICAgaWYgKCFmb3VuZGF0aW9uQ2FyZCB8fCAhaXNWYWxpZEZvdW5kYXRpb25TZXF1ZW5jZShmb3VuZGF0aW9uQ2FyZCwgbGFzdENhcmQpKSB7XG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIC8vIFdpbGwgdGhlIHRyYW5zZmVyIGFsbG93IGEgd2FzdGUgdG8gZm91bmRhdGlvbiB0cmFuc2Zlcj9cbiAgICBmb3IgKGNvbnN0IHN0b2NrQ2FyZCBvZiBzdG9ja1BsYXlhYmxlQ2FyZHMpIHtcbiAgICAgIGlmIChpc1ZhbGlkRm91bmRhdGlvblNlcXVlbmNlKGxhc3RDYXJkLCBzdG9ja0NhcmQpKSB7XG4gICAgICAgIG1vdmVzLnB1c2goW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1vdmU6IE1vdmVUeXBlLlRBQkxFQVVfVE9fRk9VTkRBVElPTixcbiAgICAgICAgICAgIHBpbGVJbmRleDogZ2V0UGlsZUluZGV4KHRhYmxlYXUsIGxhc3RDYXJkKSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGxhc3RDYXJkLFxuICAgICAgICAgIE1vdmVDb25maWRlbmNlLk1JTklTQ1VMRSxcbiAgICAgICAgXSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXaWxsIHRoZSB0cmFuc2ZlciBhbGxvdyBhIHdhc3RlIHRvIHRhYmxlYXUgdHJhbnNmZXI/XG4gICAgaWYgKHBpbGUuY2FyZHMubGVuZ3RoIDw9IDEpIHtcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuICAgIGNvbnN0IG5leHRUb0xhc3RDYXJkID0gcGlsZS5jYXJkcy5zbGljZSgtMilbMF1cbiAgICBpZiAobmV4dFRvTGFzdENhcmQuc2lkZSA9PT0gU2lkZS5GQUNFKSB7XG4gICAgICBmb3IgKGNvbnN0IHN0b2NrQ2FyZCBvZiBzdG9ja1BsYXlhYmxlQ2FyZHMpIHtcbiAgICAgICAgaWYgKGlzVmFsaWRUYWJsZWF1U2VxdWVuY2UobmV4dFRvTGFzdENhcmQsIHN0b2NrQ2FyZCkpIHtcbiAgICAgICAgICBtb3Zlcy5wdXNoKFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbW92ZTogTW92ZVR5cGUuVEFCTEVBVV9UT19GT1VOREFUSU9OLFxuICAgICAgICAgICAgICBwaWxlSW5kZXg6IGdldFBpbGVJbmRleCh0YWJsZWF1LCBsYXN0Q2FyZCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGFzdENhcmQsXG4gICAgICAgICAgICBNb3ZlQ29uZmlkZW5jZS5NSU5JU0NVTEUsXG4gICAgICAgICAgXSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGVtcHR5UGlsZUluZGV4ID0gdGFibGVhdS5waWxlcy5maW5kSW5kZXgoKHBpbGUpID0+ICFwaWxlLmNhcmRzLmxlbmd0aClcblxuICAvLyBTdG9jayB0byBlbXB0eSBwaWxlIHRyYW5zZmVyLCBwcmVmZXIgaGlnaGVyLXJhbmtpbmcgY2FyZHMgLSBhcHBsaWVzIG9ubHkgaWYgYWxsb3dlZCBieSBnYW1lIHJ1bGVzXG4gIGlmIChydWxlcy5hbGxvd05vbktpbmdUb0VtcHR5UGlsZVRyYW5zZmVyICYmIGVtcHR5UGlsZUluZGV4ID4gLTEpIHtcbiAgICBmb3IgKGNvbnN0IGNhcmQgb2Ygc3RvY2tQbGF5YWJsZUNhcmRzLnNsaWNlKCkuc29ydCgoY2FyZDEsIGNhcmQyKSA9PiBjb21wYXJlUmFuayhjYXJkMiwgY2FyZDEpKSkge1xuICAgICAgbW92ZXMucHVzaChbXG4gICAgICAgIHtcbiAgICAgICAgICBtb3ZlOiBNb3ZlVHlwZS5XQVNURV9UT19UQUJMRUFVLFxuICAgICAgICAgIHBpbGVJbmRleDogZW1wdHlQaWxlSW5kZXgsXG4gICAgICAgIH0sXG4gICAgICAgIGNhcmQsXG4gICAgICAgIE1vdmVDb25maWRlbmNlLk1JTklTQ1VMRSxcbiAgICAgIF0pXG4gICAgfVxuICB9XG5cbiAgLy8gVGFibGVhdSB0byBlbXB0eSBwaWxlIHRyYW5zZmVyIHRoYXQgYWxsb3dzIHJldmVhbGluZyBhIGNhcmQgLSBhcHBsaWVzIG9ubHkgaWYgYWxsb3dlZCBieSBnYW1lIHJ1bGVzXG4gIGlmIChydWxlcy5hbGxvd05vbktpbmdUb0VtcHR5UGlsZVRyYW5zZmVyICYmIGVtcHR5UGlsZUluZGV4ID4gLTEpIHtcbiAgICBjb25zdCBzb3VyY2VQaWxlcyA9IHRhYmxlYXUucGlsZXMuZmlsdGVyKFxuICAgICAgKHBpbGUpID0+IHBpbGUuY2FyZHMubGVuZ3RoICYmIHBpbGUuY2FyZHNbMF0uc2lkZSA9PT0gU2lkZS5CQUNLICYmIGxhc3RJdGVtKHBpbGUuY2FyZHMpLnNpZGUgPT09IFNpZGUuRkFDRSxcbiAgICApLnNvcnQoXG4gICAgICAocGlsZTEsIHBpbGUyKSA9PiAoXG4gICAgICAgIHBpbGUyLmNhcmRzLmZpbHRlcigoY2FyZCkgPT4gY2FyZC5zaWRlID09PSBTaWRlLkZBQ0UpLmxlbmd0aCAtXG4gICAgICAgIHBpbGUxLmNhcmRzLmZpbHRlcigoY2FyZCkgPT4gY2FyZC5zaWRlID09PSBTaWRlLkZBQ0UpLmxlbmd0aFxuICAgICAgKSxcbiAgICApXG5cbiAgICBmb3IgKGNvbnN0IHBpbGUgb2Ygc291cmNlUGlsZXMpIHtcbiAgICAgIGNvbnN0IHRvcENhcmRJbmRleCA9IHBpbGUuY2FyZHMuZmluZEluZGV4KChjYXJkKSA9PiBjYXJkLnNpZGUgPT09IFNpZGUuRkFDRSlcbiAgICAgIG1vdmVzLnB1c2goW1xuICAgICAgICB7XG4gICAgICAgICAgbW92ZTogTW92ZVR5cGUuVEFCTEVBVV9UT19UQUJMRUFVLFxuICAgICAgICAgIHNvdXJjZVBpbGVJbmRleDogZ2V0UGlsZUluZGV4KHRhYmxlYXUsIHBpbGUuY2FyZHNbdG9wQ2FyZEluZGV4XSksXG4gICAgICAgICAgdGFyZ2V0UGlsZUluZGV4OiBlbXB0eVBpbGVJbmRleCxcbiAgICAgICAgICB0b3BNb3ZlZENhcmRJbmRleDogdG9wQ2FyZEluZGV4LFxuICAgICAgICB9LFxuICAgICAgICBwaWxlLmNhcmRzW3RvcENhcmRJbmRleF0sXG4gICAgICAgIE1vdmVDb25maWRlbmNlLk1JTklTQ1VMRSxcbiAgICAgIF0pXG4gICAgfVxuICB9XG5cbiAgLy8gVGFibGVhdSB0byBhIG5vbi1lbXB0eSBmb3VuZGF0aW9uIHBpbGUgKEFjZSB0byBlbXB0eSBmb3VuZGF0aW9uIGlzIGFscmVhZHkgY292ZXJlZCB3aXRoIGFic29sdXRlIGNvbmZpZGVuY2UpXG4gIGZvciAoY29uc3QgcGlsZSBvZiB0YWJsZWF1LnBpbGVzKSB7XG4gICAgaWYgKCFwaWxlLmNhcmRzLmxlbmd0aCkge1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBjb25zdCBsYXN0Q2FyZCA9IGxhc3RJdGVtKHBpbGUuY2FyZHMpXG4gICAgY29uc3QgZm91bmRhdGlvbkNhcmQgPSB0b3BGb3VuZGF0aW9uQ2FyZHNbbGFzdENhcmQuY29sb3JdXG4gICAgaWYgKGZvdW5kYXRpb25DYXJkICYmIGlzVmFsaWRGb3VuZGF0aW9uU2VxdWVuY2UoZm91bmRhdGlvbkNhcmQsIGxhc3RDYXJkKSkge1xuICAgICAgbW92ZXMucHVzaChbXG4gICAgICAgIHtcbiAgICAgICAgICBtb3ZlOiBNb3ZlVHlwZS5UQUJMRUFVX1RPX0ZPVU5EQVRJT04sXG4gICAgICAgICAgcGlsZUluZGV4OiBnZXRQaWxlSW5kZXgodGFibGVhdSwgbGFzdENhcmQpLFxuICAgICAgICB9LFxuICAgICAgICBsYXN0Q2FyZCxcbiAgICAgICAgTW92ZUNvbmZpZGVuY2UuTUlOSVNDVUxFLFxuICAgICAgXSlcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbW92ZXNcbn1cblxuZnVuY3Rpb24gZ2V0U3RvY2tQbGF5YWJsZUNhcmRzKGRlc2tTdGF0ZTogSURlc2ssIHJ1bGVzOiBJR2FtZVJ1bGVzLCBtb2RlOiBIaW50R2VuZXJhdG9yTW9kZSk6IElDYXJkW10ge1xuICBzd2l0Y2ggKG1vZGUpIHtcbiAgICBjYXNlIEhpbnRHZW5lcmF0b3JNb2RlLkNVUlJFTlRfU1RBVEU6XG4gICAgICByZXR1cm4gZGVza1N0YXRlLndhc3RlLmNhcmRzLmxlbmd0aCA/IFtsYXN0SXRlbShkZXNrU3RhdGUud2FzdGUuY2FyZHMpXSA6IFtdXG4gICAgY2FzZSBIaW50R2VuZXJhdG9yTW9kZS5XSVRIX0ZVTExfU1RPQ0s6IHtcbiAgICAgICAgaWYgKCFkZXNrU3RhdGUud2FzdGUuY2FyZHMubGVuZ3RoICYmICFkZXNrU3RhdGUuc3RvY2suY2FyZHMubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIFtdXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdG9jayA9IGRlc2tTdGF0ZS5zdG9jay5jYXJkcy5zbGljZSgpXG4gICAgICAgIGNvbnN0IHdhc3RlID0gZGVza1N0YXRlLndhc3RlLmNhcmRzLnNsaWNlKClcbiAgICAgICAgY29uc3QgY2FyZHMgPSBuZXcgU2V0PElDYXJkPigpXG4gICAgICAgIGlmICh3YXN0ZS5sZW5ndGgpIHtcbiAgICAgICAgICBjYXJkcy5hZGQobGFzdEl0ZW0od2FzdGUpKVxuICAgICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCB0aGUgcmVtYWluaW5nIHN0b2NrXG4gICAgICAgICAgZm9yIChsZXQgY2FyZEluZGV4ID0gc3RvY2subGVuZ3RoIC0gcnVsZXMuZHJhd25DYXJkczsgY2FyZEluZGV4ID49IDA7IGNhcmRJbmRleCAtPSBydWxlcy5kcmF3bkNhcmRzKSB7XG4gICAgICAgICAgICBjYXJkcy5hZGQodHVybk92ZXIoc3RvY2tbY2FyZEluZGV4XSkpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0b2NrLnB1c2goLi4ud2FzdGUucmV2ZXJzZSgpLm1hcCh0dXJuT3ZlcikpIC8vIHJlZGVhbFxuICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggdGhlIHN0b2NrXG4gICAgICAgIGZvciAobGV0IGNhcmRJbmRleCA9IHN0b2NrLmxlbmd0aCAtIHJ1bGVzLmRyYXduQ2FyZHM7IGNhcmRJbmRleCA+PSAwOyBjYXJkSW5kZXggLT0gcnVsZXMuZHJhd25DYXJkcykge1xuICAgICAgICAgIGNhcmRzLmFkZCh0dXJuT3ZlcihzdG9ja1tjYXJkSW5kZXhdKSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gWy4uLmNhcmRzXVxuICAgICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBVbmtub3duIGhpbnQgZ2VuZXJhdG9yIG1vZGU6ICR7bW9kZX1gKVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldFBpbGVJbmRleCh0YWJsZWF1OiBJVGFibGVhdSwgY2FyZDogSUNhcmQpOiBudW1iZXIge1xuICByZXR1cm4gdGFibGVhdS5waWxlcy5maW5kSW5kZXgoKHBpbGUpID0+IHBpbGUuY2FyZHMuaW5jbHVkZXMoY2FyZCkpXG59XG4iLCJpbXBvcnQge0lDYXJkLCBTaWRlfSBmcm9tICcuL0NhcmQnXG5pbXBvcnQge2RyYXcsIElQaWxlLCBwbGFjZUNhcmRPblRvcCwgcGxhY2VQaWxlT25Ub3AsIHNsaWNlUGlsZSwgdHVybkNhcmR9IGZyb20gJy4vUGlsZSdcbmltcG9ydCB7bGFzdEl0ZW19IGZyb20gJy4vdXRpbCdcblxuZXhwb3J0IGludGVyZmFjZSBJVGFibGVhdSB7XG4gIHJlYWRvbmx5IHBpbGVzOiBSZWFkb25seUFycmF5PElQaWxlPlxufVxuXG5leHBvcnQgY2xhc3MgVGFibGVhdSBpbXBsZW1lbnRzIElUYWJsZWF1IHtcbiAgY29uc3RydWN0b3IocHVibGljIHJlYWRvbmx5IHBpbGVzOiBSZWFkb25seUFycmF5PElQaWxlPikge1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRDYXJkVG9QaWxlKHRhYmxlYXU6IElUYWJsZWF1LCBwaWxlOiBJUGlsZSwgY2FyZDogSUNhcmQpOiBJVGFibGVhdSB7XG4gIGNvbnN0IHBpbGVJbmRleCA9IHRhYmxlYXUucGlsZXMuaW5kZXhPZihwaWxlKVxuICBpZiAocGlsZUluZGV4ID09PSAtMSkge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhlIHNwZWNpZmllZCBwaWxlIGlzIG5vdCBwcmVzZW50IGluIHRoZSBzcGVjaWZpZWQgdGFibGVhdScpXG4gIH1cblxuICBjb25zdCBwYXRjaGVkUGlsZSA9IHBsYWNlQ2FyZE9uVG9wKHBpbGUsIGNhcmQpXG4gIGNvbnN0IHBhdGNoZWRQaWxlcyA9IHRhYmxlYXUucGlsZXMuc2xpY2UoKVxuICBwYXRjaGVkUGlsZXMuc3BsaWNlKHBpbGVJbmRleCwgMSwgcGF0Y2hlZFBpbGUpXG4gIHJldHVybiBuZXcgVGFibGVhdShwYXRjaGVkUGlsZXMpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVUb3BDYXJkRnJvbVBpbGUodGFibGVhdTogSVRhYmxlYXUsIHBpbGU6IElQaWxlKTogW0lUYWJsZWF1LCBJQ2FyZF0ge1xuICBjb25zdCBwaWxlSW5kZXggPSB0YWJsZWF1LnBpbGVzLmluZGV4T2YocGlsZSlcbiAgaWYgKHBpbGVJbmRleCA9PT3CoC0xKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgc3BlY2lmaWVkIHBpbGUgaXMgbm90IHByZXNlbnQgaW4gdGhlIHNwZWNpZmllZCB0YWJsZWF1JylcbiAgfVxuICBpZiAoIXBpbGUuY2FyZHMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgc3BlY2lmaWVkIHBpbGUgY29udGFpbnMgbm8gY2FyZHMnKVxuICB9XG5cbiAgY29uc3QgW3BpbGVSZW1haW5kZXIsIFt0b3BDYXJkXV0gPSBkcmF3KHBpbGUsIDEpXG4gIGNvbnN0IHBhdGNoZWRQaWxlcyA9IHRhYmxlYXUucGlsZXMuc2xpY2UoKVxuICBwYXRjaGVkUGlsZXMuc3BsaWNlKHBpbGVJbmRleCwgMSwgcGlsZVJlbWFpbmRlcilcbiAgcmV0dXJuIFtuZXcgVGFibGVhdShwYXRjaGVkUGlsZXMpLCB0b3BDYXJkXVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmV2ZWFsVG9wQ2FyZCh0YWJsZWF1OiBJVGFibGVhdSwgcGlsZTogSVBpbGUpOiBJVGFibGVhdSB7XG4gIGlmICghcGlsZS5jYXJkcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzcGVjaWZpZWQgcGlsZSBpcyBlbXB0eScpXG4gIH1cbiAgaWYgKGxhc3RJdGVtKHBpbGUuY2FyZHMpLnNpZGUgPT09IFNpZGUuRkFDRSkge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhlIHRvcCBjYXJkIGlzIGFscmVhZHkgZmFjZS11cCcpXG4gIH1cblxuICBjb25zdCBwaWxlSW5kZXggPSB0YWJsZWF1LnBpbGVzLmluZGV4T2YocGlsZSlcbiAgaWYgKHBpbGVJbmRleCA9PT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzcGVjaWZpZWQgcGlsZSBpcyBub3QgcHJlc2VudCBpbiB0aGUgc3BlY2lmaWVkIHRhYmxlYXUnKVxuICB9XG5cbiAgY29uc3QgcGF0Y2hlZFBpbGUgPSB0dXJuQ2FyZChwaWxlLCBsYXN0SXRlbShwaWxlLmNhcmRzKSlcbiAgY29uc3QgcGF0Y2hlZFBpbGVzID0gdGFibGVhdS5waWxlcy5zbGljZSgpXG4gIHBhdGNoZWRQaWxlcy5zcGxpY2UocGlsZUluZGV4LCAxLCBwYXRjaGVkUGlsZSlcbiAgcmV0dXJuIG5ldyBUYWJsZWF1KHBhdGNoZWRQaWxlcylcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1vdmVQaWxlUGFydCh0YWJsZWF1OiBJVGFibGVhdSwgc291cmNlUGlsZTogSVBpbGUsIHRvcENhcmRUb01vdmU6IElDYXJkLCB0YXJnZXRQaWxlOiBJUGlsZSk6IElUYWJsZWF1IHtcbiAgY29uc3Qgc291cmNlUGlsZUluZGV4ID0gdGFibGVhdS5waWxlcy5pbmRleE9mKHNvdXJjZVBpbGUpXG4gIGNvbnN0IHRhcmdldFBpbGVJbmRleCA9IHRhYmxlYXUucGlsZXMuaW5kZXhPZih0YXJnZXRQaWxlKVxuICBpZiAoc291cmNlUGlsZUluZGV4ID09PSAtMSkge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhlIHNwZWNpZmllZCBzb3VyY2UgcGlsZSBpcyBub3QgcHJlc2VudCBpbiB0aGUgc3BlY2lmaWVkIHRhYmxlYXUnKVxuICB9XG4gIGlmICh0YXJnZXRQaWxlSW5kZXggPT09IC0xKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgc3BlY2lmaWVkIHRhcmdldCBwaWxlIGlzIG5vdCBwcmVzZW50IGluIHRoZSBzcGVjaWZpZWQgdGFibGVhdScpXG4gIH1cblxuICBjb25zdCBbc291cmNlUGlsZVJlbWFpbmRlciwgbW92ZWRQYXJ0XSA9IHNsaWNlUGlsZShzb3VyY2VQaWxlLCB0b3BDYXJkVG9Nb3ZlKVxuICBjb25zdCBwYXRjaGVkUGlsZXMgPSB0YWJsZWF1LnBpbGVzLnNsaWNlKClcbiAgcGF0Y2hlZFBpbGVzLnNwbGljZShzb3VyY2VQaWxlSW5kZXgsIDEsIHNvdXJjZVBpbGVSZW1haW5kZXIpXG4gIHBhdGNoZWRQaWxlcy5zcGxpY2UodGFyZ2V0UGlsZUluZGV4LCAxLCBwbGFjZVBpbGVPblRvcCh0YXJnZXRQaWxlLCBtb3ZlZFBhcnQpKVxuICByZXR1cm4gbmV3IFRhYmxlYXUocGF0Y2hlZFBpbGVzKVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==