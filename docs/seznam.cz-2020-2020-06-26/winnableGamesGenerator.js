!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=47)}({1:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return d})),n.d(t,"i",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"f",(function(){return f})),n.d(t,"j",(function(){return p})),n.d(t,"g",(function(){return h})),function(e){e.SPADES="Color.SPADES",e.HEARTHS="Color.HEARTHS",e.DIAMONDS="Color.DIAMONDS",e.CLUBS="Color.CLUBS"}(r||(r={}));const o=[r.HEARTHS,r.DIAMONDS];var a;!function(e){e.ACE="Rank.ACE",e.TWO="Rank.TWO",e.THREE="Rank.THREE",e.FOUR="Rank.FOUR",e.FIVE="Rank.FIVE",e.SIX="Rank.SIX",e.SEVEN="Rank.SEVEN",e.EIGHT="Rank.EIGHT",e.NINE="Rank.NINE",e.TEN="Rank.TEN",e.JACK="Rank.JACK",e.QUEEN="Rank.QUEEN",e.KING="Rank.KING"}(a||(a={}));const s=[a.ACE,a.TWO,a.THREE,a.FOUR,a.FIVE,a.SIX,a.SEVEN,a.EIGHT,a.NINE,a.TEN,a.JACK,a.QUEEN,a.KING];var i;!function(e){e.FACE="Side.FACE",e.BACK="Side.BACK"}(i||(i={}));class c{constructor(e,t,n){this.color=e,this.rank=t,this.side=n}}const d=[].concat(...Object.values(r).map(e=>s.map(t=>new c(e,t,i.BACK))));function u(e,t){return 1===f(e,t)&&!function(e,t){const n=o.includes(e.color),r=o.includes(t.color);return n===r}(e,t)}function l(e,t){return-1===f(e,t)&&e.color===t.color}function f(e,t){return s.indexOf(e.rank)-s.indexOf(t.rank)}function p(e){return new c(e.color,e.rank,e.side===i.FACE?i.BACK:i.FACE)}function h(e,t){return e.color===t.color&&e.rank===t.rank}},10:function(e,t,n){"use strict";var r;function o(...e){c(r.ERROR,e)}function a(...e){c(r.WARNING,e)}function s(...e){c(r.INFO,e)}function i(...e){c(r.DEBUG,e)}function c(e,t){switch(e){case r.ERROR:console.error(`ERROR | ${self.name} | `,...t);break;case r.WARNING:console.warn(`WARNING | ${self.name} | `,...t);break;case r.INFO:console.info(`INFO | ${self.name} | `,...t);break;case r.DEBUG:console.debug(`DEBUG | ${self.name} | `,...t)}}n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return i})),function(e){e.ERROR="SEVERITY.ERROR",e.WARNING="SEVERITY.WARNING",e.INFO="SEVERITY.INFO",e.DEBUG="SEVERITY.DEBUG"}(r||(r={}))},11:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c}));var r=n(12),o=n(6),a=n(8);const s={allowNonKingToEmptyPileTransfer:!1,drawnCards:1,tableauPiles:7},i={lookAheadMoves:2,maxConsideredConfidenceLevels:3,minAutoAcceptConfidence:a.c.HIGH,stateRankingHeuristic:r.a},c={maxMoves:300,maxSimulationTime:2e4,simulationEndPredicate:o.d}},12:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l}));var r=n(1),o=n(6),a=n(7),s=n(2),i=n(8),c=n(3);function d(e,t){f(t);const{state:n,rules:r}=e;if(Object(o.c)(n))return e;const i=p(n,r,t,t.lookAheadMoves);if(!i)return e;const[d]=i;return function e(t,n,r){var o;const i=n[0].move;if(!r||i!==s.a.WASTE_TO_FOUNDATION&&i!==s.a.WASTE_TO_TABLEAU)return Object(a.c)(t,h(t.state,t.rules,n,r),n[0]);const d=Object(c.b)(t.state.waste.cards);if((null===(o=d)||void 0===o?void 0:o.rank)===n[1].rank&&d.color===n[1].color)return Object(a.c)(t,h(t.state,t.rules,n,r),n[0]);const u=t.state.stock.cards.length?{drawnCards:t.rules.drawnCards,move:s.a.DRAW_CARDS}:{move:s.a.REDEAL},l=Object(a.d)(t,u);return e(l,n,r)}(e,d,!1)}function u(e,t,n){if(f(n),Object(o.c)(e))return e;const r=p(e,t,n,n.lookAheadMoves);if(!r)return e;const[a]=r;return h(e,t,a,!1)}function l({foundation:e,tableau:{piles:t}}){return Object.values(e).map(e=>e.cards.length).concat(t.map(e=>e.cards.filter(e=>e.side===r.e.FACE).length)).reduce((e,t)=>e+t,0)}function f(e){if(!Number.isInteger(e.maxConsideredConfidenceLevels)||e.maxConsideredConfidenceLevels<0)throw new TypeError("The maxConsideredConfidenceLevels option must be a non-negative integer, "+`${e.maxConsideredConfidenceLevels} was provided`);if(!Number.isSafeInteger(e.lookAheadMoves)||e.lookAheadMoves<0)throw new TypeError(`The lookAheadMoves option must be a non-negative integer, ${e.lookAheadMoves} was provided`)}function p(e,t,n,r){const a=Object(i.d)(e,t,i.a.WITH_FULL_STOCK);if(!a.length)return null;if(n.minAutoAcceptConfidence&&i.b.indexOf(a[0][2])<=i.b.indexOf(n.minAutoAcceptConfidence)){const r=h(e,t,a[0],!0),o=n.stateRankingHeuristic(r);return[a[0],o]}let s=a[0];const c=i.b.indexOf(s[2]);let d=Number.NEGATIVE_INFINITY;for(const u of a){if(i.b.indexOf(u[2])>c+n.maxConsideredConfidenceLevels)continue;const a=h(e,t,u,!0);let l;if(r&&!Object(o.d)(a)){const e=p(a,t,n,r-1);if(!e)continue;[,l]=e}else l=n.stateRankingHeuristic(a);l>d&&(d=l,s=u)}return[s,d]}function h(e,t,n,r){var a;const i=n[0].move;if(i!==s.a.WASTE_TO_FOUNDATION&&i!==s.a.WASTE_TO_TABLEAU)return Object(o.b)(e,t,n[0]);const d=Object(c.b)(e.waste.cards);if((null===(a=d)||void 0===a?void 0:a.rank)===n[1].rank&&d.color===n[1].color)return Object(o.b)(e,t,n[0]);const u=e.stock.cards.length?{drawnCards:t.drawnCards,move:s.a.DRAW_CARDS}:{move:s.a.REDEAL},l=Object(o.b)(e,t,u);return r?h(l,t,n,r):l}},15:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return d}));var r=n(1),o=n(7),a=n(2);function s(e){if(e.rules.drawnCards>36)throw new RangeError(`The drawnCards rule must a safe positive integer no larger than 36, ${e.rules.drawnCards} was `+"provided");if(e.state.tableau.piles.length>parseInt("zz",36))throw new RangeError(`The number of tableau piles must be a safe positive integer no larger than ${parseInt("zz",36)}, `+`${e.state.tableau.piles.length} was provided`);const t=e.history.length?e.history[0][0]:e.state;var n,r;return[2,e.rules.allowNonKingToEmptyPileTransfer?"1":"0",e.rules.drawnCards.toString(36),e.state.tableau.piles.length.toString(36).padStart(2,"0"),c(t),Math.floor((e.startTime.absoluteTimestamp-1572617642e3)/1e3).toString(36),",",Math.floor(e.startTime.logicalTimestamp).toString(36),";",e.history.length.toString(36),":",(n=e.history.concat(e.future),r=e.startTime.logicalTimestamp,n.map(([,e],t)=>function(e,t){return[Math.floor(e.logicalTimestamp-t).toString(36),",;:-=+*!".charAt(l.indexOf(e.move)),function(){switch(e.move){case a.a.DRAW_CARDS:return`${e.drawnCards.toString(36)}.`;case a.a.WASTE_TO_TABLEAU:case a.a.TABLEAU_TO_FOUNDATION:case a.a.REVEAL_TABLEAU_CARD:return`${e.pileIndex.toString(36).padStart(2,"0")}`;case a.a.FOUNDATION_TO_TABLEAU:return`${e.pileIndex.toString(36)}${",;:-".charAt(f.indexOf(e.color))}`;case a.a.TABLEAU_TO_TABLEAU:return[e.sourcePileIndex,e.topMovedCardIndex,e.targetPileIndex].map(e=>e.toString(36).padStart(2,"0")).join("");case a.a.REDEAL:case a.a.WASTE_TO_FOUNDATION:return"";default:throw new TypeError(`Unknown move type: ${e.move}`)}}()].join("")}(e,t?n[t-1][1].logicalTimestamp:r)).join(""))].join("")}function i(e){if(!e.startsWith(2..toString()))throw new Error(`Invalid state or unsupported version: ${e}`);const t={allowNonKingToEmptyPileTransfer:!!parseInt(e.charAt(1),10),drawnCards:parseInt(e.charAt(2),36),tableauPiles:parseInt(e.substring(3,5),36)},n=d(e.substring(5,56)),r=e.substring(56,e.indexOf(";",56)),s=function(e){const[t,n]=e.split(",").map(e=>parseInt(e,36));return{absoluteTimestamp:1e3*t+1572617642e3,logicalTimestamp:n}}(r),i=e.substring(56+r.length+1,e.indexOf(":",56)),c=parseInt(i,36),u=e.substring(56+r.length+1+i.length+1),p=Object(o.b)(t,n),h=function(e,t,n){const r=[];let s=e,i=t,c=0;for(;c<n.length;){let e=n.substring(c);const t=parseInt(e,36),d=l[",;:-=+*!".indexOf(e.charAt(t.toString(36).length))];let u;switch(i+=t,c+=t.toString(36).length+1,e=n.substring(c),d){case a.a.DRAW_CARDS:const n=e.substring(0,e.indexOf("."));c+=n.length+1,u={drawnCards:parseInt(n,36),logicalTimestamp:i,move:d};break;case a.a.WASTE_TO_TABLEAU:case a.a.TABLEAU_TO_FOUNDATION:case a.a.REVEAL_TABLEAU_CARD:{const t=parseInt(e.substring(0,2),36);c+=2,u={logicalTimestamp:i,move:d,pileIndex:t}}break;case a.a.FOUNDATION_TO_TABLEAU:{const t=parseInt(e,36),n=f[",;:-".indexOf(e.charAt(t.toString(36).length))];c+=t.toString(36).length+1,u={color:n,logicalTimestamp:i,move:d,pileIndex:t}}break;case a.a.TABLEAU_TO_TABLEAU:const[r,o,s]=e.substring(0,6).match(/../g).map(e=>parseInt(e,36));c+=6,u={logicalTimestamp:i,move:d,sourcePileIndex:r,targetPileIndex:s,topMovedCardIndex:o};break;case a.a.REDEAL:case a.a.WASTE_TO_FOUNDATION:u={logicalTimestamp:i,move:d};break;default:throw new Error(`Failed to deserialize a history item at the index ${c} of history records due to `+`unknown move type: ${e.substr(t.toString(36).length,1)}`)}r.push([s.state,u]),s=Object(o.d)(s,u)}return r}(p,s.logicalTimestamp,u);let A={...p,future:h,startTime:s};for(let e=0;e<c;e++)A=Object(o.e)(A);return A}function c(e){return function(e){return e.slice(0,-1).map(u).join("")}([...e.stock.cards,...e.tableau.piles.map(e=>e.cards.slice().reverse()).reverse().flat()])}function d(e){const t=new Set(p);return e.split("").map(e=>{const n=h.indexOf(e),r=p[n];return t.delete(r),r}).concat([...t])}function u(e){const t=Object.keys(e).filter(e=>"side"!==e),n=p.findIndex(n=>t.every(t=>e[t]===n[t]));if(-1===n)throw new TypeError(`Received an invalid card: ${JSON.stringify(e)}`);return h[n]}const l=Object.values(a.a).sort(),f=Object.values(r.a).sort(),p=r.b,h=(()=>{const e=Array.from({length:26}).map((e,t)=>String.fromCharCode(97+t));return[...e,...e.map(e=>e.toUpperCase())]})()},19:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(7),o=n(15);class a{constructor(e,t,n,r){this.gameRules=e,this.botOptions=t,this.gameSimulationOptions=n,this.taskRunner=r,this.onProgress=null,this.nextScheduledGeneratorTask=null,this.knownWinnableDecks=new Set}runGenerator(){if(!this.nextScheduledGeneratorTask){const e=()=>{this.nextScheduledGeneratorTask=this.taskRunner(e),this.testNextRandomDeck()};this.nextScheduledGeneratorTask=this.taskRunner(e)}}stopGenerator(){this.nextScheduledGeneratorTask&&(this.nextScheduledGeneratorTask.cancel(),this.nextScheduledGeneratorTask=null)}generateWinnableGame(){const e=new a(this.gameRules,this.botOptions,this.gameSimulationOptions,this.taskRunner);return{task:new Promise(t=>{e.onProgress=n=>{n&&(this.knownWinnableDecks.add(n),e.stopGenerator(),t(n))},e.runGenerator()}),cancel(){e.stopGenerator()}}}get generatedDecks(){return this.knownWinnableDecks}testNextRandomDeck(){const[e,t]=Object(r.a)(this.gameRules,this.botOptions,this.gameSimulationOptions),n=t?Object(o.d)(e.state):null;n&&this.knownWinnableDecks.add(n),this.onProgress&&this.onProgress(n)}}},2:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.DRAW_CARDS="MoveType.DRAW_CARDS",e.REDEAL="MoveType.REDEAL",e.WASTE_TO_FOUNDATION="MoveType.WASTE_TO_FOUNDATION",e.WASTE_TO_TABLEAU="MoveType.WASTE_TO_TABLEAU",e.TABLEAU_TO_FOUNDATION="MoveType.TABLEAU_TO_FOUNDATION",e.REVEAL_TABLEAU_CARD="MoveType.REVEAL_TABLEAU_CARD",e.FOUNDATION_TO_TABLEAU="MoveType.FOUNDATION_TO_TABLEAU",e.TABLEAU_TO_TABLEAU="MoveType.TABLEAU_TO_TABLEAU"}(r||(r={}))},3:function(e,t,n){"use strict";function r(e){return e.length?o(e):null}function o(e){if(e.length)return e[e.length-1];throw new Error("The provided array is empty")}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))},4:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"g",(function(){return c})),n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return u}));var r=n(1);class o{constructor(e){this.cards=e}}function a(e,t){if(!Number.isSafeInteger(t)||t<=0)throw new TypeError(`The numberOfCards parameter must be a positive safe integer, ${t} was provided`);const n=e.cards.slice(-t).reverse();return[new o(e.cards.slice(0,Math.max(e.cards.length-t,0))),n]}function s(e,t){return new o(e.cards.concat(t))}function i(e,t){return new o(e.cards.concat(t.cards))}function c(e,t){const n=e.cards.indexOf(t);if(-1===n)throw new Error("The specified card is not present in the specified pile");const a=e.cards.slice(),s=Object(r.j)(t);return a.splice(n,1,s),new o(a)}function d(e,t){const n=e.cards.indexOf(t);if(-1===n)throw new Error("The specified card is not present in the specified pile");return[new o(e.cards.slice(0,n)),new o(e.cards.slice(n))]}function u(e){const t=e.cards.slice();for(let e=0;e<t.length-1;e++){const n=Math.floor(Math.random()*(t.length-e))+e,r=t[e];t[e]=t[n],t[n]=r}return new o(t)}},47:function(e,t,n){"use strict";n.r(t);var r=n(19),o=n(11),a=n(10);let s=null;function i(e){const t=setTimeout(e);return{cancel(){clearTimeout(t)}}}self.onmessage=e=>{if("number"==typeof e.data&&[1,3].includes(e.data))return a.c(`Creating a winnable games generator for ${e.data} drawn cards`),t=e.data,void(s=new r.a({...o.b,drawnCards:t},o.a,o.c,i));var t;s?e.data.generateNewGame?(a.c("Generating a new winnable game"),s.generateWinnableGame().task.then(e=>{a.c("A new winnable game has been generated"),self.postMessage(e)}).catch(e=>{a.b("Generator has failed",e)})):a.d("Received an invalid message",e.data):a.d("Received a request to generate a new game, but no generator has been created yet, waiting for a configuration")}},6:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l}));var r=n(1),o=n(2),a=n(4),s=n(9),i=n(3);class c{constructor(e,t,n,r){this.stock=e,this.waste=t,this.foundation=n,this.tableau=r}}function d(e,t,n){switch(n.move){case o.a.DRAW_CARDS:return function(e,t,n){if(n!==t.drawnCards)throw new Error(`The number of cards to draw (${n}) does not match the number in game rules (${t.drawnCards})`);const[o,s]=Object(a.b)(e.stock,n),i=Object(a.d)(e.waste,new a.a(s.map(e=>Object(r.j)(e))));return new c(o,i,e.foundation,e.tableau)}(e,t,n.drawnCards);case o.a.REDEAL:return function(e){if(e.stock.cards.length)throw new Error("Cannot redeal if there are cards in the stock");return new c(new a.a(e.waste.cards.map(e=>Object(r.j)(e)).reverse()),new a.a([]),e.foundation,e.tableau)}(e);case o.a.WASTE_TO_FOUNDATION:return function(e){if(!e.waste.cards.length)throw new Error("There is no card on the waste pile");const[t,[n]]=Object(a.b)(e.waste,1),r=f(e.foundation,n);return new c(e.stock,t,r,e.tableau)}(e);case o.a.WASTE_TO_TABLEAU:return function(e,t,n){if(!e.waste.cards.length)throw new Error("There is no card on the waste pile");const[o,[d]]=Object(a.b)(e.waste,1);if(!n.cards.length&&!t.allowNonKingToEmptyPileTransfer&&d.rank!==r.d.KING)throw new Error("The current game rules forbid placing any card other than a King on an empty tableau pile");if(n.cards.length&&!Object(r.i)(Object(i.a)(n.cards),d))throw new Error("The top waste card cannot be placed on top of the target tableau pile because it is not in rank sequence with the current top card of the target pile or it is of the same french deck color (red/black) as the current top card of the target pile");const u=Object(s.b)(e.tableau,n,d);return new c(e.stock,o,e.foundation,u)}(e,t,e.tableau.piles[n.pileIndex]);case o.a.TABLEAU_TO_FOUNDATION:return function(e,t){const[n,r]=Object(s.d)(e.tableau,t),o=f(e.foundation,r);return new c(e.stock,e.waste,o,n)}(e,e.tableau.piles[n.pileIndex]);case o.a.REVEAL_TABLEAU_CARD:return function(e,t){const n=Object(s.e)(e.tableau,t);return new c(e.stock,e.waste,e.foundation,n)}(e,e.tableau.piles[n.pileIndex]);case o.a.FOUNDATION_TO_TABLEAU:return function(e,t,n,o){if(!e.foundation[n].cards.length)throw new Error(`The specified foundation (${n}) contains no cards`);const[d,[u]]=Object(a.b)(e.foundation[n],1);if(!o.cards.length&&!t.allowNonKingToEmptyPileTransfer&&u.rank!==r.d.KING)throw new Error("The current game rules forbid placing any card other than a King on an empty tableau pile");if(o.cards.length&&!Object(r.i)(Object(i.a)(o.cards),u))throw new Error("The top foundation card cannot be placed on top of the target tableau pile because it is not in rank sequence with the current top card of the target pile or it is of the same french deck color (red/black) as the top card of the target pile");const l=Object(s.b)(e.tableau,o,u);return new c(e.stock,e.waste,{...e.foundation,[u.color]:d},l)}(e,t,n.color,e.tableau.piles[n.pileIndex]);case o.a.TABLEAU_TO_TABLEAU:return function(e,t,n,o,a){if(!a.cards.length&&!t.allowNonKingToEmptyPileTransfer&&o.rank!==r.d.KING)throw new Error("The current game rules forbid placing any card other than a King on an empty tableau pile");if(a.cards.length&&!Object(r.i)(Object(i.a)(a.cards),o))throw new Error("The top moved card cannot be placed on top of the target tableau pile because it is not in rank sequence with the current top card of the target pile or it is of the same french deck color (red/black) as the current top card of the target pile");const d=Object(s.c)(e.tableau,n,o,a);return new c(e.stock,e.waste,e.foundation,d)}(e,t,e.tableau.piles[n.sourcePileIndex],e.tableau.piles[n.sourcePileIndex].cards[n.topMovedCardIndex],e.tableau.piles[n.targetPileIndex]);default:throw new Error(`Unknown move type: ${n&&n.move}`)}}function u({stock:e,tableau:t,waste:n}){return!e.cards.length&&!n.cards.length&&t.piles.every(e=>!e.cards.length)}function l({stock:e,waste:t,tableau:{piles:n}}){return!e.cards.length&&!t.cards.length&&n.every(e=>e.cards.every(e=>e.side===r.e.FACE))}function f(e,t){const n=e[t.color];if(!n.cards.length&&t.rank!==r.d.ACE)throw new Error("Only the Ace can be placed at the bottom of a foundation");if(n.cards.length&&!Object(r.h)(Object(i.a)(n.cards),t)){const e=Object(i.a)(n.cards);throw new Error(`The provided card ${t.rank} cannot be placed on top of ${e.rank}, expected a `+`${r.c[r.c.indexOf(e.rank)+1]} card.`)}const o=Object(a.c)(n,t);return{...e,[t.color]:o}}},7:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"c",(function(){return A}));var r=n(12),o=n(1),a=n(6),s=n(4),i=n(9),c=n(3);function d(e,t=null){if(!Number.isSafeInteger(e.drawnCards)||e.drawnCards<=0)throw new TypeError(`The drawnCards game rule must be a positive safe integer, ${e.drawnCards} was provided`);if(!Number.isSafeInteger(e.tableauPiles)||e.tableauPiles<=0)throw new TypeError(`The tableauPiles game rule must be a positive safe integer, ${e.tableauPiles} was provided`);let n=t?new s.a(t):Object(s.e)(new s.a(o.b));for(const e of n.cards)e.side===o.e.FACE&&(n=Object(s.g)(n,e));const r=[];for(let t=0;t<e.tableauPiles;t++){const[e,o]=Object(s.b)(n,t+1),a=new s.a(o);a.cards.length?r.push(Object(s.g)(a,Object(c.a)(a.cards))):r.push(a),n=e}return{future:[],history:[],rules:{allowNonKingToEmptyPileTransfer:e.allowNonKingToEmptyPileTransfer,drawnCards:e.drawnCards},startTime:{absoluteTimestamp:Date.now(),logicalTimestamp:performance.now()},state:new a.a(n,new s.a([]),{[o.a.DIAMONDS]:new s.a([]),[o.a.HEARTHS]:new s.a([]),[o.a.CLUBS]:new s.a([]),[o.a.SPADES]:new s.a([])},new i.a(r))}}function u(e,t,{maxMoves:n,maxSimulationTime:o,simulationEndPredicate:a}){const s=d(e);let i=s.state,c=!1,u=0;const l=performance.now();for(;;){const s=Object(r.c)(i,e,t);if(u++,s===i||u>=n||a(s)){c=a(s);break}if(!(u%10)&&performance.now()-l>=o){c=a(s);break}i=s}return[s,c]}function l(e,t){return A(e,Object(a.b)(e.state,e.rules,t),t)}function f(e){return{...e,future:[],history:[],startTime:{absoluteTimestamp:Date.now(),logicalTimestamp:performance.now()},state:e.history.length?e.history[0][0]:e.state}}function p(e){if(!e.history.length)return e;const t=e.history.slice(),[n]=t.splice(-1);return{...e,future:[n,...e.future],history:t,state:n[0]}}function h(e){if(!e.future.length)return e;const[t,...n]=e.future,r=n.length?n[0][0]:l({...e,state:t[0]},t[1]).state;return{...e,future:n,history:e.history.concat([t]),state:r}}function A(e,t,n){return{...e,future:[],history:e.history.concat([[e.state,{...n,logicalTimestamp:performance.now()}]]),state:t}}},8:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return u}));var r,o,a=n(1),s=n(6),i=n(2),c=n(3);!function(e){e.CURRENT_STATE="HintGeneratorMode.CURRENT_STATE",e.WITH_FULL_STOCK="HintGeneratorMode.WITH_FULL_STOCK"}(r||(r={})),function(e){e.ABSOLUTE="MoveConfidence.ABSOLUTE",e.VERY_HIGH="MoveConfidence.VERY_HIGH",e.HIGH="MoveConfidence.HIGH",e.MEDIUM="MoveConfidence.MEDIUM",e.LOW="MoveConfidence.LOW",e.VERY_LOW="MoveConfidence.VERY_LOW",e.MINISCULE="MoveConfidence.MINISCULE"}(o||(o={}));const d=[o.ABSOLUTE,o.VERY_HIGH,o.HIGH,o.MEDIUM,o.LOW,o.VERY_LOW,o.MINISCULE];function u(e,t,n){const d=function(e,t,n){switch(n){case r.CURRENT_STATE:return e.waste.cards.length?[Object(c.a)(e.waste.cards)]:[];case r.WITH_FULL_STOCK:{if(!e.waste.cards.length&&!e.stock.cards.length)return[];const n=e.stock.cards.slice(),r=e.waste.cards.slice(),o=new Set;if(r.length){o.add(Object(c.a)(r));for(let e=n.length-t.drawnCards;e>=0;e-=t.drawnCards)o.add(Object(a.j)(n[e]))}n.push(...r.reverse().map(a.j));for(let e=n.length-t.drawnCards;e>=0;e-=t.drawnCards)o.add(Object(a.j)(n[e]));return[...o]}default:throw new TypeError(`Unknown hint generator mode: ${n}`)}}(e,t,n),{foundation:u,tableau:f}=e,p=f.piles.filter(e=>e.cards.length).map(e=>Object(c.a)(e.cards)),h={[a.a.DIAMONDS]:Object(c.b)(u[a.a.DIAMONDS].cards),[a.a.HEARTHS]:Object(c.b)(u[a.a.HEARTHS].cards),[a.a.CLUBS]:Object(c.b)(u[a.a.CLUBS].cards),[a.a.SPADES]:Object(c.b)(u[a.a.SPADES].cards)},A=[];return A.push(...function(e,t,n,r){var c,d;const{tableau:u}=e,f=[],p=n.find(e=>e.side===a.e.BACK);p&&f.push([{move:i.a.REVEAL_TABLEAU_CARD,pileIndex:l(u,p)},p,o.ABSOLUTE]);for(const e of n)e.side===a.e.FACE&&e.rank===a.d.ACE&&f.push([{move:i.a.TABLEAU_TO_FOUNDATION,pileIndex:l(u,e)},e,o.ABSOLUTE]);for(const e of t)e.rank===a.d.ACE&&f.push([{move:i.a.WASTE_TO_FOUNDATION},e,o.ABSOLUTE]);for(const e of n)e.side===a.e.FACE&&e.rank===a.d.TWO&&(null===(c=r[e.color])||void 0===c?void 0:c.rank)===a.d.ACE&&f.push([{move:i.a.TABLEAU_TO_FOUNDATION,pileIndex:l(u,e)},e,o.ABSOLUTE]);for(const e of t)e.rank===a.d.TWO&&(null===(d=r[e.color])||void 0===d?void 0:d.rank)===a.d.ACE&&f.push([{move:i.a.WASTE_TO_FOUNDATION},e,o.ABSOLUTE]);if(Object(s.d)(e))for(const e of n){const t=r[e.color];t&&Object(a.h)(t,e)&&f.push([{move:i.a.TABLEAU_TO_FOUNDATION,pileIndex:l(u,e)},e,o.ABSOLUTE])}return f}(e,d,p,h)),A.push(...function(e,t){const{tableau:n}=e,r=[],s=n.piles.slice().sort((e,t)=>t.cards.length-e.cards.length);for(const e of s){const t=e.cards.findIndex(e=>e.side===a.e.FACE),s=e.cards[t];if(t<1||[a.d.FIVE,a.d.SIX,a.d.SEVEN,a.d.EIGHT].includes(s.rank))continue;const d=n.piles.findIndex(e=>e.cards.length&&Object(c.a)(e.cards).side===a.e.FACE&&Object(a.i)(Object(c.a)(e.cards),s));d>-1&&r.push([{move:i.a.TABLEAU_TO_TABLEAU,sourcePileIndex:l(n,s),targetPileIndex:d,topMovedCardIndex:t},s,o.VERY_HIGH])}const d=n.piles.filter(e=>e.cards.length>1&&(e.cards[0].side===a.e.BACK||e.cards[0].rank!==a.d.KING)).map(e=>e.cards.find(e=>e.rank===a.d.KING&&e.side===a.e.FACE)).filter(e=>!!e).map(e=>e).concat(t.filter(e=>e.rank===a.d.KING)),u=n.piles.findIndex(e=>!e.cards.length);if(d.length&&u>-1)for(const e of d){const s=t.includes(e)?e:Object(c.a)(n.piles[l(n,e)].cards);if(n.piles.find(e=>{const t=e.cards.filter(e=>e.side===a.e.FACE);return e.cards.length>t.length&&t.length&&Object(a.i)(s,t[0])})){const a=l(n,e);r.push([t.includes(e)?{move:i.a.WASTE_TO_TABLEAU,pileIndex:u}:{move:i.a.TABLEAU_TO_TABLEAU,sourcePileIndex:a,targetPileIndex:u,topMovedCardIndex:n.piles[a].cards.indexOf(e)},e,o.VERY_HIGH])}}return r}(e,d)),A.push(...function(e,t){const n=[],{tableau:r}=e,s=r.piles.filter(e=>e.cards.length>1&&(e.cards[0].side===a.e.BACK||e.cards[0].rank!==a.d.KING)).map(e=>e.cards.find(e=>e.rank===a.d.KING&&e.side===a.e.FACE)).filter(e=>!!e).map(e=>e).concat(t.filter(e=>e.rank===a.d.KING)),d=r.piles.findIndex(e=>!e.cards.length);if(s.length&&d>-1)for(const e of s){const s=t.includes(e)?e:Object(c.a)(r.piles[l(r,e)].cards);if(r.piles.map(e=>e.cards.filter(e=>e.side===a.e.FACE)).filter(e=>e.length).map((e,t,n)=>[e,Math.max(...n.map(e=>e.length))]).filter(([e,t])=>e.length===t).map(([e])=>e).find(e=>Object(a.i)(s,e[0]))){const a=l(r,e);n.push([t.includes(e)?{move:i.a.WASTE_TO_TABLEAU,pileIndex:d}:{move:i.a.TABLEAU_TO_TABLEAU,sourcePileIndex:a,targetPileIndex:d,topMovedCardIndex:r.piles[a].cards.indexOf(e)},e,o.HIGH])}}return n}(e,d)),A.push(...function(e){const t=[],{tableau:n}=e,r=n.piles.filter(e=>e.cards.length>1).filter(e=>1===e.cards.filter(e=>e.side===a.e.FACE).length).map(e=>Object(c.a)(e.cards)).filter(e=>[a.d.FIVE,a.d.SIX,a.d.SEVEN,a.d.EIGHT].includes(e.rank));for(const e of r){const r=l(n,e),s=n.piles.filter(t=>t.cards.length&&Object(c.a)(t.cards).side===a.e.FACE&&Object(a.i)(Object(c.a)(t.cards),e));for(const a of s)t.push([{move:i.a.TABLEAU_TO_TABLEAU,sourcePileIndex:r,targetPileIndex:n.piles.indexOf(a),topMovedCardIndex:n.piles[r].cards.indexOf(e)},e,o.MEDIUM])}return t}(e)),A.push(...function(e){const t=[],{tableau:n}=e,r=n.piles.map(e=>e.cards.filter(e=>e.side===a.e.FACE)).filter(e=>e.length),s=r.filter(e=>n.piles[l(n,e[0])].cards[0].side===a.e.BACK);for(const e of s){const s=e[0];for(const e of r){const r=Object(c.a)(e);if(Object(a.i)(r,s)){const e=l(n,s);t.push([{move:i.a.TABLEAU_TO_TABLEAU,sourcePileIndex:e,targetPileIndex:l(n,r),topMovedCardIndex:n.piles[e].cards.indexOf(s)},s,o.LOW])}}}const d=n.piles.filter(e=>e.cards.length&&e.cards.every(e=>e.side===a.e.FACE));if(n.piles.filter(e=>e.cards.some(e=>e.side===a.e.FACE&&e.rank===a.d.KING)).length)for(const e of d){const s=e.cards[0];for(const e of r){const r=Object(c.a)(e);if(Object(a.i)(r,s)){const e=l(n,s);t.push([{move:i.a.TABLEAU_TO_TABLEAU,sourcePileIndex:e,targetPileIndex:l(n,r),topMovedCardIndex:n.piles[e].cards.indexOf(s)},s,o.LOW])}}}return t}(e)),A.push(...function(e,t,n,r){const s=[],{tableau:d}=e,u=Object.values(n).filter(e=>e);for(const e of u){if(!d.piles.some(t=>{const n=t.cards.find(e=>e.side===a.e.FACE);return n&&t.cards[0]!==n&&Object(a.i)(e,n)}))continue;const t=d.piles.findIndex(t=>{const n=Object(c.b)(t.cards);return n&&n.side===a.e.FACE&&Object(a.i)(n,e)});t>-1&&s.push([{color:e.color,move:i.a.FOUNDATION_TO_TABLEAU,pileIndex:t},e,o.VERY_LOW])}for(const e of u){if(!t.some(t=>Object(a.i)(e,t)))continue;const n=d.piles.findIndex(t=>{const n=Object(c.b)(t.cards);return n&&n.side===a.e.FACE&&Object(a.i)(n,e)});n>-1&&s.push([{color:e.color,move:i.a.FOUNDATION_TO_TABLEAU,pileIndex:n},e,o.VERY_LOW])}const f=d.piles.findIndex(e=>!e.cards.length);for(const e of d.piles){const t=e.cards.findIndex(e=>e.side===a.e.FACE&&e.rank===a.d.KING),n=e.cards[t];n&&t>0&&e.cards[t-1].side===a.e.BACK&&f>-1&&s.push([{move:i.a.TABLEAU_TO_TABLEAU,sourcePileIndex:l(d,n),targetPileIndex:f,topMovedCardIndex:t},n,o.VERY_LOW])}const p=d.piles.filter(e=>e.cards.length&&e.cards.every(e=>e.side===a.e.FACE)),h=d.piles.filter(e=>e.cards.some(e=>e.side===a.e.FACE));for(const e of p){const t=e.cards[0];for(const e of h){const n=Object(c.a)(e.cards);if(Object(a.i)(n,t)){const e=l(d,t);s.push([{move:i.a.TABLEAU_TO_TABLEAU,sourcePileIndex:e,targetPileIndex:l(d,n),topMovedCardIndex:d.piles[e].cards.indexOf(t)},t,o.VERY_LOW])}}}for(const e of t)for(const t of d.piles){const n=Object(c.b)(t.cards);n&&n.side===a.e.FACE&&Object(a.i)(n,e)&&s.push([{move:i.a.WASTE_TO_TABLEAU,pileIndex:l(d,n)},e,o.VERY_LOW])}for(const e of t)for(const t of u)Object(a.h)(t,e)&&s.push([{move:i.a.WASTE_TO_FOUNDATION},e,o.VERY_LOW]);if(f>-1){const e=r.allowNonKingToEmptyPileTransfer?t:t.filter(e=>e.rank===a.d.KING);for(const t of e)s.push([{move:i.a.WASTE_TO_TABLEAU,pileIndex:f},t,o.VERY_LOW])}return s}(e,d,h,t)),A.push(...function(e,t,n,r){const s=[],{tableau:d}=e;for(const e of d.piles){const t=Object(c.b)(e.cards);if(!t||t.side===a.e.BACK)continue;const n=r[t.color];if(!n||!Object(a.h)(n,t))continue;const u=e.cards.slice(-2)[0];if(e.cards.length>1&&u.side===a.e.BACK)s.push([{move:i.a.TABLEAU_TO_FOUNDATION,pileIndex:l(d,t)},t,o.MINISCULE]);else for(const e of d.piles){const n=e.cards.find(e=>e.side===a.e.FACE);n&&e.cards[0]!==n&&Object(a.i)(u,n)&&s.push([{move:i.a.TABLEAU_TO_FOUNDATION,pileIndex:l(d,t)},t,o.MINISCULE])}}for(const e of d.piles){const t=Object(c.b)(e.cards);if(!t||t.side===a.e.BACK)continue;const u=r[t.color];if(!u||!Object(a.h)(u,t))continue;for(const e of n)Object(a.h)(t,e)&&s.push([{move:i.a.TABLEAU_TO_FOUNDATION,pileIndex:l(d,t)},t,o.MINISCULE]);if(e.cards.length<=1)continue;const f=e.cards.slice(-2)[0];if(f.side===a.e.FACE)for(const e of n)Object(a.i)(f,e)&&s.push([{move:i.a.TABLEAU_TO_FOUNDATION,pileIndex:l(d,t)},t,o.MINISCULE])}const u=d.piles.findIndex(e=>!e.cards.length);if(t.allowNonKingToEmptyPileTransfer&&u>-1)for(const e of n.slice().sort((e,t)=>Object(a.f)(t,e)))s.push([{move:i.a.WASTE_TO_TABLEAU,pileIndex:u},e,o.MINISCULE]);if(t.allowNonKingToEmptyPileTransfer&&u>-1){const e=d.piles.filter(e=>e.cards.length&&e.cards[0].side===a.e.BACK&&Object(c.a)(e.cards).side===a.e.FACE).sort((e,t)=>t.cards.filter(e=>e.side===a.e.FACE).length-e.cards.filter(e=>e.side===a.e.FACE).length);for(const t of e){const e=t.cards.findIndex(e=>e.side===a.e.FACE);s.push([{move:i.a.TABLEAU_TO_TABLEAU,sourcePileIndex:l(d,t.cards[e]),targetPileIndex:u,topMovedCardIndex:e},t.cards[e],o.MINISCULE])}}for(const e of d.piles){if(!e.cards.length)continue;const t=Object(c.a)(e.cards),n=r[t.color];n&&Object(a.h)(n,t)&&s.push([{move:i.a.TABLEAU_TO_FOUNDATION,pileIndex:l(d,t)},t,o.MINISCULE])}return s}(e,t,d,h)),function(e){const t=e.filter(([e])=>e.move!==i.a.FOUNDATION_TO_TABLEAU);if(t.length&&t.length!==e.length)return t;return e}(function(e){const t=[];for(const r of e){t.some(e=>n(r[0],e[0])&&r[1]===e[1])||t.push(r)}return t;function n(e,t){const n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(n=>e[n]===t[n])}}(A))}function l(e,t){return e.piles.findIndex(e=>e.cards.includes(t))}},9:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return u}));var r=n(1),o=n(4),a=n(3);class s{constructor(e){this.piles=e}}function i(e,t,n){const r=e.piles.indexOf(t);if(-1===r)throw new Error("The specified pile is not present in the specified tableau");const a=Object(o.c)(t,n),i=e.piles.slice();return i.splice(r,1,a),new s(i)}function c(e,t){const n=e.piles.indexOf(t);if(-1===n)throw new Error("The specified pile is not present in the specified tableau");if(!t.cards.length)throw new Error("The specified pile contains no cards");const[r,[a]]=Object(o.b)(t,1),i=e.piles.slice();return i.splice(n,1,r),[new s(i),a]}function d(e,t){if(!t.cards.length)throw new Error("The specified pile is empty");if(Object(a.a)(t.cards).side===r.e.FACE)throw new Error("The top card is already face-up");const n=e.piles.indexOf(t);if(-1===n)throw new Error("The specified pile is not present in the specified tableau");const i=Object(o.g)(t,Object(a.a)(t.cards)),c=e.piles.slice();return c.splice(n,1,i),new s(c)}function u(e,t,n,r){const a=e.piles.indexOf(t),i=e.piles.indexOf(r);if(-1===a)throw new Error("The specified source pile is not present in the specified tableau");if(-1===i)throw new Error("The specified target pile is not present in the specified tableau");const[c,d]=Object(o.f)(t,n),u=e.piles.slice();return u.splice(a,1,c),u.splice(i,1,Object(o.d)(r,d)),new s(u)}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vZ2FtZS9DYXJkLnRzIiwid2VicGFjazovLy8uL3VpL3Nlem5hbS5jei0yMDIwL3dvcmtlci9sb2dnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vdWkvc2V6bmFtLmN6LTIwMjAvY29uZmlnLnRzIiwid2VicGFjazovLy8uL2dhbWUvQm90LnRzIiwid2VicGFjazovLy8uL2dhbWUvU2VyaWFsaXplci50cyIsIndlYnBhY2s6Ly8vLi9nYW1lL1dpbm5hYmxlR2FtZXNHZW5lcmF0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vZ2FtZS9Nb3ZlLnRzIiwid2VicGFjazovLy8uL2dhbWUvdXRpbC50cyIsIndlYnBhY2s6Ly8vLi9nYW1lL1BpbGUudHMiLCJ3ZWJwYWNrOi8vLy4vdWkvc2V6bmFtLmN6LTIwMjAvd29ya2VyL3dpbm5hYmxlR2FtZXNHZW5lcmF0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vZ2FtZS9EZXNrLnRzIiwid2VicGFjazovLy8uL2dhbWUvR2FtZS50cyIsIndlYnBhY2s6Ly8vLi9nYW1lL01vdmVIaW50R2VuZXJhdG9yLnRzIiwid2VicGFjazovLy8uL2dhbWUvVGFibGVhdS50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkNvbG9yIiwiUkVEX0NPTE9SUyIsIkhFQVJUSFMiLCJESUFNT05EUyIsIlJhbmsiLCJSQU5LX1NFUVVFTkNFIiwiQUNFIiwiVFdPIiwiVEhSRUUiLCJGT1VSIiwiRklWRSIsIlNJWCIsIlNFVkVOIiwiRUlHSFQiLCJOSU5FIiwiVEVOIiwiSkFDSyIsIlFVRUVOIiwiS0lORyIsIlNpZGUiLCJDYXJkIiwiY29sb3IiLCJyYW5rIiwic2lkZSIsIkRFQ0siLCJjb25jYXQiLCJ2YWx1ZXMiLCJtYXAiLCJCQUNLIiwiaXNWYWxpZFRhYmxlYXVTZXF1ZW5jZSIsImNhcmRPblBpbGUiLCJjYXJkVG9BZGQiLCJjb21wYXJlUmFuayIsImNhcmQxIiwiY2FyZDIiLCJpc0NhcmQxUmVkIiwiaW5jbHVkZXMiLCJpc0NhcmQyUmVkIiwiaXNTYW1lQ29sb3JJbkZyZW5jaERlY2siLCJpc1ZhbGlkRm91bmRhdGlvblNlcXVlbmNlIiwiY2FyZE9uRm91bmRhdGlvbiIsImluZGV4T2YiLCJ0dXJuT3ZlciIsImNhcmQiLCJGQUNFIiwiZXF1YWxzIiwiU0VWRVJJVFkiLCJlcnJvciIsIm1lc3NhZ2UiLCJsb2ciLCJFUlJPUiIsIndhcm5pbmciLCJXQVJOSU5HIiwiaW5mbyIsIklORk8iLCJkZWJ1ZyIsIkRFQlVHIiwic2V2ZXJpdHkiLCJtZXNzYWdlcyIsImNvbnNvbGUiLCJzZWxmIiwid2FybiIsIkRFRkFVTFRfTkVXX0dBTUVfT1BUSU9OUyIsImFsbG93Tm9uS2luZ1RvRW1wdHlQaWxlVHJhbnNmZXIiLCJkcmF3bkNhcmRzIiwidGFibGVhdVBpbGVzIiwiQk9UX09QVElPTlMiLCJsb29rQWhlYWRNb3ZlcyIsIm1heENvbnNpZGVyZWRDb25maWRlbmNlTGV2ZWxzIiwibWluQXV0b0FjY2VwdENvbmZpZGVuY2UiLCJISUdIIiwic3RhdGVSYW5raW5nSGV1cmlzdGljIiwiR0FNRV9TSU1VTEFUSU9OX09QVElPTlMiLCJtYXhNb3ZlcyIsIm1heFNpbXVsYXRpb25UaW1lIiwic2ltdWxhdGlvbkVuZFByZWRpY2F0ZSIsIm1ha2VNb3ZlIiwiZ2FtZSIsIm9wdGlvbnMiLCJ2YWxpZGF0ZU9wdGlvbnMiLCJzdGF0ZSIsImRlc2siLCJydWxlcyIsImJlc3RNb3ZlIiwiZmluZEJlc3RNb3ZlIiwiaGludCIsImV4ZWN1dGVNb3ZlSGludCIsImF1dG9EcmF3Q2FyZHMiLCJtb3ZlVHlwZSIsIm1vdmUiLCJXQVNURV9UT19GT1VOREFUSU9OIiwiV0FTVEVfVE9fVEFCTEVBVSIsImV4ZWN1dGVNb3ZlSGludE9uRGVzayIsInRvcFdhc3RlQ2FyZCIsIndhc3RlIiwiY2FyZHMiLCJzdG9ja0N5Y2xpbmdNb3ZlIiwic3RvY2siLCJsZW5ndGgiLCJEUkFXX0NBUkRTIiwiUkVERUFMIiwiZ2FtZUFmdGVyRHJhd2luZ0FDYXJkIiwibWFrZU1vdmVPbkRlc2siLCJkZWZhdWx0U3RhdGVSYW5raW5nSGV1cmlzdGljIiwiZm91bmRhdGlvbiIsInRhYmxlYXUiLCJwaWxlcyIsInBpbGUiLCJmaWx0ZXIiLCJyZWR1Y2UiLCJhY2N1bXVsYXRvciIsIk51bWJlciIsImlzSW50ZWdlciIsIlR5cGVFcnJvciIsImlzU2FmZUludGVnZXIiLCJoaW50cyIsIldJVEhfRlVMTF9TVE9DSyIsImRlc2tBZnRlck1vdmUiLCJiZXN0SGludCIsImhpZ2hlc3RDb25maWRlbmNlSW5kZXgiLCJiZXN0UmFuayIsIk5FR0FUSVZFX0lORklOSVRZIiwiY3VycmVudE1vdmVSYW5rIiwiZGVlcEFuYWx5c2lzT3V0Y29tZSIsImRlc2tTdGF0ZSIsImRlc2tBZnRlckRyYXdpbmdBQ2FyZCIsInNlcmlhbGl6ZSIsIlJhbmdlRXJyb3IiLCJwYXJzZUludCIsImluaXRpYWxTdGF0ZSIsImhpc3RvcnkiLCJzdGFydGluZ0xvZ2ljYWxUaW1lc3RhbXAiLCJ0b1N0cmluZyIsInBhZFN0YXJ0Iiwic2VyaWFsaXplRGVja0Zyb21EZXNrIiwiTWF0aCIsImZsb29yIiwic3RhcnRUaW1lIiwiYWJzb2x1dGVUaW1lc3RhbXAiLCJsb2dpY2FsVGltZXN0YW1wIiwiZnV0dXJlIiwiaW5kZXgiLCJwcmV2aW91c01vdmVUaW1lc3RhbXAiLCJjaGFyQXQiLCJNT1ZFX1RZUEVTIiwiVEFCTEVBVV9UT19GT1VOREFUSU9OIiwiUkVWRUFMX1RBQkxFQVVfQ0FSRCIsInBpbGVJbmRleCIsIkZPVU5EQVRJT05fVE9fVEFCTEVBVSIsIkNPTE9SUyIsIlRBQkxFQVVfVE9fVEFCTEVBVSIsInNvdXJjZVBpbGVJbmRleCIsInRvcE1vdmVkQ2FyZEluZGV4IiwidGFyZ2V0UGlsZUluZGV4IiwibnVtIiwiam9pbiIsInNlcmlhbGl6ZU1vdmVEYXRhIiwic2VyaWFsaXplTW92ZSIsImRlc2VyaWFsaXplIiwic2VyaWFsaXplZFN0YXRlIiwic3RhcnRzV2l0aCIsIkVycm9yIiwiZ2FtZVJ1bGVzIiwic3Vic3RyaW5nIiwiY2FyZERlY2siLCJkZXNlcmlhbGl6ZURlY2siLCJzZXJpYWxpemVkU3RhcnRUaW1lIiwidGltZXN0YW1wIiwic3BsaXQiLCJwYXJ0IiwiZGVzZXJpYWxpemVTdGFydFRpbWUiLCJoaXN0b3J5TGVuZ3RoIiwiZGVzZXJpYWxpemVkSGlzdG9yeUxlbmd0aCIsInNlcmlhbGl6ZWRIaXN0b3J5IiwiYmFzZUdhbWUiLCJzdGFydGluZ1N0YXRlIiwibGFzdFN0YXRlIiwibGFzdExvZ2ljYWxUaW1lc3RhbXAiLCJjdXJyZW50TW92ZVN0YXJ0SW5kZXgiLCJyZW1haW5pbmdTZXJpYWxpemVkSGlzdG9yeSIsImxvZ2ljYWxUaW1lc3RhbXBEaWZmIiwibWF0Y2giLCJzZXJpYWxpemVkSW5kZXgiLCJzdWJzdHIiLCJwdXNoIiwiZGVzZXJpYWxpemVIaXN0b3J5IiwiZGVzZXJpYWxpemVkR2FtZSIsImNhcmRzRGVjayIsInNsaWNlIiwic2VyaWFsaXplQ2FyZCIsInNlcmlhbGl6ZURlY2siLCJyZXZlcnNlIiwiZmxhdCIsInNlcmlhbGl6ZWREZWNrIiwicmVtYWluaW5nQ2FyZHMiLCJTZXQiLCJVTlNFUklBTElaRURfQ0FSRFMiLCJzZXJpYWxpemVkQ2FyZCIsImNhcmRJbmRleCIsIlNFUklBTElaRURfQ0FSRFMiLCJkZWxldGUiLCJrZXlzIiwiZmluZEluZGV4Iiwib3RoZXJDYXJkIiwiZXZlcnkiLCJKU09OIiwic3RyaW5naWZ5Iiwic29ydCIsImFscGhhYmV0IiwiQXJyYXkiLCJmcm9tIiwiXyIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImNoYXJhY3RlciIsInRvVXBwZXJDYXNlIiwiV2lubmFibGVHYW1lc0dlbmVyYXRvciIsImJvdE9wdGlvbnMiLCJnYW1lU2ltdWxhdGlvbk9wdGlvbnMiLCJ0YXNrUnVubmVyIiwib25Qcm9ncmVzcyIsIm5leHRTY2hlZHVsZWRHZW5lcmF0b3JUYXNrIiwia25vd25XaW5uYWJsZURlY2tzIiwidGhpcyIsImRhZW1vbiIsInRlc3ROZXh0UmFuZG9tRGVjayIsImNhbmNlbCIsInN1YkdlbmVyYXRvciIsInRhc2siLCJQcm9taXNlIiwicmVzb2x2ZSIsImxhc3RXaW5uYWJsZURlY2siLCJhZGQiLCJzdG9wR2VuZXJhdG9yIiwicnVuR2VuZXJhdG9yIiwiZ2VuZXJhdGVkR2FtZSIsImlzV2lubmFibGUiLCJNb3ZlVHlwZSIsImxhc3RJdGVtT3JOdWxsIiwiYXJyYXkiLCJsYXN0SXRlbSIsIlBpbGUiLCJkcmF3IiwibnVtYmVyT2ZDYXJkcyIsIm1heCIsInBsYWNlQ2FyZE9uVG9wIiwicGxhY2VQaWxlT25Ub3AiLCJib3R0b21QaWxlIiwidG9wUGlsZSIsInR1cm5DYXJkIiwiY2FyZFRvVHVybiIsInBhdGNoZWRDYXJkcyIsIm5ld0NhcmQiLCJzcGxpY2UiLCJzbGljZVBpbGUiLCJzZXBhcmF0aW5nQ2FyZCIsInNlcGFyYXRvckluZGV4Iiwic2h1ZmZsZSIsImN1cnJlbnRDYXJkSW5kZXgiLCJyYW5kb21DYXJkSW5kZXgiLCJyYW5kb20iLCJjdXJyZW50Q2FyZCIsIndpbm5hYmxlR2FtZXNHZW5lcmF0b3IiLCJyZXF1ZXN0SWQiLCJzZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0Iiwib25tZXNzYWdlIiwiZXZlbnQiLCJkYXRhIiwiZ2VuZXJhdGVOZXdHYW1lIiwiZ2VuZXJhdGVXaW5uYWJsZUdhbWUiLCJ0aGVuIiwiZ2VuZXJhdGVkRGVjayIsInBvc3RNZXNzYWdlIiwiY2F0Y2giLCJnZW5lcmF0b3JFcnJvciIsIkRlc2siLCJleGVjdXRlTW92ZSIsInN0b2NrUmVtYWluZGVyIiwibmV3V2FzdGUiLCJkcmF3Q2FyZHMiLCJyZWRlYWwiLCJjYXJkVG9QbGFjZSIsIm5ld0ZvdW5kYXRpb24iLCJhZGRDYXJkVG9Gb3VuZGF0aW9uIiwibW92ZVRvcFdhc3RlQ2FyZFRvRm91bmRhdGlvbiIsInRhYmxlYXVQaWxlIiwibmV3VGFibGVhdSIsIm1vdmVUb3BXYXN0ZUNhcmRUb1RhYmxlYXUiLCJtb3ZlVG9wVGFibGVhdVBpbGVDYXJkVG9Gb3VuZGF0aW9uIiwicmV2ZWFsVG9wVGFibGVhdVBpbGVDYXJkIiwibmV3Rm91bmRhdGlvblBpbGUiLCJtb3ZlRm91bmRhdGlvbkNhcmRUb1RhYmxlYXVQaWxlIiwic291cmNlUGlsZSIsInRvcENhcmRUb01vdmUiLCJ0YXJnZXRQaWxlIiwibW92ZVRhYmxlYXVQaWxlUGFydCIsImlzVmljdG9yeSIsImlzVmljdG9yeUd1YXJhbnRlZWQiLCJ0YXJnZXRGb3VuZGF0aW9uUGlsZSIsImZvdW5kYXRpb25Ub3BDYXJkIiwiY3JlYXRlTmV3R2FtZSIsImNhcmRzVG9EZWFsIiwiY2FyZHNGb3JQaWxlIiwiY3VycmVudFBpbGUiLCJEYXRlIiwibm93IiwicGVyZm9ybWFuY2UiLCJDTFVCUyIsIlNQQURFUyIsImNyZWF0ZUdhbWVXaXRoQm90UHJlZGljYXRlIiwibGFzdERlc2tTdGF0ZSIsInNhdGlzZmllc1ByZWRpY2F0ZSIsIm1vdmVDb3VudCIsInN0YXJ0VGltZXN0YW1wIiwibmV3RGVza1N0YXRlIiwiY3JlYXRlTmV4dEdhbWVTdGF0ZSIsInJlc2V0R2FtZSIsInVuZG9MYXN0TW92ZSIsIm5ld0hpc3RvcnkiLCJtb3ZlVG9VbmRvIiwicmVkb05leHRNb3ZlIiwibW92ZVRvUmVkbyIsIm5ld0Z1dHVyZSIsIm5ld1N0YXRlIiwibmV4dFN0YXRlIiwiYXBwbGllZE1vdmUiLCJIaW50R2VuZXJhdG9yTW9kZSIsIk1vdmVDb25maWRlbmNlIiwiTU9WRV9DT05GSURFTkNFUyIsIkFCU09MVVRFIiwiVkVSWV9ISUdIIiwiTUVESVVNIiwiTE9XIiwiVkVSWV9MT1ciLCJNSU5JU0NVTEUiLCJnZXRNb3ZlSGludHMiLCJzdG9ja1BsYXlhYmxlQ2FyZHMiLCJDVVJSRU5UX1NUQVRFIiwiZ2V0U3RvY2tQbGF5YWJsZUNhcmRzIiwidG9wVGFibGVhdUNhcmRzIiwidG9wRm91bmRhdGlvbkNhcmRzIiwibW92ZXMiLCJjYXJkVG9SZXZlYWwiLCJmaW5kIiwiZ2V0UGlsZUluZGV4IiwidG9wRm91bmRhdGlvbkNhcmQiLCJnZXRNb3Zlc1dpdGhBYnNvbHV0ZUNvbmZpZGVuY2UiLCJwaWxlc0Zyb21MYXJnZXN0VG9TbWFsbGVzdCIsInBpbGUxIiwicGlsZTIiLCJtb3N0Qm90dG9tUmV2ZWFsZWRDYXJkSW5kZXgiLCJzb3VyY2VDYXJkIiwiYXZhaWxhYmxlS2luZ3MiLCJjYXJkT3JVbmRlZmluZWQiLCJlbXB0eVBpbGVJbmRleCIsImtpbmciLCJraW5nU2VxdWVuY2VFbmQiLCJ2aXNpYmxlQ2FyZHMiLCJnZXRNb3Zlc1dpdGhWZXJ5SGlnaENvbmZpZGVuY2UiLCJwaWxlQ2FyZHMiLCJsYXJnZXN0U2VxdWVuY2VMZW5ndGgiLCJjYXJkU2VxdWVuY2UiLCJnZXRNb3Zlc1dpdGhIaWdoQ29uZmlkZW5jZSIsImNhbmRpZGF0ZUNhcmRzIiwiY2FuZGlkYXRlQ2FyZCIsImNhbmRpZGF0ZVRhcmdldHMiLCJjYW5kaWRhdGVUYXJnZXQiLCJnZXRNb3Zlc1dpdGhNZWRpdW1Db25maWRlbmNlIiwicGlsZXNPZlZpc2libGVDYXJkcyIsImNhbmRpZGF0ZVNvdXJjZVBpbGVzIiwidG9wU291cmNlQ2FyZCIsIm90aGVyUGlsZSIsImJvdHRvbVRhcmdldENhcmQiLCJwaWxlc09mT25seVZpc2libGVDYXJkcyIsInNvbWUiLCJnZXRNb3Zlc1dpdGhMb3dDb25maWRlbmNlIiwiZmlsdGVyZWRUb3BGb3VuZGF0aW9uQ2FyZHMiLCJmb3VuZGF0aW9uQ2FyZCIsImhpZ2hlc3RWaXNpYmxlQ2FyZCIsImxhc3RDYXJkIiwiY2FuZGlkYXRlUGlsZSIsImtpbmdJbmRleCIsInBpbGVzV2l0aFZpc2libGVDYXJkcyIsInN0b2NrQ2FyZCIsInVzYWJsZUNhcmRzIiwiZ2V0TW92ZXNXaXRoVmVyeUxvd0NvbmZpZGVuY2UiLCJuZXh0VG9MYXN0Q2FyZCIsInNvdXJjZVBpbGVzIiwidG9wQ2FyZEluZGV4IiwiZ2V0TW92ZXNXaXRoTWluaXNjdWxlQ29uZmlkZW5jZSIsImhpbnRzV2l0aG91dFRyYW5zZmVyc0Zyb21Gb3VuZGF0aW9uIiwiZmlsdGVyRm91bmRhdGlvblRvVGFibGVhdUhpbnRzIiwiZmlsdGVyZWRIaW50cyIsIm90aGVySGludCIsImFyZU9iamVjdHNTaGFsbG93bHlFcXVhbCIsIm9iamVjdDEiLCJvYmplY3QyIiwia2V5czEiLCJrZXlzMiIsImZpbHRlckR1cGxpY2F0ZUhpbnRzIiwiVGFibGVhdSIsImFkZENhcmRUb1BpbGUiLCJwYXRjaGVkUGlsZSIsInBhdGNoZWRQaWxlcyIsInJlbW92ZVRvcENhcmRGcm9tUGlsZSIsInBpbGVSZW1haW5kZXIiLCJ0b3BDYXJkIiwicmV2ZWFsVG9wQ2FyZCIsIm1vdmVQaWxlUGFydCIsInNvdXJjZVBpbGVSZW1haW5kZXIiLCJtb3ZlZFBhcnQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUks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UThQLEdBQzlDLElBQXlCLElBQXJCaEosRUFDRixNQUFNLElBQUlVLE1BQU0scUVBRWxCLElBQXlCLElBQXJCUixFQUNGLE1BQU0sSUFBSVEsTUFBTSxxRUFHbEIsTUFBT3lQLEVBQXFCQyxHQUFhLFlBQVV0SCxFQUFZQyxHQUN6RDhHLEVBQWUzUyxFQUFRQyxNQUFNa0YsUUFHbkMsT0FGQXdOLEVBQWF2SixPQUFPdEcsRUFBaUIsRUFBR21RLEdBQ3hDTixFQUFhdkosT0FBT3BHLEVBQWlCLEVBQUcsWUFBZThJLEVBQVlvSCxJQUM1RCxJQUFJVixFQUFRRyIsImZpbGUiOiJ3aW5uYWJsZUdhbWVzR2VuZXJhdG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDQ3KTtcbiIsIi8vIHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TdGFuZGFyZF81Mi1jYXJkX2RlY2tcblxuZXhwb3J0IGVudW0gQ29sb3Ige1xuICBTUEFERVMgPSAnQ29sb3IuU1BBREVTJywgLy8gb3IgXCJwaWtlc1wiXG4gIEhFQVJUSFMgPSAnQ29sb3IuSEVBUlRIUycsXG4gIERJQU1PTkRTID0gJ0NvbG9yLkRJQU1PTkRTJywgLy8gb3IgXCJ0aWxlc1wiXG4gIENMVUJTID0gJ0NvbG9yLkNMVUJTJywgLy8gb3IgXCJjbG92ZXJzXCJcbn1cblxuZXhwb3J0IGNvbnN0IFJFRF9DT0xPUlM6IFJlYWRvbmx5QXJyYXk8Q29sb3I+ID0gW1xuICBDb2xvci5IRUFSVEhTLFxuICBDb2xvci5ESUFNT05EUyxcbl1cblxuZXhwb3J0IGVudW0gUmFuayB7XG4gIEFDRSA9ICdSYW5rLkFDRScsXG4gIFRXTyA9ICdSYW5rLlRXTycsXG4gIFRIUkVFID0gJ1JhbmsuVEhSRUUnLFxuICBGT1VSID0gJ1JhbmsuRk9VUicsXG4gIEZJVkUgPSAnUmFuay5GSVZFJyxcbiAgU0lYID0gJ1JhbmsuU0lYJyxcbiAgU0VWRU4gPSAnUmFuay5TRVZFTicsXG4gIEVJR0hUID0gJ1JhbmsuRUlHSFQnLFxuICBOSU5FID0gJ1JhbmsuTklORScsXG4gIFRFTiA9ICdSYW5rLlRFTicsXG4gIEpBQ0sgPSAnUmFuay5KQUNLJyxcbiAgUVVFRU4gPSAnUmFuay5RVUVFTicsXG4gIEtJTkcgPSAnUmFuay5LSU5HJyxcbn1cblxuZXhwb3J0IGNvbnN0IFJBTktfU0VRVUVOQ0U6IFJlYWRvbmx5QXJyYXk8UmFuaz4gPSBbXG4gIFJhbmsuQUNFLFxuICBSYW5rLlRXTyxcbiAgUmFuay5USFJFRSxcbiAgUmFuay5GT1VSLFxuICBSYW5rLkZJVkUsXG4gIFJhbmsuU0lYLFxuICBSYW5rLlNFVkVOLFxuICBSYW5rLkVJR0hULFxuICBSYW5rLk5JTkUsXG4gIFJhbmsuVEVOLFxuICBSYW5rLkpBQ0ssXG4gIFJhbmsuUVVFRU4sXG4gIFJhbmsuS0lORyxcbl1cblxuZXhwb3J0IGVudW0gU2lkZSB7XG4gIEZBQ0UgPSAnU2lkZS5GQUNFJyxcbiAgQkFDSyA9ICdTaWRlLkJBQ0snLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElDYXJkIHtcbiAgcmVhZG9ubHkgY29sb3I6IENvbG9yXG4gIHJlYWRvbmx5IHJhbms6IFJhbmtcbiAgcmVhZG9ubHkgc2lkZTogU2lkZVxufVxuXG5leHBvcnQgY2xhc3MgQ2FyZCBpbXBsZW1lbnRzIElDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIHJlYWRvbmx5IGNvbG9yOiBDb2xvcixcbiAgICBwdWJsaWMgcmVhZG9ubHkgcmFuazogUmFuayxcbiAgICBwdWJsaWMgcmVhZG9ubHkgc2lkZTogU2lkZSxcbiAgKSB7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IERFQ0s6IFJlYWRvbmx5QXJyYXk8SUNhcmQ+ID0gKFtdIGFzIElDYXJkW10pLmNvbmNhdCguLi5PYmplY3QudmFsdWVzKENvbG9yKS5tYXAoXG4gIChjb2xvcjogQ29sb3IpID0+IFJBTktfU0VRVUVOQ0UubWFwKChyYW5rOiBSYW5rKSA9PiBuZXcgQ2FyZChjb2xvciwgcmFuaywgU2lkZS5CQUNLKSksXG4pKVxuXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZFRhYmxlYXVTZXF1ZW5jZShjYXJkT25QaWxlOiBJQ2FyZCwgY2FyZFRvQWRkOiBJQ2FyZCk6IGJvb2xlYW4ge1xuICByZXR1cm4gY29tcGFyZVJhbmsoY2FyZE9uUGlsZSwgY2FyZFRvQWRkKSA9PT0gMSAmJiAhaXNTYW1lQ29sb3JJbkZyZW5jaERlY2soY2FyZE9uUGlsZSwgY2FyZFRvQWRkKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZEZvdW5kYXRpb25TZXF1ZW5jZShjYXJkT25Gb3VuZGF0aW9uOiBJQ2FyZCwgY2FyZFRvQWRkOiBJQ2FyZCk6IGJvb2xlYW4ge1xuICByZXR1cm4gY29tcGFyZVJhbmsoY2FyZE9uRm91bmRhdGlvbiwgY2FyZFRvQWRkKSA9PT0gLTEgJiYgY2FyZE9uRm91bmRhdGlvbi5jb2xvciA9PT0gY2FyZFRvQWRkLmNvbG9yXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlUmFuayhjYXJkMTogSUNhcmQsIGNhcmQyOiBJQ2FyZCk6IG51bWJlciB7XG4gIGNvbnN0IGNhcmQxTnVtZXJpY1JhbmsgPSBSQU5LX1NFUVVFTkNFLmluZGV4T2YoY2FyZDEucmFuaylcbiAgY29uc3QgY2FyZDJOdW1lcmljUmFuayA9IFJBTktfU0VRVUVOQ0UuaW5kZXhPZihjYXJkMi5yYW5rKVxuICByZXR1cm4gY2FyZDFOdW1lcmljUmFuayAtIGNhcmQyTnVtZXJpY1Jhbmtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHR1cm5PdmVyKGNhcmQ6IElDYXJkKTogSUNhcmQge1xuICByZXR1cm4gbmV3IENhcmQoY2FyZC5jb2xvciwgY2FyZC5yYW5rLCBjYXJkLnNpZGUgPT09IFNpZGUuRkFDRSA/IFNpZGUuQkFDSyA6IFNpZGUuRkFDRSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhjYXJkMTogSUNhcmQsIGNhcmQyOiBJQ2FyZCk6IGJvb2xlYW4ge1xuICByZXR1cm4gY2FyZDEuY29sb3IgPT09IGNhcmQyLmNvbG9yICYmIGNhcmQxLnJhbmsgPT09IGNhcmQyLnJhbmtcbn1cblxuLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRnJlbmNoX3BsYXlpbmdfY2FyZHNcbmZ1bmN0aW9uIGlzU2FtZUNvbG9ySW5GcmVuY2hEZWNrKGNhcmQxOiBJQ2FyZCwgY2FyZDI6IElDYXJkKTogYm9vbGVhbiB7XG4gIGNvbnN0IGlzQ2FyZDFSZWQgPSBSRURfQ09MT1JTLmluY2x1ZGVzKGNhcmQxLmNvbG9yKVxuICBjb25zdCBpc0NhcmQyUmVkID0gUkVEX0NPTE9SUy5pbmNsdWRlcyhjYXJkMi5jb2xvcilcbiAgcmV0dXJuIGlzQ2FyZDFSZWQgPT09IGlzQ2FyZDJSZWRcbn1cbiIsImV4cG9ydCBlbnVtIFNFVkVSSVRZIHtcbiAgRVJST1IgPSAnU0VWRVJJVFkuRVJST1InLFxuICBXQVJOSU5HID0gJ1NFVkVSSVRZLldBUk5JTkcnLFxuICBJTkZPID0gJ1NFVkVSSVRZLklORk8nLFxuICBERUJVRyA9ICdTRVZFUklUWS5ERUJVRycsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlcnJvciguLi5tZXNzYWdlOiByZWFkb25seSB1bmtub3duW10pOiB2b2lkIHtcbiAgbG9nKFNFVkVSSVRZLkVSUk9SLCBtZXNzYWdlKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gd2FybmluZyguLi5tZXNzYWdlOiByZWFkb25seSB1bmtub3duW10pOiB2b2lkIHtcbiAgbG9nKFNFVkVSSVRZLldBUk5JTkcsIG1lc3NhZ2UpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbmZvKC4uLm1lc3NhZ2U6IHJlYWRvbmx5IHVua25vd25bXSk6IHZvaWQge1xuICBsb2coU0VWRVJJVFkuSU5GTywgbWVzc2FnZSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYnVnKC4uLm1lc3NhZ2U6IHJlYWRvbmx5IHVua25vd25bXSk6IHZvaWQge1xuICBsb2coU0VWRVJJVFkuREVCVUcsIG1lc3NhZ2UpXG59XG5cbmZ1bmN0aW9uIGxvZyhzZXZlcml0eTogU0VWRVJJVFksIG1lc3NhZ2VzOiByZWFkb25seSB1bmtub3duW10pOiB2b2lkIHtcbiAgc3dpdGNoIChzZXZlcml0eSkge1xuICAgIGNhc2UgU0VWRVJJVFkuRVJST1I6XG4gICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uc29sZVxuICAgICAgY29uc29sZS5lcnJvcihgRVJST1IgfCAke3NlbGYubmFtZX0gfCBgLCAuLi5tZXNzYWdlcylcbiAgICAgIGJyZWFrXG4gICAgY2FzZSBTRVZFUklUWS5XQVJOSU5HOlxuICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUud2FybihgV0FSTklORyB8ICR7c2VsZi5uYW1lfSB8IGAsIC4uLm1lc3NhZ2VzKVxuICAgICAgYnJlYWtcbiAgICBjYXNlIFNFVkVSSVRZLklORk86XG4gICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uc29sZVxuICAgICAgY29uc29sZS5pbmZvKGBJTkZPIHwgJHtzZWxmLm5hbWV9IHwgYCwgLi4ubWVzc2FnZXMpXG4gICAgICBicmVha1xuICAgIGNhc2UgU0VWRVJJVFkuREVCVUc6XG4gICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uc29sZVxuICAgICAgY29uc29sZS5kZWJ1ZyhgREVCVUcgfCAke3NlbGYubmFtZX0gfCBgLCAuLi5tZXNzYWdlcylcbiAgICAgIGJyZWFrXG4gICAgZGVmYXVsdDpcbiAgICAgIGJyZWFrIC8vIGlnbm9yZVxuICB9XG59XG4iLCJpbXBvcnQge2RlZmF1bHRTdGF0ZVJhbmtpbmdIZXVyaXN0aWMsIElCb3RPcHRpb25zfSBmcm9tICcuLi8uLi9nYW1lL0JvdCdcbmltcG9ydCB7aXNWaWN0b3J5R3VhcmFudGVlZH0gZnJvbSAnLi4vLi4vZ2FtZS9EZXNrJ1xuaW1wb3J0IHtJQm90U2ltdWxhdGlvbk9wdGlvbnMsIElOZXdHYW1lUnVsZXN9IGZyb20gJy4uLy4uL2dhbWUvR2FtZSdcbmltcG9ydCB7TW92ZUNvbmZpZGVuY2V9IGZyb20gJy4uLy4uL2dhbWUvTW92ZUhpbnRHZW5lcmF0b3InXG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX05FV19HQU1FX09QVElPTlM6IElOZXdHYW1lUnVsZXMgPSB7XG4gIGFsbG93Tm9uS2luZ1RvRW1wdHlQaWxlVHJhbnNmZXI6IGZhbHNlLFxuICBkcmF3bkNhcmRzOiAxLFxuICB0YWJsZWF1UGlsZXM6IDcsXG59XG5cbmV4cG9ydCBjb25zdCBCT1RfT1BUSU9OUzogSUJvdE9wdGlvbnMgPSB7XG4gIGxvb2tBaGVhZE1vdmVzOiAyLFxuICBtYXhDb25zaWRlcmVkQ29uZmlkZW5jZUxldmVsczogMyxcbiAgbWluQXV0b0FjY2VwdENvbmZpZGVuY2U6IE1vdmVDb25maWRlbmNlLkhJR0gsXG4gIHN0YXRlUmFua2luZ0hldXJpc3RpYzogZGVmYXVsdFN0YXRlUmFua2luZ0hldXJpc3RpYyxcbn1cblxuZXhwb3J0IGNvbnN0IEdBTUVfU0lNVUxBVElPTl9PUFRJT05TOiBJQm90U2ltdWxhdGlvbk9wdGlvbnMgPSB7XG4gIG1heE1vdmVzOiAzMDAsXG4gIG1heFNpbXVsYXRpb25UaW1lOiAyMF8wMDAsIC8vIG1pbGxpc2Vjb25kc1xuICBzaW11bGF0aW9uRW5kUHJlZGljYXRlOiBpc1ZpY3RvcnlHdWFyYW50ZWVkLFxufVxuIiwiaW1wb3J0IHtTaWRlfSBmcm9tICcuL0NhcmQnXG5pbXBvcnQge2V4ZWN1dGVNb3ZlIGFzIGV4ZWN1dGVNb3ZlT25EZXNrLCBJRGVzaywgaXNWaWN0b3J5LCBpc1ZpY3RvcnlHdWFyYW50ZWVkfSBmcm9tICcuL0Rlc2snXG5pbXBvcnQge2NyZWF0ZU5leHRHYW1lU3RhdGUsIGV4ZWN1dGVNb3ZlLCBJR2FtZSwgSUdhbWVSdWxlc30gZnJvbSAnLi9HYW1lJ1xuaW1wb3J0IHtNb3ZlLCBNb3ZlVHlwZX0gZnJvbSAnLi9Nb3ZlJ1xuaW1wb3J0IHtnZXRNb3ZlSGludHMsIEhpbnRHZW5lcmF0b3JNb2RlLCBNT1ZFX0NPTkZJREVOQ0VTLCBNb3ZlQ29uZmlkZW5jZSwgTW92ZUhpbnR9IGZyb20gJy4vTW92ZUhpbnRHZW5lcmF0b3InXG5pbXBvcnQge2xhc3RJdGVtT3JOdWxsfSBmcm9tICcuL3V0aWwnXG5cbmV4cG9ydCBpbnRlcmZhY2UgSUJvdE9wdGlvbnMge1xuICBtaW5BdXRvQWNjZXB0Q29uZmlkZW5jZTogbnVsbCB8IE1vdmVDb25maWRlbmNlXG4gIG1heENvbnNpZGVyZWRDb25maWRlbmNlTGV2ZWxzOiBudW1iZXJcbiAgbG9va0FoZWFkTW92ZXM6IG51bWJlclxuICBzdGF0ZVJhbmtpbmdIZXVyaXN0aWM6IChkZXNrOiBJRGVzaykgPT4gbnVtYmVyXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlTW92ZShnYW1lOiBJR2FtZSwgb3B0aW9uczogSUJvdE9wdGlvbnMpOiBJR2FtZSB7XG4gIHZhbGlkYXRlT3B0aW9ucyhvcHRpb25zKVxuXG4gIGNvbnN0IHtzdGF0ZTogZGVzaywgcnVsZXN9ID0gZ2FtZVxuICBpZiAoaXNWaWN0b3J5KGRlc2spKSB7XG4gICAgcmV0dXJuIGdhbWVcbiAgfVxuXG4gIGNvbnN0IGJlc3RNb3ZlID0gZmluZEJlc3RNb3ZlKGRlc2ssIHJ1bGVzLCBvcHRpb25zLCBvcHRpb25zLmxvb2tBaGVhZE1vdmVzKVxuICBpZiAoIWJlc3RNb3ZlKSB7XG4gICAgcmV0dXJuIGdhbWVcbiAgfVxuXG4gIGNvbnN0IFtoaW50XSA9IGJlc3RNb3ZlXG4gIHJldHVybiBleGVjdXRlTW92ZUhpbnQoZ2FtZSwgaGludCwgZmFsc2UpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlTW92ZU9uRGVzayhkZXNrOiBJRGVzaywgcnVsZXM6IElHYW1lUnVsZXMsIG9wdGlvbnM6IElCb3RPcHRpb25zKTogSURlc2sge1xuICB2YWxpZGF0ZU9wdGlvbnMob3B0aW9ucylcblxuICBpZiAoaXNWaWN0b3J5KGRlc2spKSB7XG4gICAgcmV0dXJuIGRlc2tcbiAgfVxuXG4gIGNvbnN0IGJlc3RNb3ZlID0gZmluZEJlc3RNb3ZlKGRlc2ssIHJ1bGVzLCBvcHRpb25zLCBvcHRpb25zLmxvb2tBaGVhZE1vdmVzKVxuICBpZiAoIWJlc3RNb3ZlKSB7XG4gICAgcmV0dXJuIGRlc2tcbiAgfVxuXG4gIGNvbnN0IFtoaW50XSA9IGJlc3RNb3ZlXG4gIHJldHVybiBleGVjdXRlTW92ZUhpbnRPbkRlc2soZGVzaywgcnVsZXMsIGhpbnQsIGZhbHNlKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdFN0YXRlUmFua2luZ0hldXJpc3RpYyh7Zm91bmRhdGlvbiwgdGFibGVhdToge3BpbGVzOiB0YWJsZWF1UGlsZXN9fTogSURlc2spIHtcbiAgLy8gVG90YWwgbnVtYmVyIG9mIGZhY2UtdXAgY2FyZHMgb24gdGhlIGRlc2ssIGV4Y2x1ZGluZyBzdG9jay93YXN0ZVxuICByZXR1cm4gT2JqZWN0LnZhbHVlcyhmb3VuZGF0aW9uKS5tYXAoKHBpbGUpID0+IHBpbGUuY2FyZHMubGVuZ3RoKS5jb25jYXQoXG4gICAgdGFibGVhdVBpbGVzLm1hcCgocGlsZSkgPT4gcGlsZS5jYXJkcy5maWx0ZXIoKGNhcmQpID0+IGNhcmQuc2lkZSA9PT0gU2lkZS5GQUNFKS5sZW5ndGgpLFxuICApLnJlZHVjZShcbiAgICAoYWNjdW11bGF0b3IsIHZhbHVlKSA9PiBhY2N1bXVsYXRvciArIHZhbHVlLFxuICAgIDAsXG4gIClcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVPcHRpb25zKG9wdGlvbnM6IElCb3RPcHRpb25zKTogdm9pZCB7XG4gIGlmICghTnVtYmVyLmlzSW50ZWdlcihvcHRpb25zLm1heENvbnNpZGVyZWRDb25maWRlbmNlTGV2ZWxzKSB8fCBvcHRpb25zLm1heENvbnNpZGVyZWRDb25maWRlbmNlTGV2ZWxzIDwgMCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAnVGhlIG1heENvbnNpZGVyZWRDb25maWRlbmNlTGV2ZWxzIG9wdGlvbiBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIGludGVnZXIsICcgK1xuICAgICAgYCR7b3B0aW9ucy5tYXhDb25zaWRlcmVkQ29uZmlkZW5jZUxldmVsc30gd2FzIHByb3ZpZGVkYCxcbiAgICApXG4gIH1cbiAgaWYgKCFOdW1iZXIuaXNTYWZlSW50ZWdlcihvcHRpb25zLmxvb2tBaGVhZE1vdmVzKSB8fCBvcHRpb25zLmxvb2tBaGVhZE1vdmVzIDwgMCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICBgVGhlIGxvb2tBaGVhZE1vdmVzIG9wdGlvbiBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIGludGVnZXIsICR7b3B0aW9ucy5sb29rQWhlYWRNb3Zlc30gd2FzIHByb3ZpZGVkYCxcbiAgICApXG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZEJlc3RNb3ZlKFxuICBkZXNrOiBJRGVzayxcbiAgcnVsZXM6IElHYW1lUnVsZXMsXG4gIG9wdGlvbnM6IElCb3RPcHRpb25zLFxuICBsb29rQWhlYWRNb3ZlczogbnVtYmVyLFxuKTogbnVsbCB8IFtNb3ZlSGludCwgbnVtYmVyXSB7XG4gIGNvbnN0IGhpbnRzID0gZ2V0TW92ZUhpbnRzKGRlc2ssIHJ1bGVzLCBIaW50R2VuZXJhdG9yTW9kZS5XSVRIX0ZVTExfU1RPQ0spXG4gIGlmICghaGludHMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGlmIChcbiAgICBvcHRpb25zLm1pbkF1dG9BY2NlcHRDb25maWRlbmNlICYmXG4gICAgTU9WRV9DT05GSURFTkNFUy5pbmRleE9mKGhpbnRzWzBdWzJdKSA8PSBNT1ZFX0NPTkZJREVOQ0VTLmluZGV4T2Yob3B0aW9ucy5taW5BdXRvQWNjZXB0Q29uZmlkZW5jZSlcbiAgKSB7XG4gICAgY29uc3QgZGVza0FmdGVyTW92ZSA9IGV4ZWN1dGVNb3ZlSGludE9uRGVzayhkZXNrLCBydWxlcywgaGludHNbMF0sIHRydWUpXG4gICAgY29uc3QgcmFuayA9IG9wdGlvbnMuc3RhdGVSYW5raW5nSGV1cmlzdGljKGRlc2tBZnRlck1vdmUpXG4gICAgcmV0dXJuIFtoaW50c1swXSwgcmFua11cbiAgfVxuXG4gIGxldCBiZXN0SGludCA9IGhpbnRzWzBdXG4gIGNvbnN0IGhpZ2hlc3RDb25maWRlbmNlSW5kZXggPSBNT1ZFX0NPTkZJREVOQ0VTLmluZGV4T2YoYmVzdEhpbnRbMl0pXG4gIGxldCBiZXN0UmFuayA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWVxuICBmb3IgKGNvbnN0IGhpbnQgb2YgaGludHMpIHtcbiAgICBpZiAoTU9WRV9DT05GSURFTkNFUy5pbmRleE9mKGhpbnRbMl0pID4gaGlnaGVzdENvbmZpZGVuY2VJbmRleCArIG9wdGlvbnMubWF4Q29uc2lkZXJlZENvbmZpZGVuY2VMZXZlbHMpIHtcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgY29uc3QgZGVza0FmdGVyTW92ZSA9IGV4ZWN1dGVNb3ZlSGludE9uRGVzayhkZXNrLCBydWxlcywgaGludCwgdHJ1ZSlcbiAgICBsZXQgY3VycmVudE1vdmVSYW5rXG4gICAgaWYgKGxvb2tBaGVhZE1vdmVzICYmICFpc1ZpY3RvcnlHdWFyYW50ZWVkKGRlc2tBZnRlck1vdmUpKSB7XG4gICAgICBjb25zdCBkZWVwQW5hbHlzaXNPdXRjb21lID0gZmluZEJlc3RNb3ZlKGRlc2tBZnRlck1vdmUsIHJ1bGVzLCBvcHRpb25zLCBsb29rQWhlYWRNb3ZlcyAtIDEpXG4gICAgICBpZiAoIWRlZXBBbmFseXNpc091dGNvbWUpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgWywgY3VycmVudE1vdmVSYW5rXSA9IGRlZXBBbmFseXNpc091dGNvbWVcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudE1vdmVSYW5rID0gb3B0aW9ucy5zdGF0ZVJhbmtpbmdIZXVyaXN0aWMoZGVza0FmdGVyTW92ZSlcbiAgICB9XG4gICAgaWYgKGN1cnJlbnRNb3ZlUmFuayA+IGJlc3RSYW5rKSB7XG4gICAgICBiZXN0UmFuayA9IGN1cnJlbnRNb3ZlUmFua1xuICAgICAgYmVzdEhpbnQgPSBoaW50XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIFtiZXN0SGludCwgYmVzdFJhbmtdXG59XG5cbmZ1bmN0aW9uIGV4ZWN1dGVNb3ZlSGludChnYW1lOiBJR2FtZSwgaGludDogTW92ZUhpbnQsIGF1dG9EcmF3Q2FyZHM6IGJvb2xlYW4pOiBJR2FtZSB7XG4gIGNvbnN0IG1vdmVUeXBlID0gaGludFswXS5tb3ZlXG4gIGlmICghYXV0b0RyYXdDYXJkcyB8fCAobW92ZVR5cGUgIT09IE1vdmVUeXBlLldBU1RFX1RPX0ZPVU5EQVRJT04gJiYgbW92ZVR5cGUgIT09IE1vdmVUeXBlLldBU1RFX1RPX1RBQkxFQVUpKSB7XG4gICAgcmV0dXJuIGNyZWF0ZU5leHRHYW1lU3RhdGUoZ2FtZSwgZXhlY3V0ZU1vdmVIaW50T25EZXNrKGdhbWUuc3RhdGUsIGdhbWUucnVsZXMsIGhpbnQsIGF1dG9EcmF3Q2FyZHMpLCBoaW50WzBdKVxuICB9XG5cbiAgY29uc3QgdG9wV2FzdGVDYXJkID0gbGFzdEl0ZW1Pck51bGwoZ2FtZS5zdGF0ZS53YXN0ZS5jYXJkcylcbiAgaWYgKHRvcFdhc3RlQ2FyZD8ucmFuayA9PT0gaGludFsxXS5yYW5rICYmIHRvcFdhc3RlQ2FyZC5jb2xvciA9PT0gaGludFsxXS5jb2xvcikge1xuICAgIHJldHVybiBjcmVhdGVOZXh0R2FtZVN0YXRlKGdhbWUsIGV4ZWN1dGVNb3ZlSGludE9uRGVzayhnYW1lLnN0YXRlLCBnYW1lLnJ1bGVzLCBoaW50LCBhdXRvRHJhd0NhcmRzKSwgaGludFswXSlcbiAgfVxuXG4gIGNvbnN0IHN0b2NrQ3ljbGluZ01vdmU6IE1vdmUgPSBnYW1lLnN0YXRlLnN0b2NrLmNhcmRzLmxlbmd0aCA/XG4gICAge1xuICAgICAgZHJhd25DYXJkczogZ2FtZS5ydWxlcy5kcmF3bkNhcmRzLFxuICAgICAgbW92ZTogTW92ZVR5cGUuRFJBV19DQVJEUyxcbiAgICB9XG4gIDpcbiAgICB7XG4gICAgICBtb3ZlOiBNb3ZlVHlwZS5SRURFQUwsXG4gICAgfVxuICBjb25zdCBnYW1lQWZ0ZXJEcmF3aW5nQUNhcmQgPSBleGVjdXRlTW92ZShnYW1lLCBzdG9ja0N5Y2xpbmdNb3ZlKVxuICByZXR1cm4gZXhlY3V0ZU1vdmVIaW50KGdhbWVBZnRlckRyYXdpbmdBQ2FyZCwgaGludCwgYXV0b0RyYXdDYXJkcylcbn1cblxuZnVuY3Rpb24gZXhlY3V0ZU1vdmVIaW50T25EZXNrKGRlc2tTdGF0ZTogSURlc2ssIHJ1bGVzOiBJR2FtZVJ1bGVzLCBoaW50OiBNb3ZlSGludCwgYXV0b0RyYXdDYXJkczogYm9vbGVhbik6IElEZXNrIHtcbiAgY29uc3QgbW92ZVR5cGUgPSBoaW50WzBdLm1vdmVcbiAgaWYgKG1vdmVUeXBlICE9PSBNb3ZlVHlwZS5XQVNURV9UT19GT1VOREFUSU9OICYmIG1vdmVUeXBlICE9PSBNb3ZlVHlwZS5XQVNURV9UT19UQUJMRUFVKSB7XG4gICAgcmV0dXJuIGV4ZWN1dGVNb3ZlT25EZXNrKGRlc2tTdGF0ZSwgcnVsZXMsIGhpbnRbMF0pXG4gIH1cblxuICBjb25zdCB0b3BXYXN0ZUNhcmQgPSBsYXN0SXRlbU9yTnVsbChkZXNrU3RhdGUud2FzdGUuY2FyZHMpXG4gIGlmICh0b3BXYXN0ZUNhcmQ/LnJhbmsgPT09IGhpbnRbMV0ucmFuayAmJiB0b3BXYXN0ZUNhcmQuY29sb3IgPT09IGhpbnRbMV0uY29sb3IpIHtcbiAgICByZXR1cm4gZXhlY3V0ZU1vdmVPbkRlc2soZGVza1N0YXRlLCBydWxlcywgaGludFswXSlcbiAgfVxuXG4gIGNvbnN0IHN0b2NrQ3ljbGluZ01vdmU6IE1vdmUgPSBkZXNrU3RhdGUuc3RvY2suY2FyZHMubGVuZ3RoID9cbiAgICB7XG4gICAgICBkcmF3bkNhcmRzOiBydWxlcy5kcmF3bkNhcmRzLFxuICAgICAgbW92ZTogTW92ZVR5cGUuRFJBV19DQVJEUyxcbiAgICB9XG4gIDpcbiAgICB7XG4gICAgICBtb3ZlOiBNb3ZlVHlwZS5SRURFQUwsXG4gICAgfVxuICBjb25zdCBkZXNrQWZ0ZXJEcmF3aW5nQUNhcmQgPSBleGVjdXRlTW92ZU9uRGVzayhkZXNrU3RhdGUsIHJ1bGVzLCBzdG9ja0N5Y2xpbmdNb3ZlKVxuICBpZiAoYXV0b0RyYXdDYXJkcykge1xuICAgIHJldHVybiBleGVjdXRlTW92ZUhpbnRPbkRlc2soZGVza0FmdGVyRHJhd2luZ0FDYXJkLCBydWxlcywgaGludCwgYXV0b0RyYXdDYXJkcylcbiAgfVxuXG4gIHJldHVybiBkZXNrQWZ0ZXJEcmF3aW5nQUNhcmRcbn1cbiIsImltcG9ydCB7Q29sb3IsIERFQ0ssIElDYXJkfSBmcm9tICcuL0NhcmQnXG5pbXBvcnQge0lEZXNrfSBmcm9tICcuL0Rlc2snXG5pbXBvcnQge1xuICBjcmVhdGVOZXdHYW1lLFxuICBleGVjdXRlTW92ZSxcbiAgSUdhbWUsXG4gIElOZXdHYW1lUnVsZXMsXG4gIElSZWNvcmRUaW1lc3RhbXAsXG4gIHJlZG9OZXh0TW92ZSxcbn0gZnJvbSAnLi9HYW1lJ1xuaW1wb3J0IHtNb3ZlLCBNb3ZlVHlwZX0gZnJvbSAnLi9Nb3ZlJ1xuXG5jb25zdCBTRVJJQUxJWkVSX1ZFUlNJT04gPSAyXG5jb25zdCBOVU1fUkFESVggPSAzNlxuY29uc3QgRVBPQ0hfU1RBUlQgPSAxNTcyNjE3NjQyMDAwXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemUoZ2FtZTogSUdhbWUpOiBzdHJpbmcge1xuICBpZiAoZ2FtZS5ydWxlcy5kcmF3bkNhcmRzID4gTlVNX1JBRElYKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXG4gICAgICBgVGhlIGRyYXduQ2FyZHMgcnVsZSBtdXN0IGEgc2FmZSBwb3NpdGl2ZSBpbnRlZ2VyIG5vIGxhcmdlciB0aGFuICR7TlVNX1JBRElYfSwgJHtnYW1lLnJ1bGVzLmRyYXduQ2FyZHN9IHdhcyBgICtcbiAgICAgICdwcm92aWRlZCcsXG4gICAgKVxuICB9XG4gIGlmIChnYW1lLnN0YXRlLnRhYmxlYXUucGlsZXMubGVuZ3RoID4gcGFyc2VJbnQoJ3p6JywgTlVNX1JBRElYKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFxuICAgICAgYFRoZSBudW1iZXIgb2YgdGFibGVhdSBwaWxlcyBtdXN0IGJlIGEgc2FmZSBwb3NpdGl2ZSBpbnRlZ2VyIG5vIGxhcmdlciB0aGFuICR7cGFyc2VJbnQoJ3p6JywgTlVNX1JBRElYKX0sIGAgK1xuICAgICAgYCR7Z2FtZS5zdGF0ZS50YWJsZWF1LnBpbGVzLmxlbmd0aH0gd2FzIHByb3ZpZGVkYCxcbiAgICApXG4gIH1cblxuICBjb25zdCBpbml0aWFsU3RhdGUgPSBnYW1lLmhpc3RvcnkubGVuZ3RoID8gZ2FtZS5oaXN0b3J5WzBdWzBdIDogZ2FtZS5zdGF0ZVxuICBjb25zdCBzZXJpYWxpemVkRGF0YSA9IFtcbiAgICBTRVJJQUxJWkVSX1ZFUlNJT04sXG4gICAgZ2FtZS5ydWxlcy5hbGxvd05vbktpbmdUb0VtcHR5UGlsZVRyYW5zZmVyID8gJzEnIDogJzAnLFxuICAgIGdhbWUucnVsZXMuZHJhd25DYXJkcy50b1N0cmluZyhOVU1fUkFESVgpLFxuICAgIGdhbWUuc3RhdGUudGFibGVhdS5waWxlcy5sZW5ndGgudG9TdHJpbmcoTlVNX1JBRElYKS5wYWRTdGFydCgyLCAnMCcpLFxuICAgIHNlcmlhbGl6ZURlY2tGcm9tRGVzayhpbml0aWFsU3RhdGUpLFxuICAgIE1hdGguZmxvb3IoKGdhbWUuc3RhcnRUaW1lLmFic29sdXRlVGltZXN0YW1wIC0gRVBPQ0hfU1RBUlQpIC8gMTAwMCkudG9TdHJpbmcoTlVNX1JBRElYKSxcbiAgICAnLCcsXG4gICAgTWF0aC5mbG9vcihnYW1lLnN0YXJ0VGltZS5sb2dpY2FsVGltZXN0YW1wKS50b1N0cmluZyhOVU1fUkFESVgpLFxuICAgICc7JyxcbiAgICBnYW1lLmhpc3RvcnkubGVuZ3RoLnRvU3RyaW5nKE5VTV9SQURJWCksXG4gICAgJzonLFxuICAgIHNlcmlhbGl6ZUhpc3RvcnkoZ2FtZS5oaXN0b3J5LmNvbmNhdChnYW1lLmZ1dHVyZSksIGdhbWUuc3RhcnRUaW1lLmxvZ2ljYWxUaW1lc3RhbXApLFxuICBdXG5cbiAgcmV0dXJuIHNlcmlhbGl6ZWREYXRhLmpvaW4oJycpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZXNlcmlhbGl6ZShzZXJpYWxpemVkU3RhdGU6IHN0cmluZyk6IElHYW1lIHtcbiAgaWYgKCFzZXJpYWxpemVkU3RhdGUuc3RhcnRzV2l0aChTRVJJQUxJWkVSX1ZFUlNJT04udG9TdHJpbmcoKSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc3RhdGUgb3IgdW5zdXBwb3J0ZWQgdmVyc2lvbjogJHtzZXJpYWxpemVkU3RhdGV9YClcbiAgfVxuXG4gIGNvbnN0IGdhbWVSdWxlczogSU5ld0dhbWVSdWxlcyA9IHtcbiAgICBhbGxvd05vbktpbmdUb0VtcHR5UGlsZVRyYW5zZmVyOiAhIXBhcnNlSW50KHNlcmlhbGl6ZWRTdGF0ZS5jaGFyQXQoMSksIDEwKSxcbiAgICBkcmF3bkNhcmRzOiBwYXJzZUludChzZXJpYWxpemVkU3RhdGUuY2hhckF0KDIpLCBOVU1fUkFESVgpLFxuICAgIHRhYmxlYXVQaWxlczogcGFyc2VJbnQoc2VyaWFsaXplZFN0YXRlLnN1YnN0cmluZygzLCA1KSwgTlVNX1JBRElYKSxcbiAgfVxuICBjb25zdCBjYXJkRGVjayA9IGRlc2VyaWFsaXplRGVjayhzZXJpYWxpemVkU3RhdGUuc3Vic3RyaW5nKDUsIDU2KSlcbiAgY29uc3Qgc2VyaWFsaXplZFN0YXJ0VGltZSA9IHNlcmlhbGl6ZWRTdGF0ZS5zdWJzdHJpbmcoNTYsIHNlcmlhbGl6ZWRTdGF0ZS5pbmRleE9mKCc7JywgNTYpKVxuICBjb25zdCBzdGFydFRpbWUgPSBkZXNlcmlhbGl6ZVN0YXJ0VGltZShzZXJpYWxpemVkU3RhcnRUaW1lKVxuICBjb25zdCBoaXN0b3J5TGVuZ3RoID0gc2VyaWFsaXplZFN0YXRlLnN1YnN0cmluZyg1NiArIHNlcmlhbGl6ZWRTdGFydFRpbWUubGVuZ3RoICsgMSwgc2VyaWFsaXplZFN0YXRlLmluZGV4T2YoJzonLCA1NikpXG4gIGNvbnN0IGRlc2VyaWFsaXplZEhpc3RvcnlMZW5ndGggPSBwYXJzZUludChoaXN0b3J5TGVuZ3RoLCBOVU1fUkFESVgpXG4gIGNvbnN0IHNlcmlhbGl6ZWRIaXN0b3J5ID0gc2VyaWFsaXplZFN0YXRlLnN1YnN0cmluZyg1NiArIHNlcmlhbGl6ZWRTdGFydFRpbWUubGVuZ3RoICsgMSArIGhpc3RvcnlMZW5ndGgubGVuZ3RoICsgMSlcbiAgY29uc3QgYmFzZUdhbWUgPSBjcmVhdGVOZXdHYW1lKGdhbWVSdWxlcywgY2FyZERlY2spXG4gIGNvbnN0IGhpc3RvcnkgPSBkZXNlcmlhbGl6ZUhpc3RvcnkoYmFzZUdhbWUsIHN0YXJ0VGltZS5sb2dpY2FsVGltZXN0YW1wLCBzZXJpYWxpemVkSGlzdG9yeSlcblxuICBsZXQgZGVzZXJpYWxpemVkR2FtZTogSUdhbWUgPSB7XG4gICAgLi4uYmFzZUdhbWUsXG4gICAgZnV0dXJlOiBoaXN0b3J5LFxuICAgIHN0YXJ0VGltZSxcbiAgfVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGRlc2VyaWFsaXplZEhpc3RvcnlMZW5ndGg7IGkrKykge1xuICAgIGRlc2VyaWFsaXplZEdhbWUgPSByZWRvTmV4dE1vdmUoZGVzZXJpYWxpemVkR2FtZSlcbiAgfVxuICByZXR1cm4gZGVzZXJpYWxpemVkR2FtZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplRGVja0Zyb21EZXNrKGRlc2s6IElEZXNrKTogc3RyaW5nIHtcbiAgY29uc3QgY2FyZHNEZWNrID0gW1xuICAgIC4uLmRlc2suc3RvY2suY2FyZHMsXG4gICAgLi4uZGVzay50YWJsZWF1LnBpbGVzLm1hcCgocGlsZSkgPT4gcGlsZS5jYXJkcy5zbGljZSgpLnJldmVyc2UoKSkucmV2ZXJzZSgpLmZsYXQoKSxcbiAgXVxuICByZXR1cm4gc2VyaWFsaXplRGVjayhjYXJkc0RlY2spXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVEZWNrKGNhcmRzRGVjazogSUNhcmRbXSk6IHN0cmluZyB7XG4gIHJldHVybiBjYXJkc0RlY2suc2xpY2UoMCwgLTEpLm1hcChzZXJpYWxpemVDYXJkKS5qb2luKCcnKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemVEZWNrKHNlcmlhbGl6ZWREZWNrOiBzdHJpbmcpOiBJQ2FyZFtdIHtcbiAgY29uc3QgcmVtYWluaW5nQ2FyZHMgPSBuZXcgU2V0KFVOU0VSSUFMSVpFRF9DQVJEUylcbiAgcmV0dXJuIHNlcmlhbGl6ZWREZWNrLnNwbGl0KCcnKS5tYXAoKHNlcmlhbGl6ZWRDYXJkKSA9PiB7XG4gICAgY29uc3QgY2FyZEluZGV4ID0gU0VSSUFMSVpFRF9DQVJEUy5pbmRleE9mKHNlcmlhbGl6ZWRDYXJkKVxuICAgIGNvbnN0IGNhcmQgPSBVTlNFUklBTElaRURfQ0FSRFNbY2FyZEluZGV4XVxuICAgIHJlbWFpbmluZ0NhcmRzLmRlbGV0ZShjYXJkKVxuICAgIHJldHVybiBjYXJkXG4gIH0pLmNvbmNhdChbLi4ucmVtYWluaW5nQ2FyZHNdKVxufVxuXG5mdW5jdGlvbiBzZXJpYWxpemVIaXN0b3J5KFxuICBoaXN0b3J5OiBSZWFkb25seUFycmF5PFt1bmtub3duLCBNb3ZlICYgSVJlY29yZFRpbWVzdGFtcF0+LFxuICBzdGFydGluZ0xvZ2ljYWxUaW1lc3RhbXA6IG51bWJlcixcbik6IHN0cmluZyB7XG4gIHJldHVybiBoaXN0b3J5Lm1hcChcbiAgICAoWywgbW92ZV0sIGluZGV4KSA9PiBzZXJpYWxpemVNb3ZlKG1vdmUsIGluZGV4ID8gaGlzdG9yeVtpbmRleCAtIDFdWzFdLmxvZ2ljYWxUaW1lc3RhbXAgOiBzdGFydGluZ0xvZ2ljYWxUaW1lc3RhbXApLFxuICApLmpvaW4oJycpXG59XG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZU1vdmUobW92ZTogTW92ZSAmIElSZWNvcmRUaW1lc3RhbXAsIHByZXZpb3VzTW92ZVRpbWVzdGFtcDogbnVtYmVyKSB7XG4gIHJldHVybiBbXG4gICAgTWF0aC5mbG9vcihtb3ZlLmxvZ2ljYWxUaW1lc3RhbXAgLSBwcmV2aW91c01vdmVUaW1lc3RhbXApLnRvU3RyaW5nKE5VTV9SQURJWCksXG4gICAgJyw7Oi09KyohJy5jaGFyQXQoTU9WRV9UWVBFUy5pbmRleE9mKG1vdmUubW92ZSkpLFxuICAgIHNlcmlhbGl6ZU1vdmVEYXRhKCksXG4gIF0uam9pbignJylcblxuICBmdW5jdGlvbiBzZXJpYWxpemVNb3ZlRGF0YSgpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAobW92ZS5tb3ZlKSB7XG4gICAgICBjYXNlIE1vdmVUeXBlLkRSQVdfQ0FSRFM6XG4gICAgICAgIHJldHVybiBgJHttb3ZlLmRyYXduQ2FyZHMudG9TdHJpbmcoTlVNX1JBRElYKX0uYFxuICAgICAgY2FzZSBNb3ZlVHlwZS5XQVNURV9UT19UQUJMRUFVOlxuICAgICAgY2FzZSBNb3ZlVHlwZS5UQUJMRUFVX1RPX0ZPVU5EQVRJT046XG4gICAgICBjYXNlIE1vdmVUeXBlLlJFVkVBTF9UQUJMRUFVX0NBUkQ6XG4gICAgICAgIHJldHVybiBgJHttb3ZlLnBpbGVJbmRleC50b1N0cmluZyhOVU1fUkFESVgpLnBhZFN0YXJ0KDIsICcwJyl9YFxuICAgICAgY2FzZSBNb3ZlVHlwZS5GT1VOREFUSU9OX1RPX1RBQkxFQVU6XG4gICAgICAgIHJldHVybiBgJHttb3ZlLnBpbGVJbmRleC50b1N0cmluZyhOVU1fUkFESVgpfSR7Jyw7Oi0nLmNoYXJBdChDT0xPUlMuaW5kZXhPZihtb3ZlLmNvbG9yKSl9YFxuICAgICAgY2FzZSBNb3ZlVHlwZS5UQUJMRUFVX1RPX1RBQkxFQVU6XG4gICAgICAgIHJldHVybiBbbW92ZS5zb3VyY2VQaWxlSW5kZXgsIG1vdmUudG9wTW92ZWRDYXJkSW5kZXgsIG1vdmUudGFyZ2V0UGlsZUluZGV4XS5tYXAoXG4gICAgICAgICAgKG51bTogbnVtYmVyKSA9PiBudW0udG9TdHJpbmcoTlVNX1JBRElYKS5wYWRTdGFydCgyLCAnMCcpLFxuICAgICAgICApLmpvaW4oJycpXG4gICAgICBjYXNlIE1vdmVUeXBlLlJFREVBTDpcbiAgICAgIGNhc2UgTW92ZVR5cGUuV0FTVEVfVE9fRk9VTkRBVElPTjpcbiAgICAgICAgcmV0dXJuICcnXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBVbmtub3duIG1vdmUgdHlwZTogJHsobW92ZSBhcyBhbnkpLm1vdmV9YClcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc2VyaWFsaXplQ2FyZChjYXJkOiBJQ2FyZCk6IHN0cmluZyB7XG4gIGNvbnN0IGtleXMgPSAoT2JqZWN0LmtleXMoY2FyZCkgYXMgQXJyYXk8a2V5b2YgSUNhcmQ+KS5maWx0ZXIoKGtleSkgPT4ga2V5ICE9PSAnc2lkZScpXG4gIGNvbnN0IGNhcmRJbmRleCA9IFVOU0VSSUFMSVpFRF9DQVJEUy5maW5kSW5kZXgoXG4gICAgKG90aGVyQ2FyZCkgPT4ga2V5cy5ldmVyeSgoa2V5KSA9PiBjYXJkW2tleV0gPT09IG90aGVyQ2FyZFtrZXldKSxcbiAgKVxuICBpZiAoY2FyZEluZGV4ID09PSAtMSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFJlY2VpdmVkIGFuIGludmFsaWQgY2FyZDogJHtKU09OLnN0cmluZ2lmeShjYXJkKX1gKVxuICB9XG5cbiAgcmV0dXJuIFNFUklBTElaRURfQ0FSRFNbY2FyZEluZGV4XVxufVxuXG5mdW5jdGlvbiBkZXNlcmlhbGl6ZUhpc3RvcnkoXG4gIHN0YXJ0aW5nU3RhdGU6IElHYW1lLFxuICBzdGFydGluZ0xvZ2ljYWxUaW1lc3RhbXA6IG51bWJlcixcbiAgc2VyaWFsaXplZEhpc3Rvcnk6IHN0cmluZyxcbik6IEFycmF5PFtJRGVzaywgTW92ZSAmIElSZWNvcmRUaW1lc3RhbXBdPiB7XG4gIGNvbnN0IGhpc3RvcnkgPSBbXSBhcyBBcnJheTxbSURlc2ssIE1vdmUgJiBJUmVjb3JkVGltZXN0YW1wXT5cbiAgbGV0IGxhc3RTdGF0ZSA9IHN0YXJ0aW5nU3RhdGVcbiAgbGV0IGxhc3RMb2dpY2FsVGltZXN0YW1wID0gc3RhcnRpbmdMb2dpY2FsVGltZXN0YW1wXG4gIGxldCBjdXJyZW50TW92ZVN0YXJ0SW5kZXggPSAwXG4gIHdoaWxlIChjdXJyZW50TW92ZVN0YXJ0SW5kZXggPCBzZXJpYWxpemVkSGlzdG9yeS5sZW5ndGgpIHtcbiAgICBsZXQgcmVtYWluaW5nU2VyaWFsaXplZEhpc3RvcnkgPSBzZXJpYWxpemVkSGlzdG9yeS5zdWJzdHJpbmcoY3VycmVudE1vdmVTdGFydEluZGV4KVxuICAgIGNvbnN0IGxvZ2ljYWxUaW1lc3RhbXBEaWZmID0gcGFyc2VJbnQocmVtYWluaW5nU2VyaWFsaXplZEhpc3RvcnksIE5VTV9SQURJWClcbiAgICBjb25zdCBtb3ZlVHlwZSA9IE1PVkVfVFlQRVNbXG4gICAgICAnLDs6LT0rKiEnLmluZGV4T2YocmVtYWluaW5nU2VyaWFsaXplZEhpc3RvcnkuY2hhckF0KGxvZ2ljYWxUaW1lc3RhbXBEaWZmLnRvU3RyaW5nKE5VTV9SQURJWCkubGVuZ3RoKSlcbiAgICBdXG5cbiAgICBsYXN0TG9naWNhbFRpbWVzdGFtcCArPSBsb2dpY2FsVGltZXN0YW1wRGlmZlxuICAgIGN1cnJlbnRNb3ZlU3RhcnRJbmRleCArPSBsb2dpY2FsVGltZXN0YW1wRGlmZi50b1N0cmluZyhOVU1fUkFESVgpLmxlbmd0aCArIDFcblxuICAgIHJlbWFpbmluZ1NlcmlhbGl6ZWRIaXN0b3J5ID0gc2VyaWFsaXplZEhpc3Rvcnkuc3Vic3RyaW5nKGN1cnJlbnRNb3ZlU3RhcnRJbmRleClcbiAgICBsZXQgbW92ZTogTW92ZSAmIElSZWNvcmRUaW1lc3RhbXBcbiAgICBzd2l0Y2ggKG1vdmVUeXBlKSB7XG4gICAgICBjYXNlIE1vdmVUeXBlLkRSQVdfQ0FSRFM6XG4gICAgICAgIGNvbnN0IGRyYXduQ2FyZHMgPSByZW1haW5pbmdTZXJpYWxpemVkSGlzdG9yeS5zdWJzdHJpbmcoMCwgcmVtYWluaW5nU2VyaWFsaXplZEhpc3RvcnkuaW5kZXhPZignLicpKVxuICAgICAgICBjdXJyZW50TW92ZVN0YXJ0SW5kZXggKz0gZHJhd25DYXJkcy5sZW5ndGggKyAxXG4gICAgICAgIG1vdmUgPSB7XG4gICAgICAgICAgZHJhd25DYXJkczogcGFyc2VJbnQoZHJhd25DYXJkcywgTlVNX1JBRElYKSxcbiAgICAgICAgICBsb2dpY2FsVGltZXN0YW1wOiBsYXN0TG9naWNhbFRpbWVzdGFtcCxcbiAgICAgICAgICBtb3ZlOiBtb3ZlVHlwZSxcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBNb3ZlVHlwZS5XQVNURV9UT19UQUJMRUFVOlxuICAgICAgY2FzZSBNb3ZlVHlwZS5UQUJMRUFVX1RPX0ZPVU5EQVRJT046XG4gICAgICBjYXNlIE1vdmVUeXBlLlJFVkVBTF9UQUJMRUFVX0NBUkQ6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBwaWxlSW5kZXggPSBwYXJzZUludChyZW1haW5pbmdTZXJpYWxpemVkSGlzdG9yeS5zdWJzdHJpbmcoMCwgMiksIE5VTV9SQURJWClcbiAgICAgICAgICBjdXJyZW50TW92ZVN0YXJ0SW5kZXggKz0gMlxuICAgICAgICAgIG1vdmUgPSB7XG4gICAgICAgICAgICBsb2dpY2FsVGltZXN0YW1wOiBsYXN0TG9naWNhbFRpbWVzdGFtcCxcbiAgICAgICAgICAgIG1vdmU6IG1vdmVUeXBlIGFzIGFueSwgLy8gVW5mb3J0dW5hdGVseSB0aGUgdHlwZSBjaGVjayBmYWlscyBpbiB0aGlzIGNhc2UsIGV2ZW4gdGhvdWdoIGV2ZXJ5dGhpbmcgY2hlY2tzIHVwLlxuICAgICAgICAgICAgcGlsZUluZGV4LFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIE1vdmVUeXBlLkZPVU5EQVRJT05fVE9fVEFCTEVBVTpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IHBpbGVJbmRleCA9IHBhcnNlSW50KHJlbWFpbmluZ1NlcmlhbGl6ZWRIaXN0b3J5LCBOVU1fUkFESVgpXG4gICAgICAgICAgY29uc3QgY29sb3IgPSBDT0xPUlNbXG4gICAgICAgICAgICAnLDs6LScuaW5kZXhPZihyZW1haW5pbmdTZXJpYWxpemVkSGlzdG9yeS5jaGFyQXQocGlsZUluZGV4LnRvU3RyaW5nKE5VTV9SQURJWCkubGVuZ3RoKSlcbiAgICAgICAgICBdXG4gICAgICAgICAgY3VycmVudE1vdmVTdGFydEluZGV4ICs9IHBpbGVJbmRleC50b1N0cmluZyhOVU1fUkFESVgpLmxlbmd0aCArIDFcbiAgICAgICAgICBtb3ZlID0ge1xuICAgICAgICAgICAgY29sb3IsXG4gICAgICAgICAgICBsb2dpY2FsVGltZXN0YW1wOiBsYXN0TG9naWNhbFRpbWVzdGFtcCxcbiAgICAgICAgICAgIG1vdmU6IG1vdmVUeXBlLFxuICAgICAgICAgICAgcGlsZUluZGV4LFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIE1vdmVUeXBlLlRBQkxFQVVfVE9fVEFCTEVBVTpcbiAgICAgICAgY29uc3QgW3NvdXJjZVBpbGVJbmRleCwgdG9wTW92ZWRDYXJkSW5kZXgsIHRhcmdldFBpbGVJbmRleF0gPSByZW1haW5pbmdTZXJpYWxpemVkSGlzdG9yeVxuICAgICAgICAgIC5zdWJzdHJpbmcoMCwgNilcbiAgICAgICAgICAubWF0Y2goLy4uL2cpIVxuICAgICAgICAgIC5tYXAoKHNlcmlhbGl6ZWRJbmRleCkgPT4gcGFyc2VJbnQoc2VyaWFsaXplZEluZGV4LCBOVU1fUkFESVgpKVxuICAgICAgICBjdXJyZW50TW92ZVN0YXJ0SW5kZXggKz0gNlxuICAgICAgICBtb3ZlID0ge1xuICAgICAgICAgIGxvZ2ljYWxUaW1lc3RhbXA6IGxhc3RMb2dpY2FsVGltZXN0YW1wLFxuICAgICAgICAgIG1vdmU6IG1vdmVUeXBlLFxuICAgICAgICAgIHNvdXJjZVBpbGVJbmRleCxcbiAgICAgICAgICB0YXJnZXRQaWxlSW5kZXgsXG4gICAgICAgICAgdG9wTW92ZWRDYXJkSW5kZXgsXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBNb3ZlVHlwZS5SRURFQUw6XG4gICAgICBjYXNlIE1vdmVUeXBlLldBU1RFX1RPX0ZPVU5EQVRJT046XG4gICAgICAgIG1vdmUgPSB7XG4gICAgICAgICAgbG9naWNhbFRpbWVzdGFtcDogbGFzdExvZ2ljYWxUaW1lc3RhbXAsXG4gICAgICAgICAgbW92ZTogbW92ZVR5cGUgYXMgYW55LCAvLyBVbmZvcnR1bmF0ZWx5IHRoZSB0eXBlIGNoZWNrIGZhaWxzIGluIHRoaXMgY2FzZSwgZXZlbiB0aG91Z2ggZXZlcnl0aGluZyBjaGVja3MgdXAuXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgRmFpbGVkIHRvIGRlc2VyaWFsaXplIGEgaGlzdG9yeSBpdGVtIGF0IHRoZSBpbmRleCAke2N1cnJlbnRNb3ZlU3RhcnRJbmRleH0gb2YgaGlzdG9yeSByZWNvcmRzIGR1ZSB0byBgICtcbiAgICAgICAgICBgdW5rbm93biBtb3ZlIHR5cGU6ICR7cmVtYWluaW5nU2VyaWFsaXplZEhpc3Rvcnkuc3Vic3RyKGxvZ2ljYWxUaW1lc3RhbXBEaWZmLnRvU3RyaW5nKE5VTV9SQURJWCkubGVuZ3RoLCAxKX1gLFxuICAgICAgICApXG4gICAgfVxuXG4gICAgaGlzdG9yeS5wdXNoKFtsYXN0U3RhdGUuc3RhdGUsIG1vdmVdKVxuICAgIGxhc3RTdGF0ZSA9IGV4ZWN1dGVNb3ZlKGxhc3RTdGF0ZSwgbW92ZSlcbiAgfVxuICByZXR1cm4gaGlzdG9yeVxufVxuXG5mdW5jdGlvbiBkZXNlcmlhbGl6ZVN0YXJ0VGltZSh0aW1lc3RhbXA6IHN0cmluZyk6IHthYnNvbHV0ZVRpbWVzdGFtcDogbnVtYmVyLCBsb2dpY2FsVGltZXN0YW1wOiBudW1iZXJ9IHtcbiAgY29uc3QgW2Fic29sdXRlVGltZXN0YW1wLCBsb2dpY2FsVGltZXN0YW1wXSA9IHRpbWVzdGFtcC5zcGxpdCgnLCcpLm1hcCgocGFydCkgPT4gcGFyc2VJbnQocGFydCwgTlVNX1JBRElYKSlcbiAgcmV0dXJuIHtcbiAgICBhYnNvbHV0ZVRpbWVzdGFtcDogYWJzb2x1dGVUaW1lc3RhbXAgKiAxMDAwICsgRVBPQ0hfU1RBUlQsXG4gICAgbG9naWNhbFRpbWVzdGFtcCxcbiAgfVxufVxuXG5jb25zdCBNT1ZFX1RZUEVTID0gT2JqZWN0LnZhbHVlcyhNb3ZlVHlwZSkuc29ydCgpXG5jb25zdCBDT0xPUlMgPSBPYmplY3QudmFsdWVzKENvbG9yKS5zb3J0KClcbmNvbnN0IFVOU0VSSUFMSVpFRF9DQVJEUyA9IERFQ0tcbmNvbnN0IFNFUklBTElaRURfQ0FSRFMgPSAoKCkgPT4ge1xuICBjb25zdCBhbHBoYWJldCA9IEFycmF5LmZyb20oe2xlbmd0aDogMjZ9KS5tYXAoKF8sIGluZGV4KSA9PiBTdHJpbmcuZnJvbUNoYXJDb2RlKDk3ICsgaW5kZXgpKVxuICByZXR1cm4gW1xuICAgIC4uLmFscGhhYmV0LFxuICAgIC4uLmFscGhhYmV0Lm1hcCgoY2hhcmFjdGVyKSA9PiBjaGFyYWN0ZXIudG9VcHBlckNhc2UoKSksXG4gIF1cbn0pKClcbiIsImltcG9ydCB7SUJvdE9wdGlvbnN9IGZyb20gJy4vQm90J1xuaW1wb3J0IHtjcmVhdGVHYW1lV2l0aEJvdFByZWRpY2F0ZSwgSUJvdFNpbXVsYXRpb25PcHRpb25zLCBJTmV3R2FtZVJ1bGVzfSBmcm9tICcuL0dhbWUnXG5pbXBvcnQge3NlcmlhbGl6ZURlY2tGcm9tRGVza30gZnJvbSAnLi9TZXJpYWxpemVyJ1xuXG5pbnRlcmZhY2UgSUNhbmNlbGxhYmxlU2NoZWR1bGVkVGFzayB7XG4gIGNhbmNlbCgpOiB2b2lkXG59XG5cbmludGVyZmFjZSBJVGFzazxSPiBleHRlbmRzIElDYW5jZWxsYWJsZVNjaGVkdWxlZFRhc2sge1xuICB0YXNrOiBQcm9taXNlPFI+XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdpbm5hYmxlR2FtZXNHZW5lcmF0b3Ige1xuICBwdWJsaWMgb25Qcm9ncmVzczogbnVsbCB8ICgobGFzdFdpbm5hYmxlRGVjazogbnVsbCB8IHN0cmluZykgPT4gdm9pZCkgPSBudWxsXG4gIHByaXZhdGUgbmV4dFNjaGVkdWxlZEdlbmVyYXRvclRhc2s6IG51bGwgfCBJQ2FuY2VsbGFibGVTY2hlZHVsZWRUYXNrID0gbnVsbFxuICBwcml2YXRlIGtub3duV2lubmFibGVEZWNrcyA9IG5ldyBTZXQ8c3RyaW5nPigpXG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBnYW1lUnVsZXM6IElOZXdHYW1lUnVsZXMsXG4gICAgcHJpdmF0ZSByZWFkb25seSBib3RPcHRpb25zOiBJQm90T3B0aW9ucyxcbiAgICBwcml2YXRlIHJlYWRvbmx5IGdhbWVTaW11bGF0aW9uT3B0aW9uczogSUJvdFNpbXVsYXRpb25PcHRpb25zLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgdGFza1J1bm5lcjogKHRhc2s6ICgpID0+IHZvaWQpID0+IElDYW5jZWxsYWJsZVNjaGVkdWxlZFRhc2ssXG4gICkge1xuICB9XG5cbiAgcHVibGljIHJ1bkdlbmVyYXRvcigpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMubmV4dFNjaGVkdWxlZEdlbmVyYXRvclRhc2spIHtcbiAgICAgIGNvbnN0IGRhZW1vbiA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy5uZXh0U2NoZWR1bGVkR2VuZXJhdG9yVGFzayA9IHRoaXMudGFza1J1bm5lcihkYWVtb24pXG4gICAgICAgIHRoaXMudGVzdE5leHRSYW5kb21EZWNrKClcbiAgICAgIH1cbiAgICAgIHRoaXMubmV4dFNjaGVkdWxlZEdlbmVyYXRvclRhc2sgPSB0aGlzLnRhc2tSdW5uZXIoZGFlbW9uKVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzdG9wR2VuZXJhdG9yKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLm5leHRTY2hlZHVsZWRHZW5lcmF0b3JUYXNrKSB7XG4gICAgICB0aGlzLm5leHRTY2hlZHVsZWRHZW5lcmF0b3JUYXNrLmNhbmNlbCgpXG4gICAgICB0aGlzLm5leHRTY2hlZHVsZWRHZW5lcmF0b3JUYXNrID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZW5lcmF0ZVdpbm5hYmxlR2FtZSgpOiBJVGFzazxzdHJpbmc+IHtcbiAgICBjb25zdCBzdWJHZW5lcmF0b3IgPSBuZXcgV2lubmFibGVHYW1lc0dlbmVyYXRvcihcbiAgICAgIHRoaXMuZ2FtZVJ1bGVzLFxuICAgICAgdGhpcy5ib3RPcHRpb25zLFxuICAgICAgdGhpcy5nYW1lU2ltdWxhdGlvbk9wdGlvbnMsXG4gICAgICB0aGlzLnRhc2tSdW5uZXIsXG4gICAgKVxuICAgIHJldHVybiB7XG4gICAgICB0YXNrOiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBzdWJHZW5lcmF0b3Iub25Qcm9ncmVzcyA9IChsYXN0V2lubmFibGVEZWNrKSA9PiB7XG4gICAgICAgICAgaWYgKGxhc3RXaW5uYWJsZURlY2spIHtcbiAgICAgICAgICAgIHRoaXMua25vd25XaW5uYWJsZURlY2tzLmFkZChsYXN0V2lubmFibGVEZWNrKVxuICAgICAgICAgICAgc3ViR2VuZXJhdG9yLnN0b3BHZW5lcmF0b3IoKVxuICAgICAgICAgICAgcmVzb2x2ZShsYXN0V2lubmFibGVEZWNrKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdWJHZW5lcmF0b3IucnVuR2VuZXJhdG9yKClcbiAgICAgIH0pLFxuICAgICAgY2FuY2VsKCkge1xuICAgICAgICBzdWJHZW5lcmF0b3Iuc3RvcEdlbmVyYXRvcigpXG4gICAgICB9LFxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXQgZ2VuZXJhdGVkRGVja3MoKTogUmVhZG9ubHlTZXQ8c3RyaW5nPiB7XG4gICAgcmV0dXJuIHRoaXMua25vd25XaW5uYWJsZURlY2tzXG4gIH1cblxuICBwcml2YXRlIHRlc3ROZXh0UmFuZG9tRGVjaygpOiB2b2lkIHtcbiAgICBjb25zdCBbZ2VuZXJhdGVkR2FtZSwgaXNXaW5uYWJsZV0gPSBjcmVhdGVHYW1lV2l0aEJvdFByZWRpY2F0ZShcbiAgICAgIHRoaXMuZ2FtZVJ1bGVzLFxuICAgICAgdGhpcy5ib3RPcHRpb25zLFxuICAgICAgdGhpcy5nYW1lU2ltdWxhdGlvbk9wdGlvbnMsXG4gICAgKVxuXG4gICAgY29uc3QgbGFzdFdpbm5hYmxlRGVjayA9IGlzV2lubmFibGUgPyBzZXJpYWxpemVEZWNrRnJvbURlc2soZ2VuZXJhdGVkR2FtZS5zdGF0ZSkgOiBudWxsXG4gICAgaWYgKGxhc3RXaW5uYWJsZURlY2spIHtcbiAgICAgIHRoaXMua25vd25XaW5uYWJsZURlY2tzLmFkZChsYXN0V2lubmFibGVEZWNrKVxuICAgIH1cbiAgICBpZiAodGhpcy5vblByb2dyZXNzKSB7XG4gICAgICB0aGlzLm9uUHJvZ3Jlc3MobGFzdFdpbm5hYmxlRGVjaylcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7Q29sb3J9IGZyb20gJy4vQ2FyZCdcblxuZXhwb3J0IGVudW0gTW92ZVR5cGUge1xuICBEUkFXX0NBUkRTID0gJ01vdmVUeXBlLkRSQVdfQ0FSRFMnLFxuICBSRURFQUwgPSAnTW92ZVR5cGUuUkVERUFMJyxcbiAgV0FTVEVfVE9fRk9VTkRBVElPTiA9ICdNb3ZlVHlwZS5XQVNURV9UT19GT1VOREFUSU9OJyxcbiAgV0FTVEVfVE9fVEFCTEVBVSA9ICdNb3ZlVHlwZS5XQVNURV9UT19UQUJMRUFVJyxcbiAgVEFCTEVBVV9UT19GT1VOREFUSU9OID0gJ01vdmVUeXBlLlRBQkxFQVVfVE9fRk9VTkRBVElPTicsXG4gIFJFVkVBTF9UQUJMRUFVX0NBUkQgPSAnTW92ZVR5cGUuUkVWRUFMX1RBQkxFQVVfQ0FSRCcsXG4gIEZPVU5EQVRJT05fVE9fVEFCTEVBVSA9ICdNb3ZlVHlwZS5GT1VOREFUSU9OX1RPX1RBQkxFQVUnLFxuICBUQUJMRUFVX1RPX1RBQkxFQVUgPSAnTW92ZVR5cGUuVEFCTEVBVV9UT19UQUJMRUFVJyxcbn1cblxuaW50ZXJmYWNlIElNb3ZlPE0gZXh0ZW5kcyBNb3ZlVHlwZT4ge1xuICBtb3ZlOiBNXG59XG5cbmludGVyZmFjZSBJRHJhd0NhcmRzTW92ZSBleHRlbmRzIElNb3ZlPE1vdmVUeXBlLkRSQVdfQ0FSRFM+IHtcbiAgZHJhd25DYXJkczogbnVtYmVyXG59XG5cbmludGVyZmFjZSBJUmVkZWFsTW92ZSBleHRlbmRzIElNb3ZlPE1vdmVUeXBlLlJFREVBTD4ge1xufVxuXG5pbnRlcmZhY2UgSVdhc3RlVG9Gb3VuZGF0aW9uTW92ZSBleHRlbmRzIElNb3ZlPE1vdmVUeXBlLldBU1RFX1RPX0ZPVU5EQVRJT04+IHtcbn1cblxuaW50ZXJmYWNlIElXYXN0ZVRvVGFibGVhdU1vdmUgZXh0ZW5kcyBJTW92ZTxNb3ZlVHlwZS5XQVNURV9UT19UQUJMRUFVPiB7XG4gIHBpbGVJbmRleDogbnVtYmVyXG59XG5cbmludGVyZmFjZSBJVGFibGVhdVRvRm91bmRhdGlvbk1vdmUgZXh0ZW5kcyBJTW92ZTxNb3ZlVHlwZS5UQUJMRUFVX1RPX0ZPVU5EQVRJT04+IHtcbiAgcGlsZUluZGV4OiBudW1iZXJcbn1cblxuaW50ZXJmYWNlIElSZXZlYWxUYWJsZWF1Q2FyZE1vdmUgZXh0ZW5kcyBJTW92ZTxNb3ZlVHlwZS5SRVZFQUxfVEFCTEVBVV9DQVJEPiB7XG4gIHBpbGVJbmRleDogbnVtYmVyXG59XG5cbmludGVyZmFjZSBJRm91bmRhdGlvblRvVGFibGVhdU1vdmUgZXh0ZW5kcyBJTW92ZTxNb3ZlVHlwZS5GT1VOREFUSU9OX1RPX1RBQkxFQVU+IHtcbiAgY29sb3I6IENvbG9yXG4gIHBpbGVJbmRleDogbnVtYmVyXG59XG5cbmludGVyZmFjZSBJVGFibGVhdVRvVGFibGVhdU1vdmUgZXh0ZW5kcyBJTW92ZTxNb3ZlVHlwZS5UQUJMRUFVX1RPX1RBQkxFQVU+IHtcbiAgc291cmNlUGlsZUluZGV4OiBudW1iZXJcbiAgdG9wTW92ZWRDYXJkSW5kZXg6IG51bWJlclxuICB0YXJnZXRQaWxlSW5kZXg6IG51bWJlclxufVxuXG5leHBvcnQgdHlwZSBNb3ZlID1cbiAgSURyYXdDYXJkc01vdmUgfFxuICBJUmVkZWFsTW92ZSB8XG4gIElXYXN0ZVRvRm91bmRhdGlvbk1vdmUgfFxuICBJV2FzdGVUb1RhYmxlYXVNb3ZlIHxcbiAgSVRhYmxlYXVUb0ZvdW5kYXRpb25Nb3ZlIHxcbiAgSVJldmVhbFRhYmxlYXVDYXJkTW92ZSB8XG4gIElGb3VuZGF0aW9uVG9UYWJsZWF1TW92ZSB8XG4gIElUYWJsZWF1VG9UYWJsZWF1TW92ZVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGxhc3RJdGVtT3JOdWxsPFQ+KGFycmF5OiByZWFkb25seSBUW10pOiBudWxsIHwgVCB7XG4gIHJldHVybiBhcnJheS5sZW5ndGggPyBsYXN0SXRlbShhcnJheSkgOiBudWxsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsYXN0SXRlbTxUPihhcnJheTogcmVhZG9ubHkgVFtdKTogVCB7XG4gIGlmIChhcnJheS5sZW5ndGgpIHtcbiAgICByZXR1cm4gYXJyYXlbYXJyYXkubGVuZ3RoIC0gMV1cbiAgfVxuXG4gIHRocm93IG5ldyBFcnJvcignVGhlIHByb3ZpZGVkIGFycmF5IGlzIGVtcHR5Jylcbn1cbiIsImltcG9ydCB7SUNhcmQsIHR1cm5PdmVyfSBmcm9tICcuL0NhcmQnXG5cbmV4cG9ydCBpbnRlcmZhY2UgSVBpbGUge1xuICAvKipcbiAgICogVGhlIGxhc3QgY2FyZCBpbiB0aGUgYXJyYXkgaXMgY29uc2lkZXJlZCB0byBiZSBvbiB0aGUgdG9wIC0gdGhlIGNhcmRzIGluIHRoaXMgcGlsZSBhcmUgYnVpbHQgZnJvbSB0aGUgYm90dG9tIHVwLlxuICAgKi9cbiAgcmVhZG9ubHkgY2FyZHM6IFJlYWRvbmx5QXJyYXk8SUNhcmQ+XG59XG5cbmV4cG9ydCBjbGFzcyBQaWxlIGltcGxlbWVudHMgSVBpbGUge1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgcmVhZG9ubHkgY2FyZHM6IFJlYWRvbmx5QXJyYXk8SUNhcmQ+KSB7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXcocGlsZTogSVBpbGUsIG51bWJlck9mQ2FyZHM6IG51bWJlcik6IFtJUGlsZSwgUmVhZG9ubHlBcnJheTxJQ2FyZD5dIHtcbiAgaWYgKCFOdW1iZXIuaXNTYWZlSW50ZWdlcihudW1iZXJPZkNhcmRzKSB8fCBudW1iZXJPZkNhcmRzIDw9IDApIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBUaGUgbnVtYmVyT2ZDYXJkcyBwYXJhbWV0ZXIgbXVzdCBiZSBhIHBvc2l0aXZlIHNhZmUgaW50ZWdlciwgJHtudW1iZXJPZkNhcmRzfSB3YXMgcHJvdmlkZWRgKVxuICB9XG4gIGNvbnN0IGRyYXduQ2FyZHMgPSBwaWxlLmNhcmRzLnNsaWNlKC1udW1iZXJPZkNhcmRzKS5yZXZlcnNlKClcbiAgY29uc3QgcGlsZVJlbWFpbmRlciA9IG5ldyBQaWxlKHBpbGUuY2FyZHMuc2xpY2UoMCwgTWF0aC5tYXgocGlsZS5jYXJkcy5sZW5ndGggLSBudW1iZXJPZkNhcmRzLCAwKSkpXG4gIHJldHVybiBbcGlsZVJlbWFpbmRlciwgZHJhd25DYXJkc11cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBsYWNlQ2FyZE9uVG9wKHBpbGU6IElQaWxlLCBjYXJkOiBJQ2FyZCk6IElQaWxlIHtcbiAgcmV0dXJuIG5ldyBQaWxlKHBpbGUuY2FyZHMuY29uY2F0KGNhcmQpKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcGxhY2VQaWxlT25Ub3AoYm90dG9tUGlsZTogSVBpbGUsIHRvcFBpbGU6IElQaWxlKTogSVBpbGUge1xuICByZXR1cm4gbmV3IFBpbGUoYm90dG9tUGlsZS5jYXJkcy5jb25jYXQodG9wUGlsZS5jYXJkcykpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0dXJuQ2FyZChwaWxlOiBJUGlsZSwgY2FyZFRvVHVybjogSUNhcmQpOiBJUGlsZSB7XG4gIGNvbnN0IGluZGV4ID0gcGlsZS5jYXJkcy5pbmRleE9mKGNhcmRUb1R1cm4pXG4gIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzcGVjaWZpZWQgY2FyZCBpcyBub3QgcHJlc2VudCBpbiB0aGUgc3BlY2lmaWVkIHBpbGUnKVxuICB9XG5cbiAgY29uc3QgcGF0Y2hlZENhcmRzID0gcGlsZS5jYXJkcy5zbGljZSgpXG4gIGNvbnN0IG5ld0NhcmQgPSB0dXJuT3ZlcihjYXJkVG9UdXJuKVxuICBwYXRjaGVkQ2FyZHMuc3BsaWNlKGluZGV4LCAxLCBuZXdDYXJkKVxuICByZXR1cm4gbmV3IFBpbGUocGF0Y2hlZENhcmRzKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2xpY2VQaWxlKHBpbGU6IElQaWxlLCBzZXBhcmF0aW5nQ2FyZDogSUNhcmQpOiBbSVBpbGUsIElQaWxlXSB7XG4gIGNvbnN0IHNlcGFyYXRvckluZGV4ID0gcGlsZS5jYXJkcy5pbmRleE9mKHNlcGFyYXRpbmdDYXJkKVxuICBpZiAoc2VwYXJhdG9ySW5kZXggPT09IC0xKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgc3BlY2lmaWVkIGNhcmQgaXMgbm90IHByZXNlbnQgaW4gdGhlIHNwZWNpZmllZCBwaWxlJylcbiAgfVxuXG4gIGNvbnN0IHRvcFBpbGUgPSBuZXcgUGlsZShwaWxlLmNhcmRzLnNsaWNlKDAsIHNlcGFyYXRvckluZGV4KSlcbiAgY29uc3QgYm90dG9tUGlsZSA9IG5ldyBQaWxlKHBpbGUuY2FyZHMuc2xpY2Uoc2VwYXJhdG9ySW5kZXgpKVxuICByZXR1cm4gW3RvcFBpbGUsIGJvdHRvbVBpbGVdXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaHVmZmxlKHBpbGU6IElQaWxlKTogSVBpbGUge1xuICAvLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9GaXNoZXIlRTIlODAlOTNZYXRlc19zaHVmZmxlI1RoZV9tb2Rlcm5fYWxnb3JpdGhtXG4gIGNvbnN0IGNhcmRzID0gcGlsZS5jYXJkcy5zbGljZSgpXG4gIGZvciAobGV0IGN1cnJlbnRDYXJkSW5kZXggPSAwOyBjdXJyZW50Q2FyZEluZGV4IDwgY2FyZHMubGVuZ3RoIC0gMTsgY3VycmVudENhcmRJbmRleCsrKSB7XG4gICAgY29uc3QgcmFuZG9tQ2FyZEluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICrCoChjYXJkcy5sZW5ndGggLSBjdXJyZW50Q2FyZEluZGV4KSkgKyBjdXJyZW50Q2FyZEluZGV4XG4gICAgY29uc3QgY3VycmVudENhcmQgPSBjYXJkc1tjdXJyZW50Q2FyZEluZGV4XVxuICAgIGNhcmRzW2N1cnJlbnRDYXJkSW5kZXhdID0gY2FyZHNbcmFuZG9tQ2FyZEluZGV4XVxuICAgIGNhcmRzW3JhbmRvbUNhcmRJbmRleF0gPSBjdXJyZW50Q2FyZFxuICB9XG4gIHJldHVybiBuZXcgUGlsZShjYXJkcylcbn1cbiIsImltcG9ydCBXaW5uYWJsZUdhbWVzR2VuZXJhdG9yIGZyb20gJy4uLy4uLy4uL2dhbWUvV2lubmFibGVHYW1lc0dlbmVyYXRvcidcbmltcG9ydCB7Qk9UX09QVElPTlMsIERFRkFVTFRfTkVXX0dBTUVfT1BUSU9OUywgR0FNRV9TSU1VTEFUSU9OX09QVElPTlN9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCAqIGFzIGxvZ2dlciBmcm9tICcuL2xvZ2dlcidcblxubGV0IHdpbm5hYmxlR2FtZXNHZW5lcmF0b3I6IG51bGwgfCBXaW5uYWJsZUdhbWVzR2VuZXJhdG9yID0gbnVsbFxuXG5zZWxmLm9ubWVzc2FnZSA9IChldmVudDogTWVzc2FnZUV2ZW50KTogdm9pZCA9PiB7XG4gIGlmICh0eXBlb2YgZXZlbnQuZGF0YSA9PT0gJ251bWJlcicgJiYgWzEsIDNdLmluY2x1ZGVzKGV2ZW50LmRhdGEpKSB7XG4gICAgbG9nZ2VyLmluZm8oYENyZWF0aW5nIGEgd2lubmFibGUgZ2FtZXMgZ2VuZXJhdG9yIGZvciAke2V2ZW50LmRhdGF9IGRyYXduIGNhcmRzYClcbiAgICB3aW5uYWJsZUdhbWVzR2VuZXJhdG9yID0gY3JlYXRlV2lubmFibGVHYW1lc0dlbmVyYXRvcihldmVudC5kYXRhIGFzIDEgfCAzKVxuICAgIHJldHVyblxuICB9XG5cbiAgaWYgKCF3aW5uYWJsZUdhbWVzR2VuZXJhdG9yKSB7XG4gICAgbG9nZ2VyLndhcm5pbmcoXG4gICAgICAnUmVjZWl2ZWQgYSByZXF1ZXN0IHRvIGdlbmVyYXRlIGEgbmV3IGdhbWUsIGJ1dCBubyBnZW5lcmF0b3IgaGFzIGJlZW4gY3JlYXRlZCB5ZXQsIHdhaXRpbmcgZm9yIGEgY29uZmlndXJhdGlvbicsXG4gICAgKVxuICAgIHJldHVyblxuICB9XG5cbiAgaWYgKCFldmVudC5kYXRhLmdlbmVyYXRlTmV3R2FtZSkge1xuICAgIGxvZ2dlci53YXJuaW5nKFxuICAgICAgJ1JlY2VpdmVkIGFuIGludmFsaWQgbWVzc2FnZScsIGV2ZW50LmRhdGEsXG4gICAgKVxuICAgIHJldHVyblxuICB9XG5cbiAgbG9nZ2VyLmluZm8oJ0dlbmVyYXRpbmcgYSBuZXcgd2lubmFibGUgZ2FtZScpXG4gIHdpbm5hYmxlR2FtZXNHZW5lcmF0b3IuZ2VuZXJhdGVXaW5uYWJsZUdhbWUoKS50YXNrLnRoZW4oKGdlbmVyYXRlZERlY2spID0+IHtcbiAgICBsb2dnZXIuaW5mbygnQSBuZXcgd2lubmFibGUgZ2FtZSBoYXMgYmVlbiBnZW5lcmF0ZWQnKVxuICAgIHNlbGYucG9zdE1lc3NhZ2UoZ2VuZXJhdGVkRGVjaylcbiAgfSkuY2F0Y2goKGdlbmVyYXRvckVycm9yKSA9PiB7XG4gICAgbG9nZ2VyLmVycm9yKCdHZW5lcmF0b3IgaGFzIGZhaWxlZCcsIGdlbmVyYXRvckVycm9yKVxuICB9KVxufVxuXG5mdW5jdGlvbiBjcmVhdGVXaW5uYWJsZUdhbWVzR2VuZXJhdG9yKGRyYXduQ2FyZHM6IDEgfCAzKTogV2lubmFibGVHYW1lc0dlbmVyYXRvciB7XG4gIHJldHVybiBuZXcgV2lubmFibGVHYW1lc0dlbmVyYXRvcihcbiAgICB7XG4gICAgICAuLi5ERUZBVUxUX05FV19HQU1FX09QVElPTlMsXG4gICAgICBkcmF3bkNhcmRzLFxuICAgIH0sXG4gICAgQk9UX09QVElPTlMsXG4gICAgR0FNRV9TSU1VTEFUSU9OX09QVElPTlMsXG4gICAgdGFza1J1bm5lcixcbiAgKVxufVxuXG5mdW5jdGlvbiB0YXNrUnVubmVyKHRhc2s6ICgpID0+IHZvaWQpIHtcbiAgY29uc3QgcmVxdWVzdElkID0gc2V0VGltZW91dCh0YXNrKVxuICByZXR1cm4ge1xuICAgIGNhbmNlbCgpIHtcbiAgICAgIGNsZWFyVGltZW91dChyZXF1ZXN0SWQpXG4gICAgfSxcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgQ29sb3IsXG4gIElDYXJkLFxuICBpc1ZhbGlkRm91bmRhdGlvblNlcXVlbmNlLFxuICBpc1ZhbGlkVGFibGVhdVNlcXVlbmNlLFxuICBSYW5rLFxuICBSQU5LX1NFUVVFTkNFLFxuICBTaWRlLFxuICB0dXJuT3Zlcixcbn0gZnJvbSAnLi9DYXJkJ1xuaW1wb3J0IHtJR2FtZVJ1bGVzfSBmcm9tICcuL0dhbWUnXG5pbXBvcnQge01vdmUsIE1vdmVUeXBlfSBmcm9tICcuL01vdmUnXG5pbXBvcnQge2RyYXcsIElQaWxlLCBQaWxlLCBwbGFjZUNhcmRPblRvcCwgcGxhY2VQaWxlT25Ub3B9IGZyb20gJy4vUGlsZSdcbmltcG9ydCB7YWRkQ2FyZFRvUGlsZSwgSVRhYmxlYXUsIG1vdmVQaWxlUGFydCwgcmVtb3ZlVG9wQ2FyZEZyb21QaWxlLCByZXZlYWxUb3BDYXJkfSBmcm9tICcuL1RhYmxlYXUnXG5pbXBvcnQge2xhc3RJdGVtfSBmcm9tICcuL3V0aWwnXG5cbmV4cG9ydCBpbnRlcmZhY2UgSURlc2sge1xuICByZWFkb25seSBzdG9jazogSVBpbGVcbiAgcmVhZG9ubHkgd2FzdGU6IElQaWxlXG4gIHJlYWRvbmx5IGZvdW5kYXRpb246IElGb3VuZGF0aW9uXG4gIHJlYWRvbmx5IHRhYmxlYXU6IElUYWJsZWF1XG59XG5cbmludGVyZmFjZSBJRm91bmRhdGlvbiB7XG4gIFtDb2xvci5ESUFNT05EU106IElQaWxlXG4gIFtDb2xvci5IRUFSVEhTXTogSVBpbGVcbiAgW0NvbG9yLkNMVUJTXTogSVBpbGVcbiAgW0NvbG9yLlNQQURFU106IElQaWxlXG59XG5cbmV4cG9ydCBjbGFzcyBEZXNrIGltcGxlbWVudHMgSURlc2sge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgcmVhZG9ubHkgc3RvY2s6IElQaWxlLFxuICAgIHB1YmxpYyByZWFkb25seSB3YXN0ZTogSVBpbGUsXG4gICAgcHVibGljIHJlYWRvbmx5IGZvdW5kYXRpb246IElGb3VuZGF0aW9uLFxuICAgIHB1YmxpYyByZWFkb25seSB0YWJsZWF1OiBJVGFibGVhdSxcbiAgKSB7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4ZWN1dGVNb3ZlKGRlc2s6IElEZXNrLCBydWxlczogSUdhbWVSdWxlcywgbW92ZTogTW92ZSk6IElEZXNrIHtcbiAgc3dpdGNoIChtb3ZlLm1vdmUpIHtcbiAgICBjYXNlIE1vdmVUeXBlLkRSQVdfQ0FSRFM6XG4gICAgICByZXR1cm4gZHJhd0NhcmRzKGRlc2ssIHJ1bGVzLCBtb3ZlLmRyYXduQ2FyZHMpXG4gICAgY2FzZSBNb3ZlVHlwZS5SRURFQUw6XG4gICAgICByZXR1cm4gcmVkZWFsKGRlc2spXG4gICAgY2FzZSBNb3ZlVHlwZS5XQVNURV9UT19GT1VOREFUSU9OOlxuICAgICAgcmV0dXJuIG1vdmVUb3BXYXN0ZUNhcmRUb0ZvdW5kYXRpb24oZGVzaylcbiAgICBjYXNlIE1vdmVUeXBlLldBU1RFX1RPX1RBQkxFQVU6XG4gICAgICByZXR1cm4gbW92ZVRvcFdhc3RlQ2FyZFRvVGFibGVhdShkZXNrLCBydWxlcywgZGVzay50YWJsZWF1LnBpbGVzW21vdmUucGlsZUluZGV4XSlcbiAgICBjYXNlIE1vdmVUeXBlLlRBQkxFQVVfVE9fRk9VTkRBVElPTjpcbiAgICAgIHJldHVybiBtb3ZlVG9wVGFibGVhdVBpbGVDYXJkVG9Gb3VuZGF0aW9uKGRlc2ssIGRlc2sudGFibGVhdS5waWxlc1ttb3ZlLnBpbGVJbmRleF0pXG4gICAgY2FzZSBNb3ZlVHlwZS5SRVZFQUxfVEFCTEVBVV9DQVJEOlxuICAgICAgcmV0dXJuIHJldmVhbFRvcFRhYmxlYXVQaWxlQ2FyZChkZXNrLCBkZXNrLnRhYmxlYXUucGlsZXNbbW92ZS5waWxlSW5kZXhdKVxuICAgIGNhc2UgTW92ZVR5cGUuRk9VTkRBVElPTl9UT19UQUJMRUFVOlxuICAgICAgcmV0dXJuIG1vdmVGb3VuZGF0aW9uQ2FyZFRvVGFibGVhdVBpbGUoZGVzaywgcnVsZXMsIG1vdmUuY29sb3IsIGRlc2sudGFibGVhdS5waWxlc1ttb3ZlLnBpbGVJbmRleF0pXG4gICAgY2FzZSBNb3ZlVHlwZS5UQUJMRUFVX1RPX1RBQkxFQVU6XG4gICAgICByZXR1cm4gbW92ZVRhYmxlYXVQaWxlUGFydChcbiAgICAgICAgZGVzayxcbiAgICAgICAgcnVsZXMsXG4gICAgICAgIGRlc2sudGFibGVhdS5waWxlc1ttb3ZlLnNvdXJjZVBpbGVJbmRleF0sXG4gICAgICAgIGRlc2sudGFibGVhdS5waWxlc1ttb3ZlLnNvdXJjZVBpbGVJbmRleF0uY2FyZHNbbW92ZS50b3BNb3ZlZENhcmRJbmRleF0sXG4gICAgICAgIGRlc2sudGFibGVhdS5waWxlc1ttb3ZlLnRhcmdldFBpbGVJbmRleF0sXG4gICAgICApXG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBtb3ZlIHR5cGU6ICR7bW92ZSAmJiAobW92ZSBhcyBhbnkpLm1vdmV9YClcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNWaWN0b3J5KHtzdG9jaywgdGFibGVhdSwgd2FzdGV9OiBJRGVzayk6IGJvb2xlYW4ge1xuICByZXR1cm4gIXN0b2NrLmNhcmRzLmxlbmd0aCAmJiAhd2FzdGUuY2FyZHMubGVuZ3RoICYmIHRhYmxlYXUucGlsZXMuZXZlcnkoKHBpbGUpID0+ICFwaWxlLmNhcmRzLmxlbmd0aClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVmljdG9yeUd1YXJhbnRlZWQoe3N0b2NrLCB3YXN0ZSwgdGFibGVhdToge3BpbGVzOiB0YWJsZWF1UGlsZXN9fTogSURlc2spOiBib29sZWFuIHtcbiAgcmV0dXJuIChcbiAgICAhc3RvY2suY2FyZHMubGVuZ3RoICYmXG4gICAgIXdhc3RlLmNhcmRzLmxlbmd0aCAmJlxuICAgIHRhYmxlYXVQaWxlcy5ldmVyeSgocGlsZSkgPT4gcGlsZS5jYXJkcy5ldmVyeSgoY2FyZCkgPT4gY2FyZC5zaWRlID09PSBTaWRlLkZBQ0UpKVxuICApXG59XG5cbmZ1bmN0aW9uIGRyYXdDYXJkcyhkZXNrOiBJRGVzaywgcnVsZXM6IElHYW1lUnVsZXMsIG51bWJlck9mQ2FyZHM6IG51bWJlcikge1xuICBpZiAobnVtYmVyT2ZDYXJkcyAhPT0gcnVsZXMuZHJhd25DYXJkcykge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBUaGUgbnVtYmVyIG9mIGNhcmRzIHRvIGRyYXcgKCR7bnVtYmVyT2ZDYXJkc30pIGRvZXMgbm90IG1hdGNoIHRoZSBudW1iZXIgaW4gZ2FtZSBydWxlcyAoJHtydWxlcy5kcmF3bkNhcmRzfSlgLFxuICAgIClcbiAgfVxuICBjb25zdCBbc3RvY2tSZW1haW5kZXIsIGRyYXduQ2FyZHNdID0gZHJhdyhkZXNrLnN0b2NrLCBudW1iZXJPZkNhcmRzKVxuICBjb25zdCBuZXdXYXN0ZSA9IHBsYWNlUGlsZU9uVG9wKGRlc2sud2FzdGUsIG5ldyBQaWxlKGRyYXduQ2FyZHMubWFwKChjYXJkKSA9PiB0dXJuT3ZlcihjYXJkKSkpKVxuICByZXR1cm4gbmV3IERlc2soc3RvY2tSZW1haW5kZXIsIG5ld1dhc3RlLCBkZXNrLmZvdW5kYXRpb24sIGRlc2sudGFibGVhdSlcbn1cblxuZnVuY3Rpb24gcmVkZWFsKGRlc2s6IElEZXNrKSB7XG4gIGlmIChkZXNrLnN0b2NrLmNhcmRzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHJlZGVhbCBpZiB0aGVyZSBhcmUgY2FyZHMgaW4gdGhlIHN0b2NrJylcbiAgfVxuXG4gIHJldHVybiBuZXcgRGVzayhcbiAgICBuZXcgUGlsZShkZXNrLndhc3RlLmNhcmRzLm1hcCgoY2FyZCkgPT4gdHVybk92ZXIoY2FyZCkpLnJldmVyc2UoKSksXG4gICAgbmV3IFBpbGUoW10pLFxuICAgIGRlc2suZm91bmRhdGlvbixcbiAgICBkZXNrLnRhYmxlYXUsXG4gIClcbn1cblxuZnVuY3Rpb24gbW92ZVRvcFdhc3RlQ2FyZFRvRm91bmRhdGlvbihkZXNrOiBJRGVzayk6IElEZXNrIHtcbiAgaWYgKCFkZXNrLndhc3RlLmNhcmRzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhlcmUgaXMgbm8gY2FyZCBvbiB0aGUgd2FzdGUgcGlsZScpXG4gIH1cblxuICBjb25zdCBbbmV3V2FzdGUsIFtjYXJkVG9QbGFjZV1dID0gZHJhdyhkZXNrLndhc3RlLCAxKVxuICBjb25zdCBuZXdGb3VuZGF0aW9uID0gYWRkQ2FyZFRvRm91bmRhdGlvbihkZXNrLmZvdW5kYXRpb24sIGNhcmRUb1BsYWNlKVxuXG4gIHJldHVybiBuZXcgRGVzayhcbiAgICBkZXNrLnN0b2NrLFxuICAgIG5ld1dhc3RlLFxuICAgIG5ld0ZvdW5kYXRpb24sXG4gICAgZGVzay50YWJsZWF1LFxuICApXG59XG5cbmZ1bmN0aW9uIG1vdmVUb3BXYXN0ZUNhcmRUb1RhYmxlYXUoZGVzazogSURlc2ssIHJ1bGVzOiBJR2FtZVJ1bGVzLCB0YWJsZWF1UGlsZTogSVBpbGUpOiBJRGVzayB7XG4gIGlmICghZGVzay53YXN0ZS5jYXJkcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZXJlIGlzIG5vIGNhcmQgb24gdGhlIHdhc3RlIHBpbGUnKVxuICB9XG5cbiAgY29uc3QgW25ld1dhc3RlLCBbY2FyZFRvUGxhY2VdXSA9IGRyYXcoZGVzay53YXN0ZSwgMSlcbiAgaWYgKFxuICAgICF0YWJsZWF1UGlsZS5jYXJkcy5sZW5ndGggJiZcbiAgICAhcnVsZXMuYWxsb3dOb25LaW5nVG9FbXB0eVBpbGVUcmFuc2ZlciAmJlxuICAgIGNhcmRUb1BsYWNlLnJhbmsgIT09IFJhbmsuS0lOR1xuICApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBjdXJyZW50IGdhbWUgcnVsZXMgZm9yYmlkIHBsYWNpbmcgYW55IGNhcmQgb3RoZXIgdGhhbiBhIEtpbmcgb24gYW4gZW1wdHkgdGFibGVhdSBwaWxlYClcbiAgfVxuICBpZiAoXG4gICAgdGFibGVhdVBpbGUuY2FyZHMubGVuZ3RoICYmXG4gICAgIWlzVmFsaWRUYWJsZWF1U2VxdWVuY2UobGFzdEl0ZW0odGFibGVhdVBpbGUuY2FyZHMpLCBjYXJkVG9QbGFjZSlcbiAgKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ1RoZSB0b3Agd2FzdGUgY2FyZCBjYW5ub3QgYmUgcGxhY2VkIG9uIHRvcCBvZiB0aGUgdGFyZ2V0IHRhYmxlYXUgcGlsZSBiZWNhdXNlIGl0IGlzIG5vdCBpbiByYW5rIHNlcXVlbmNlIHdpdGggJyArXG4gICAgICAndGhlIGN1cnJlbnQgdG9wIGNhcmQgb2YgdGhlIHRhcmdldCBwaWxlIG9yIGl0IGlzIG9mIHRoZSBzYW1lIGZyZW5jaCBkZWNrIGNvbG9yIChyZWQvYmxhY2spIGFzIHRoZSBjdXJyZW50IHRvcCAnICtcbiAgICAgICdjYXJkIG9mIHRoZSB0YXJnZXQgcGlsZScsXG4gICAgKVxuICB9XG4gIGNvbnN0IG5ld1RhYmxlYXUgPSBhZGRDYXJkVG9QaWxlKGRlc2sudGFibGVhdSwgdGFibGVhdVBpbGUsIGNhcmRUb1BsYWNlKVxuXG4gIHJldHVybiBuZXcgRGVzayhcbiAgICBkZXNrLnN0b2NrLFxuICAgIG5ld1dhc3RlLFxuICAgIGRlc2suZm91bmRhdGlvbixcbiAgICBuZXdUYWJsZWF1LFxuICApXG59XG5cbmZ1bmN0aW9uIG1vdmVUb3BUYWJsZWF1UGlsZUNhcmRUb0ZvdW5kYXRpb24oZGVzazogSURlc2ssIHRhYmxlYXVQaWxlOiBJUGlsZSk6IElEZXNrIHtcbiAgY29uc3QgW25ld1RhYmxlYXUsIGNhcmRUb1BsYWNlXSA9IHJlbW92ZVRvcENhcmRGcm9tUGlsZShkZXNrLnRhYmxlYXUsIHRhYmxlYXVQaWxlKVxuICBjb25zdCBuZXdGb3VuZGF0aW9uID0gYWRkQ2FyZFRvRm91bmRhdGlvbihkZXNrLmZvdW5kYXRpb24sIGNhcmRUb1BsYWNlKVxuICByZXR1cm4gbmV3IERlc2soXG4gICAgZGVzay5zdG9jayxcbiAgICBkZXNrLndhc3RlLFxuICAgIG5ld0ZvdW5kYXRpb24sXG4gICAgbmV3VGFibGVhdSxcbiAgKVxufVxuXG5mdW5jdGlvbiByZXZlYWxUb3BUYWJsZWF1UGlsZUNhcmQoZGVzazogSURlc2ssIHRhYmxlYXVQaWxlOiBJUGlsZSk6IElEZXNrIHtcbiAgY29uc3QgbmV3VGFibGVhdSA9IHJldmVhbFRvcENhcmQoZGVzay50YWJsZWF1LCB0YWJsZWF1UGlsZSlcbiAgcmV0dXJuIG5ldyBEZXNrKFxuICAgIGRlc2suc3RvY2ssXG4gICAgZGVzay53YXN0ZSxcbiAgICBkZXNrLmZvdW5kYXRpb24sXG4gICAgbmV3VGFibGVhdSxcbiAgKVxufVxuXG5mdW5jdGlvbiBtb3ZlRm91bmRhdGlvbkNhcmRUb1RhYmxlYXVQaWxlKGRlc2s6IElEZXNrLCBydWxlczogSUdhbWVSdWxlcywgY29sb3I6IENvbG9yLCB0YWJsZWF1UGlsZTogSVBpbGUpOiBJRGVzayB7XG4gIGlmICghZGVzay5mb3VuZGF0aW9uW2NvbG9yXS5jYXJkcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBzcGVjaWZpZWQgZm91bmRhdGlvbiAoJHtjb2xvcn0pIGNvbnRhaW5zIG5vIGNhcmRzYClcbiAgfVxuXG4gIGNvbnN0IFtuZXdGb3VuZGF0aW9uUGlsZSwgW2NhcmRUb1BsYWNlXV0gPSBkcmF3KGRlc2suZm91bmRhdGlvbltjb2xvcl0sIDEpXG4gIGlmIChcbiAgICAhdGFibGVhdVBpbGUuY2FyZHMubGVuZ3RoICYmXG4gICAgIXJ1bGVzLmFsbG93Tm9uS2luZ1RvRW1wdHlQaWxlVHJhbnNmZXIgJiZcbiAgICBjYXJkVG9QbGFjZS5yYW5rICE9PSBSYW5rLktJTkdcbiAgKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgY3VycmVudCBnYW1lIHJ1bGVzIGZvcmJpZCBwbGFjaW5nIGFueSBjYXJkIG90aGVyIHRoYW4gYSBLaW5nIG9uIGFuIGVtcHR5IHRhYmxlYXUgcGlsZWApXG4gIH1cbiAgaWYgKFxuICAgIHRhYmxlYXVQaWxlLmNhcmRzLmxlbmd0aCAmJlxuICAgICFpc1ZhbGlkVGFibGVhdVNlcXVlbmNlKGxhc3RJdGVtKHRhYmxlYXVQaWxlLmNhcmRzKSwgY2FyZFRvUGxhY2UpXG4gICkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdUaGUgdG9wIGZvdW5kYXRpb24gY2FyZCBjYW5ub3QgYmUgcGxhY2VkIG9uIHRvcCBvZiB0aGUgdGFyZ2V0IHRhYmxlYXUgcGlsZSBiZWNhdXNlIGl0IGlzIG5vdCBpbiByYW5rIHNlcXVlbmNlICcgK1xuICAgICAgJ3dpdGggdGhlIGN1cnJlbnQgdG9wIGNhcmQgb2YgdGhlIHRhcmdldCBwaWxlIG9yIGl0IGlzIG9mIHRoZSBzYW1lIGZyZW5jaCBkZWNrIGNvbG9yIChyZWQvYmxhY2spIGFzIHRoZSB0b3AgJyArXG4gICAgICAnY2FyZCBvZiB0aGUgdGFyZ2V0IHBpbGUnLFxuICAgIClcbiAgfVxuICBjb25zdCBuZXdUYWJsZWF1ID0gYWRkQ2FyZFRvUGlsZShkZXNrLnRhYmxlYXUsIHRhYmxlYXVQaWxlLCBjYXJkVG9QbGFjZSlcbiAgcmV0dXJuIG5ldyBEZXNrKFxuICAgIGRlc2suc3RvY2ssXG4gICAgZGVzay53YXN0ZSxcbiAgICB7XG4gICAgICAuLi5kZXNrLmZvdW5kYXRpb24sXG4gICAgICBbY2FyZFRvUGxhY2UuY29sb3JdOiBuZXdGb3VuZGF0aW9uUGlsZSxcbiAgICB9LFxuICAgIG5ld1RhYmxlYXUsXG4gIClcbn1cblxuZnVuY3Rpb24gbW92ZVRhYmxlYXVQaWxlUGFydChcbiAgZGVzazogSURlc2ssXG4gIHJ1bGVzOiBJR2FtZVJ1bGVzLFxuICBzb3VyY2VQaWxlOiBJUGlsZSxcbiAgdG9wQ2FyZFRvTW92ZTogSUNhcmQsXG4gIHRhcmdldFBpbGU6IElQaWxlLFxuKTogSURlc2sge1xuICBpZiAoXG4gICAgIXRhcmdldFBpbGUuY2FyZHMubGVuZ3RoICYmXG4gICAgIXJ1bGVzLmFsbG93Tm9uS2luZ1RvRW1wdHlQaWxlVHJhbnNmZXIgJiZcbiAgICB0b3BDYXJkVG9Nb3ZlLnJhbmsgIT09IFJhbmsuS0lOR1xuICApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBjdXJyZW50IGdhbWUgcnVsZXMgZm9yYmlkIHBsYWNpbmcgYW55IGNhcmQgb3RoZXIgdGhhbiBhIEtpbmcgb24gYW4gZW1wdHkgdGFibGVhdSBwaWxlYClcbiAgfVxuICBpZiAoXG4gICAgdGFyZ2V0UGlsZS5jYXJkcy5sZW5ndGggJiZcbiAgICAhaXNWYWxpZFRhYmxlYXVTZXF1ZW5jZShsYXN0SXRlbSh0YXJnZXRQaWxlLmNhcmRzKSwgdG9wQ2FyZFRvTW92ZSlcbiAgKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ1RoZSB0b3AgbW92ZWQgY2FyZCBjYW5ub3QgYmUgcGxhY2VkIG9uIHRvcCBvZiB0aGUgdGFyZ2V0IHRhYmxlYXUgcGlsZSBiZWNhdXNlIGl0IGlzIG5vdCBpbiByYW5rIHNlcXVlbmNlIHdpdGggJyArXG4gICAgICAndGhlIGN1cnJlbnQgdG9wIGNhcmQgb2YgdGhlIHRhcmdldCBwaWxlIG9yIGl0IGlzIG9mIHRoZSBzYW1lIGZyZW5jaCBkZWNrIGNvbG9yIChyZWQvYmxhY2spIGFzIHRoZSBjdXJyZW50IHRvcCAnICtcbiAgICAgICdjYXJkIG9mIHRoZSB0YXJnZXQgcGlsZScsXG4gICAgKVxuICB9XG4gIGNvbnN0IG5ld1RhYmxlYXUgPSBtb3ZlUGlsZVBhcnQoZGVzay50YWJsZWF1LCBzb3VyY2VQaWxlLCB0b3BDYXJkVG9Nb3ZlLCB0YXJnZXRQaWxlKVxuICByZXR1cm4gbmV3IERlc2soXG4gICAgZGVzay5zdG9jayxcbiAgICBkZXNrLndhc3RlLFxuICAgIGRlc2suZm91bmRhdGlvbixcbiAgICBuZXdUYWJsZWF1LFxuICApXG59XG5cbmZ1bmN0aW9uIGFkZENhcmRUb0ZvdW5kYXRpb24oZm91bmRhdGlvbjogSUZvdW5kYXRpb24sIGNhcmRUb1BsYWNlOiBJQ2FyZCk6IElGb3VuZGF0aW9uIHtcbiAgY29uc3QgdGFyZ2V0Rm91bmRhdGlvblBpbGUgPSBmb3VuZGF0aW9uW2NhcmRUb1BsYWNlLmNvbG9yXVxuICBpZiAoIXRhcmdldEZvdW5kYXRpb25QaWxlLmNhcmRzLmxlbmd0aCAmJiBjYXJkVG9QbGFjZS5yYW5rICE9PSBSYW5rLkFDRSkge1xuICAgIHRocm93IG5ldyBFcnJvcignT25seSB0aGUgQWNlIGNhbiBiZSBwbGFjZWQgYXQgdGhlIGJvdHRvbSBvZiBhIGZvdW5kYXRpb24nKVxuICB9XG4gIGlmIChcbiAgICB0YXJnZXRGb3VuZGF0aW9uUGlsZS5jYXJkcy5sZW5ndGggJiZcbiAgICAhaXNWYWxpZEZvdW5kYXRpb25TZXF1ZW5jZShsYXN0SXRlbSh0YXJnZXRGb3VuZGF0aW9uUGlsZS5jYXJkcyksIGNhcmRUb1BsYWNlKVxuICApIHtcbiAgICBjb25zdCBmb3VuZGF0aW9uVG9wQ2FyZCA9IGxhc3RJdGVtKHRhcmdldEZvdW5kYXRpb25QaWxlLmNhcmRzKVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBUaGUgcHJvdmlkZWQgY2FyZCAke2NhcmRUb1BsYWNlLnJhbmt9IGNhbm5vdCBiZSBwbGFjZWQgb24gdG9wIG9mICR7Zm91bmRhdGlvblRvcENhcmQucmFua30sIGV4cGVjdGVkIGEgYCArXG4gICAgICBgJHtSQU5LX1NFUVVFTkNFW1JBTktfU0VRVUVOQ0UuaW5kZXhPZihmb3VuZGF0aW9uVG9wQ2FyZC5yYW5rKSArIDFdfSBjYXJkLmAsXG4gICAgKVxuICB9XG5cbiAgY29uc3QgbmV3Rm91bmRhdGlvblBpbGUgPSBwbGFjZUNhcmRPblRvcCh0YXJnZXRGb3VuZGF0aW9uUGlsZSwgY2FyZFRvUGxhY2UpXG4gIHJldHVybiB7XG4gICAgLi4uZm91bmRhdGlvbixcbiAgICBbY2FyZFRvUGxhY2UuY29sb3JdOiBuZXdGb3VuZGF0aW9uUGlsZSxcbiAgfVxufVxuIiwiaW1wb3J0IHtJQm90T3B0aW9ucywgbWFrZU1vdmVPbkRlc2t9IGZyb20gJy4vQm90J1xuaW1wb3J0IHtDb2xvciwgREVDSywgSUNhcmQsIFNpZGV9IGZyb20gJy4vQ2FyZCdcbmltcG9ydCB7XG4gIERlc2ssXG4gIGV4ZWN1dGVNb3ZlIGFzIGV4ZWN1dGVNb3ZlT25EZXNrLFxuICBJRGVzayxcbiAgaXNWaWN0b3J5IGFzIGlzRGVza0luVmljdG9yeVN0YXRlLFxuICBpc1ZpY3RvcnlHdWFyYW50ZWVkIGFzIGlzRGVza0luVmljdG9yeUd1YXJhbnRlZWRTdGF0ZSxcbn0gZnJvbSAnLi9EZXNrJ1xuaW1wb3J0IHtNb3ZlfSBmcm9tICcuL01vdmUnXG5pbXBvcnQge2RyYXcsIElQaWxlLCBQaWxlLCBzaHVmZmxlLCB0dXJuQ2FyZH0gZnJvbSAnLi9QaWxlJ1xuaW1wb3J0IHtUYWJsZWF1fSBmcm9tICcuL1RhYmxlYXUnXG5pbXBvcnQge2xhc3RJdGVtfSBmcm9tICcuL3V0aWwnXG5cbnR5cGUgSGlzdG9yeVJlY29yZCA9IFtJRGVzaywgTW92ZSAmIElSZWNvcmRUaW1lc3RhbXBdXG5cbmV4cG9ydCBpbnRlcmZhY2UgSUdhbWUge1xuICByZWFkb25seSBoaXN0b3J5OiBSZWFkb25seUFycmF5PEhpc3RvcnlSZWNvcmQ+XG4gIHJlYWRvbmx5IGZ1dHVyZTogUmVhZG9ubHlBcnJheTxIaXN0b3J5UmVjb3JkPlxuICByZWFkb25seSBzdGF0ZTogSURlc2tcbiAgcmVhZG9ubHkgcnVsZXM6IElHYW1lUnVsZXNcbiAgcmVhZG9ubHkgc3RhcnRUaW1lOiB7XG4gICAgcmVhZG9ubHkgYWJzb2x1dGVUaW1lc3RhbXA6IG51bWJlcixcbiAgICByZWFkb25seSBsb2dpY2FsVGltZXN0YW1wOiBudW1iZXIsXG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJR2FtZVJ1bGVzIHtcbiAgcmVhZG9ubHkgZHJhd25DYXJkczogbnVtYmVyXG4gIHJlYWRvbmx5IGFsbG93Tm9uS2luZ1RvRW1wdHlQaWxlVHJhbnNmZXI6IGJvb2xlYW5cbiAgLy8gVGhlIG51bWJlciBvZiBwaWxlcyBpbiB0YWJsZWF1IGlzIGFscmVhZHkgcmVwcmVzZW50ZWQgYnkgdGhlIHRhYmxlYXUgaXRzZWxmLCBzaW5jZSB0aGUgbnVtYmVyIG9mIHBpbGVzIGlzXG4gIC8vIGltbXV0YWJsZS5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJTmV3R2FtZVJ1bGVzIGV4dGVuZHMgSUdhbWVSdWxlcyB7XG4gIHJlYWRvbmx5IHRhYmxlYXVQaWxlczogbnVtYmVyXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUJvdFNpbXVsYXRpb25PcHRpb25zIHtcbiAgbWF4TW92ZXM6IG51bWJlcixcbiAgc2ltdWxhdGlvbkVuZFByZWRpY2F0ZTogKGRlc3Q6IElEZXNrKSA9PiBib29sZWFuLFxuICBtYXhTaW11bGF0aW9uVGltZTogbnVtYmVyLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElSZWNvcmRUaW1lc3RhbXAge1xuICBsb2dpY2FsVGltZXN0YW1wOiBudW1iZXJcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU5ld0dhbWUoZ2FtZVJ1bGVzOiBJTmV3R2FtZVJ1bGVzLCBjYXJkRGVjazogbnVsbCB8IFJlYWRvbmx5QXJyYXk8SUNhcmQ+ID0gbnVsbCk6IElHYW1lIHtcbiAgaWYgKCFOdW1iZXIuaXNTYWZlSW50ZWdlcihnYW1lUnVsZXMuZHJhd25DYXJkcykgfHwgZ2FtZVJ1bGVzLmRyYXduQ2FyZHMgPD0gMCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICBgVGhlIGRyYXduQ2FyZHMgZ2FtZSBydWxlIG11c3QgYmUgYSBwb3NpdGl2ZSBzYWZlIGludGVnZXIsICR7Z2FtZVJ1bGVzLmRyYXduQ2FyZHN9IHdhcyBwcm92aWRlZGAsXG4gICAgKVxuICB9XG4gIGlmICghTnVtYmVyLmlzU2FmZUludGVnZXIoZ2FtZVJ1bGVzLnRhYmxlYXVQaWxlcykgfHwgZ2FtZVJ1bGVzLnRhYmxlYXVQaWxlcyA8PSAwKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgIGBUaGUgdGFibGVhdVBpbGVzIGdhbWUgcnVsZSBtdXN0IGJlIGEgcG9zaXRpdmUgc2FmZSBpbnRlZ2VyLCAke2dhbWVSdWxlcy50YWJsZWF1UGlsZXN9IHdhcyBwcm92aWRlZGAsXG4gICAgKVxuICB9XG5cbiAgbGV0IGNhcmRzVG9EZWFsID0gY2FyZERlY2sgPyBuZXcgUGlsZShjYXJkRGVjaykgOiBzaHVmZmxlKG5ldyBQaWxlKERFQ0spKVxuICBmb3IgKGNvbnN0IGNhcmQgb2YgY2FyZHNUb0RlYWwuY2FyZHMpIHtcbiAgICBpZiAoY2FyZC5zaWRlID09PSBTaWRlLkZBQ0UpIHtcbiAgICAgIGNhcmRzVG9EZWFsID0gdHVybkNhcmQoY2FyZHNUb0RlYWwsIGNhcmQpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgcGlsZXM6IElQaWxlW10gPSBbXVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGdhbWVSdWxlcy50YWJsZWF1UGlsZXM7IGkrKykge1xuICAgIGNvbnN0IFtyZW1haW5pbmdDYXJkcywgY2FyZHNGb3JQaWxlXSA9IGRyYXcoY2FyZHNUb0RlYWwsIGkgKyAxKVxuICAgIGNvbnN0IGN1cnJlbnRQaWxlID0gbmV3IFBpbGUoY2FyZHNGb3JQaWxlKVxuICAgIGlmIChjdXJyZW50UGlsZS5jYXJkcy5sZW5ndGgpIHtcbiAgICAgIHBpbGVzLnB1c2godHVybkNhcmQoY3VycmVudFBpbGUsIGxhc3RJdGVtKGN1cnJlbnRQaWxlLmNhcmRzKSkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHBpbGVzLnB1c2goY3VycmVudFBpbGUpXG4gICAgfVxuICAgIGNhcmRzVG9EZWFsID0gcmVtYWluaW5nQ2FyZHNcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZnV0dXJlOiBbXSxcbiAgICBoaXN0b3J5OiBbXSxcbiAgICBydWxlczoge1xuICAgICAgYWxsb3dOb25LaW5nVG9FbXB0eVBpbGVUcmFuc2ZlcjogZ2FtZVJ1bGVzLmFsbG93Tm9uS2luZ1RvRW1wdHlQaWxlVHJhbnNmZXIsXG4gICAgICBkcmF3bkNhcmRzOiBnYW1lUnVsZXMuZHJhd25DYXJkcyxcbiAgICB9LFxuICAgIHN0YXJ0VGltZToge1xuICAgICAgYWJzb2x1dGVUaW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICBsb2dpY2FsVGltZXN0YW1wOiBwZXJmb3JtYW5jZS5ub3coKSxcbiAgICB9LFxuICAgIHN0YXRlOiBuZXcgRGVzayhcbiAgICAgIGNhcmRzVG9EZWFsLFxuICAgICAgbmV3IFBpbGUoW10pLFxuICAgICAge1xuICAgICAgICBbQ29sb3IuRElBTU9ORFNdOiBuZXcgUGlsZShbXSksXG4gICAgICAgIFtDb2xvci5IRUFSVEhTXTogbmV3IFBpbGUoW10pLFxuICAgICAgICBbQ29sb3IuQ0xVQlNdOiBuZXcgUGlsZShbXSksXG4gICAgICAgIFtDb2xvci5TUEFERVNdOiBuZXcgUGlsZShbXSksXG4gICAgICB9LFxuICAgICAgbmV3IFRhYmxlYXUocGlsZXMpLFxuICAgICksXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUdhbWVXaXRoQm90UHJlZGljYXRlKFxuICBydWxlczogSU5ld0dhbWVSdWxlcyxcbiAgYm90T3B0aW9uczogSUJvdE9wdGlvbnMsXG4gIHttYXhNb3ZlcywgbWF4U2ltdWxhdGlvblRpbWUsIHNpbXVsYXRpb25FbmRQcmVkaWNhdGV9OiBJQm90U2ltdWxhdGlvbk9wdGlvbnMsXG4pOiBbSUdhbWUsIGJvb2xlYW5dIHtcbiAgY29uc3QgZ2FtZSA9IGNyZWF0ZU5ld0dhbWUocnVsZXMpXG4gIGxldCBsYXN0RGVza1N0YXRlID0gZ2FtZS5zdGF0ZVxuICBsZXQgc2F0aXNmaWVzUHJlZGljYXRlID0gZmFsc2VcbiAgbGV0IG1vdmVDb3VudCA9IDBcbiAgY29uc3Qgc3RhcnRUaW1lc3RhbXAgPSBwZXJmb3JtYW5jZS5ub3coKVxuICBkbyB7XG4gICAgY29uc3QgbmV3RGVza1N0YXRlID0gbWFrZU1vdmVPbkRlc2sobGFzdERlc2tTdGF0ZSwgcnVsZXMsIGJvdE9wdGlvbnMpXG4gICAgbW92ZUNvdW50KytcbiAgICBpZiAobmV3RGVza1N0YXRlID09PSBsYXN0RGVza1N0YXRlIHx8IG1vdmVDb3VudCA+PSBtYXhNb3ZlcyB8fCBzaW11bGF0aW9uRW5kUHJlZGljYXRlKG5ld0Rlc2tTdGF0ZSkpIHtcbiAgICAgIHNhdGlzZmllc1ByZWRpY2F0ZSA9IHNpbXVsYXRpb25FbmRQcmVkaWNhdGUobmV3RGVza1N0YXRlKVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgaWYgKCEobW92ZUNvdW50ICUgMTApICYmIHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lc3RhbXAgPj0gbWF4U2ltdWxhdGlvblRpbWUpIHtcbiAgICAgIHNhdGlzZmllc1ByZWRpY2F0ZSA9IHNpbXVsYXRpb25FbmRQcmVkaWNhdGUobmV3RGVza1N0YXRlKSAvLyBmb3IgY29kZSBjb25zaXN0ZW5jeSwgYnV0IHdpbGwgYmUgZmFsc2VcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGxhc3REZXNrU3RhdGUgPSBuZXdEZXNrU3RhdGVcbiAgfSB3aGlsZSAodHJ1ZSlcbiAgcmV0dXJuIFtnYW1lLCBzYXRpc2ZpZXNQcmVkaWNhdGVdXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleGVjdXRlTW92ZShnYW1lOiBJR2FtZSwgbW92ZTogTW92ZSk6IElHYW1lIHtcbiAgY29uc3QgdXBkYXRlZERlc2sgPSBleGVjdXRlTW92ZU9uRGVzayhnYW1lLnN0YXRlLCBnYW1lLnJ1bGVzLCBtb3ZlKVxuICByZXR1cm4gY3JlYXRlTmV4dEdhbWVTdGF0ZShnYW1lLCB1cGRhdGVkRGVzaywgbW92ZSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0R2FtZShnYW1lOiBJR2FtZSk6IElHYW1lIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5nYW1lLFxuICAgIGZ1dHVyZTogW10sXG4gICAgaGlzdG9yeTogW10sXG4gICAgc3RhcnRUaW1lOiB7XG4gICAgICBhYnNvbHV0ZVRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIGxvZ2ljYWxUaW1lc3RhbXA6IHBlcmZvcm1hbmNlLm5vdygpLFxuICAgIH0sXG4gICAgc3RhdGU6IGdhbWUuaGlzdG9yeS5sZW5ndGggPyBnYW1lLmhpc3RvcnlbMF1bMF0gOiBnYW1lLnN0YXRlLFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bmRvTGFzdE1vdmUoZ2FtZTogSUdhbWUpOiBJR2FtZSB7XG4gIGlmICghZ2FtZS5oaXN0b3J5Lmxlbmd0aCkge1xuICAgIHJldHVybiBnYW1lXG4gIH1cblxuICBjb25zdCBuZXdIaXN0b3J5ID0gZ2FtZS5oaXN0b3J5LnNsaWNlKClcbiAgY29uc3QgW21vdmVUb1VuZG9dID0gbmV3SGlzdG9yeS5zcGxpY2UoLTEpXG5cbiAgcmV0dXJuIHtcbiAgICAuLi5nYW1lLFxuICAgIGZ1dHVyZTogW21vdmVUb1VuZG8sIC4uLmdhbWUuZnV0dXJlXSxcbiAgICBoaXN0b3J5OiBuZXdIaXN0b3J5LFxuICAgIHN0YXRlOiBtb3ZlVG9VbmRvWzBdLFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWRvTmV4dE1vdmUoZ2FtZTogSUdhbWUpOiBJR2FtZSB7XG4gIGlmICghZ2FtZS5mdXR1cmUubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGdhbWVcbiAgfVxuXG4gIGNvbnN0IFttb3ZlVG9SZWRvLCAuLi5uZXdGdXR1cmVdID0gZ2FtZS5mdXR1cmVcbiAgY29uc3QgbmV3U3RhdGUgPSBuZXdGdXR1cmUubGVuZ3RoID9cbiAgICBuZXdGdXR1cmVbMF1bMF1cbiAgOlxuICAgIGV4ZWN1dGVNb3ZlKHsuLi5nYW1lLCBzdGF0ZTogbW92ZVRvUmVkb1swXX0sIG1vdmVUb1JlZG9bMV0pLnN0YXRlXG5cbiAgcmV0dXJuIHtcbiAgICAuLi5nYW1lLFxuICAgIGZ1dHVyZTogbmV3RnV0dXJlLFxuICAgIGhpc3Rvcnk6IGdhbWUuaGlzdG9yeS5jb25jYXQoW21vdmVUb1JlZG9dKSxcbiAgICBzdGF0ZTogbmV3U3RhdGUsXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVmljdG9yeSh7c3RhdGV9OiBJR2FtZSk6IGJvb2xlYW4ge1xuICByZXR1cm4gaXNEZXNrSW5WaWN0b3J5U3RhdGUoc3RhdGUpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1ZpY3RvcnlHdWFyYW50ZWVkKHtzdGF0ZX06IElHYW1lKTogYm9vbGVhbiB7XG4gIHJldHVybiBpc0Rlc2tJblZpY3RvcnlHdWFyYW50ZWVkU3RhdGUoc3RhdGUpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVOZXh0R2FtZVN0YXRlKGdhbWU6IElHYW1lLCBuZXh0U3RhdGU6IElEZXNrLCBhcHBsaWVkTW92ZTogTW92ZSk6IElHYW1lIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5nYW1lLFxuICAgIGZ1dHVyZTogW10sXG4gICAgaGlzdG9yeTogZ2FtZS5oaXN0b3J5LmNvbmNhdChbW1xuICAgICAgZ2FtZS5zdGF0ZSxcbiAgICAgIHtcbiAgICAgICAgLi4uYXBwbGllZE1vdmUsXG4gICAgICAgIGxvZ2ljYWxUaW1lc3RhbXA6IHBlcmZvcm1hbmNlLm5vdygpLFxuICAgICAgfSxcbiAgICBdXSksXG4gICAgc3RhdGU6IG5leHRTdGF0ZSxcbiAgfVxufVxuIiwiLy8gVGhpcyBmaWxlIGlzIGEgcHJpbWUgY2FuZGlkYXRlIGZvciByZWZhY3RvcmluZy4gU29tZSBzdWdnZXN0ZWQgaGVscGVyIGZ1bmN0aW9ucyB0byBjcmVhdGUgYW5kIHVzZTpcbi8vIC0gZ2V0Rm91bmRhdGlvblRvcChnYW1lOiBJR2FtZSk6IElGb3VuZGF0aW9uVG9wXG4vLyAtIGdldEZvdW5kYXRpb25Ub3BDYXJkcyhnYW1lOiBJR2FtZSk6IElDYXJkW11cbi8vIC0gZ2V0UGxheWFibGVQaWxlcyhnYW1lOiBJR2FtZSk6IElQaWxlW10gLy8gb25seSBwaWxlcyB3aGVyZSBlYWNoIHBpbGUgY29udGFpbnMgYXQgbGVhc3Qgb25lIHJldmVhbGVkIGNhcmRcbi8vIC0gLi4uYW5kIG90aGVyc1xuXG5pbXBvcnQge1xuICBDb2xvcixcbiAgY29tcGFyZVJhbmssXG4gIElDYXJkLFxuICBpc1ZhbGlkRm91bmRhdGlvblNlcXVlbmNlLFxuICBpc1ZhbGlkVGFibGVhdVNlcXVlbmNlLFxuICBSYW5rLFxuICBTaWRlLFxuICB0dXJuT3Zlcixcbn0gZnJvbSAnLi9DYXJkJ1xuaW1wb3J0IHtJRGVzaywgaXNWaWN0b3J5R3VhcmFudGVlZH0gZnJvbSAnLi9EZXNrJ1xuaW1wb3J0IHtJR2FtZVJ1bGVzfSBmcm9tICcuL0dhbWUnXG5pbXBvcnQge01vdmUsIE1vdmVUeXBlfSBmcm9tICcuL01vdmUnXG5pbXBvcnQge0lUYWJsZWF1fSBmcm9tICcuL1RhYmxlYXUnXG5pbXBvcnQge2xhc3RJdGVtLCBsYXN0SXRlbU9yTnVsbH0gZnJvbSAnLi91dGlsJ1xuXG5leHBvcnQgZW51bSBIaW50R2VuZXJhdG9yTW9kZSB7XG4gIENVUlJFTlRfU1RBVEUgPSAnSGludEdlbmVyYXRvck1vZGUuQ1VSUkVOVF9TVEFURScsXG4gIFdJVEhfRlVMTF9TVE9DSyA9ICdIaW50R2VuZXJhdG9yTW9kZS5XSVRIX0ZVTExfU1RPQ0snLFxufVxuXG5leHBvcnQgZW51bSBNb3ZlQ29uZmlkZW5jZSB7XG4gIEFCU09MVVRFID0gJ01vdmVDb25maWRlbmNlLkFCU09MVVRFJyxcbiAgVkVSWV9ISUdIID0gJ01vdmVDb25maWRlbmNlLlZFUllfSElHSCcsXG4gIEhJR0ggPSAnTW92ZUNvbmZpZGVuY2UuSElHSCcsXG4gIE1FRElVTSA9ICdNb3ZlQ29uZmlkZW5jZS5NRURJVU0nLFxuICBMT1cgPSAnTW92ZUNvbmZpZGVuY2UuTE9XJyxcbiAgVkVSWV9MT1cgPSAnTW92ZUNvbmZpZGVuY2UuVkVSWV9MT1cnLFxuICBNSU5JU0NVTEUgPSAnTW92ZUNvbmZpZGVuY2UuTUlOSVNDVUxFJyxcbn1cblxuZXhwb3J0IGNvbnN0IE1PVkVfQ09ORklERU5DRVM6IFJlYWRvbmx5QXJyYXk8TW92ZUNvbmZpZGVuY2U+ID0gW1xuICBNb3ZlQ29uZmlkZW5jZS5BQlNPTFVURSxcbiAgTW92ZUNvbmZpZGVuY2UuVkVSWV9ISUdILFxuICBNb3ZlQ29uZmlkZW5jZS5ISUdILFxuICBNb3ZlQ29uZmlkZW5jZS5NRURJVU0sXG4gIE1vdmVDb25maWRlbmNlLkxPVyxcbiAgTW92ZUNvbmZpZGVuY2UuVkVSWV9MT1csXG4gIE1vdmVDb25maWRlbmNlLk1JTklTQ1VMRSxcbl1cblxuZXhwb3J0IHR5cGUgTW92ZUhpbnQgPSBbTW92ZSwgSUNhcmQsIE1vdmVDb25maWRlbmNlXVxuXG5pbnRlcmZhY2UgSUZvdW5kYXRpb25Ub3Age1xuICBbQ29sb3IuRElBTU9ORFNdOiBudWxsIHwgSUNhcmRcbiAgW0NvbG9yLkhFQVJUSFNdOiBudWxsIHwgSUNhcmRcbiAgW0NvbG9yLkNMVUJTXTogbnVsbCB8IElDYXJkXG4gIFtDb2xvci5TUEFERVNdOiBudWxsIHwgSUNhcmRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE1vdmVIaW50cyhkZXNrOiBJRGVzaywgcnVsZXM6IElHYW1lUnVsZXMsIG1vZGU6IEhpbnRHZW5lcmF0b3JNb2RlKTogTW92ZUhpbnRbXSB7XG4gIGNvbnN0IHN0b2NrUGxheWFibGVDYXJkczogSUNhcmRbXSA9IGdldFN0b2NrUGxheWFibGVDYXJkcyhkZXNrLCBydWxlcywgbW9kZSlcbiAgY29uc3Qge2ZvdW5kYXRpb24sIHRhYmxlYXV9ID0gZGVza1xuICBjb25zdCB0b3BUYWJsZWF1Q2FyZHMgPSB0YWJsZWF1LnBpbGVzLmZpbHRlcigocGlsZSkgPT4gcGlsZS5jYXJkcy5sZW5ndGgpLm1hcCgocGlsZSkgPT4gbGFzdEl0ZW0ocGlsZS5jYXJkcykpXG4gIGNvbnN0IHRvcEZvdW5kYXRpb25DYXJkcyA9IHtcbiAgICBbQ29sb3IuRElBTU9ORFNdOiBsYXN0SXRlbU9yTnVsbChmb3VuZGF0aW9uW0NvbG9yLkRJQU1PTkRTXS5jYXJkcyksXG4gICAgW0NvbG9yLkhFQVJUSFNdOiBsYXN0SXRlbU9yTnVsbChmb3VuZGF0aW9uW0NvbG9yLkhFQVJUSFNdLmNhcmRzKSxcbiAgICBbQ29sb3IuQ0xVQlNdOiBsYXN0SXRlbU9yTnVsbChmb3VuZGF0aW9uW0NvbG9yLkNMVUJTXS5jYXJkcyksXG4gICAgW0NvbG9yLlNQQURFU106IGxhc3RJdGVtT3JOdWxsKGZvdW5kYXRpb25bQ29sb3IuU1BBREVTXS5jYXJkcyksXG4gIH1cbiAgY29uc3QgbW92ZXM6IE1vdmVIaW50W10gPSBbXVxuXG4gIG1vdmVzLnB1c2goLi4uZ2V0TW92ZXNXaXRoQWJzb2x1dGVDb25maWRlbmNlKGRlc2ssIHN0b2NrUGxheWFibGVDYXJkcywgdG9wVGFibGVhdUNhcmRzLCB0b3BGb3VuZGF0aW9uQ2FyZHMpKVxuICBtb3Zlcy5wdXNoKC4uLmdldE1vdmVzV2l0aFZlcnlIaWdoQ29uZmlkZW5jZShkZXNrLCBzdG9ja1BsYXlhYmxlQ2FyZHMpKVxuICBtb3Zlcy5wdXNoKC4uLmdldE1vdmVzV2l0aEhpZ2hDb25maWRlbmNlKGRlc2ssIHN0b2NrUGxheWFibGVDYXJkcykpXG4gIG1vdmVzLnB1c2goLi4uZ2V0TW92ZXNXaXRoTWVkaXVtQ29uZmlkZW5jZShkZXNrKSlcbiAgbW92ZXMucHVzaCguLi5nZXRNb3Zlc1dpdGhMb3dDb25maWRlbmNlKGRlc2spKVxuICBtb3Zlcy5wdXNoKC4uLmdldE1vdmVzV2l0aFZlcnlMb3dDb25maWRlbmNlKGRlc2ssIHN0b2NrUGxheWFibGVDYXJkcywgdG9wRm91bmRhdGlvbkNhcmRzLCBydWxlcykpXG4gIG1vdmVzLnB1c2goLi4uZ2V0TW92ZXNXaXRoTWluaXNjdWxlQ29uZmlkZW5jZShkZXNrLCBydWxlcywgc3RvY2tQbGF5YWJsZUNhcmRzLCB0b3BGb3VuZGF0aW9uQ2FyZHMpKVxuXG4gIHJldHVybiBmaWx0ZXJGb3VuZGF0aW9uVG9UYWJsZWF1SGludHMoZmlsdGVyRHVwbGljYXRlSGludHMobW92ZXMpKVxufVxuXG5mdW5jdGlvbiBmaWx0ZXJGb3VuZGF0aW9uVG9UYWJsZWF1SGludHMoaGludHM6IE1vdmVIaW50W10pOiBNb3ZlSGludFtdIHtcbiAgY29uc3QgaGludHNXaXRob3V0VHJhbnNmZXJzRnJvbUZvdW5kYXRpb24gPSBoaW50cy5maWx0ZXIoKFttb3ZlXSkgPT4gbW92ZS5tb3ZlICE9PSBNb3ZlVHlwZS5GT1VOREFUSU9OX1RPX1RBQkxFQVUpXG4gIGlmIChoaW50c1dpdGhvdXRUcmFuc2ZlcnNGcm9tRm91bmRhdGlvbi5sZW5ndGggJiYgaGludHNXaXRob3V0VHJhbnNmZXJzRnJvbUZvdW5kYXRpb24ubGVuZ3RoICE9PSBoaW50cy5sZW5ndGgpIHtcbiAgICByZXR1cm4gaGludHNXaXRob3V0VHJhbnNmZXJzRnJvbUZvdW5kYXRpb25cbiAgfVxuXG4gIHJldHVybiBoaW50c1xufVxuXG5mdW5jdGlvbiBmaWx0ZXJEdXBsaWNhdGVIaW50cyhoaW50czogTW92ZUhpbnRbXSk6IE1vdmVIaW50W10ge1xuICBjb25zdCBmaWx0ZXJlZEhpbnRzOiBNb3ZlSGludFtdID0gW11cblxuICBmb3IgKGNvbnN0IGhpbnQgb2YgaGludHMpIHtcbiAgICBjb25zdCBpc0hpbnRBbHJlYWR5UHJlc2VudCA9IGZpbHRlcmVkSGludHMuc29tZSgob3RoZXJIaW50KSA9PlxuICAgICAgYXJlT2JqZWN0c1NoYWxsb3dseUVxdWFsKGhpbnRbMF0sIG90aGVySGludFswXSkgJiZcbiAgICAgIGhpbnRbMV0gPT09IG90aGVySGludFsxXSxcbiAgICApXG4gICAgaWYgKCFpc0hpbnRBbHJlYWR5UHJlc2VudCkge1xuICAgICAgZmlsdGVyZWRIaW50cy5wdXNoKGhpbnQpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZpbHRlcmVkSGludHNcblxuICBmdW5jdGlvbiBhcmVPYmplY3RzU2hhbGxvd2x5RXF1YWw8VD4ob2JqZWN0MTogVCwgb2JqZWN0MjogVCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGtleXMxID0gT2JqZWN0LmtleXMob2JqZWN0MSkgYXMgQXJyYXk8a2V5b2YgVD5cbiAgICBjb25zdCBrZXlzMiA9IE9iamVjdC5rZXlzKG9iamVjdDIpXG4gICAgaWYgKGtleXMxLmxlbmd0aCAhPT0ga2V5czIubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICByZXR1cm4ga2V5czEuZXZlcnkoKGtleSkgPT4gb2JqZWN0MVtrZXldID09PSBvYmplY3QyW2tleV0pXG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0TW92ZXNXaXRoQWJzb2x1dGVDb25maWRlbmNlKFxuICBkZXNrOiBJRGVzayxcbiAgc3RvY2tQbGF5YWJsZUNhcmRzOiBJQ2FyZFtdLFxuICB0b3BUYWJsZWF1Q2FyZHM6IElDYXJkW10sXG4gIHRvcEZvdW5kYXRpb25DYXJkczoge1xuICAgIFtDb2xvci5ESUFNT05EU106IG51bGwgfCBJQ2FyZCxcbiAgICBbQ29sb3IuSEVBUlRIU106IG51bGwgfCBJQ2FyZCxcbiAgICBbQ29sb3IuQ0xVQlNdOiBudWxsIHwgSUNhcmQsXG4gICAgW0NvbG9yLlNQQURFU106IG51bGwgfCBJQ2FyZCxcbiAgfSxcbik6IE1vdmVIaW50W10ge1xuICBjb25zdCB7dGFibGVhdX0gPSBkZXNrXG4gIGNvbnN0IG1vdmVzOiBNb3ZlSGludFtdID0gW11cblxuICAvLyBSZXZlYWxpbmcgYSBjYXJkXG4gIGNvbnN0IGNhcmRUb1JldmVhbCA9IHRvcFRhYmxlYXVDYXJkcy5maW5kKChjYXJkKSA9PiBjYXJkLnNpZGUgPT09IFNpZGUuQkFDSylcbiAgaWYgKGNhcmRUb1JldmVhbCkge1xuICAgIG1vdmVzLnB1c2goW1xuICAgICAge1xuICAgICAgICBtb3ZlOiBNb3ZlVHlwZS5SRVZFQUxfVEFCTEVBVV9DQVJELFxuICAgICAgICBwaWxlSW5kZXg6IGdldFBpbGVJbmRleCh0YWJsZWF1LCBjYXJkVG9SZXZlYWwpLFxuICAgICAgfSxcbiAgICAgIGNhcmRUb1JldmVhbCxcbiAgICAgIE1vdmVDb25maWRlbmNlLkFCU09MVVRFLFxuICAgIF0pXG4gIH1cblxuICAvLyBBY2UgdG8gZm91bmRhdGlvblxuICBmb3IgKGNvbnN0IGNhcmQgb2YgdG9wVGFibGVhdUNhcmRzKSB7XG4gICAgaWYgKGNhcmQuc2lkZSA9PT0gU2lkZS5GQUNFICYmIGNhcmQucmFuayA9PT0gUmFuay5BQ0UpIHtcbiAgICAgIG1vdmVzLnB1c2goW1xuICAgICAgICB7XG4gICAgICAgICAgbW92ZTogTW92ZVR5cGUuVEFCTEVBVV9UT19GT1VOREFUSU9OLFxuICAgICAgICAgIHBpbGVJbmRleDogZ2V0UGlsZUluZGV4KHRhYmxlYXUsIGNhcmQpLFxuICAgICAgICB9LFxuICAgICAgICBjYXJkLFxuICAgICAgICBNb3ZlQ29uZmlkZW5jZS5BQlNPTFVURSxcbiAgICAgIF0pXG4gICAgfVxuICB9XG4gIGZvciAoY29uc3QgY2FyZCBvZiBzdG9ja1BsYXlhYmxlQ2FyZHMpIHtcbiAgICBpZiAoY2FyZC5yYW5rID09PSBSYW5rLkFDRSkge1xuICAgICAgbW92ZXMucHVzaChbXG4gICAgICAgIHtcbiAgICAgICAgICBtb3ZlOiBNb3ZlVHlwZS5XQVNURV9UT19GT1VOREFUSU9OLFxuICAgICAgICB9LFxuICAgICAgICBjYXJkLFxuICAgICAgICBNb3ZlQ29uZmlkZW5jZS5BQlNPTFVURSxcbiAgICAgIF0pXG4gICAgfVxuICB9XG5cbiAgLy8gVHdvIHRvIGZvdW5kYXRpb25cbiAgZm9yIChjb25zdCBjYXJkIG9mIHRvcFRhYmxlYXVDYXJkcykge1xuICAgIGlmIChjYXJkLnNpZGUgPT09IFNpZGUuRkFDRSAmJiBjYXJkLnJhbmsgPT09IFJhbmsuVFdPICYmIHRvcEZvdW5kYXRpb25DYXJkc1tjYXJkLmNvbG9yXT8ucmFuayA9PT0gUmFuay5BQ0UpIHtcbiAgICAgIG1vdmVzLnB1c2goW1xuICAgICAgICB7XG4gICAgICAgICAgbW92ZTogTW92ZVR5cGUuVEFCTEVBVV9UT19GT1VOREFUSU9OLFxuICAgICAgICAgIHBpbGVJbmRleDogZ2V0UGlsZUluZGV4KHRhYmxlYXUsIGNhcmQpLFxuICAgICAgICB9LFxuICAgICAgICBjYXJkLFxuICAgICAgICBNb3ZlQ29uZmlkZW5jZS5BQlNPTFVURSxcbiAgICAgIF0pXG4gICAgfVxuICB9XG4gIGZvciAoY29uc3QgY2FyZCBvZiBzdG9ja1BsYXlhYmxlQ2FyZHMpIHtcbiAgICBpZiAoY2FyZC5yYW5rID09PSBSYW5rLlRXTyAmJiB0b3BGb3VuZGF0aW9uQ2FyZHNbY2FyZC5jb2xvcl0/LnJhbmsgPT09IFJhbmsuQUNFKSB7XG4gICAgICBtb3Zlcy5wdXNoKFtcbiAgICAgICAge1xuICAgICAgICAgIG1vdmU6IE1vdmVUeXBlLldBU1RFX1RPX0ZPVU5EQVRJT04sXG4gICAgICAgIH0sXG4gICAgICAgIGNhcmQsXG4gICAgICAgIE1vdmVDb25maWRlbmNlLkFCU09MVVRFLFxuICAgICAgXSlcbiAgICB9XG4gIH1cblxuICAvLyBGaW5pc2hpbmcgdGhlIGdhbWVcbiAgaWYgKGlzVmljdG9yeUd1YXJhbnRlZWQoZGVzaykpIHtcbiAgICBmb3IgKGNvbnN0IGNhcmQgb2YgdG9wVGFibGVhdUNhcmRzKSB7XG4gICAgICBjb25zdCB0b3BGb3VuZGF0aW9uQ2FyZCA9IHRvcEZvdW5kYXRpb25DYXJkc1tjYXJkLmNvbG9yXVxuICAgICAgaWYgKHRvcEZvdW5kYXRpb25DYXJkICYmIGlzVmFsaWRGb3VuZGF0aW9uU2VxdWVuY2UodG9wRm91bmRhdGlvbkNhcmQsIGNhcmQpKSB7XG4gICAgICAgIG1vdmVzLnB1c2goW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1vdmU6IE1vdmVUeXBlLlRBQkxFQVVfVE9fRk9VTkRBVElPTixcbiAgICAgICAgICAgIHBpbGVJbmRleDogZ2V0UGlsZUluZGV4KHRhYmxlYXUsIGNhcmQpLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgY2FyZCxcbiAgICAgICAgICBNb3ZlQ29uZmlkZW5jZS5BQlNPTFVURSxcbiAgICAgICAgXSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbW92ZXNcbn1cblxuZnVuY3Rpb24gZ2V0TW92ZXNXaXRoVmVyeUhpZ2hDb25maWRlbmNlKFxuICBkZXNrOiBJRGVzayxcbiAgc3RvY2tQbGF5YWJsZUNhcmRzOiBJQ2FyZFtdLFxuKTogTW92ZUhpbnRbXSB7XG4gIGNvbnN0IHt0YWJsZWF1fSA9IGRlc2tcbiAgY29uc3QgbW92ZXM6IE1vdmVIaW50W10gPSBbXVxuXG4gIC8vIFRhYmxlYXUgdG8gdGFibGVhdSB0cmFuc2ZlciB0aGF0IGFsbG93cyByZXZlYWxpbmcgYSBjYXJkLCBzb3VyY2UgaXMgbm90IDUsIDYsIDcgb3IgOCBhbmQgdGFyZ2V0IHBpbGUgaXMgbm90IGVtcHR5XG4gIGNvbnN0IHBpbGVzRnJvbUxhcmdlc3RUb1NtYWxsZXN0ID0gdGFibGVhdS5waWxlcy5zbGljZSgpLnNvcnQoXG4gICAgKHBpbGUxLCBwaWxlMikgPT4gcGlsZTIuY2FyZHMubGVuZ3RoIC0gcGlsZTEuY2FyZHMubGVuZ3RoLFxuICApXG4gIGZvciAoY29uc3QgcGlsZSBvZiBwaWxlc0Zyb21MYXJnZXN0VG9TbWFsbGVzdCkge1xuICAgIGNvbnN0IG1vc3RCb3R0b21SZXZlYWxlZENhcmRJbmRleCA9IHBpbGUuY2FyZHMuZmluZEluZGV4KChjYXJkKSA9PiBjYXJkLnNpZGUgPT09IFNpZGUuRkFDRSlcbiAgICBjb25zdCBzb3VyY2VDYXJkID0gcGlsZS5jYXJkc1ttb3N0Qm90dG9tUmV2ZWFsZWRDYXJkSW5kZXhdXG4gICAgaWYgKFxuICAgICAgbW9zdEJvdHRvbVJldmVhbGVkQ2FyZEluZGV4IDwgMSB8fFxuICAgICAgW1JhbmsuRklWRSwgUmFuay5TSVgsIFJhbmsuU0VWRU4sIFJhbmsuRUlHSFRdLmluY2x1ZGVzKHNvdXJjZUNhcmQucmFuaylcbiAgICApIHtcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuICAgIGNvbnN0IHRhcmdldFBpbGVJbmRleCA9IHRhYmxlYXUucGlsZXMuZmluZEluZGV4KCh0YXJnZXRQaWxlKSA9PiAoXG4gICAgICB0YXJnZXRQaWxlLmNhcmRzLmxlbmd0aCAmJlxuICAgICAgbGFzdEl0ZW0odGFyZ2V0UGlsZS5jYXJkcykuc2lkZSA9PT0gU2lkZS5GQUNFICYmXG4gICAgICBpc1ZhbGlkVGFibGVhdVNlcXVlbmNlKGxhc3RJdGVtKHRhcmdldFBpbGUuY2FyZHMpLCBzb3VyY2VDYXJkKVxuICAgICkpXG4gICAgaWYgKHRhcmdldFBpbGVJbmRleCA+IC0xKSB7XG4gICAgICBtb3Zlcy5wdXNoKFtcbiAgICAgICAge1xuICAgICAgICAgIG1vdmU6IE1vdmVUeXBlLlRBQkxFQVVfVE9fVEFCTEVBVSxcbiAgICAgICAgICBzb3VyY2VQaWxlSW5kZXg6IGdldFBpbGVJbmRleCh0YWJsZWF1LCBzb3VyY2VDYXJkKSxcbiAgICAgICAgICB0YXJnZXRQaWxlSW5kZXgsXG4gICAgICAgICAgdG9wTW92ZWRDYXJkSW5kZXg6IG1vc3RCb3R0b21SZXZlYWxlZENhcmRJbmRleCxcbiAgICAgICAgfSxcbiAgICAgICAgc291cmNlQ2FyZCxcbiAgICAgICAgTW92ZUNvbmZpZGVuY2UuVkVSWV9ISUdILFxuICAgICAgXSlcbiAgICB9XG4gIH1cblxuICAvLyBLaW5nIHRvIGVtcHR5IHRhYmxlYXUgcGlsZSB0cmFuc2ZlciB0aGF0IGFsbG93cyB0cmFuc2ZlciB0byB0aGUga2luZydzIG5ldyBwaWxlIHRoYXQgd2lsbCByZXZlYWwgYSBuZXcgY2FyZFxuICBjb25zdCBhdmFpbGFibGVLaW5ncyA9IHRhYmxlYXUucGlsZXNcbiAgICAvLyBpZiB0aGUga2luZyBpcyB0aGUgdG9wIGNhcmQgaW4gdGhlIHBpbGUsIHRoZXJlIGlzIG5vIHBvaW50IGluIG1ha2luZyB0aGUgdHJhbnNmZXJcbiAgICAuZmlsdGVyKChwaWxlKSA9PiBwaWxlLmNhcmRzLmxlbmd0aCA+IDEgJiYgKHBpbGUuY2FyZHNbMF0uc2lkZSA9PT0gU2lkZS5CQUNLIHx8IHBpbGUuY2FyZHNbMF0ucmFuayAhPT0gUmFuay5LSU5HKSlcbiAgICAubWFwKChwaWxlKSA9PiBwaWxlLmNhcmRzLmZpbmQoKGNhcmQpID0+IGNhcmQucmFuayA9PT0gUmFuay5LSU5HICYmIGNhcmQuc2lkZSA9PT0gU2lkZS5GQUNFKSlcbiAgICAuZmlsdGVyKChjYXJkT3JVbmRlZmluZWQpID0+ICEhY2FyZE9yVW5kZWZpbmVkKS5tYXAoKGNhcmQpID0+IGNhcmQgYXMgSUNhcmQpXG4gICAgLy8gdGFibGVhdSBjYXJkcyBhcmUgcHJlZmVycmVkLCBzbyB3ZSdsbCBwdXQgdGhlIHN0b2NrIGNhcmRzIGF0IHRoZSBlbmQgb2YgdGhlIGxpc3RcbiAgICAuY29uY2F0KHN0b2NrUGxheWFibGVDYXJkcy5maWx0ZXIoKGNhcmQpID0+IGNhcmQucmFuayA9PT0gUmFuay5LSU5HKSlcbiAgY29uc3QgZW1wdHlQaWxlSW5kZXggPSB0YWJsZWF1LnBpbGVzLmZpbmRJbmRleCgocGlsZSkgPT4gIXBpbGUuY2FyZHMubGVuZ3RoKVxuICBpZiAoYXZhaWxhYmxlS2luZ3MubGVuZ3RoICYmIGVtcHR5UGlsZUluZGV4ID4gLTEpIHtcbiAgICBmb3IgKGNvbnN0IGtpbmcgb2YgYXZhaWxhYmxlS2luZ3MpIHtcbiAgICAgIGNvbnN0IGtpbmdTZXF1ZW5jZUVuZCA9IHN0b2NrUGxheWFibGVDYXJkcy5pbmNsdWRlcyhraW5nKSA/XG4gICAgICAgIGtpbmdcbiAgICAgIDpcbiAgICAgICAgbGFzdEl0ZW0odGFibGVhdS5waWxlc1tnZXRQaWxlSW5kZXgodGFibGVhdSwga2luZyldLmNhcmRzKVxuICAgICAgY29uc3QgaXNCZW5lZmljaWFsVHJhbnNmZXJUb0tpbmdTZXF1ZW5jZVBvc3NpYmxlID0gdGFibGVhdS5waWxlcy5maW5kKChwaWxlKSA9PiB7XG4gICAgICAgIGNvbnN0IHZpc2libGVDYXJkcyA9IHBpbGUuY2FyZHMuZmlsdGVyKChjYXJkKSA9PiBjYXJkLnNpZGUgPT09IFNpZGUuRkFDRSlcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBwaWxlLmNhcmRzLmxlbmd0aCA+IHZpc2libGVDYXJkcy5sZW5ndGggJiZcbiAgICAgICAgICB2aXNpYmxlQ2FyZHMubGVuZ3RoICYmXG4gICAgICAgICAgaXNWYWxpZFRhYmxlYXVTZXF1ZW5jZShraW5nU2VxdWVuY2VFbmQsIHZpc2libGVDYXJkc1swXSlcbiAgICAgICAgKVxuICAgICAgfSlcbiAgICAgIGlmIChpc0JlbmVmaWNpYWxUcmFuc2ZlclRvS2luZ1NlcXVlbmNlUG9zc2libGUpIHtcbiAgICAgICAgY29uc3Qgc291cmNlUGlsZUluZGV4ID0gZ2V0UGlsZUluZGV4KHRhYmxlYXUsIGtpbmcpXG4gICAgICAgIG1vdmVzLnB1c2goW1xuICAgICAgICAgIHN0b2NrUGxheWFibGVDYXJkcy5pbmNsdWRlcyhraW5nKSA/XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIG1vdmU6IE1vdmVUeXBlLldBU1RFX1RPX1RBQkxFQVUsXG4gICAgICAgICAgICAgIHBpbGVJbmRleDogZW1wdHlQaWxlSW5kZXgsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBtb3ZlOiBNb3ZlVHlwZS5UQUJMRUFVX1RPX1RBQkxFQVUsXG4gICAgICAgICAgICAgIHNvdXJjZVBpbGVJbmRleCxcbiAgICAgICAgICAgICAgdGFyZ2V0UGlsZUluZGV4OiBlbXB0eVBpbGVJbmRleCxcbiAgICAgICAgICAgICAgdG9wTW92ZWRDYXJkSW5kZXg6IHRhYmxlYXUucGlsZXNbc291cmNlUGlsZUluZGV4XS5jYXJkcy5pbmRleE9mKGtpbmcpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBraW5nLFxuICAgICAgICAgIE1vdmVDb25maWRlbmNlLlZFUllfSElHSCxcbiAgICAgICAgXSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbW92ZXNcbn1cblxuZnVuY3Rpb24gZ2V0TW92ZXNXaXRoSGlnaENvbmZpZGVuY2UoZGVzazogSURlc2ssIHN0b2NrUGxheWFibGVDYXJkczogSUNhcmRbXSk6IE1vdmVIaW50W10ge1xuICBjb25zdCBtb3ZlczogTW92ZUhpbnRbXSA9IFtdXG4gIGNvbnN0IHt0YWJsZWF1fSA9IGRlc2tcblxuICAvLyBLaW5nIHRvIGFuIGVtcHR5IHRhYmxlYXUgcGlsZSB0cmFuc2ZlciB0aGF0IGFsbG93cyBtb3ZpbmcgdGhlIGxhcmdlc3QgYnVpbHQgc2VxdWVuY2UgdG8gdGhlIGtpbmcncyBwaWxlXG4gIGNvbnN0IGF2YWlsYWJsZUtpbmdzID0gdGFibGVhdS5waWxlc1xuICAgIC8vIGlmIHRoZSBraW5nIGlzIHRoZSB0b3AgY2FyZCBpbiB0aGUgcGlsZSwgdGhlcmUgaXMgbm8gcG9pbnQgaW4gbWFraW5nIHRoZSB0cmFuc2ZlclxuICAgIC5maWx0ZXIoKHBpbGUpID0+IHBpbGUuY2FyZHMubGVuZ3RoID4gMSAmJiAocGlsZS5jYXJkc1swXS5zaWRlID09PSBTaWRlLkJBQ0sgfHwgcGlsZS5jYXJkc1swXS5yYW5rICE9PSBSYW5rLktJTkcpKVxuICAgIC5tYXAoKHBpbGUpID0+IHBpbGUuY2FyZHMuZmluZCgoY2FyZCkgPT4gY2FyZC5yYW5rID09PSBSYW5rLktJTkcgJiYgY2FyZC5zaWRlID09PSBTaWRlLkZBQ0UpKVxuICAgIC5maWx0ZXIoKGNhcmRPclVuZGVmaW5lZCkgPT4gISFjYXJkT3JVbmRlZmluZWQpLm1hcCgoY2FyZCkgPT4gY2FyZCBhcyBJQ2FyZClcbiAgICAvLyB0YWJsZWF1IGNhcmRzIGFyZSBwcmVmZXJyZWQsIHNvIHdlJ2xsIHB1dCB0aGUgc3RvY2sgY2FyZHMgYXQgdGhlIGVuZCBvZiB0aGUgbGlzdFxuICAgIC5jb25jYXQoc3RvY2tQbGF5YWJsZUNhcmRzLmZpbHRlcigoY2FyZCkgPT4gY2FyZC5yYW5rID09PSBSYW5rLktJTkcpKVxuICBjb25zdCBlbXB0eVBpbGVJbmRleCA9IHRhYmxlYXUucGlsZXMuZmluZEluZGV4KChwaWxlKSA9PiAhcGlsZS5jYXJkcy5sZW5ndGgpXG4gIGlmIChhdmFpbGFibGVLaW5ncy5sZW5ndGggJiYgZW1wdHlQaWxlSW5kZXggPiAtMSkge1xuICAgIGZvciAoY29uc3Qga2luZyBvZiBhdmFpbGFibGVLaW5ncykge1xuICAgICAgY29uc3Qga2luZ1NlcXVlbmNlRW5kID0gc3RvY2tQbGF5YWJsZUNhcmRzLmluY2x1ZGVzKGtpbmcpID9cbiAgICAgICAga2luZ1xuICAgICAgOlxuICAgICAgICBsYXN0SXRlbSh0YWJsZWF1LnBpbGVzW2dldFBpbGVJbmRleCh0YWJsZWF1LCBraW5nKV0uY2FyZHMpXG4gICAgICBjb25zdCBsYXJnZXN0U2VxdWVuY2VzID0gdGFibGVhdS5waWxlc1xuICAgICAgICAubWFwKChwaWxlKSA9PiBwaWxlLmNhcmRzLmZpbHRlcigoY2FyZCkgPT4gY2FyZC5zaWRlID09PSBTaWRlLkZBQ0UpKVxuICAgICAgICAuZmlsdGVyKChwaWxlQ2FyZHMpID0+IHBpbGVDYXJkcy5sZW5ndGgpXG4gICAgICAgIC5tYXAoKHBpbGVDYXJkcywgXywgcGlsZXMpID0+IFtwaWxlQ2FyZHMsIE1hdGgubWF4KC4uLnBpbGVzLm1hcCgocGlsZSkgPT4gcGlsZS5sZW5ndGgpKV0gYXMgW0lDYXJkW10sIG51bWJlcl0pXG4gICAgICAgIC5maWx0ZXIoKFtwaWxlQ2FyZHMsIGxhcmdlc3RTZXF1ZW5jZUxlbmd0aF0pID0+IHBpbGVDYXJkcy5sZW5ndGggPT09IGxhcmdlc3RTZXF1ZW5jZUxlbmd0aClcbiAgICAgICAgLm1hcCgoW3BpbGVDYXJkc10pID0+IHBpbGVDYXJkcylcbiAgICAgIGNvbnN0IGlzQmVuZWZpY2lhbFRyYW5zZmVyVG9LaW5nU2VxdWVuY2VQb3NzaWJsZSA9IGxhcmdlc3RTZXF1ZW5jZXMuZmluZChcbiAgICAgICAgKGNhcmRTZXF1ZW5jZSkgPT4gaXNWYWxpZFRhYmxlYXVTZXF1ZW5jZShraW5nU2VxdWVuY2VFbmQsIGNhcmRTZXF1ZW5jZVswXSksXG4gICAgICApXG4gICAgICBpZiAoaXNCZW5lZmljaWFsVHJhbnNmZXJUb0tpbmdTZXF1ZW5jZVBvc3NpYmxlKSB7XG4gICAgICAgIGNvbnN0IHNvdXJjZVBpbGVJbmRleCA9IGdldFBpbGVJbmRleCh0YWJsZWF1LCBraW5nKVxuICAgICAgICBtb3Zlcy5wdXNoKFtcbiAgICAgICAgICBzdG9ja1BsYXlhYmxlQ2FyZHMuaW5jbHVkZXMoa2luZykgP1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBtb3ZlOiBNb3ZlVHlwZS5XQVNURV9UT19UQUJMRUFVLFxuICAgICAgICAgICAgICBwaWxlSW5kZXg6IGVtcHR5UGlsZUluZGV4LFxuICAgICAgICAgICAgfVxuICAgICAgICAgIDpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbW92ZTogTW92ZVR5cGUuVEFCTEVBVV9UT19UQUJMRUFVLFxuICAgICAgICAgICAgICBzb3VyY2VQaWxlSW5kZXgsXG4gICAgICAgICAgICAgIHRhcmdldFBpbGVJbmRleDogZW1wdHlQaWxlSW5kZXgsXG4gICAgICAgICAgICAgIHRvcE1vdmVkQ2FyZEluZGV4OiB0YWJsZWF1LnBpbGVzW3NvdXJjZVBpbGVJbmRleF0uY2FyZHMuaW5kZXhPZihraW5nKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAga2luZyxcbiAgICAgICAgICBNb3ZlQ29uZmlkZW5jZS5ISUdILFxuICAgICAgICBdKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtb3Zlc1xufVxuXG5mdW5jdGlvbiBnZXRNb3Zlc1dpdGhNZWRpdW1Db25maWRlbmNlKGRlc2s6IElEZXNrKTogTW92ZUhpbnRbXSB7XG4gIGNvbnN0IG1vdmVzOiBNb3ZlSGludFtdID0gW11cbiAgY29uc3Qge3RhYmxlYXV9ID0gZGVza1xuXG4gIC8vIE1vdmluZyBhIDUsIDYsIDcgb3IgOCBmcm9tIGEgdGFibGVhdSBwaWxlIHRoYXQgKHByb2JhYmx5KSBoYXMgbm90IGJlZW4gdG91Y2hlZCB5ZXQgYW5kIHdpbGwgcmV2ZWFsIGEgY2FyZCB0b1xuICAvLyBhbm90aGVyIHRhYmxlYXUgcGlsZVxuICBjb25zdCBjYW5kaWRhdGVDYXJkcyA9IHRhYmxlYXUucGlsZXNcbiAgICAuZmlsdGVyKChwaWxlKSA9PiBwaWxlLmNhcmRzLmxlbmd0aCA+IDEpXG4gICAgLmZpbHRlcigocGlsZSkgPT4gcGlsZS5jYXJkcy5maWx0ZXIoKGNhcmQpID0+IGNhcmQuc2lkZSA9PT0gU2lkZS5GQUNFKS5sZW5ndGggPT09IDEpXG4gICAgLm1hcCgocGlsZSkgPT4gbGFzdEl0ZW0ocGlsZS5jYXJkcykpXG4gICAgLmZpbHRlcigoY2FyZCkgPT4gW1JhbmsuRklWRSwgUmFuay5TSVgsIFJhbmsuU0VWRU4sIFJhbmsuRUlHSFRdLmluY2x1ZGVzKGNhcmQucmFuaykpXG4gIGZvciAoY29uc3QgY2FuZGlkYXRlQ2FyZCBvZiBjYW5kaWRhdGVDYXJkcykge1xuICAgIGNvbnN0IHNvdXJjZVBpbGVJbmRleCA9IGdldFBpbGVJbmRleCh0YWJsZWF1LCBjYW5kaWRhdGVDYXJkKVxuICAgIGNvbnN0IGNhbmRpZGF0ZVRhcmdldHMgPSB0YWJsZWF1LnBpbGVzLmZpbHRlcigocGlsZSkgPT5cbiAgICAgIHBpbGUuY2FyZHMubGVuZ3RoICYmXG4gICAgICBsYXN0SXRlbShwaWxlLmNhcmRzKS5zaWRlID09PSBTaWRlLkZBQ0UgJiZcbiAgICAgIGlzVmFsaWRUYWJsZWF1U2VxdWVuY2UobGFzdEl0ZW0ocGlsZS5jYXJkcyksIGNhbmRpZGF0ZUNhcmQpLFxuICAgIClcbiAgICBmb3IgKGNvbnN0IGNhbmRpZGF0ZVRhcmdldCBvZiBjYW5kaWRhdGVUYXJnZXRzKSB7XG4gICAgICBtb3Zlcy5wdXNoKFtcbiAgICAgICAge1xuICAgICAgICAgIG1vdmU6IE1vdmVUeXBlLlRBQkxFQVVfVE9fVEFCTEVBVSxcbiAgICAgICAgICBzb3VyY2VQaWxlSW5kZXgsXG4gICAgICAgICAgdGFyZ2V0UGlsZUluZGV4OiB0YWJsZWF1LnBpbGVzLmluZGV4T2YoY2FuZGlkYXRlVGFyZ2V0KSxcbiAgICAgICAgICB0b3BNb3ZlZENhcmRJbmRleDogdGFibGVhdS5waWxlc1tzb3VyY2VQaWxlSW5kZXhdLmNhcmRzLmluZGV4T2YoY2FuZGlkYXRlQ2FyZCksXG4gICAgICAgIH0sXG4gICAgICAgIGNhbmRpZGF0ZUNhcmQsXG4gICAgICAgIE1vdmVDb25maWRlbmNlLk1FRElVTSxcbiAgICAgIF0pXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG1vdmVzXG59XG5cbmZ1bmN0aW9uIGdldE1vdmVzV2l0aExvd0NvbmZpZGVuY2UoZGVzazogSURlc2spOiBNb3ZlSGludFtdIHtcbiAgY29uc3QgbW92ZXM6IE1vdmVIaW50W10gPSBbXVxuICBjb25zdCB7dGFibGVhdX0gPSBkZXNrXG5cbiAgLy8gTWFraW5nIGEgdHJhbnNmZXIgZnJvbSB0YWJsZWF1IHBpbGUgdG8gYSBub24tZW1wdHkgdGFibGVhdSBwaWxlIHRoYXQgd2lsbCByZXZlYWwgYSBjYXJkXG4gIGNvbnN0IHBpbGVzT2ZWaXNpYmxlQ2FyZHMgPSB0YWJsZWF1LnBpbGVzLm1hcChcbiAgICAocGlsZSkgPT4gcGlsZS5jYXJkcy5maWx0ZXIoKGNhcmQpID0+IGNhcmQuc2lkZSA9PT0gU2lkZS5GQUNFKSxcbiAgKS5maWx0ZXIoXG4gICAgKHBpbGUpID0+IHBpbGUubGVuZ3RoLFxuICApXG4gIGNvbnN0IGNhbmRpZGF0ZVNvdXJjZVBpbGVzID0gcGlsZXNPZlZpc2libGVDYXJkcy5maWx0ZXIoXG4gICAgKHBpbGUpID0+IHRhYmxlYXUucGlsZXNbZ2V0UGlsZUluZGV4KHRhYmxlYXUsIHBpbGVbMF0pXS5jYXJkc1swXS5zaWRlID09PSBTaWRlLkJBQ0ssXG4gIClcbiAgZm9yIChjb25zdCBwaWxlIG9mIGNhbmRpZGF0ZVNvdXJjZVBpbGVzKSB7XG4gICAgY29uc3QgdG9wU291cmNlQ2FyZCA9IHBpbGVbMF1cbiAgICBmb3IgKGNvbnN0IG90aGVyUGlsZSBvZiBwaWxlc09mVmlzaWJsZUNhcmRzKSB7XG4gICAgICBjb25zdCBib3R0b21UYXJnZXRDYXJkID0gbGFzdEl0ZW0ob3RoZXJQaWxlKVxuICAgICAgaWYgKGlzVmFsaWRUYWJsZWF1U2VxdWVuY2UoYm90dG9tVGFyZ2V0Q2FyZCwgdG9wU291cmNlQ2FyZCkpIHtcbiAgICAgICAgY29uc3Qgc291cmNlUGlsZUluZGV4ID0gZ2V0UGlsZUluZGV4KHRhYmxlYXUsIHRvcFNvdXJjZUNhcmQpXG4gICAgICAgIG1vdmVzLnB1c2goW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1vdmU6IE1vdmVUeXBlLlRBQkxFQVVfVE9fVEFCTEVBVSxcbiAgICAgICAgICAgIHNvdXJjZVBpbGVJbmRleCxcbiAgICAgICAgICAgIHRhcmdldFBpbGVJbmRleDogZ2V0UGlsZUluZGV4KHRhYmxlYXUsIGJvdHRvbVRhcmdldENhcmQpLFxuICAgICAgICAgICAgdG9wTW92ZWRDYXJkSW5kZXg6IHRhYmxlYXUucGlsZXNbc291cmNlUGlsZUluZGV4XS5jYXJkcy5pbmRleE9mKHRvcFNvdXJjZUNhcmQpLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdG9wU291cmNlQ2FyZCxcbiAgICAgICAgICBNb3ZlQ29uZmlkZW5jZS5MT1csXG4gICAgICAgIF0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gVGFibGVhdSB0byB0YWJsZWF1IHRyYW5zZmVycyB0aGF0IGxlYXZlcyB0aGUgc291cmNlIHBpbGUgZW1wdHksIGJ1dCB0aGVyZSBpcyBhIGtpbmcgdGhhdCBjYW4gYmUgdHJhbnNmZXJyZWQgdGhlcmVcbiAgY29uc3QgcGlsZXNPZk9ubHlWaXNpYmxlQ2FyZHMgPSB0YWJsZWF1LnBpbGVzLmZpbHRlcihcbiAgICAocGlsZSkgPT4gcGlsZS5jYXJkcy5sZW5ndGggJiYgcGlsZS5jYXJkcy5ldmVyeSgoY2FyZCkgPT4gY2FyZC5zaWRlID09PSBTaWRlLkZBQ0UpLFxuICApXG4gIGNvbnN0IHBpbGVzV2l0aEtpbmcgPSB0YWJsZWF1LnBpbGVzLmZpbHRlcihcbiAgICAocGlsZSkgPT4gcGlsZS5jYXJkcy5zb21lKChjYXJkKSA9PiBjYXJkLnNpZGUgPT09IFNpZGUuRkFDRSAmJiBjYXJkLnJhbmsgPT09IFJhbmsuS0lORyksXG4gIClcbiAgaWYgKHBpbGVzV2l0aEtpbmcubGVuZ3RoKSB7XG4gICAgZm9yIChjb25zdCBzb3VyY2VQaWxlIG9mIHBpbGVzT2ZPbmx5VmlzaWJsZUNhcmRzKSB7XG4gICAgICBjb25zdCB0b3BTb3VyY2VDYXJkID0gc291cmNlUGlsZS5jYXJkc1swXVxuICAgICAgZm9yIChjb25zdCBvdGhlclBpbGUgb2YgcGlsZXNPZlZpc2libGVDYXJkcykge1xuICAgICAgICBjb25zdCBib3R0b21UYXJnZXRDYXJkID0gbGFzdEl0ZW0ob3RoZXJQaWxlKVxuICAgICAgICBpZiAoaXNWYWxpZFRhYmxlYXVTZXF1ZW5jZShib3R0b21UYXJnZXRDYXJkLCB0b3BTb3VyY2VDYXJkKSkge1xuICAgICAgICAgIGNvbnN0IHNvdXJjZVBpbGVJbmRleCA9IGdldFBpbGVJbmRleCh0YWJsZWF1LCB0b3BTb3VyY2VDYXJkKVxuICAgICAgICAgIG1vdmVzLnB1c2goW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBtb3ZlOiBNb3ZlVHlwZS5UQUJMRUFVX1RPX1RBQkxFQVUsXG4gICAgICAgICAgICAgIHNvdXJjZVBpbGVJbmRleCxcbiAgICAgICAgICAgICAgdGFyZ2V0UGlsZUluZGV4OiBnZXRQaWxlSW5kZXgodGFibGVhdSwgYm90dG9tVGFyZ2V0Q2FyZCksXG4gICAgICAgICAgICAgIHRvcE1vdmVkQ2FyZEluZGV4OiB0YWJsZWF1LnBpbGVzW3NvdXJjZVBpbGVJbmRleF0uY2FyZHMuaW5kZXhPZih0b3BTb3VyY2VDYXJkKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0b3BTb3VyY2VDYXJkLFxuICAgICAgICAgICAgTW92ZUNvbmZpZGVuY2UuTE9XLFxuICAgICAgICAgIF0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbW92ZXNcbn1cblxuZnVuY3Rpb24gZ2V0TW92ZXNXaXRoVmVyeUxvd0NvbmZpZGVuY2UoXG4gIGRlc2s6IElEZXNrLFxuICBzdG9ja1BsYXlhYmxlQ2FyZHM6IElDYXJkW10sXG4gIHRvcEZvdW5kYXRpb25DYXJkczogSUZvdW5kYXRpb25Ub3AsXG4gIHJ1bGVzOiBJR2FtZVJ1bGVzLFxuKTogTW92ZUhpbnRbXSB7XG4gIGNvbnN0IG1vdmVzOiBNb3ZlSGludFtdID0gW11cbiAgY29uc3Qge3RhYmxlYXV9ID0gZGVza1xuICBjb25zdCBmaWx0ZXJlZFRvcEZvdW5kYXRpb25DYXJkczogSUNhcmRbXSA9IE9iamVjdC52YWx1ZXModG9wRm91bmRhdGlvbkNhcmRzKS5maWx0ZXIoKGNhcmQpID0+IGNhcmQpXG5cbiAgLy8gRm91bmRhdGlvbiB0byB0YWJsZWF1IHRyYW5zZmVyIHRoYXQgYWxsb3dzIHJldmVhbGluZyBhIGNhcmQgYnkgdGFibGVhdSB0byB0YWJsZWF1IHRyYW5zZmVyXG4gIGZvciAoY29uc3QgZm91bmRhdGlvbkNhcmQgb2YgZmlsdGVyZWRUb3BGb3VuZGF0aW9uQ2FyZHMpIHtcbiAgICBjb25zdCBpc1RoZXJlUGlsZVRyYW5zZmVyYWJsZVRvQ2FyZCA9IHRhYmxlYXUucGlsZXMuc29tZSgocGlsZSkgPT4ge1xuICAgICAgY29uc3QgaGlnaGVzdFZpc2libGVDYXJkID0gcGlsZS5jYXJkcy5maW5kKChjYXJkKSA9PiBjYXJkLnNpZGUgPT09IFNpZGUuRkFDRSlcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGhpZ2hlc3RWaXNpYmxlQ2FyZCAmJlxuICAgICAgICBwaWxlLmNhcmRzWzBdICE9PSBoaWdoZXN0VmlzaWJsZUNhcmQgJiZcbiAgICAgICAgaXNWYWxpZFRhYmxlYXVTZXF1ZW5jZShmb3VuZGF0aW9uQ2FyZCwgaGlnaGVzdFZpc2libGVDYXJkKVxuICAgICAgKVxuICAgIH0pXG4gICAgaWYgKCFpc1RoZXJlUGlsZVRyYW5zZmVyYWJsZVRvQ2FyZCkge1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBjb25zdCB0YXJnZXRQaWxlSW5kZXggPSB0YWJsZWF1LnBpbGVzLmZpbmRJbmRleCgocGlsZSkgPT4ge1xuICAgICAgY29uc3QgbGFzdENhcmQgPSBsYXN0SXRlbU9yTnVsbChwaWxlLmNhcmRzKVxuICAgICAgcmV0dXJuIGxhc3RDYXJkICYmIGxhc3RDYXJkLnNpZGUgPT09IFNpZGUuRkFDRSAmJiBpc1ZhbGlkVGFibGVhdVNlcXVlbmNlKGxhc3RDYXJkLCBmb3VuZGF0aW9uQ2FyZClcbiAgICB9KVxuICAgIGlmICh0YXJnZXRQaWxlSW5kZXggPiAtMSkge1xuICAgICAgbW92ZXMucHVzaChbXG4gICAgICAgIHtcbiAgICAgICAgICBjb2xvcjogZm91bmRhdGlvbkNhcmQuY29sb3IsXG4gICAgICAgICAgbW92ZTogTW92ZVR5cGUuRk9VTkRBVElPTl9UT19UQUJMRUFVLFxuICAgICAgICAgIHBpbGVJbmRleDogdGFyZ2V0UGlsZUluZGV4LFxuICAgICAgICB9LFxuICAgICAgICBmb3VuZGF0aW9uQ2FyZCxcbiAgICAgICAgTW92ZUNvbmZpZGVuY2UuVkVSWV9MT1csXG4gICAgICBdKVxuICAgIH1cbiAgfVxuXG4gIC8vIEZvdW5kYXRpb24gdG8gdGFibGVhdSB0cmFuc2ZlciB0aGF0IGFsbG93cyBhIHN0b2NrIHRvIHRhYmxlYXUgdHJhbnNmZXJcbiAgZm9yIChjb25zdCBmb3VuZGF0aW9uQ2FyZCBvZiBmaWx0ZXJlZFRvcEZvdW5kYXRpb25DYXJkcykge1xuICAgIGNvbnN0IGlzVGhlcmVNYXRjaGluZ1N0b2NrQ2FyZCA9IHN0b2NrUGxheWFibGVDYXJkcy5zb21lKChjYXJkKSA9PiBpc1ZhbGlkVGFibGVhdVNlcXVlbmNlKGZvdW5kYXRpb25DYXJkLCBjYXJkKSlcbiAgICBpZiAoIWlzVGhlcmVNYXRjaGluZ1N0b2NrQ2FyZCkge1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBjb25zdCB0YXJnZXRQaWxlSW5kZXggPSB0YWJsZWF1LnBpbGVzLmZpbmRJbmRleCgocGlsZSkgPT4ge1xuICAgICAgY29uc3QgbGFzdENhcmQgPSBsYXN0SXRlbU9yTnVsbChwaWxlLmNhcmRzKVxuICAgICAgcmV0dXJuIGxhc3RDYXJkICYmIGxhc3RDYXJkLnNpZGUgPT09IFNpZGUuRkFDRSAmJiBpc1ZhbGlkVGFibGVhdVNlcXVlbmNlKGxhc3RDYXJkLCBmb3VuZGF0aW9uQ2FyZClcbiAgICB9KVxuICAgIGlmICh0YXJnZXRQaWxlSW5kZXggPiAtMSkge1xuICAgICAgbW92ZXMucHVzaChbXG4gICAgICAgIHtcbiAgICAgICAgICBjb2xvcjogZm91bmRhdGlvbkNhcmQuY29sb3IsXG4gICAgICAgICAgbW92ZTogTW92ZVR5cGUuRk9VTkRBVElPTl9UT19UQUJMRUFVLFxuICAgICAgICAgIHBpbGVJbmRleDogdGFyZ2V0UGlsZUluZGV4LFxuICAgICAgICB9LFxuICAgICAgICBmb3VuZGF0aW9uQ2FyZCxcbiAgICAgICAgTW92ZUNvbmZpZGVuY2UuVkVSWV9MT1csXG4gICAgICBdKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGVtcHR5UGlsZUluZGV4ID0gdGFibGVhdS5waWxlcy5maW5kSW5kZXgoKGNhbmRpZGF0ZVBpbGUpID0+ICFjYW5kaWRhdGVQaWxlLmNhcmRzLmxlbmd0aClcblxuICAvLyBLaW5nIHRvIGVtcHR5IHBpbGUgdHJhbnNmZXIgdGhhdCByZXZlYWxzIGEgbmV3IGNhcmRcbiAgZm9yIChjb25zdCBwaWxlIG9mIHRhYmxlYXUucGlsZXMpIHtcbiAgICBjb25zdCBraW5nSW5kZXggPSBwaWxlLmNhcmRzLmZpbmRJbmRleCgoY2FyZCkgPT4gY2FyZC5zaWRlID09PSBTaWRlLkZBQ0UgJiYgY2FyZC5yYW5rID09PSBSYW5rLktJTkcpXG4gICAgY29uc3Qga2luZyA9IHBpbGUuY2FyZHNba2luZ0luZGV4XVxuICAgIGlmIChraW5nICYmIGtpbmdJbmRleCA+IDAgJiYgcGlsZS5jYXJkc1traW5nSW5kZXggLSAxXS5zaWRlID09PSBTaWRlLkJBQ0sgJiYgZW1wdHlQaWxlSW5kZXggPiAtMSkge1xuICAgICAgbW92ZXMucHVzaChbXG4gICAgICAgIHtcbiAgICAgICAgICBtb3ZlOiBNb3ZlVHlwZS5UQUJMRUFVX1RPX1RBQkxFQVUsXG4gICAgICAgICAgc291cmNlUGlsZUluZGV4OiBnZXRQaWxlSW5kZXgodGFibGVhdSwga2luZyksXG4gICAgICAgICAgdGFyZ2V0UGlsZUluZGV4OiBlbXB0eVBpbGVJbmRleCxcbiAgICAgICAgICB0b3BNb3ZlZENhcmRJbmRleDoga2luZ0luZGV4LFxuICAgICAgICB9LFxuICAgICAgICBraW5nLFxuICAgICAgICBNb3ZlQ29uZmlkZW5jZS5WRVJZX0xPVyxcbiAgICAgIF0pXG4gICAgfVxuICB9XG5cbiAgLy8gVGFibGVhdSB0byB0YWJsZWF1IHRyYW5zZmVycyB0aGF0IGxlYXZlcyB0aGUgc291cmNlIHBpbGUgZW1wdHlcbiAgY29uc3QgcGlsZXNPZk9ubHlWaXNpYmxlQ2FyZHMgPSB0YWJsZWF1LnBpbGVzLmZpbHRlcihcbiAgICAocGlsZSkgPT4gcGlsZS5jYXJkcy5sZW5ndGggJiYgcGlsZS5jYXJkcy5ldmVyeSgoY2FyZCkgPT4gY2FyZC5zaWRlID09PSBTaWRlLkZBQ0UpLFxuICApXG4gIGNvbnN0IHBpbGVzV2l0aFZpc2libGVDYXJkcyA9IHRhYmxlYXUucGlsZXMuZmlsdGVyKFxuICAgIChwaWxlKSA9PiBwaWxlLmNhcmRzLnNvbWUoKGNhcmQpID0+IGNhcmQuc2lkZSA9PT0gU2lkZS5GQUNFKSxcbiAgKVxuICBmb3IgKGNvbnN0IHNvdXJjZVBpbGUgb2YgcGlsZXNPZk9ubHlWaXNpYmxlQ2FyZHMpIHtcbiAgICBjb25zdCB0b3BTb3VyY2VDYXJkID0gc291cmNlUGlsZS5jYXJkc1swXVxuICAgIGZvciAoY29uc3Qgb3RoZXJQaWxlIG9mIHBpbGVzV2l0aFZpc2libGVDYXJkcykge1xuICAgICAgY29uc3QgYm90dG9tVGFyZ2V0Q2FyZCA9IGxhc3RJdGVtKG90aGVyUGlsZS5jYXJkcylcbiAgICAgIGlmIChpc1ZhbGlkVGFibGVhdVNlcXVlbmNlKGJvdHRvbVRhcmdldENhcmQsIHRvcFNvdXJjZUNhcmQpKSB7XG4gICAgICAgIGNvbnN0IHNvdXJjZVBpbGVJbmRleCA9IGdldFBpbGVJbmRleCh0YWJsZWF1LCB0b3BTb3VyY2VDYXJkKVxuICAgICAgICBtb3Zlcy5wdXNoKFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtb3ZlOiBNb3ZlVHlwZS5UQUJMRUFVX1RPX1RBQkxFQVUsXG4gICAgICAgICAgICBzb3VyY2VQaWxlSW5kZXgsXG4gICAgICAgICAgICB0YXJnZXRQaWxlSW5kZXg6IGdldFBpbGVJbmRleCh0YWJsZWF1LCBib3R0b21UYXJnZXRDYXJkKSxcbiAgICAgICAgICAgIHRvcE1vdmVkQ2FyZEluZGV4OiB0YWJsZWF1LnBpbGVzW3NvdXJjZVBpbGVJbmRleF0uY2FyZHMuaW5kZXhPZih0b3BTb3VyY2VDYXJkKSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRvcFNvdXJjZUNhcmQsXG4gICAgICAgICAgTW92ZUNvbmZpZGVuY2UuVkVSWV9MT1csXG4gICAgICAgIF0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gU3RvY2sgdG8gdGFibGVhdVxuICBmb3IgKGNvbnN0IGNhcmQgb2Ygc3RvY2tQbGF5YWJsZUNhcmRzKSB7XG4gICAgZm9yIChjb25zdCBwaWxlIG9mIHRhYmxlYXUucGlsZXMpIHtcbiAgICAgIGNvbnN0IGxhc3RDYXJkID0gbGFzdEl0ZW1Pck51bGwocGlsZS5jYXJkcylcbiAgICAgIGlmIChsYXN0Q2FyZCAmJiBsYXN0Q2FyZC5zaWRlID09PSBTaWRlLkZBQ0UgJiYgaXNWYWxpZFRhYmxlYXVTZXF1ZW5jZShsYXN0Q2FyZCwgY2FyZCkpIHtcbiAgICAgICAgbW92ZXMucHVzaChbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbW92ZTogTW92ZVR5cGUuV0FTVEVfVE9fVEFCTEVBVSxcbiAgICAgICAgICAgIHBpbGVJbmRleDogZ2V0UGlsZUluZGV4KHRhYmxlYXUsIGxhc3RDYXJkKSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNhcmQsXG4gICAgICAgICAgTW92ZUNvbmZpZGVuY2UuVkVSWV9MT1csXG4gICAgICAgIF0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gU3RvY2sgdG8gZm91bmRhdGlvblxuICBmb3IgKGNvbnN0IHN0b2NrQ2FyZCBvZiBzdG9ja1BsYXlhYmxlQ2FyZHMpIHtcbiAgICBmb3IgKGNvbnN0IGZvdW5kYXRpb25DYXJkIG9mIGZpbHRlcmVkVG9wRm91bmRhdGlvbkNhcmRzKSB7XG4gICAgICBpZiAoaXNWYWxpZEZvdW5kYXRpb25TZXF1ZW5jZShmb3VuZGF0aW9uQ2FyZCwgc3RvY2tDYXJkKSkge1xuICAgICAgICBtb3Zlcy5wdXNoKFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtb3ZlOiBNb3ZlVHlwZS5XQVNURV9UT19GT1VOREFUSU9OLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc3RvY2tDYXJkLFxuICAgICAgICAgIE1vdmVDb25maWRlbmNlLlZFUllfTE9XLFxuICAgICAgICBdKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIENhcmQgZnJvbSB3YXN0ZS9zdG9jayB0byBhbiBlbXB0eSB0YWJsZWF1IHBpbGUgdHJhbnNmZXJcbiAgaWYgKGVtcHR5UGlsZUluZGV4ID4gLTEpIHtcbiAgICBjb25zdCB1c2FibGVDYXJkcyA9IHJ1bGVzLmFsbG93Tm9uS2luZ1RvRW1wdHlQaWxlVHJhbnNmZXIgP1xuICAgICAgc3RvY2tQbGF5YWJsZUNhcmRzXG4gICAgOlxuICAgICAgc3RvY2tQbGF5YWJsZUNhcmRzLmZpbHRlcigoY2FyZCkgPT4gY2FyZC5yYW5rID09PSBSYW5rLktJTkcpXG4gICAgZm9yIChjb25zdCBjYXJkIG9mIHVzYWJsZUNhcmRzKSB7XG4gICAgICBtb3Zlcy5wdXNoKFtcbiAgICAgICAge1xuICAgICAgICAgIG1vdmU6IE1vdmVUeXBlLldBU1RFX1RPX1RBQkxFQVUsXG4gICAgICAgICAgcGlsZUluZGV4OiBlbXB0eVBpbGVJbmRleCxcbiAgICAgICAgfSxcbiAgICAgICAgY2FyZCxcbiAgICAgICAgTW92ZUNvbmZpZGVuY2UuVkVSWV9MT1csXG4gICAgICBdKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtb3Zlc1xufVxuXG5mdW5jdGlvbiBnZXRNb3Zlc1dpdGhNaW5pc2N1bGVDb25maWRlbmNlKFxuICBkZXNrOiBJRGVzayxcbiAgcnVsZXM6IElHYW1lUnVsZXMsXG4gIHN0b2NrUGxheWFibGVDYXJkczogSUNhcmRbXSxcbiAgdG9wRm91bmRhdGlvbkNhcmRzOiBJRm91bmRhdGlvblRvcCxcbik6IE1vdmVIaW50W10ge1xuICBjb25zdCBtb3ZlczogTW92ZUhpbnRbXSA9IFtdXG4gIGNvbnN0IHt0YWJsZWF1fSA9IGRlc2tcblxuICAvLyBUYWJsZWF1IHRvIGZvdW5kYXRpb24gdHJhbnNmZXIgdGhhdCBhbGxvd3MgYSB0cmFuc2ZlciByZXZlYWxpbmcgY2FyZCBvciByZXZlYWwgYSBjYXJkXG4gIGZvciAoY29uc3QgcGlsZSBvZiB0YWJsZWF1LnBpbGVzKSB7XG4gICAgY29uc3QgbGFzdENhcmQgPSBsYXN0SXRlbU9yTnVsbChwaWxlLmNhcmRzKVxuICAgIGlmICghbGFzdENhcmQgfHwgbGFzdENhcmQuc2lkZSA9PT0gU2lkZS5CQUNLKSB7XG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIGNvbnN0IGZvdW5kYXRpb25DYXJkID0gdG9wRm91bmRhdGlvbkNhcmRzW2xhc3RDYXJkLmNvbG9yXVxuICAgIGlmICghZm91bmRhdGlvbkNhcmQgfHwgIWlzVmFsaWRGb3VuZGF0aW9uU2VxdWVuY2UoZm91bmRhdGlvbkNhcmQsIGxhc3RDYXJkKSkge1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBjb25zdCBuZXh0VG9MYXN0Q2FyZCA9IHBpbGUuY2FyZHMuc2xpY2UoLTIpWzBdXG5cbiAgICAvLyBXaWxsIHRoZSB0cmFuc2ZlciByZXZlYWwgYSBjYXJkP1xuICAgIGlmIChwaWxlLmNhcmRzLmxlbmd0aCA+IDEgJiYgbmV4dFRvTGFzdENhcmQuc2lkZSA9PT0gU2lkZS5CQUNLKSB7XG4gICAgICBtb3Zlcy5wdXNoKFtcbiAgICAgICAge1xuICAgICAgICAgIG1vdmU6IE1vdmVUeXBlLlRBQkxFQVVfVE9fRk9VTkRBVElPTixcbiAgICAgICAgICBwaWxlSW5kZXg6IGdldFBpbGVJbmRleCh0YWJsZWF1LCBsYXN0Q2FyZCksXG4gICAgICAgIH0sXG4gICAgICAgIGxhc3RDYXJkLFxuICAgICAgICBNb3ZlQ29uZmlkZW5jZS5NSU5JU0NVTEUsXG4gICAgICBdKVxuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICAvLyBXaWxsIHRoZSB0cmFuc2ZlciBhbGxvdyBhIHRyYW5zZmVyIHRoYXQgd2lsbCByZXZlYWwgYSBjYXJkP1xuICAgIGZvciAoY29uc3Qgb3RoZXJQaWxlIG9mIHRhYmxlYXUucGlsZXMpIHtcbiAgICAgIGNvbnN0IGhpZ2hlc3RWaXNpYmxlQ2FyZCA9IG90aGVyUGlsZS5jYXJkcy5maW5kKChjYXJkKSA9PiBjYXJkLnNpZGUgPT09IFNpZGUuRkFDRSlcbiAgICAgIGlmIChcbiAgICAgICAgaGlnaGVzdFZpc2libGVDYXJkICYmXG4gICAgICAgIG90aGVyUGlsZS5jYXJkc1swXSAhPT0gaGlnaGVzdFZpc2libGVDYXJkICYmXG4gICAgICAgIGlzVmFsaWRUYWJsZWF1U2VxdWVuY2UobmV4dFRvTGFzdENhcmQsIGhpZ2hlc3RWaXNpYmxlQ2FyZClcbiAgICAgICkge1xuICAgICAgICBtb3Zlcy5wdXNoKFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtb3ZlOiBNb3ZlVHlwZS5UQUJMRUFVX1RPX0ZPVU5EQVRJT04sXG4gICAgICAgICAgICBwaWxlSW5kZXg6IGdldFBpbGVJbmRleCh0YWJsZWF1LCBsYXN0Q2FyZCksXG4gICAgICAgICAgfSxcbiAgICAgICAgICBsYXN0Q2FyZCxcbiAgICAgICAgICBNb3ZlQ29uZmlkZW5jZS5NSU5JU0NVTEUsXG4gICAgICAgIF0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gVGFibGVhdSB0byBmb3VuZGF0aW9uIHRyYW5zZmVyIHRoYXQgdGhhdCBhbGxvd3MgYSB3YXN0ZSB0byB0YWJsZWF1IG9yIGZvdW5kYXRpb24gdHJhbnNmZXJcbiAgZm9yIChjb25zdCBwaWxlIG9mIHRhYmxlYXUucGlsZXMpIHtcbiAgICBjb25zdCBsYXN0Q2FyZCA9IGxhc3RJdGVtT3JOdWxsKHBpbGUuY2FyZHMpXG4gICAgaWYgKCFsYXN0Q2FyZCB8fCBsYXN0Q2FyZC5zaWRlID09PSBTaWRlLkJBQ0spIHtcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgY29uc3QgZm91bmRhdGlvbkNhcmQgPSB0b3BGb3VuZGF0aW9uQ2FyZHNbbGFzdENhcmQuY29sb3JdXG4gICAgaWYgKCFmb3VuZGF0aW9uQ2FyZCB8fCAhaXNWYWxpZEZvdW5kYXRpb25TZXF1ZW5jZShmb3VuZGF0aW9uQ2FyZCwgbGFzdENhcmQpKSB7XG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIC8vIFdpbGwgdGhlIHRyYW5zZmVyIGFsbG93IGEgd2FzdGUgdG8gZm91bmRhdGlvbiB0cmFuc2Zlcj9cbiAgICBmb3IgKGNvbnN0IHN0b2NrQ2FyZCBvZiBzdG9ja1BsYXlhYmxlQ2FyZHMpIHtcbiAgICAgIGlmIChpc1ZhbGlkRm91bmRhdGlvblNlcXVlbmNlKGxhc3RDYXJkLCBzdG9ja0NhcmQpKSB7XG4gICAgICAgIG1vdmVzLnB1c2goW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1vdmU6IE1vdmVUeXBlLlRBQkxFQVVfVE9fRk9VTkRBVElPTixcbiAgICAgICAgICAgIHBpbGVJbmRleDogZ2V0UGlsZUluZGV4KHRhYmxlYXUsIGxhc3RDYXJkKSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGxhc3RDYXJkLFxuICAgICAgICAgIE1vdmVDb25maWRlbmNlLk1JTklTQ1VMRSxcbiAgICAgICAgXSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXaWxsIHRoZSB0cmFuc2ZlciBhbGxvdyBhIHdhc3RlIHRvIHRhYmxlYXUgdHJhbnNmZXI/XG4gICAgaWYgKHBpbGUuY2FyZHMubGVuZ3RoIDw9IDEpIHtcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuICAgIGNvbnN0IG5leHRUb0xhc3RDYXJkID0gcGlsZS5jYXJkcy5zbGljZSgtMilbMF1cbiAgICBpZiAobmV4dFRvTGFzdENhcmQuc2lkZSA9PT0gU2lkZS5GQUNFKSB7XG4gICAgICBmb3IgKGNvbnN0IHN0b2NrQ2FyZCBvZiBzdG9ja1BsYXlhYmxlQ2FyZHMpIHtcbiAgICAgICAgaWYgKGlzVmFsaWRUYWJsZWF1U2VxdWVuY2UobmV4dFRvTGFzdENhcmQsIHN0b2NrQ2FyZCkpIHtcbiAgICAgICAgICBtb3Zlcy5wdXNoKFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbW92ZTogTW92ZVR5cGUuVEFCTEVBVV9UT19GT1VOREFUSU9OLFxuICAgICAgICAgICAgICBwaWxlSW5kZXg6IGdldFBpbGVJbmRleCh0YWJsZWF1LCBsYXN0Q2FyZCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGFzdENhcmQsXG4gICAgICAgICAgICBNb3ZlQ29uZmlkZW5jZS5NSU5JU0NVTEUsXG4gICAgICAgICAgXSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGVtcHR5UGlsZUluZGV4ID0gdGFibGVhdS5waWxlcy5maW5kSW5kZXgoKHBpbGUpID0+ICFwaWxlLmNhcmRzLmxlbmd0aClcblxuICAvLyBTdG9jayB0byBlbXB0eSBwaWxlIHRyYW5zZmVyLCBwcmVmZXIgaGlnaGVyLXJhbmtpbmcgY2FyZHMgLSBhcHBsaWVzIG9ubHkgaWYgYWxsb3dlZCBieSBnYW1lIHJ1bGVzXG4gIGlmIChydWxlcy5hbGxvd05vbktpbmdUb0VtcHR5UGlsZVRyYW5zZmVyICYmIGVtcHR5UGlsZUluZGV4ID4gLTEpIHtcbiAgICBmb3IgKGNvbnN0IGNhcmQgb2Ygc3RvY2tQbGF5YWJsZUNhcmRzLnNsaWNlKCkuc29ydCgoY2FyZDEsIGNhcmQyKSA9PiBjb21wYXJlUmFuayhjYXJkMiwgY2FyZDEpKSkge1xuICAgICAgbW92ZXMucHVzaChbXG4gICAgICAgIHtcbiAgICAgICAgICBtb3ZlOiBNb3ZlVHlwZS5XQVNURV9UT19UQUJMRUFVLFxuICAgICAgICAgIHBpbGVJbmRleDogZW1wdHlQaWxlSW5kZXgsXG4gICAgICAgIH0sXG4gICAgICAgIGNhcmQsXG4gICAgICAgIE1vdmVDb25maWRlbmNlLk1JTklTQ1VMRSxcbiAgICAgIF0pXG4gICAgfVxuICB9XG5cbiAgLy8gVGFibGVhdSB0byBlbXB0eSBwaWxlIHRyYW5zZmVyIHRoYXQgYWxsb3dzIHJldmVhbGluZyBhIGNhcmQgLSBhcHBsaWVzIG9ubHkgaWYgYWxsb3dlZCBieSBnYW1lIHJ1bGVzXG4gIGlmIChydWxlcy5hbGxvd05vbktpbmdUb0VtcHR5UGlsZVRyYW5zZmVyICYmIGVtcHR5UGlsZUluZGV4ID4gLTEpIHtcbiAgICBjb25zdCBzb3VyY2VQaWxlcyA9IHRhYmxlYXUucGlsZXMuZmlsdGVyKFxuICAgICAgKHBpbGUpID0+IHBpbGUuY2FyZHMubGVuZ3RoICYmIHBpbGUuY2FyZHNbMF0uc2lkZSA9PT0gU2lkZS5CQUNLICYmIGxhc3RJdGVtKHBpbGUuY2FyZHMpLnNpZGUgPT09IFNpZGUuRkFDRSxcbiAgICApLnNvcnQoXG4gICAgICAocGlsZTEsIHBpbGUyKSA9PiAoXG4gICAgICAgIHBpbGUyLmNhcmRzLmZpbHRlcigoY2FyZCkgPT4gY2FyZC5zaWRlID09PSBTaWRlLkZBQ0UpLmxlbmd0aCAtXG4gICAgICAgIHBpbGUxLmNhcmRzLmZpbHRlcigoY2FyZCkgPT4gY2FyZC5zaWRlID09PSBTaWRlLkZBQ0UpLmxlbmd0aFxuICAgICAgKSxcbiAgICApXG5cbiAgICBmb3IgKGNvbnN0IHBpbGUgb2Ygc291cmNlUGlsZXMpIHtcbiAgICAgIGNvbnN0IHRvcENhcmRJbmRleCA9IHBpbGUuY2FyZHMuZmluZEluZGV4KChjYXJkKSA9PiBjYXJkLnNpZGUgPT09IFNpZGUuRkFDRSlcbiAgICAgIG1vdmVzLnB1c2goW1xuICAgICAgICB7XG4gICAgICAgICAgbW92ZTogTW92ZVR5cGUuVEFCTEVBVV9UT19UQUJMRUFVLFxuICAgICAgICAgIHNvdXJjZVBpbGVJbmRleDogZ2V0UGlsZUluZGV4KHRhYmxlYXUsIHBpbGUuY2FyZHNbdG9wQ2FyZEluZGV4XSksXG4gICAgICAgICAgdGFyZ2V0UGlsZUluZGV4OiBlbXB0eVBpbGVJbmRleCxcbiAgICAgICAgICB0b3BNb3ZlZENhcmRJbmRleDogdG9wQ2FyZEluZGV4LFxuICAgICAgICB9LFxuICAgICAgICBwaWxlLmNhcmRzW3RvcENhcmRJbmRleF0sXG4gICAgICAgIE1vdmVDb25maWRlbmNlLk1JTklTQ1VMRSxcbiAgICAgIF0pXG4gICAgfVxuICB9XG5cbiAgLy8gVGFibGVhdSB0byBhIG5vbi1lbXB0eSBmb3VuZGF0aW9uIHBpbGUgKEFjZSB0byBlbXB0eSBmb3VuZGF0aW9uIGlzIGFscmVhZHkgY292ZXJlZCB3aXRoIGFic29sdXRlIGNvbmZpZGVuY2UpXG4gIGZvciAoY29uc3QgcGlsZSBvZiB0YWJsZWF1LnBpbGVzKSB7XG4gICAgaWYgKCFwaWxlLmNhcmRzLmxlbmd0aCkge1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBjb25zdCBsYXN0Q2FyZCA9IGxhc3RJdGVtKHBpbGUuY2FyZHMpXG4gICAgY29uc3QgZm91bmRhdGlvbkNhcmQgPSB0b3BGb3VuZGF0aW9uQ2FyZHNbbGFzdENhcmQuY29sb3JdXG4gICAgaWYgKGZvdW5kYXRpb25DYXJkICYmIGlzVmFsaWRGb3VuZGF0aW9uU2VxdWVuY2UoZm91bmRhdGlvbkNhcmQsIGxhc3RDYXJkKSkge1xuICAgICAgbW92ZXMucHVzaChbXG4gICAgICAgIHtcbiAgICAgICAgICBtb3ZlOiBNb3ZlVHlwZS5UQUJMRUFVX1RPX0ZPVU5EQVRJT04sXG4gICAgICAgICAgcGlsZUluZGV4OiBnZXRQaWxlSW5kZXgodGFibGVhdSwgbGFzdENhcmQpLFxuICAgICAgICB9LFxuICAgICAgICBsYXN0Q2FyZCxcbiAgICAgICAgTW92ZUNvbmZpZGVuY2UuTUlOSVNDVUxFLFxuICAgICAgXSlcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbW92ZXNcbn1cblxuZnVuY3Rpb24gZ2V0U3RvY2tQbGF5YWJsZUNhcmRzKGRlc2tTdGF0ZTogSURlc2ssIHJ1bGVzOiBJR2FtZVJ1bGVzLCBtb2RlOiBIaW50R2VuZXJhdG9yTW9kZSk6IElDYXJkW10ge1xuICBzd2l0Y2ggKG1vZGUpIHtcbiAgICBjYXNlIEhpbnRHZW5lcmF0b3JNb2RlLkNVUlJFTlRfU1RBVEU6XG4gICAgICByZXR1cm4gZGVza1N0YXRlLndhc3RlLmNhcmRzLmxlbmd0aCA/IFtsYXN0SXRlbShkZXNrU3RhdGUud2FzdGUuY2FyZHMpXSA6IFtdXG4gICAgY2FzZSBIaW50R2VuZXJhdG9yTW9kZS5XSVRIX0ZVTExfU1RPQ0s6IHtcbiAgICAgICAgaWYgKCFkZXNrU3RhdGUud2FzdGUuY2FyZHMubGVuZ3RoICYmICFkZXNrU3RhdGUuc3RvY2suY2FyZHMubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIFtdXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdG9jayA9IGRlc2tTdGF0ZS5zdG9jay5jYXJkcy5zbGljZSgpXG4gICAgICAgIGNvbnN0IHdhc3RlID0gZGVza1N0YXRlLndhc3RlLmNhcmRzLnNsaWNlKClcbiAgICAgICAgY29uc3QgY2FyZHMgPSBuZXcgU2V0PElDYXJkPigpXG4gICAgICAgIGlmICh3YXN0ZS5sZW5ndGgpIHtcbiAgICAgICAgICBjYXJkcy5hZGQobGFzdEl0ZW0od2FzdGUpKVxuICAgICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCB0aGUgcmVtYWluaW5nIHN0b2NrXG4gICAgICAgICAgZm9yIChsZXQgY2FyZEluZGV4ID0gc3RvY2subGVuZ3RoIC0gcnVsZXMuZHJhd25DYXJkczsgY2FyZEluZGV4ID49IDA7IGNhcmRJbmRleCAtPSBydWxlcy5kcmF3bkNhcmRzKSB7XG4gICAgICAgICAgICBjYXJkcy5hZGQodHVybk92ZXIoc3RvY2tbY2FyZEluZGV4XSkpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0b2NrLnB1c2goLi4ud2FzdGUucmV2ZXJzZSgpLm1hcCh0dXJuT3ZlcikpIC8vIHJlZGVhbFxuICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggdGhlIHN0b2NrXG4gICAgICAgIGZvciAobGV0IGNhcmRJbmRleCA9IHN0b2NrLmxlbmd0aCAtIHJ1bGVzLmRyYXduQ2FyZHM7IGNhcmRJbmRleCA+PSAwOyBjYXJkSW5kZXggLT0gcnVsZXMuZHJhd25DYXJkcykge1xuICAgICAgICAgIGNhcmRzLmFkZCh0dXJuT3ZlcihzdG9ja1tjYXJkSW5kZXhdKSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gWy4uLmNhcmRzXVxuICAgICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBVbmtub3duIGhpbnQgZ2VuZXJhdG9yIG1vZGU6ICR7bW9kZX1gKVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldFBpbGVJbmRleCh0YWJsZWF1OiBJVGFibGVhdSwgY2FyZDogSUNhcmQpOiBudW1iZXIge1xuICByZXR1cm4gdGFibGVhdS5waWxlcy5maW5kSW5kZXgoKHBpbGUpID0+IHBpbGUuY2FyZHMuaW5jbHVkZXMoY2FyZCkpXG59XG4iLCJpbXBvcnQge0lDYXJkLCBTaWRlfSBmcm9tICcuL0NhcmQnXG5pbXBvcnQge2RyYXcsIElQaWxlLCBwbGFjZUNhcmRPblRvcCwgcGxhY2VQaWxlT25Ub3AsIHNsaWNlUGlsZSwgdHVybkNhcmR9IGZyb20gJy4vUGlsZSdcbmltcG9ydCB7bGFzdEl0ZW19IGZyb20gJy4vdXRpbCdcblxuZXhwb3J0IGludGVyZmFjZSBJVGFibGVhdSB7XG4gIHJlYWRvbmx5IHBpbGVzOiBSZWFkb25seUFycmF5PElQaWxlPlxufVxuXG5leHBvcnQgY2xhc3MgVGFibGVhdSBpbXBsZW1lbnRzIElUYWJsZWF1IHtcbiAgY29uc3RydWN0b3IocHVibGljIHJlYWRvbmx5IHBpbGVzOiBSZWFkb25seUFycmF5PElQaWxlPikge1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRDYXJkVG9QaWxlKHRhYmxlYXU6IElUYWJsZWF1LCBwaWxlOiBJUGlsZSwgY2FyZDogSUNhcmQpOiBJVGFibGVhdSB7XG4gIGNvbnN0IHBpbGVJbmRleCA9IHRhYmxlYXUucGlsZXMuaW5kZXhPZihwaWxlKVxuICBpZiAocGlsZUluZGV4ID09PSAtMSkge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhlIHNwZWNpZmllZCBwaWxlIGlzIG5vdCBwcmVzZW50IGluIHRoZSBzcGVjaWZpZWQgdGFibGVhdScpXG4gIH1cblxuICBjb25zdCBwYXRjaGVkUGlsZSA9IHBsYWNlQ2FyZE9uVG9wKHBpbGUsIGNhcmQpXG4gIGNvbnN0IHBhdGNoZWRQaWxlcyA9IHRhYmxlYXUucGlsZXMuc2xpY2UoKVxuICBwYXRjaGVkUGlsZXMuc3BsaWNlKHBpbGVJbmRleCwgMSwgcGF0Y2hlZFBpbGUpXG4gIHJldHVybiBuZXcgVGFibGVhdShwYXRjaGVkUGlsZXMpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVUb3BDYXJkRnJvbVBpbGUodGFibGVhdTogSVRhYmxlYXUsIHBpbGU6IElQaWxlKTogW0lUYWJsZWF1LCBJQ2FyZF0ge1xuICBjb25zdCBwaWxlSW5kZXggPSB0YWJsZWF1LnBpbGVzLmluZGV4T2YocGlsZSlcbiAgaWYgKHBpbGVJbmRleCA9PT3CoC0xKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgc3BlY2lmaWVkIHBpbGUgaXMgbm90IHByZXNlbnQgaW4gdGhlIHNwZWNpZmllZCB0YWJsZWF1JylcbiAgfVxuICBpZiAoIXBpbGUuY2FyZHMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgc3BlY2lmaWVkIHBpbGUgY29udGFpbnMgbm8gY2FyZHMnKVxuICB9XG5cbiAgY29uc3QgW3BpbGVSZW1haW5kZXIsIFt0b3BDYXJkXV0gPSBkcmF3KHBpbGUsIDEpXG4gIGNvbnN0IHBhdGNoZWRQaWxlcyA9IHRhYmxlYXUucGlsZXMuc2xpY2UoKVxuICBwYXRjaGVkUGlsZXMuc3BsaWNlKHBpbGVJbmRleCwgMSwgcGlsZVJlbWFpbmRlcilcbiAgcmV0dXJuIFtuZXcgVGFibGVhdShwYXRjaGVkUGlsZXMpLCB0b3BDYXJkXVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmV2ZWFsVG9wQ2FyZCh0YWJsZWF1OiBJVGFibGVhdSwgcGlsZTogSVBpbGUpOiBJVGFibGVhdSB7XG4gIGlmICghcGlsZS5jYXJkcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzcGVjaWZpZWQgcGlsZSBpcyBlbXB0eScpXG4gIH1cbiAgaWYgKGxhc3RJdGVtKHBpbGUuY2FyZHMpLnNpZGUgPT09IFNpZGUuRkFDRSkge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhlIHRvcCBjYXJkIGlzIGFscmVhZHkgZmFjZS11cCcpXG4gIH1cblxuICBjb25zdCBwaWxlSW5kZXggPSB0YWJsZWF1LnBpbGVzLmluZGV4T2YocGlsZSlcbiAgaWYgKHBpbGVJbmRleCA9PT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzcGVjaWZpZWQgcGlsZSBpcyBub3QgcHJlc2VudCBpbiB0aGUgc3BlY2lmaWVkIHRhYmxlYXUnKVxuICB9XG5cbiAgY29uc3QgcGF0Y2hlZFBpbGUgPSB0dXJuQ2FyZChwaWxlLCBsYXN0SXRlbShwaWxlLmNhcmRzKSlcbiAgY29uc3QgcGF0Y2hlZFBpbGVzID0gdGFibGVhdS5waWxlcy5zbGljZSgpXG4gIHBhdGNoZWRQaWxlcy5zcGxpY2UocGlsZUluZGV4LCAxLCBwYXRjaGVkUGlsZSlcbiAgcmV0dXJuIG5ldyBUYWJsZWF1KHBhdGNoZWRQaWxlcylcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1vdmVQaWxlUGFydCh0YWJsZWF1OiBJVGFibGVhdSwgc291cmNlUGlsZTogSVBpbGUsIHRvcENhcmRUb01vdmU6IElDYXJkLCB0YXJnZXRQaWxlOiBJUGlsZSk6IElUYWJsZWF1IHtcbiAgY29uc3Qgc291cmNlUGlsZUluZGV4ID0gdGFibGVhdS5waWxlcy5pbmRleE9mKHNvdXJjZVBpbGUpXG4gIGNvbnN0IHRhcmdldFBpbGVJbmRleCA9IHRhYmxlYXUucGlsZXMuaW5kZXhPZih0YXJnZXRQaWxlKVxuICBpZiAoc291cmNlUGlsZUluZGV4ID09PSAtMSkge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhlIHNwZWNpZmllZCBzb3VyY2UgcGlsZSBpcyBub3QgcHJlc2VudCBpbiB0aGUgc3BlY2lmaWVkIHRhYmxlYXUnKVxuICB9XG4gIGlmICh0YXJnZXRQaWxlSW5kZXggPT09IC0xKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgc3BlY2lmaWVkIHRhcmdldCBwaWxlIGlzIG5vdCBwcmVzZW50IGluIHRoZSBzcGVjaWZpZWQgdGFibGVhdScpXG4gIH1cblxuICBjb25zdCBbc291cmNlUGlsZVJlbWFpbmRlciwgbW92ZWRQYXJ0XSA9IHNsaWNlUGlsZShzb3VyY2VQaWxlLCB0b3BDYXJkVG9Nb3ZlKVxuICBjb25zdCBwYXRjaGVkUGlsZXMgPSB0YWJsZWF1LnBpbGVzLnNsaWNlKClcbiAgcGF0Y2hlZFBpbGVzLnNwbGljZShzb3VyY2VQaWxlSW5kZXgsIDEsIHNvdXJjZVBpbGVSZW1haW5kZXIpXG4gIHBhdGNoZWRQaWxlcy5zcGxpY2UodGFyZ2V0UGlsZUluZGV4LCAxLCBwbGFjZVBpbGVPblRvcCh0YXJnZXRQaWxlLCBtb3ZlZFBhcnQpKVxuICByZXR1cm4gbmV3IFRhYmxlYXUocGF0Y2hlZFBpbGVzKVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==